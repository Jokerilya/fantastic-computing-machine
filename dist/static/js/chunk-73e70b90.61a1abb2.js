(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73e70b90"],{a15b:function(e,t,a){"use strict";var l=a("23e7"),n=a("e330"),i=a("44ad"),o=a("fc6a"),s=a("a640"),r=n([].join),d=i!=Object,c=s("join",",");l({target:"Array",proto:!0,forced:d||!c},{join:function(e){return r(o(this),void 0===e?",":e)}})},d574:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content_box"},[a("first-title",{attrs:{title:"运费模板"}}),a("div",{staticClass:"select_view"},[e._v(" 筛选： "),a("el-input",{staticClass:"mg_r15 mg_t10",staticStyle:{width:"260px"},attrs:{placeholder:"请输入运费模板名称"},model:{value:e.queryTitle,callback:function(t){e.queryTitle=t},expression:"queryTitle"}}),a("el-button",{staticClass:"mg_t10",attrs:{type:"primary"},on:{click:e.queryDataListFn}},[e._v("查询")]),a("el-button",{staticClass:"mg_t10",attrs:{type:"danger"},on:{click:e.resSetQueryFn}},[e._v("重置查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addItemFn}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加运费模板")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataConfig.loading,expression:"dataConfig.loading"}],staticClass:"list",attrs:{border:"",data:e.dataList}},[a("el-table-column",{attrs:{label:"ID",fixed:"",width:"60",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{label:"运费模板名称",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"包邮规则满足多少包邮",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.expRule))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.editDataFn(t.row.id)}}},[e._v("编辑")]),t.row.id?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteItemFn(t)}}},[e._v("删除")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"添加/编辑",visible:e.dialogVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"form",attrs:{model:e.defData,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"信息ID"}},[a("el-input",{attrs:{disabled:"disabled"},model:{value:e.defData.id,callback:function(t){e.$set(e.defData,"id",t)},expression:"defData.id"}})],1),a("el-form-item",{attrs:{label:"运费模板名称"}},[a("el-input",{attrs:{placeholder:"请输入运费模板名称"},model:{value:e.defData.name,callback:function(t){e.$set(e.defData,"name",t)},expression:"defData.name"}})],1),a("el-form-item",{attrs:{label:"每增加多少（件数）"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入数量"},model:{value:e.defData.addValue,callback:function(t){e.$set(e.defData,"addValue",t)},expression:"defData.addValue"}})],1),a("el-form-item",{attrs:{label:"每增加"+e.defData.addValue+"件加多少钱"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入金额"},model:{value:e.defData.addMoney,callback:function(t){e.$set(e.defData,"addMoney",t)},expression:"defData.addMoney"}})],1),a("el-form-item",{attrs:{label:"默认金额"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入默认金额"},model:{value:e.defData.defaultMoney,callback:function(t){e.$set(e.defData,"defaultMoney",t)},expression:"defData.defaultMoney"}})],1),a("el-form-item",{attrs:{label:"默认值"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入默认值"},model:{value:e.defData.defaultValue,callback:function(t){e.$set(e.defData,"defaultValue",t)},expression:"defData.defaultValue"}})],1),a("el-form-item",{attrs:{label:"包邮规则满足多少包邮"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入金额"},model:{value:e.defData.expRule,callback:function(t){e.$set(e.defData,"expRule",t)},expression:"defData.expRule"}})],1),a("el-form-item",{attrs:{label:"部分地区单独配置"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.defData.list,stripe:""}},[a("el-table-column",{attrs:{label:"ID",align:"center",width:"40px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"delete_icon",on:{click:function(a){return e.deleteAddFn(t.$index,t.row.id)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])}),a("el-table-column",{attrs:{label:"省份（可多选）",align:"center",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"260px"},attrs:{multiple:"",placeholder:"请选择省"},on:{change:e.proIdChangeFn},model:{value:t.row.proId,callback:function(a){e.$set(t.row,"proId",a)},expression:"scope.row.proId"}},e._l(e.province,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)]}}])}),a("el-table-column",{attrs:{label:"城市（可多选）",align:"center",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"260px"},attrs:{multiple:"",placeholder:"请选择市"},model:{value:t.row.cityId,callback:function(a){e.$set(t.row,"cityId",a)},expression:"scope.row.cityId"}},e._l(t.row.proId,(function(t){return e.allCitys[t]?a("el-option-group",{key:e.allCitys[t].pid,attrs:{label:e.allCitys[t].name}},e._l(e.allCitys[t].list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._e()})),1)]}}])}),a("el-table-column",{attrs:{label:"默认金额",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",placeholder:"请输入默认金额"},model:{value:t.row.defaultMoney,callback:function(a){e.$set(t.row,"defaultMoney",a)},expression:"scope.row.defaultMoney"}})]}}])}),a("el-table-column",{attrs:{label:"默认值",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",placeholder:"请输入默认值"},model:{value:t.row.defaultValue,callback:function(a){e.$set(t.row,"defaultValue",a)},expression:"scope.row.defaultValue"}})]}}])}),a("el-table-column",{attrs:{label:"每增加多少（件数）",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",placeholder:"请输入数量"},model:{value:t.row.addValue,callback:function(a){e.$set(t.row,"addValue",a)},expression:"scope.row.addValue"}})]}}])}),a("el-table-column",{attrs:{label:"每增加多少件加多少钱",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",placeholder:"请输入金额"},model:{value:t.row.addMoney,callback:function(a){e.$set(t.row,"addMoney",a)},expression:"scope.row.addMoney"}})]}}])})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.addListItemFn}},[e._v("新增地区单独配置项")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDataFn}},[e._v("确 定")])],1)]),a("div",{staticClass:"el_pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total,sizes","current-page":e.dataConfig.pageNo,total:e.dataConfig.total,"page-sizes":[20,30,40,50]},on:{"current-change":e.currentChangeFn,"size-change":e.handleSizeChange}})],1)],1)},n=[],i=a("2909"),o=(a("159b"),a("a434"),a("b0c0"),a("ac1f"),a("1276"),a("a15b"),a("99af"),a("8593")),s={name:"Exp",data:function(){return{dataList:[],dialogVisible:!1,defData:{addMoney:0,addValue:0,defaultMoney:0,defaultValue:0,expRule:"",id:"",list:[],name:""},queryTitle:"",dataConfig:{pageNo:1,pageSize:20,total:0,loading:!0},province:{},allCitys:{}}},beforeMount:function(){var e=this;this.getDataListFn(),this.addressFn(0).then((function(t){t.forEach((function(t){e.province[t.id]=t}))}))},methods:{deleteAddFn:function(e,t){var a=this;t?Object(o["h"])({id:t}).then((function(t){var l=a.resDataFn(t);"000"==l&&(a.$message({showClose:!0,message:"操作成功！",type:"success"}),a.defData.list.splice(e,1))})):this.defData.list.splice(e,1)},proIdChangeFn:function(e){var t=this;e.forEach((function(e){t.allCitys[e]||t.addressFn(e).then((function(a){t.$set(t.allCitys,e,{name:t.province[e].name,pid:e,list:a})}))}))},addListItemFn:function(){this.defData.list.push({addMoney:0,addValue:0,proId:"",cityId:"",defaultMoney:0,defaultValue:0})},uploadCoverUrl:function(e){this.defData.url=e},editDataFn:function(e){var t=this;Object(o["l"])({id:e}).then((function(e){var a=t.resDataFn(e);"000"==e.code&&(a.list.forEach((function(e){e.proId=e.proId?e.proId.split(","):[],e.cityId=e.cityId?e.cityId.split(","):[],e.proId.forEach((function(e){t.allCitys[e]||t.addressFn(e).then((function(a){t.$set(t.allCitys,e,{name:t.province[e].name,pid:e,list:a})}))}))})),t.defData=Object.assign({},t.defData,a),t.dialogVisible=!0)}))},queryDataListFn:function(){this.queryTitle&&(this.dataConfig={pageNo:1,pageSize:20,total:0,loading:!0},this.getDataListFn())},resSetQueryFn:function(){this.dataConfig={pageNo:1,pageSize:20,total:0,loading:!0},this.queryTitle="",this.getDataListFn()},submitDataFn:function(){var e=this,t=JSON.parse(JSON.stringify(this.defData)),a=!0;delete t.createTime,t.id=t.id?t.id:void 0,t.list.forEach((function(t,l){t.proId.length>0?t.proId=t.proId.join(","):(a=!1,e.$message({showClose:!0,message:"请选择“地区单独配置”第".concat(l+1,"行的省！"),type:"success"})),t.cityId.length>0?t.cityId=t.cityId.join(","):(a=!1,e.$message({showClose:!0,message:"请选择“地区单独配置”第".concat(l+1,"行的市！"),type:"success"}))})),a&&(console.log(t),Object(o["k"])(t).then((function(t){var a=e.resDataFn(t);"000"==a&&(e.dialogVisible=!1,e.$message({showClose:!0,message:"操作成功！",type:"success"}),e.getDataListFn())})))},addItemFn:function(){this.defData={addMoney:0,addValue:0,defaultMoney:0,defaultValue:0,expRule:"",id:"",list:[],name:""},this.dialogVisible=!0},addressFn:function(e){var t=this;return Object(o["d"])({pid:e}).then((function(e){var a=t.resDataFn(e);return a}))},deleteItemFn:function(e){var t=this;this.deleteAlert().then((function(){var t=Object(o["i"])({id:e.row.id});return t})).then((function(a){var l=t.resDataFn(a);"000"==l&&(t.$message({showClose:!0,message:"删除成功！",type:"success"}),t.dataList.splice(e.$index,1))}))},getDataListFn:function(){var e=this;Object(o["s"])({pageNo:this.dataConfig.pageNo,pageSize:this.dataConfig.pageSize,name:this.queryTitle}).then((function(t){var a,l=e.resDataFn(t);e.dataConfig.total=l.total,(a=e.dataList).splice.apply(a,[0,e.dataList.length].concat(Object(i["a"])(l.records)))}))},handleSizeChange:function(e){this.dataConfig.pageSize=e,this.getDataListFn()},currentChangeFn:function(e){this.dataConfig.pageNo=e,this.getDataListFn()}}},r=s,d=a("2877"),c=Object(d["a"])(r,l,n,!1,null,null,null);t["default"]=c.exports}}]);