(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4347b2ea"],{"4ec0":function(t,e,r){"use strict";r("e2f5")},"532e":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"activityProductOrderList"},[r("div",{staticClass:"activityProductOrderList_btnline"},[r("div",{staticClass:"activityProductOrderList_btnline_left"},[r("el-input",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请输入订单编号"},model:{value:t.queryActivityOrderListParams.orderSn,callback:function(e){t.$set(t.queryActivityOrderListParams,"orderSn",e)},expression:"queryActivityOrderListParams.orderSn"}})],1),r("div",[r("el-button",{on:{click:t.searchQueryActivityOrderList}},[t._v("搜索")]),r("el-button",{on:{click:t.resetQueryActivityOrderListParams}},[t._v("重置")])],1)]),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.activityProductOrderList}},[r("el-table-column",{attrs:{align:"center",prop:"payTime",label:"支付时间"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(r.payTime?r.payTime:"/")+" ")]}}])}),r("el-table-column",{attrs:{align:"center",prop:"orderSn",label:"订单编号"}}),r("el-table-column",{attrs:{align:"center",prop:"realName",label:"下单用户"}}),r("el-table-column",{attrs:{align:"center",prop:"enterpriseName",label:"公司名称"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(r.enterpriseName?r.enterpriseName:"/")+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"推荐人身份"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s("saleman"==r.channel?"业务员":"master"==r.channel?"师傅":"/")+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"推荐人"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(r.promotionName?r.promotionName:"/")+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"支付金额"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" ￥"+t._s(r.payAmount)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"支付状态"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(0==r.status?"未支付":"已支付")+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"退款状态"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("span",{style:{color:1==a.returnExamineStatus?"red":""}},[t._v(" "+t._s(0==a.returnExamineStatus?"未退款":1==a.returnExamineStatus?"退款中":2==a.returnExamineStatus?"已退款":"已驳回"))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(e){return t.openActivityOrderDetailDialog(a.orderSn)}}},[t._v("详情")])]}}])})],1),r("div",{staticClass:"activityProductOrderList_pagination"},[r("el-pagination",{attrs:{layout:"prev, pager, next",total:t.activityProductOrderListTotal,"page-size":t.queryActivityOrderListParams.pageSize},on:{"current-change":t.changeParamsPageSize}})],1)],1),r("el-dialog",{attrs:{title:"详情",width:"65%",visible:t.activityOrderDetailVisible,"before-close":t.closeActivityOrderDetailDialog,"close-on-click-modal":!1,center:""}},[r("el-tabs",{on:{"tab-click":t.changeActivityOrderDetailTab},model:{value:t.activeOrderDetail,callback:function(e){t.activeOrderDetail=e},expression:"activeOrderDetail"}},t._l(t.activityOrderDetailList,(function(e,a){return r("el-tab-pane",{key:a,attrs:{name:e.orderSn}},[r("div",{attrs:{slot:"label"},slot:"label"},[t._v("产品:"+t._s(e.title))]),2!=e.orderType&&e.applyRefundAmount>0?r("div",{staticStyle:{"margin-bottom":"15px","text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:t.openReviewRefundDialog}},[t._v(" 审核退款 ")])],1):t._e(),2!=e.orderType?r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[r("el-table-column",{attrs:{prop:"code",label:"券码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("el-tag",[t._v(t._s(a.code))])]}}],null,!0)}),r("el-table-column",{attrs:{label:"使用状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("div",{style:{color:1==a.useStatus?"green":""}},[t._v(" "+t._s(1==a.useStatus?"已使用":"未使用")+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{label:"目标订单号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(r.targetOrder?r.targetOrder:"/")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"使用时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(r.useTime?r.useTime:"/")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"退款申请",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(0==r.returnStatus?"/":1==r.returnStatus?"申请中":2==r.returnStatus?"已通过":"已驳回")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"申请退款时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(r.applyReturnTime?r.applyReturnTime:"/")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"退款时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v(" "+t._s(r.examineReturnTime?r.examineReturnTime:"/")+" ")]}}],null,!0)})],1):r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[r("el-table-column",{attrs:{prop:"code",label:"机台码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("el-tag",[t._v(t._s(a.code))])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"validPeriodData",label:"有限期限范围",align:"center"}}),r("el-table-column",{attrs:{label:"使用状态",align:"center"}},[[t._v(" 已使用 ")]],2)],1)],1)})),1)],1),r("el-dialog",{attrs:{title:"审核退款",width:"35%",visible:t.reviewRefundVisible}},[r("div",{staticClass:"reviewRefundBox"},[r("el-form",[r("el-form-item",{attrs:{label:"退款张数:"}},[t._v(" "+t._s(t.computeRefundNum(t.activityOrderDetailItem.list))+"张 ")]),r("el-form-item",{attrs:{label:"审核状态"}},[r("el-select",{attrs:{placeholder:"请选择审核状态"},model:{value:t.handleOrderRefundParams.examineStatus,callback:function(e){t.$set(t.handleOrderRefundParams,"examineStatus",e)},expression:"handleOrderRefundParams.examineStatus"}},[r("el-option",{attrs:{label:"通过",value:2}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.closeReviewRefundDialog}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.handleOrderRefund}},[t._v("确 定")])],1)])],1)},n=[],i=r("1da1"),l=(r("4de4"),r("96cf"),r("ca41")),u={data:function(){return{activityProductOrderList:[],queryActivityOrderListParams:{pageNo:1,pageSize:10,orderSn:null,orderType:null},activityProductOrderListPages:null,activityProductOrderListTotal:null,orderTypeOptions:[{value:1,label:"保养卡"},{value:2,label:"维修月卡"},{value:3,label:"维修次卡"}],activityOrderDetailVisible:!1,activityOrderDetailList:[],activityOrderDetailItem:[],activeOrderDetail:null,relationOrderSn:null,reviewRefundVisible:!1,handleOrderRefundParams:{orderSn:null,examineStatus:null}}},methods:{handleOrderRefund:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["m"])(t.handleOrderRefundParams);case 2:if(r=e.sent,"000"!=r.code){e.next=10;break}return t.$message({message:"操作成功",type:"success"}),e.next=7,t.queryActivityOrderList();case 7:return e.next=9,t.closeReviewRefundDialog();case 9:t.closeActivityOrderDetailDialog();case 10:case"end":return e.stop()}}),e)})))()},computeRefundNum:function(t){return t&&0!=t.length?t.filter((function(t){return 1===t.returnStatus})).length:0},closeReviewRefundDialog:function(){this.handleOrderRefundParams={orderSn:null,examineStatus:null},this.reviewRefundVisible=!1},openReviewRefundDialog:function(){this.reviewRefundVisible=!0},changeActivityOrderDetailTab:function(t){this.activeOrderDetail=this.activityOrderDetailList[t.index].orderSn,this.activityOrderDetailItem=this.activityOrderDetailList[t.index]},closeActivityOrderDetailDialog:function(){this.activityOrderDetailVisible=!1,this.activityOrderDetailList=[],this.activeOrderDetail=null,this.activityOrderDetailItem=[]},queryActivityOrderDetail:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["n"])(t.relationOrderSn);case 2:r=e.sent,"000"==r.code&&(t.activityOrderDetailList=r.data,t.activeOrderDetail=r.data[0].orderSn,t.activityOrderDetailItem=r.data[0]);case 4:case"end":return e.stop()}}),e)})))()},openActivityOrderDetailDialog:function(t){this.relationOrderSn=t,this.queryActivityOrderDetail(),this.handleOrderRefundParams.orderSn=t,this.activityOrderDetailVisible=!0},changeParamsPageSize:function(t){this.queryActivityOrderListParams.pageNo=t,this.queryActivityOrderList()},searchQueryActivityOrderList:function(){this.queryActivityOrderListParams.pageNo=1,this.queryActivityOrderList()},resetQueryActivityOrderListParams:function(){this.queryActivityOrderListParams={pageNo:1,pageSize:10,orderSn:null,orderType:null},this.queryActivityOrderList()},queryActivityOrderList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["o"])(t.queryActivityOrderListParams);case 2:r=e.sent,"000"==r.code&&(t.activityProductOrderList=r.data.records,t.activityProductOrderListPages=r.data.pages,t.activityProductOrderListTotal=r.data.total);case 4:case"end":return e.stop()}}),e)})))()}},created:function(){this.queryActivityOrderList()}},o=u,c=(r("4ec0"),r("2877")),d=Object(c["a"])(o,a,n,!1,null,"497a2963",null);e["default"]=d.exports},ca41:function(t,e,r){"use strict";r.d(e,"q",(function(){return n})),r.d(e,"h",(function(){return i})),r.d(e,"c",(function(){return l})),r.d(e,"t",(function(){return u})),r.d(e,"j",(function(){return o})),r.d(e,"r",(function(){return c})),r.d(e,"i",(function(){return d})),r.d(e,"v",(function(){return s})),r.d(e,"d",(function(){return f})),r.d(e,"b",(function(){return m})),r.d(e,"l",(function(){return v})),r.d(e,"u",(function(){return p})),r.d(e,"k",(function(){return y})),r.d(e,"f",(function(){return b})),r.d(e,"g",(function(){return O})),r.d(e,"p",(function(){return h})),r.d(e,"w",(function(){return g})),r.d(e,"o",(function(){return _})),r.d(e,"n",(function(){return S})),r.d(e,"a",(function(){return w})),r.d(e,"s",(function(){return D})),r.d(e,"e",(function(){return P})),r.d(e,"m",(function(){return L}));var a=r("b775");r("cb5c");function n(t){return Object(a["a"])({url:"/admin/operation/queryOperationAd",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/admin/operation/editOperationAd",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/admin/operation/delOperationAd",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/admin/operation/queryOperation",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/admin/operation/editOperation",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/admin/coupon/list",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/admin/coupon/addOrUpdate",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/admin/coupon/receiveRecords",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/admin/coupon/delete?couponId="+t,method:"get"})}function m(t){return Object(a["a"])({url:"/admin/coupon/detail",method:"get",params:t})}function v(t){return Object(a["a"])({url:"/admin/coupon/give",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/admin/base/queryPartner",method:"post",data:t})}function y(t){return Object(a["a"])({url:"/admin/base/editPartner",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/admin/base/deletePartner",method:"get",params:t})}function O(t){return Object(a["a"])({url:"/admin/activity/editActivityProduct",method:"post",data:t})}function h(){return Object(a["a"])({url:"/admin/activity/queryActivityProductList",method:"get"})}function g(t){return Object(a["a"])({url:"/admin/activity/shelvesActivityProduct",method:"post",data:t})}function _(t){return Object(a["a"])({url:"/admin/activity/queryActivityOrderList",method:"post",data:t})}function S(t){return Object(a["a"])({url:"/admin/activity/queryActivityOrderDetail?relationOrderSn=".concat(t),method:"get"})}function w(t){return Object(a["a"])({url:"/admin/activity/bindExternalCombo",method:"post",data:t})}function D(t){return Object(a["a"])({url:"/admin/activity/queryExternalComboList",method:"get"})}function P(t){return Object(a["a"])({url:"/admin/activity/deleteExternalCombo",method:"delete",params:{id:t}})}function L(t){return Object(a["a"])({url:"/admin/activity/handleOrderRefund",method:"post",data:t})}},e2f5:function(t,e,r){}}]);