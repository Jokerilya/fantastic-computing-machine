(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b3b2b2d"],{"33c3":function(e,n,t){"use strict";t("8a86")},6124:function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"insuranceManage"},[t("div",{staticClass:"topControls"},[t("div",{staticClass:"topControlsSearchInfo"},[t("div",{staticClass:"topControlsSearchInfoItem"},[t("div",{staticClass:"label"},[e._v("师傅姓名")]),t("div",[t("el-input",{attrs:{placeholder:"请输入师傅姓名"},model:{value:e.queryMasterInsuranceListParams.realName,callback:function(n){e.$set(e.queryMasterInsuranceListParams,"realName",n)},expression:"queryMasterInsuranceListParams.realName"}})],1)]),t("div",{staticClass:"topControlsSearchInfoItem"},[t("div",{staticClass:"label"},[e._v("投保时间")]),t("div",[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.queryMasterInsuranceListParams.queryTime,callback:function(n){e.$set(e.queryMasterInsuranceListParams,"queryTime",n)},expression:"queryMasterInsuranceListParams.queryTime"}})],1)])]),t("div",{staticClass:"topControlsBtn"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.searchMasterInsuranceList}},[e._v("搜索")]),t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.resetMasterInsuranceList}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(n){return e.openAddEditInsuranceInfoDialog("add")}}},[e._v("新增")])],1)]),t("el-card",{staticStyle:{padding:"20px"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.masterInsuranceList}},[t("el-table-column",{attrs:{label:"保险凭证",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.convertTabelImages(a.images)[0],"preview-src-list":e.convertTabelImages(a.images)}})]}}])}),t("el-table-column",{attrs:{prop:"orderSn",label:"保单号",align:"center"}}),t("el-table-column",{attrs:{prop:"realName",label:"师傅姓名",align:"center"}}),t("el-table-column",{attrs:{prop:"identityNumber",label:"身份证号",align:"center"}}),t("el-table-column",{attrs:{prop:"insuranceCompany",label:"保险公司",align:"center"}}),t("el-table-column",{attrs:{prop:"insurancePhone",label:"保险电话",align:"center"}}),t("el-table-column",{attrs:{prop:"premiumQuota",label:"保额",align:"center"}}),t("el-table-column",{attrs:{prop:"premiumAmount",label:"保费金额",align:"center"}}),t("el-table-column",{attrs:{prop:"startTime",label:"开始时间",align:"center"}}),t("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center"}}),t("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("div",{style:{color:1==a.status?"#000":2==a.status?"green":"red"}},[e._v(" "+e._s(1==a.status?"待校验":2==a.status?"生效中":"已过保")+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(n){return e.openAddEditInsuranceInfoDialog("edit",a)}}},[e._v("修改")])]}}])})],1),t("div",{staticClass:"tabelPagination"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.masterInsuranceListTotal,"page-size":10,"current-page":e.queryMasterInsuranceListParams.pageNo},on:{"current-change":e.changemasterInsuranceListPage}})],1)],1),t("el-dialog",{attrs:{center:"",title:e.addEditInsuranceInfoDialogTitle,visible:e.addEditInsuranceInfoVisible,"close-on-click-modal":!1,"show-close":!1,width:"40%"}},[t("el-form",{ref:"insuranceInfoForm",attrs:{rules:e.insuranceInfoRules,model:e.insuranceInfo,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"保单号",prop:"orderSn"}},[t("el-input",{attrs:{placeholder:"请输入保单号"},model:{value:e.insuranceInfo.orderSn,callback:function(n){e.$set(e.insuranceInfo,"orderSn",n)},expression:"insuranceInfo.orderSn"}})],1),t("el-form-item",{attrs:{label:"投保人",prop:"realName"}},[t("el-input",{attrs:{placeholder:"请输入投保人"},model:{value:e.insuranceInfo.realName,callback:function(n){e.$set(e.insuranceInfo,"realName",n)},expression:"insuranceInfo.realName"}})],1),t("el-form-item",{attrs:{label:"身份证",prop:"identityNumber"}},[t("el-input",{attrs:{placeholder:"请输入身份证"},model:{value:e.insuranceInfo.identityNumber,callback:function(n){e.$set(e.insuranceInfo,"identityNumber",n)},expression:"insuranceInfo.identityNumber"}})],1),t("el-form-item",{attrs:{label:"保险公司",prop:"insuranceCompany"}},[t("el-input",{attrs:{placeholder:"请输入保险公司"},model:{value:e.insuranceInfo.insuranceCompany,callback:function(n){e.$set(e.insuranceInfo,"insuranceCompany",n)},expression:"insuranceInfo.insuranceCompany"}})],1),t("el-form-item",{attrs:{label:"保险公司电话",prop:"insurancePhone"}},[t("el-input",{attrs:{placeholder:"请输入保险公司电话"},model:{value:e.insuranceInfo.insurancePhone,callback:function(n){e.$set(e.insuranceInfo,"insurancePhone",e._n(n))},expression:"insuranceInfo.insurancePhone"}})],1),t("el-form-item",{attrs:{label:"保额",prop:"premiumQuota"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入保额"},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.insuranceInfo.premiumQuota,callback:function(n){e.$set(e.insuranceInfo,"premiumQuota",e._n(n))},expression:"insuranceInfo.premiumQuota"}})],1),t("el-form-item",{attrs:{label:"保费金额",prop:"premiumAmount"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入保费金额"},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.insuranceInfo.premiumAmount,callback:function(n){e.$set(e.insuranceInfo,"premiumAmount",e._n(n))},expression:"insuranceInfo.premiumAmount"}})],1),t("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择开始时间"},model:{value:e.insuranceInfo.startTime,callback:function(n){e.$set(e.insuranceInfo,"startTime",n)},expression:"insuranceInfo.startTime"}})],1),t("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择结束时间"},model:{value:e.insuranceInfo.endTime,callback:function(n){e.$set(e.insuranceInfo,"endTime",n)},expression:"insuranceInfo.endTime"}})],1),t("el-form-item",{attrs:{label:"保险凭证",prop:"images"}},[t("el-upload",{attrs:{action:"#","list-type":"picture-card",limit:3,"file-list":e.imageFileList,"http-request":e.upLoadInsuranceImg,"on-remove":e.removeInsuranceImg}},[t("i",{staticClass:"el-icon-plus"})])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeAddEditInsuranceInfoDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmInsuranceInfo}},[e._v("确 定")])],1)],1)],1)},r=[],s=t("5530"),i=t("1da1"),l=(t("96cf"),t("ac1f"),t("1276"),t("159b"),t("a15b"),t("d81d"),t("a434"),t("f8b7")),u=t("8593"),o={data:function(){return{queryMasterInsuranceListParams:{pageNo:1,pageSize:10,queryTime:null,realName:null},masterInsuranceList:[],masterInsuranceListTotal:null,addEditInsuranceInfoVisible:!1,addEditInsuranceInfoDialogTitle:"新增保险",insuranceInfo:{realName:null,identityNumber:null,insuranceCompany:null,insurancePhone:null,premiumQuota:null,premiumAmount:null,startTime:null,endTime:null,status:null,orderSn:null,images:null},imageFileList:[],insuranceInfoRules:{realName:[{required:!0,message:"请填写投保人",trigger:"blur"}],identityNumber:[{required:!0,message:"请填写投保人身份证号码",trigger:"blur"}],insuranceCompany:[{required:!0,message:"请填写保险公司",trigger:"blur"}],insurancePhone:[{required:!0,message:"请填写保险公司电话",trigger:"blur"}],premiumQuota:[{required:!0,message:"请填写保额",trigger:"blur"}],premiumAmount:[{required:!0,message:"请填写保费金额",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"blur"}],status:[{required:!0,message:"请选择保险状态",trigger:"blur"}],orderSn:[{required:!0,message:"请填写保单号",trigger:"blur"}],images:[{required:!0,message:"请上传保险凭证",trigger:"blur"}]}}},methods:{convertTabelImages:function(e){return e.split(",")},searchMasterInsuranceList:function(){this.queryMasterInsuranceListParams.pageNo=1,this.queryMasterInsuranceList()},resetMasterInsuranceList:function(){this.queryMasterInsuranceListParams={pageNo:1,pageSize:10,queryTime:null,realName:null},this.queryMasterInsuranceList()},changemasterInsuranceListPage:function(e){this.queryMasterInsuranceListParams.pageNo=e,this.queryMasterInsuranceList()},changeStatus:function(){this.$refs["insuranceInfoForm"].validateField("status")},confirmInsuranceInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$refs["insuranceInfoForm"].validate();case 2:return n.next=4,Object(l["t"])(e.insuranceInfo);case 4:t=n.sent,"操作成功"==t.message&&(e.queryMasterInsuranceList(),e.closeAddEditInsuranceInfoDialog());case 6:case"end":return n.stop()}}),n)})))()},closeAddEditInsuranceInfoDialog:function(){this.insuranceInfo={realName:null,identityNumber:null,insuranceCompany:null,insurancePhone:null,premiumQuota:null,premiumAmount:null,startTime:null,endTime:null,status:null,orderSn:null,images:null},this.imageFileList=[],this.$refs["insuranceInfoForm"].resetFields(),this.addEditInsuranceInfoVisible=!1},jsonConverArr:function(){var e=[];this.insuranceInfo.images.split(",").forEach((function(n){e.push({url:n})})),this.imageFileList=e},arrConvertJson:function(){var e=[];this.imageFileList.forEach((function(n){e.push(n.url)})),this.insuranceInfo.images=e.join(",")},removeInsuranceImg:function(e){var n=this.imageFileList.map((function(e){return e.url})).indexOf(e.url);this.imageFileList.splice(n,1),this.arrConvertJson()},upLoadInsuranceImg:function(e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n.$loading({text:"上传中.."}),r=new FormData,r.append("file",e.file),t.next=5,Object(u["a"])(r);case 5:s=t.sent,s.data&&(n.imageFileList.push({url:s.data}),n.arrConvertJson()),a.close();case 8:case"end":return t.stop()}}),t)})))()},openAddEditInsuranceInfoDialog:function(e,n){"edit"==e&&(this.insuranceInfo=Object(s["a"])({},n),this.jsonConverArr()),this.addEditInsuranceInfoVisible=!0},queryMasterInsuranceList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["jb"])(e.queryMasterInsuranceListParams);case 2:t=n.sent,e.masterInsuranceList=t.data.records,e.masterInsuranceListTotal=t.data.total;case 5:case"end":return n.stop()}}),n)})))()}},created:function(){this.queryMasterInsuranceList()}},c=o,m=(t("33c3"),t("2877")),p=Object(m["a"])(c,a,r,!1,null,"8d0260e0",null);n["default"]=p.exports},"8a86":function(e,n,t){},a15b:function(e,n,t){"use strict";var a=t("23e7"),r=t("e330"),s=t("44ad"),i=t("fc6a"),l=t("a640"),u=r([].join),o=s!=Object,c=l("join",",");a({target:"Array",proto:!0,forced:o||!c},{join:function(e){return u(i(this),void 0===e?",":e)}})}}]);