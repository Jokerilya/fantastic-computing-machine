(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04c87554"],{"149a":function(e,t,s){},"34f2":function(e,t,s){"use strict";s("149a")},a15b:function(e,t,s){"use strict";var a=s("23e7"),i=s("e330"),r=s("44ad"),n=s("fc6a"),l=s("a640"),m=i([].join),o=r!=Object,c=l("join",",");a({target:"Array",proto:!0,forced:o||!c},{join:function(e){return m(n(this),void 0===e?",":e)}})},ff32:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"examineItem"},[s("div",{staticClass:"operateBtn"},[s("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.examTemplate("https://snk-1305456087.cos.ap-guangzhou.myqcloud.com/%E5%B8%88%E5%82%85%E8%80%83%E9%A2%98%E6%A8%A1%E6%9D%BF.xlsx")}}},[e._v("考题模板")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:e.openExamineVisible}},[e._v("新增考核")])],1),s("el-card",[s("el-table",{attrs:{border:"",data:e.masterAssessmentItemList}},[s("el-table-column",{attrs:{align:"center",prop:"title",label:"标题"}}),s("el-table-column",{attrs:{align:"center",prop:"simpleDesc",label:"描述"}}),s("el-table-column",{attrs:{align:"center",prop:"askPoint",label:"积分要求"}}),s("el-table-column",{attrs:{align:"center",prop:"givePoint",label:"赠送积分"}}),s("el-table-column",{attrs:{align:"center",prop:"passLine",label:"及格线"}}),s("el-table-column",{attrs:{align:"center",width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.goToRecord(a.id)}}},[e._v("记录")]),s("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.openExamineVisible(a)}}},[e._v("编辑")])]}}])})],1)],1),s("el-dialog",{attrs:{title:"考核",visible:e.examineVisible,width:"40%","show-close":!1}},[s("el-form",{ref:"editMasterAssessmentItemForm",attrs:{"label-width":"100px","label-position":"left",model:e.editMasterAssessmentItemParams,rules:e.editMasterAssessmentItemRules}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{attrs:{placeholder:"请填写标题"},model:{value:e.editMasterAssessmentItemParams.title,callback:function(t){e.$set(e.editMasterAssessmentItemParams,"title",t)},expression:"editMasterAssessmentItemParams.title"}})],1),s("el-form-item",{attrs:{label:"描述",prop:"simpleDesc"}},[s("el-input",{attrs:{placeholder:"请填写描述"},model:{value:e.editMasterAssessmentItemParams.simpleDesc,callback:function(t){e.$set(e.editMasterAssessmentItemParams,"simpleDesc",t)},expression:"editMasterAssessmentItemParams.simpleDesc"}})],1),s("el-form-item",{attrs:{label:"积分要求",prop:"askPoint"}},[s("el-input",{attrs:{placeholder:"请填写积分要求"},model:{value:e.editMasterAssessmentItemParams.askPoint,callback:function(t){e.$set(e.editMasterAssessmentItemParams,"askPoint",t)},expression:"editMasterAssessmentItemParams.askPoint"}})],1),s("el-form-item",{attrs:{label:"赠送积分",prop:"givePoint"}},[s("el-input",{attrs:{placeholder:"请填写成功赠送积分"},model:{value:e.editMasterAssessmentItemParams.givePoint,callback:function(t){e.$set(e.editMasterAssessmentItemParams,"givePoint",t)},expression:"editMasterAssessmentItemParams.givePoint"}})],1),s("el-form-item",{attrs:{label:"及格线",prop:"passLine"}},[s("el-input",{attrs:{placeholder:"请填写及格线"},model:{value:e.editMasterAssessmentItemParams.passLine,callback:function(t){e.$set(e.editMasterAssessmentItemParams,"passLine",t)},expression:"editMasterAssessmentItemParams.passLine"}})],1),s("el-form-item",{attrs:{label:"海报图片",prop:"posterImage"}},[s("el-upload",{attrs:{"list-type":"picture-card",action:"#",limit:1,"http-request":e.uploadImgFn,"file-list":e.posterImgList,"on-remove":e.delImgFn}},[s("i",{staticClass:"el-icon-plus"})])],1),s("el-form-item",{attrs:{label:"学习视频",prop:"assessmentVideo"}},[e.editMasterAssessmentItemParams.assessmentVideo?s("div",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.viewVideo}},[e._v("查看视频")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.delVideo}},[e._v("删除视频")])],1):s("el-upload",{attrs:{action:"#",limit:1,"http-request":e.uploadVideoFn,"file-list":e.posterVideoList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传视频")])],1)],1),s("el-form-item",{attrs:{label:"考题"}},[0==e.examFile.length?s("el-upload",{attrs:{action:"#",limit:1,"http-request":e.uploadExamFile,"file-list":e.examFile}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传文件")])],1):s("div",{staticStyle:{display:"flex","align-items":"center"}},[e.editMasterAssessmentItemParams.url?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.examTemplate(e.editMasterAssessmentItemParams.url)}}},[e._v("下载之前考题")]):s("div",{staticStyle:{"margin-right":"10px"}},[e._v(" 已上传考题 ")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.delExamFile}},[e._v("删除文件")])],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.closeExamineVisible}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.confirmBtn}},[e._v("确 定")])],1)],1)],1)},i=[],r=s("5530"),n=s("1da1"),l=(s("96cf"),s("a15b"),s("d81d"),s("b64b"),s("99af"),s("8593")),m=s("f8b7"),o={data:function(){return{masterAssessmentItemList:[],examineVisible:!1,posterImgList:[],posterVideoList:[],examFile:[],editMasterAssessmentItemParams:{askPoint:null,assessmentVideo:null,givePoint:null,passLine:null,posterImage:null,simpleDesc:null,title:null},editMasterAssessmentItemRules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],simpleDesc:[{required:!0,message:"请填写描述",trigger:"blur"}],askPoint:[{required:!0,message:"请填写积分要求",trigger:"blur"}],givePoint:[{required:!0,message:"请填写赠送积分",trigger:"blur"}],passLine:[{required:!0,message:"请填写及格线",trigger:"blur"}],posterImage:[{required:!0,message:"请填写海报图片",trigger:"blur"}],assessmentVideo:[{required:!0,message:"请上传学习视频",trigger:"blur"}]}}},methods:{delExamFile:function(){this.examFile=[],this.editMasterAssessmentItemParams.image=null},closeExamineVisible:function(){this.examineVisible=!1,this.examFile=[],this.posterImgList=[],this.posterVideoList=[],this.editMasterAssessmentItemParams={askPoint:null,assessmentVideo:null,givePoint:null,passLine:null,posterImage:null,simpleDesc:null,title:null}},confirmBtn:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["editMasterAssessmentItemForm"].validate();case 2:if(0!=e.examFile.length){t.next=5;break}return e.$message({message:"请上传考题文件",type:"warning"}),t.abrupt("return");case 5:if(s=Object.keys(e.editMasterAssessmentItemParams).map((function(t){return"".concat(t,"=").concat(e.editMasterAssessmentItemParams[t])})).join("&"),!Array.isArray(e.examFile)){t.next=12;break}return t.next=9,Object(m["t"])("","?"+s);case 9:a=t.sent,t.next=15;break;case 12:return t.next=14,Object(m["t"])(e.examFile,"?"+s);case 14:a=t.sent;case 15:if("操作成功"!=a.message){t.next=20;break}return e.$message({message:"操作成功",type:"success"}),t.next=19,e.queryMasterAssessmentItemList();case 19:e.closeExamineVisible();case 20:case"end":return t.stop()}}),t)})))()},uploadExamFile:function(e){var t=new FormData;t.append("file",e.file),this.examFile=t},delVideo:function(){this.editMasterAssessmentItemParams.assessmentVideo=null,this.posterVideoList=[]},viewVideo:function(){window.open(this.editMasterAssessmentItemParams.assessmentVideo)},examTemplate:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.location.href=e;case 1:case"end":return t.stop()}}),t)})))()},uploadVideoFn:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.$loading({lock:!0,text:"上传视频中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=new FormData,i.append("file",e.file),s.next=5,Object(l["a"])(i);case 5:r=s.sent,t.editMasterAssessmentItemParams.assessmentVideo=r.data,t.posterVideoList=[{url:r.data}],t.$refs.editMasterAssessmentItemForm.validateField("assessmentVideo"),a.close();case 10:case"end":return s.stop()}}),s)})))()},delImgFn:function(){this.posterImgList=[],this.editMasterAssessmentItemParams.posterImage=null},uploadImgFn:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.$loading({lock:!0,text:"上传图片中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=new FormData,i.append("file",e.file),s.next=5,Object(l["a"])(i);case 5:r=s.sent,t.editMasterAssessmentItemParams.posterImage=r.data,t.posterImgList=[{url:r.data}],t.$refs.editMasterAssessmentItemForm.validateField("posterImage"),a.close();case 10:case"end":return s.stop()}}),s)})))()},openExamineVisible:function(e){e.id&&(this.editMasterAssessmentItemParams=Object(r["a"])({},e),this.posterImgList=[{url:e.posterImage}],this.posterVideoList=[{url:e.assessmentVideo}],this.examFile=[{url:e.url}]),this.examineVisible=!0},queryMasterAssessmentItemList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["qb"])();case 2:s=t.sent,e.masterAssessmentItemList=s.data;case 4:case"end":return t.stop()}}),t)})))()},goToRecord:function(e){this.$router.push({path:"/maintenance/examineRecord?id="+e})}},created:function(){this.queryMasterAssessmentItemList()}},c=o,u=(s("34f2"),s("2877")),p=Object(u["a"])(c,a,i,!1,null,"ef1558f4",null);t["default"]=p.exports}}]);