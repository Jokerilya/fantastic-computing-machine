(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c8e63ea"],{"17eb":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"j",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"e",(function(){return h}));var r=n("b775");function a(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleEnterpriseCheck?orderSn="+e,method:"GET"})}function i(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyConfirmQuotation",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyPayment?orderSn="+e,method:"get"})}function o(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleTakeOrder",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleRemindStarted",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handlePhotographPunch",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleMasterQuotation",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleStartService?orderSn="+e,method:"get"})}function m(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleSubmitAcceptance",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyCreateOrder",method:"post",data:e})}},c007:function(e,t,n){},c24f:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"p",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"q",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"r",(function(){return g})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return v})),n.d(t,"m",(function(){return w})),n.d(t,"k",(function(){return O}));var r=n("b775");n("cb5c");function a(e){return Object(r["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/admin/userInfo/handleUserInfoStatus",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/admin/userInfo/handleAccountEdit",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/admin/userInfo/queryMoney",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/admin/userInfo/toVip",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/admin/userInfo/queryWithdrawal",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}},d3c4:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"assignedWorker"},[n("div",{staticClass:"searchTool"},[n("div",{staticClass:"workerName"},[n("h4",{staticStyle:{color:"#999"}},[e._v("师傅名称")]),n("div",{staticClass:"inp"},[n("el-input",{attrs:{clearable:"",placeholder:"请输入你的师傅名称"},model:{value:e.params.realName,callback:function(t){e.$set(e.params,"realName",t)},expression:"params.realName"}})],1),n("h4",{staticStyle:{color:"#999",width:"90px","margin-left":"20px"}},[e._v("指派的师傅:")]),n("div",{staticClass:"assignedWorkerList"},[e._l(e.masterNameList,(function(t,r){return n("span",{key:t,staticClass:"item",on:{click:function(t){return e.delAssignedWorker(r)}}},[e._v(" "+e._s(t)+" ")])})),n("div",{staticClass:"notiveText"},[e._v("( 注:点击姓名即可删除！)")])],2)]),n("div",{staticClass:"operationBtnList"},[n("el-button",{attrs:{type:"primary"},on:{click:e.realNameBlurFn}},[e._v(" 搜索 ")]),n("el-button",{staticClass:"thrownIntoMarketBtn",attrs:{type:"success"},on:{click:e.handleTakeOrder}},[e._v("代师傅接单")]),n("el-button",{staticClass:"thrownIntoMarketBtn",attrs:{type:"success"},on:{click:function(t){return e.assignedBtn("worker")}}},[e._v("指派师傅")])],1)]),n("div",{staticClass:"workerTable"},[n("el-card",[n("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tableShow,expression:"tableShow"}],staticStyle:{width:"100%"},attrs:{height:"70vh","header-cell-style":{background:"#f6f8fc",color:"#707070"},data:e.masterList}},[n("el-table-column",{attrs:{label:"多选",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("input",{directives:[{name:"model",rawName:"v-model",value:r.show,expression:"row.show"}],staticStyle:{zoom:"120%"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(r.show)?e._i(r.show,null)>-1:r.show},on:{click:function(t){return e.manyPeopleAssigned(r.show,r.uid,r.realName)},change:function(t){var n=r.show,a=t.target,i=!!a.checked;if(Array.isArray(n)){var s=null,o=e._i(n,s);a.checked?o<0&&e.$set(r,"show",n.concat([s])):o>-1&&e.$set(r,"show",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(r,"show",i)}}})]}}])}),n("el-table-column",{attrs:{label:"师傅头像",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("img",{attrs:{src:t.realPortrait,width:"75px",height:"75px"}})]}}])}),n("el-table-column",{attrs:{prop:"realName",label:"师傅",align:"center"}}),n("el-table-column",{attrs:{prop:"phone",label:"师傅电话",align:"center"}}),n("el-table-column",{attrs:{prop:"identity",label:"角色",align:"center"}}),n("el-table-column",{attrs:{label:"服务状态",align:"center"}},[[e._v(" 可接单状态 ")]],2),n("el-table-column",{attrs:{prop:"createTime",label:"入驻时间",align:"center"}}),n("el-table-column",{attrs:{label:"所属",align:"center"}},[[e._v(" 广东机床加工有限公司 ")]],2),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("a",{staticClass:"operationBtn",attrs:{href:"#"},on:{click:function(t){return e.$router.push("/maintenance/worker/workerDetails?id="+r.id)}}},[e._v("详情")])]}}])})],1),n("div",{staticClass:"pagingTool"},[n("el-pagination",{attrs:{total:e.total,"page-size":10,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.currentChange}})],1)],1)],1),n("el-dialog",{attrs:{title:"区域指派",width:"30%",visible:e.regionChooseDialog,"show-close":!1}},[n("div",{staticClass:"content"},[n("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择市"},on:{change:e.cityValueChage},model:{value:e.cityValue,callback:function(t){e.cityValue=t},expression:"cityValue"}},e._l(e.cityList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),n("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择区"},model:{value:e.districtValue,callback:function(t){e.districtValue=t},expression:"districtValue"}},e._l(e.districtList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.regionChooseDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRegionChoose}},[e._v("确 定")])],1)])],1)},a=[],i=n("1da1"),s=(n("a434"),n("159b"),n("96cf"),n("17eb")),o=n("c24f"),c=n("8593"),u={data:function(){return{districtValue:null,districtList:null,cityValue:null,cityList:null,regionChooseDialog:!1,enterpriseOrderSn:"",params:{pageNo:1,pageSize:10,realName:""},masterList:null,total:null,masterUidList:[],masterNameList:[],tableShow:!0}},methods:{handleTakeOrder:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.masterUidList.length>0&&e.masterUidList.length<2){t.next=3;break}return e.$message({message:"请选择一名师傅进行指派",type:"warning"}),t.abrupt("return");case 3:return n={uid:e.masterUidList[0],relationOrderSn:e.enterpriseOrderSn},t.next=6,Object(s["j"])(n);case 6:r=t.sent,"操作成功"==r.message&&(e.$message({message:"操作成功",type:"success"}),e.$router.push({name:"maintenance_order_desc",query:{orderSn:e.enterpriseOrderSn}}));case 8:case"end":return t.stop()}}),t)})))()},confirmRegionChoose:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["i"])({areaIdList:e.districtValue,enterpriseOrderSn:e.enterpriseOrderSn,masterUidList:null});case 2:n=t.sent,"操作成功"===n.message&&(e.$message({message:"指派成功",type:"success"}),e.$router.push({name:"maintenance_order_desc",query:{orderSn:e.enterpriseOrderSn}}));case 4:case"end":return t.stop()}}),t)})))()},cityValueChage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])(e.cityValue);case 2:n=t.sent,e.districtList=n.data;case 4:case"end":return t.stop()}}),t)})))()},openRegionChooseDialog:function(){this.regionChooseDialog=!0},delAssignedWorker:function(e){var t=this;this.$confirm("您确定取消指派"+this.masterNameList[e]+"?","取消指派",{type:"warning"}).then((function(){t.masterUidList.splice(e,1),t.masterNameList.splice(e,1),t.$message({type:"success",message:"删除成功!"})}))},manyPeopleAssigned:function(e,t,n){if(e){var r=this.masterUidList.indexOf(t);this.masterUidList.splice(r,1);var a=this.masterNameList.indexOf(n);this.masterNameList.splice(a,1),console.log(this.masterUidList)}else-1===this.masterUidList.indexOf(t)&&this.masterUidList.push(t),-1===this.masterNameList.indexOf(n)&&this.masterNameList.push(n)},assignedBtn:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={enterpriseOrderSn:t.enterpriseOrderSn},r.masterUidList="worker"===e?t.masterUidList:[],n.next=4,Object(o["i"])(r);case 4:a=n.sent,"操作成功"===a.message&&(t.$message({message:"指派成功",type:"success"}),t.$router.push({name:"maintenance_order_desc",query:{orderSn:t.enterpriseOrderSn}}));case 6:case"end":return n.stop()}}),n)})))()},realNameBlurFn:function(){this.params.pageNo=1,this.getMasterList()},currentChange:function(e){this.params.pageNo=e,this.getMasterList()},getMasterList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$loading(),e.tableShow=!1,t.next=4,Object(o["l"])(e.params);case 4:r=t.sent,e.masterList=r.data.records,e.masterList.forEach((function(e){e.show=!1})),e.total=r.data.total,e.tableShow=!0,n.close();case 10:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query,r=n.masterNameList,a=n.masterUidList,i=n.orderSn,r&&r.forEach((function(t){e.masterNameList.push(t)})),a&&a.forEach((function(t){e.masterUidList.push(t)})),t.next=5,Object(c["d"])(44e4);case 5:s=t.sent,e.cityList=s.data,e.enterpriseOrderSn=i,e.getMasterList();case 9:case"end":return t.stop()}}),t)})))()}},l=u,d=(n("d9dc"),n("2877")),m=Object(d["a"])(l,r,a,!1,null,"9bdd69b6",null);t["default"]=m.exports},d9dc:function(e,t,n){"use strict";n("c007")}}]);