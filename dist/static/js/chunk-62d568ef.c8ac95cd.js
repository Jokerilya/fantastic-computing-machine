(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62d568ef"],{"019b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[e.orderSummaryTableListEdit?e._e():r("div",{staticClass:"manage-top"},[r("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{"label-width":"100px","label-position":"left",inline:!0},model:{value:e.queryRepairOrderListParams,callback:function(t){e.queryRepairOrderListParams=t},expression:"queryRepairOrderListParams"}},[r("el-form-item",{attrs:{label:"师傅名称"}},[r("el-select",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{filterable:"",placeholder:"请选择师傅","remote-method":e.getMasterList,remote:""},on:{change:e.changeInquireMasterFn},model:{value:e.queryRepairOrderListParams.masterUid,callback:function(t){e.$set(e.queryRepairOrderListParams,"masterUid",t)},expression:"queryRepairOrderListParams.masterUid"}},e._l(e.masterSearchList,(function(e){return r("el-option",{key:e.uid,attrs:{label:e.realName,value:e.uid}})})),1)],1),r("el-form-item",{attrs:{label:"设备编码"}},[r("el-input",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请输入设备编码"},model:{value:e.queryRepairOrderListParams.no,callback:function(t){e.$set(e.queryRepairOrderListParams,"no",t)},expression:"queryRepairOrderListParams.no"}})],1),r("el-form-item",{attrs:{label:"订单编号"}},[r("el-input",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请输入订单编号"},model:{value:e.queryRepairOrderListParams.orderSn,callback:function(t){e.$set(e.queryRepairOrderListParams,"orderSn",t)},expression:"queryRepairOrderListParams.orderSn"}})],1),r("el-form-item",{attrs:{label:"企业名称"}},[r("el-input",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请输入企业名称"},model:{value:e.queryRepairOrderListParams.enterpriseName,callback:function(t){e.$set(e.queryRepairOrderListParams,"enterpriseName",t)},expression:"queryRepairOrderListParams.enterpriseName"}})],1),r("el-form-item",{attrs:{label:"设备型号"}},[r("el-input",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请填写设备型号"},model:{value:e.queryRepairOrderListParams.deviceModel,callback:function(t){e.$set(e.queryRepairOrderListParams,"deviceModel",t)},expression:"queryRepairOrderListParams.deviceModel"}})],1),r("el-form-item",{attrs:{label:"紧急程度"}},[r("el-select",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请选择紧急程度"},model:{value:e.queryRepairOrderListParams.degree,callback:function(t){e.$set(e.queryRepairOrderListParams,"degree",t)},expression:"queryRepairOrderListParams.degree"}},e._l(e.degreeList,(function(e,t){return r("el-option",{key:"degree_"+t,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"订单类型"}},[r("el-select",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请选择订单类型"},model:{value:e.queryRepairOrderListParams.orderType,callback:function(t){e.$set(e.queryRepairOrderListParams,"orderType",t)},expression:"queryRepairOrderListParams.orderType"}},e._l(e.orderTypeList,(function(e,t){return r("el-option",{key:"orderType_"+t,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"结算类型"}},[r("el-select",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请选择结算类型"},model:{value:e.queryRepairOrderListParams.settlementType,callback:function(t){e.$set(e.queryRepairOrderListParams,"settlementType",t)},expression:"queryRepairOrderListParams.settlementType"}},e._l(e.settlementTypeList,(function(e,t){return r("el-option",{key:"settlementType_"+t,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"数据审核"}},[r("el-select",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{placeholder:"请选择数据审核"},model:{value:e.queryRepairOrderListParams.dataExamineStatus,callback:function(t){e.$set(e.queryRepairOrderListParams,"dataExamineStatus",t)},expression:"queryRepairOrderListParams.dataExamineStatus"}},e._l(e.dataExamineStatusList,(function(t,a){return r("el-option",{key:"dataExamineStatus_"+a,attrs:{label:t.label,value:t.value}},[e._v("全部")])})),1)],1),r("el-form-item",{attrs:{label:"设备类型"}},[r("el-cascader",{style:{width:e.sidebar.opened?"10vw":"12vw"},attrs:{options:e.deviceTypeList,placeholder:"请选择设备类型",props:e.serviceTypesProps},model:{value:e.queryRepairOrderListParams.deviceTypeId,callback:function(t){e.$set(e.queryRepairOrderListParams,"deviceTypeId",t)},expression:"queryRepairOrderListParams.deviceTypeId"}})],1),r("el-form-item",{attrs:{label:"查询时间"}},[r("el-date-picker",{style:{width:e.sidebar.opened?"15vw":"18vw"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeSearchTime},model:{value:e.queryRepairOrderListParams.searchTime,callback:function(t){e.$set(e.queryRepairOrderListParams,"searchTime",t)},expression:"queryRepairOrderListParams.searchTime"}})],1),r("el-form-item",{attrs:{label:"仅选择超时"}},[r("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#909399"},model:{value:e.queryRepairOrderListParams.timeoutFlag,callback:function(t){e.$set(e.queryRepairOrderListParams,"timeoutFlag",t)},expression:"queryRepairOrderListParams.timeoutFlag"}})],1),r("el-form-item",{attrs:{label:"仅选择斯耐克"}},[r("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#909399"},model:{value:e.queryRepairOrderListParams.snkFlag,callback:function(t){e.$set(e.queryRepairOrderListParams,"snkFlag",t)},expression:"queryRepairOrderListParams.snkFlag"}})],1)],1)],1),r("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[e.orderSummaryTableListEdit||3==e.tableType||4==e.tableType?e._e():r("el-col",{attrs:{span:17}},[r("el-radio-group",{attrs:{size:e.sidebar.opened?"small":"medium"},on:{input:e.changeOrderState},model:{value:e.queryRepairOrderListParams.status,callback:function(t){e.$set(e.queryRepairOrderListParams,"status",t)},expression:"queryRepairOrderListParams.status"}},e._l(e.statusObjList,(function(t){return r("el-radio-button",{key:t.num,attrs:{label:t.num}},[e._v(e._s(t.desc)+"("+e._s(e.orderSubscript[t.str])+")")])})),1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:e.orderSummaryTableListEdit||3==e.tableType||4==e.tableType?24:7}},[1==e.tableType?r("el-button",{attrs:{plain:"",disabled:0==e.multipleSelection.length},on:{click:e.handleBatchProxyPayment}},[e._v(" 批量代付款 ")]):e._e(),4==e.tableType?r("el-button",{attrs:{plain:"",disabled:0==e.accountSelection.length},on:{click:e.openPreviewGenerateBill}},[e._v(" 生成对账单 ")]):e._e(),e.orderSummaryTableListEdit||1==e.tableType||4==e.tableType?e._e():r("el-button",{attrs:{type:"warning"},on:{click:e.changeOrderSummaryTableListEdit}},[e._v("编辑")]),e.orderSummaryTableListEdit&&1!=e.tableType?r("el-button",{attrs:{type:"success"},on:{click:e.cancelOnlineRepairOrder}},[e._v("取消")]):e._e(),e.orderSummaryTableListEdit&&1!=e.tableType?r("el-button",{attrs:{type:"success"},on:{click:e.updateOnlineRepairOrder}},[e._v("保存")]):e._e(),e.orderSummaryTableListEdit?e._e():r("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.searchTableList}},[e._v("查询")]),e.orderSummaryTableListEdit?e._e():r("el-button",{style:{marginRight:1==e.tableType||4==e.tableType?"10px":"0px"},attrs:{plain:"",type:"info"},on:{click:e.resetTableList}},[e._v("重置")]),1==e.tableType?r("el-dropdown",{staticStyle:{"margin-right":"10px"},attrs:{trigger:"click"},on:{command:e.exportListFn}},[r("el-button",{attrs:{type:"success",plain:""}},[e._v(" 导出 ")]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"导出"}},[e._v("导出")]),r("el-dropdown-item",{attrs:{command:"导出V2"}},[e._v("导出V2")])],1)],1):e._e(),1==e.tableType||e.orderSummaryTableListEdit||4==e.tableType?e._e():r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"success",plain:""},on:{click:e.handleTableExport}},[e._v(" 导出 ")]),e.orderSummaryTableListEdit?e._e():r("el-dropdown",{attrs:{trigger:"click"},on:{command:e.tableTypeListFn}},[r("el-button",{attrs:{type:"success",plain:""}},[e._v(" "+e._s(1==e.tableType?"默认":2==e.tableType?"订单总表":3==e.tableType?"交接单":"对账单")+" ")]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:1}},[e._v("默认")]),r("el-dropdown-item",{attrs:{command:2}},[e._v("订单总表")]),r("el-dropdown-item",{attrs:{command:3}},[e._v("交接单")]),r("el-dropdown-item",{attrs:{command:4}},[e._v("对账单")])],1)],1)],1)],1),r("el-card",[1==e.tableType?r("RepairOrderListTable",{ref:"repairOrderListTableRef",attrs:{params:e.queryRepairOrderListParams},on:{"change-paginationTotal":e.changePaginationTotal,"change-tableSelection":e.changeTableSelection}}):e._e(),2==e.tableType?r("OrderSummaryTable",{ref:"orderSummaryTableRef",attrs:{params:e.queryRepairOrderListParams},on:{"change-paginationTotal":e.changePaginationTotal,"change-orderSummaryTableListEdit":e.changeOrderSummaryTableListEditBack}}):e._e(),3==e.tableType?r("HandoverSheetTable",{ref:"handoverSheetTableRef",attrs:{params:e.queryRepairOrderListParams},on:{"change-paginationTotal":e.changePaginationTotal,"change-checklistTableListEdit":e.changeOrderSummaryTableListEditBack}}):e._e(),4==e.tableType?r("AccountTable",{ref:"accountTableRef",attrs:{params:e.queryRepairOrderListParams},on:{"change-paginationTotal":e.changePaginationTotal,"change-tableSelection":e.changeTableSelection}}):e._e(),r("el-dialog",{attrs:{title:"预览对账单信息",visible:e.previewGenerateBillInfoVisible,width:"50%","before-close":e.closePreviewGenerateBill}},[r("el-form",{ref:"generateBillFormRef",attrs:{rules:e.generateBillParamsRules,model:e.generateBillParams,"label-position":"top",inline:""}},[r("el-form-item",{attrs:{label:"甲方(供方)",prop:"mchName"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.generateBillParams.mchName,callback:function(t){e.$set(e.generateBillParams,"mchName",t)},expression:"generateBillParams.mchName"}},e._l(e.mchNameList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"乙方(需方)",prop:"enterpriseName"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.generateBillParams.enterpriseName,callback:function(t){e.$set(e.generateBillParams,"enterpriseName",t)},expression:"generateBillParams.enterpriseName"}})],1),r("el-form-item",{attrs:{label:"开票税率",prop:"taxRateValue"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeTaxRate},model:{value:e.generateBillParams.taxRateValue,callback:function(t){e.$set(e.generateBillParams,"taxRateValue",t)},expression:"generateBillParams.taxRateValue"}},e._l(e.taxRateList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"已选订单"}},[r("el-table",{key:e.accountSelectionCopy.length,staticStyle:{width:"100%"},attrs:{data:e.accountSelectionCopy}},[r("el-table-column",{attrs:{label:"公司名称","show-overflow-tooltip":"",align:"center",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.enterpriseName?r.enterpriseName:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"设备码","show-overflow-tooltip":"",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.no?r.no:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"orderSn",label:"订单号","show-overflow-tooltip":"",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.orderSn)+" ")]}}])}),r("el-table-column",{attrs:{prop:"simpleDesc",label:"故障描述","show-overflow-tooltip":"",width:"200",align:"center"}}),r("el-table-column",{attrs:{label:"人工费",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.doorAmount?r.doorAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"配件费",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.partsAmount?r.partsAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"payAmount",label:"总金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.payAmount?r.payAmount:"/")+" ")]}}])})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closePreviewGenerateBill}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.generateBill}},[e._v("确 定")])],1)],1),e.orderSummaryTableListEdit?e._e():r("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[r("el-pagination",{attrs:{background:"","current-page":e.queryRepairOrderListParams.pageNo,"page-size":e.queryRepairOrderListParams.pageSize,layout:"sizes, total, prev, pager, next, jumper",total:e.paginationTotal},on:{"current-change":e.changePageNo,"size-change":e.changePageSize}})],1)],1)],1)},n=[],l=r("1da1"),o=r("5530"),i=(r("96cf"),r("d81d"),r("8ba4"),r("a9e3"),r("c740"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"repairOrderListTable"},[r("el-table",{key:5==e.params.status,ref:"repairOrderListTableRef",attrs:{"highlight-current-row":"",data:e.repairOrderList},on:{"selection-change":e.handleSelectionChange}},[e.params.status>=5?r("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),r("el-table-column",{attrs:{prop:"orderSn",label:"订单编号","show-overflow-tooltip":"",width:"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goToOrderDesc(a)}}},[e._v(e._s(a.orderSn))])]}}])}),r("el-table-column",{attrs:{label:"紧急程度","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.degreeName?r.degreeName:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"超时状态","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("div",{style:{color:a.timeoutFlag?"red":""}},[e._v(" "+e._s("2001"==a.timeoutFlag?"指派超时":"2101"==a.timeoutFlag?"接单超时":"2201"==a.timeoutFlag?"打卡超时":"2301"==a.timeoutFlag?"服务中超时":"3001"==a.timeoutFlag?"派发->接单超时 ":"/")+" ")])]}}])}),r("el-table-column",{attrs:{prop:"simpleDesc",label:"故障描述","show-overflow-tooltip":"",width:"200",align:"center"}}),r("el-table-column",{attrs:{label:"工单类型","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(1===r.orderType?"散单":2===r.orderType?"年保":"年卡")+" ")]}}])}),r("el-table-column",{attrs:{label:"标签","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return e._l(e.lablelList,(function(t){return r("div",{key:t.value},[a.label==t.value?r("el-tag",{attrs:{type:t.type}},[e._v(e._s(t.value))]):e._e()],1)}))}}])}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"企业名称","show-overflow-tooltip":"",width:"230",align:"center"}}),r("el-table-column",{attrs:{label:"备注","show-overflow-tooltip":"",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.remarks?r.remarks:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"结算类型","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(2==r.settlementType?"月结":"现结")+" ")]}}])}),r("el-table-column",{attrs:{label:"机台码","show-overflow-tooltip":"",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.no?r.no:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"设备编号","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.enterpriseDeviceNo?r.enterpriseDeviceNo:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"设备位置","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.enterpriseDevicePosition?r.enterpriseDevicePosition:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"devicePlace",label:"设备产地","show-overflow-tooltip":"",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型","show-overflow-tooltip":"",width:"130",align:"center"}}),r("el-table-column",{attrs:{label:"设备型号","show-overflow-tooltip":"",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.deviceModel?r.deviceModel:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"deviceBrand",label:"设备品牌","show-overflow-tooltip":"",width:"90",align:"center"}}),r("el-table-column",{attrs:{prop:"deviceSystemName",label:"设备系统","show-overflow-tooltip":"",width:"140",align:"center"}}),r("el-table-column",{attrs:{prop:"serviceTime",label:"服务时间","show-overflow-tooltip":"",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"contactsPeople",label:"联系人","show-overflow-tooltip":"",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"contactsPhone",label:"联系电话","show-overflow-tooltip":"",width:"160",align:"center"}}),r("el-table-column",{attrs:{prop:"masterRealName",label:"师傅名称","show-overflow-tooltip":"",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.masterRealName?r.masterRealName:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"师傅联系电话","show-overflow-tooltip":"",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.masterPhone?r.masterPhone:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"业务员","show-overflow-tooltip":"",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.salesmanName&&"/"!=a.salesmanName?r("div",[e._v(" "+e._s(a.salesmanName)+" ")]):e._e(),a.salesmanName&&"/"!=a.salesmanName?e._e():r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openBindSalesmanDialog(a.orderSn)}}},[e._v("未绑定")])]}}])}),r("el-table-column",{attrs:{prop:"orderStatusName",label:"状态","show-overflow-tooltip":"",width:"90",fixed:"right",align:"center"}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"120","show-overflow-tooltip":"",align:"center"}}),r("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.orderSn?r("div",{staticClass:"settings"},[r("el-dropdown",{attrs:{trigger:"click"}},[r("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#409eff"}},[e._v(" 操作"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[1==a.orderType?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openConvertToInsurance(a.orderSn)}}},[e._v("转类型")]):e._e()],1),r("el-dropdown-item",[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openRemarksDialog(a)}}},[e._v("备注")])],1),r("el-dropdown-item",[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.copyOrder(a)}}},[e._v("复制")])],1),r("el-dropdown-item",[1==a.orderType?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.setOrderTag(a)}}},[e._v("设置")]):e._e()],1)],1)],1)],1):r("div",{staticClass:"settings"},[r("el-button",{staticStyle:{"font-size":"14px","margin-right":"10px","font-weight":"400"},attrs:{type:"text",plain:""},on:{click:function(t){return e.deleteRepairOrder(a)}}},[e._v("删除")])],1)]}}])})],1),r("el-dialog",{attrs:{title:"绑定业务员",width:"25%",visible:e.bindSalesmanDialogVisible,"close-on-click-modal":!1,"before-close":e.closeBindSalesmanDialog,center:""}},[r("el-select",{attrs:{filterable:"",remote:"",placeholder:"请输入业务员名字","remote-method":e.searchSalesman},model:{value:e.bindSalesmanParams.salesmanId,callback:function(t){e.$set(e.bindSalesmanParams,"salesmanId",t)},expression:"bindSalesmanParams.salesmanId"}},e._l(e.salesmanOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.realName,value:e.id}})})),1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeBindSalesmanDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.bindSalesman}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"散单转类型",width:"30%",visible:e.openConvertToInsuranceShow,"before-close":e.closeConvertToInsurance,center:""}},[r("el-form",{attrs:{"label-width":"70px"}},[r("el-form-item",{attrs:{label:"类型选择"}},[r("el-radio-group",{model:{value:e.convertToInsuranceparams.type,callback:function(t){e.$set(e.convertToInsuranceparams,"type",t)},expression:"convertToInsuranceparams.type"}},[r("el-radio",{attrs:{label:2}},[e._v("转年保")]),r("el-radio",{attrs:{label:3}},[e._v("转年卡")])],1)],1),r("el-form-item",{attrs:{label:"设备编号"}},[r("el-input",{attrs:{rows:4,placeholder:"请输入设备编号"},model:{value:e.convertToInsuranceparams.no,callback:function(t){e.$set(e.convertToInsuranceparams,"no",t)},expression:"convertToInsuranceparams.no"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeConvertToInsurance}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.convertToInsurance}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"备注",width:"30%","before-close":e.closeRemarksDialog,visible:e.remarksDialogVisible,"close-on-click-modal":!1}},[r("div",{staticClass:"auditDialog"},[r("el-form",{attrs:{"label-width":"80px"}},[e.orderTag&&e.orderTag.length>0?r("el-form-item",{attrs:{label:"标签:"}},e._l(e.orderTag,(function(t){return r("el-button",{key:t,attrs:{type:e.judgeTagSelected(t)?"primary":"",size:"small"},on:{click:function(r){return e.addTag(t)}}},[e._v(e._s(t))])})),1):e._e(),r("el-form-item",{attrs:{label:"自定义:"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"100","show-word-limit":""},model:{value:e.handleRepairRemarksParamsCopy.remark,callback:function(t){e.$set(e.handleRepairRemarksParamsCopy,"remark",t)},expression:"handleRepairRemarksParamsCopy.remark"}})],1),e.orderRemark?r("el-form-item",{attrs:{label:"备注:"}},[e._v(" "+e._s(e.orderRemark)+" ")]):e._e()],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeRemarksDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleRepairRemarks}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"选择标签",width:"35%",visible:e.setOrderTagDialogVisible,"close-on-click-modal":!1,"before-close":e.closeSetOrderTagDialog,center:""}},[r("el-radio-group",{model:{value:e.handleOrderLabelParams.label,callback:function(t){e.$set(e.handleOrderLabelParams,"label",t)},expression:"handleOrderLabelParams.label"}},e._l(e.lablelList,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[r("el-tag",{attrs:{type:t.type}},[e._v(e._s(t.value))])],1)})),1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeSetOrderTagDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleOrderLabel}},[e._v("确 定")])],1)],1)],1)}),s=[],c=r("2909"),u=(r("a15b"),r("a434"),r("ac1f"),r("1276"),r("caad"),r("2532"),r("159b"),r("c24f")),d=r("f8b7"),m=r("8593"),p={name:"RepairOrderListTable",props:{params:{type:Object,required:!0}},data:function(){return{repairOrderList:[],bindSalesmanDialogVisible:!1,bindSalesmanParams:{salesmanId:null,orderSn:null},salesmanOptions:[],openConvertToInsuranceShow:!1,convertToInsuranceparams:{orderSn:null,no:null,type:null},remarksDialogVisible:!1,handleRepairRemarksParamsCopy:{labelList:[],remark:null},chooseOrderSn:null,orderTag:[],setOrderTagDialogVisible:!1,handleOrderLabelParams:{label:null,orderSn:null},lablelList:[{value:"普通",type:""},{value:"199",type:"success"},{value:"299",type:"warning"}]}},computed:{orderRemark:function(){var e=this.handleRepairRemarksParamsCopy,t=e.labelList,r=e.remark,a=Object(c["a"])(t);return r&&a.push(r),a.join(";")}},methods:{deleteRepairOrder:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("您确定要该订单吗？","删除订单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:if(a=r.sent,"confirm"!=a){r.next=8;break}return r.next=6,Object(d["l"])(e.id);case 6:n=r.sent,"000"==n.code&&(t.$message({message:"删除成功！",type:"success"}),t._queryRepairOrderList());case 8:case"end":return r.stop()}}),r)})))()},cleanTableChoose:function(){this.$refs.repairOrderListTableRef.clearSelection()},handleSelectionChange:function(e){this.$emit("change-tableSelection",e)},handleOrderLabel:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.handleOrderLabelParams.label){t.next=3;break}return e.$message({message:"请填写标签内容",type:"warning"}),t.abrupt("return");case 3:return"普通"==e.handleOrderLabelParams.label&&(e.handleOrderLabelParams.label=""),t.next=6,Object(d["bb"])(e.handleOrderLabelParams);case 6:if(r=t.sent,"000"!=r.code){t.next=12;break}return e.$message({message:r.message,type:"success"}),t.next=11,e.queryRepairOrderList();case 11:e.closeSetOrderTagDialog();case 12:case"end":return t.stop()}}),t)})))()},closeSetOrderTagDialog:function(){this.handleOrderLabelParams={label:null,orderSn:null},this.setOrderTagDialogVisible=!1},setOrderTag:function(e){this.handleOrderLabelParams.orderSn=e.orderSn,e.label?this.handleOrderLabelParams.label=e.label:this.handleOrderLabelParams.label="普通",this.setOrderTagDialogVisible=!0},copyOrder:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("您是否根据【".concat(e.orderSn,"】复制一个新的订单号?"),"复制订单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:if(a=r.sent,"confirm"!=a){r.next=8;break}return r.next=6,Object(d["h"])(e.orderSn);case 6:n=r.sent,"000"==n.code&&(t.$message({message:"复制成功！",type:"success"}),t.queryRepairOrderList());case 8:case"end":return r.stop()}}),r)})))()},addTag:function(e){var t=this.handleRepairRemarksParamsCopy.labelList,r=t.indexOf(e);r>-1?t.splice(r,1):t.push(e)},getSysLabel:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["m"])("orderRemarkTag");case 2:r=t.sent,"000"==r.code&&r.data&&(e.orderTag=r.data.split(","));case 4:case"end":return t.stop()}}),t)})))()},judgeTagSelected:function(e){return this.handleRepairRemarksParamsCopy.labelList.includes(e)},handleRepairRemarks:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={orderSn:e.chooseOrderSn,remarks:e.orderRemark},t.next=3,Object(d["lb"])(r);case 3:a=t.sent,"000"==a.code&&(e.$message({message:a.message,type:"success"}),e.closeRemarksDialog(),e.queryRepairOrderList());case 5:case"end":return t.stop()}}),t)})))()},closeRemarksDialog:function(){this.handleRepairRemarksParamsCopy={labelList:[],remark:null},this.chooseOrderSn=null,this.remarksDialogVisible=!1},openRemarksDialog:function(e){var t=this;if(e.remarks){var r=e.remarks.split(";");r.forEach((function(e){t.orderTag.includes(e)?t.handleRepairRemarksParamsCopy.labelList.push(e):t.handleRepairRemarksParamsCopy.remark=e}))}this.chooseOrderSn=e.orderSn,this.remarksDialogVisible=!0},convertToInsurance:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["g"])(e.convertToInsuranceparams);case 2:r=t.sent,"操作成功"===r.message&&(e.$message({message:"操作成功",type:"success"}),e.closeConvertToInsurance(),e.queryRepairOrderList());case 4:case"end":return t.stop()}}),t)})))()},closeConvertToInsurance:function(){this.openConvertToInsuranceShow=!1,this.convertToInsuranceparams={orderSn:null,no:null}},openConvertToInsurance:function(e){this.convertToInsuranceparams.orderSn=e,this.openConvertToInsuranceShow=!0},bindSalesman:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["c"])(e.bindSalesmanParams);case 2:if(r=t.sent,"000"!=r.code){t.next=7;break}return t.next=6,e.queryRepairOrderList();case 6:e.closeBindSalesmanDialog();case 7:case"end":return t.stop()}}),t)})))()},searchSalesman:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["t"])({pageNo:1,pageSize:100,realName:e,recommendName:null});case 2:a=r.sent,"000"==a.code&&(t.salesmanOptions=a.data.records);case 4:case"end":return r.stop()}}),r)})))()},closeBindSalesmanDialog:function(){this.bindSalesmanParams.salesmanId=null,this.bindSalesmanParams.orderSn=null,this.salesmanOptions=[],this.bindSalesmanDialogVisible=!1},openBindSalesmanDialog:function(e){this.bindSalesmanParams.orderSn=e,this.bindSalesmanDialogVisible=!0},goToOrderDesc:function(e){var t=this.$router.resolve({name:"maintenance_order_desc",query:{orderSn:e.orderSn}});window.open(t.href,"_blank")},queryRepairOrderList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["Pb"])(e.params);case 2:r=t.sent,"000"==r.code&&(e.repairOrderList=r.data.records,e.$emit("change-paginationTotal",r.data.total));case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.queryRepairOrderList(),this.getSysLabel()}},b=p,f=r("2877"),h=Object(f["a"])(b,i,s,!1,null,"44d7e0d9",null),v=h.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"orderSummaryTable"},[r("el-table",{attrs:{data:e.orderSummaryTableList,border:""}},[r("el-table-column",{attrs:{prop:"month",label:"月份",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"degree",label:"紧急程度",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.degreeName?r.degreeName:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"createTime",label:"故障日期",width:"140",align:"center"}}),r("el-table-column",{attrs:{prop:"orderSn",label:"订单编号",width:"150",fixed:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goToOrderDesc(a)}}},[e._v(e._s(a.orderSn))])]}}])}),r("el-table-column",{attrs:{label:"订单类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(1==r.orderType?"散单":2==r.orderType?"年保":3==r.orderType?"年卡":"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"orderStatusName",label:"订单状态",width:"110",align:"center"}}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"企业名称",width:"140"}}),r("el-table-column",{attrs:{prop:"lastOrderCreateTime",label:"距上次下单",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.lastOrderCreateTime?r.lastOrderCreateTime:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"contactsPeople",label:"联系人",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"contactsPhone",label:"联系电话",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"address",label:"客户地址",width:"250"}}),r("el-table-column",{attrs:{prop:"enterpriseDeviceNo",label:"客户机台号",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.enterpriseDeviceNo?r.enterpriseDeviceNo:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"no",label:"设备编码",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.no?r.no:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"deviceSystemName",label:"设备系统",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.deviceSystemName?r.deviceSystemName:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"deviceBrand",label:"设备品牌",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"devicePlace",label:"设备产地",width:"80",align:"center"}}),r("el-table-column",{attrs:{prop:"simpleDesc",label:"故障描述",width:"200"}}),r("el-table-column",{attrs:{label:"派单时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.assignTime?r.assignTime:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"masterRealName",label:"师傅姓名",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.masterRealName?r.masterRealName:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"masterType",label:"师傅类型",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.masterType?r.masterType:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"多师傅接单",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.multipleWorkMaster)+" ")]}}])}),r("el-table-column",{attrs:{label:"业务员",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.salesmanName?r.salesmanName:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"完成时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.submitCheckTime?r.submitCheckTime:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"人工费(企业)",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.doorAmount?r.doorAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"配件费(企业)",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.partsAmount?r.partsAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"税金(企业)",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.invoiceAmount?r.invoiceAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"优惠减免(企业)",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.discountAmount?r.discountAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"payAmount",label:"支付金额(企业)",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.payAmount?r.payAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"维修时长",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.workDuration?r.workDuration:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"返修次数",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.returnCount?r.returnCount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"是否收款",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.payFlag)+" ")]}}])}),r("el-table-column",{attrs:{label:"客服",width:"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"请填写负责人"},model:{value:a.kefuName,callback:function(t){e.$set(a,"kefuName",t)},expression:"row.kefuName"}}):r("div",[e._v(" "+e._s(a.kefuName?a.kefuName:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"单量",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-input",{attrs:{size:"small",type:"number",placeholder:"请选择"},on:{input:function(t){return e.changeValidOrderNum(a)}},model:{value:a.validOrderNum,callback:function(t){e.$set(a,"validOrderNum",e._n(t))},expression:"row.validOrderNum"}}):r("div",[e._v(" "+e._s(a.validOrderNum?a.validOrderNum+"单":"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"回访日期",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",size:"small"},model:{value:a.visitDate,callback:function(t){e.$set(a,"visitDate",t)},expression:"row.visitDate"}}):r("div",[e._v(e._s(a.visitDate?a.visitDate:"/"))])]}}])}),r("el-table-column",{attrs:{label:"交单日期",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",size:"small"},model:{value:a.documentSubmitDate,callback:function(t){e.$set(a,"documentSubmitDate",t)},expression:"row.documentSubmitDate"}}):r("div",[e._v(" "+e._s(a.documentSubmitDate?a.documentSubmitDate:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"返修原因",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"输入返修原因"},model:{value:a.reworkReason,callback:function(t){e.$set(a,"reworkReason",t)},expression:"row.reworkReason"}}):r("div",[e._v(e._s(a.reworkReason?a.reworkReason:"/"))])]}}])}),r("el-table-column",{attrs:{label:"跟踪详情",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"输入跟踪详情"},model:{value:a.orderFollow,callback:function(t){e.$set(a,"orderFollow",t)},expression:"row.orderFollow"}}):r("div",[e._v(e._s(a.orderFollow?a.orderFollow:"/"))])]}}])}),r("el-table-column",{attrs:{label:"回访结果",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"输入回访结果"},model:{value:a.visitResult,callback:function(t){e.$set(a,"visitResult",e._n(t))},expression:"row.visitResult"}}):r("div",[e._v(e._s(a.visitResult?a.visitResult:"/"))])]}}])}),r("el-table-column",{attrs:{label:"停机状况",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.orderSummaryTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"输入停机情况"},model:{value:a.shutdownSituation,callback:function(t){e.$set(a,"shutdownSituation",t)},expression:"row.shutdownSituation"}}):r("div",[e._v(" "+e._s(a.shutdownSituation?a.shutdownSituation:"/")+" ")])]}}])})],1)],1)},g=[],w={name:"OrderSummaryTable",props:{params:{type:Object,required:!0}},data:function(){return{orderSummaryTableList:[],orderSummaryTableListEdit:!1}},computed:{},methods:{goToOrderDesc:function(e){var t=this.$router.resolve({name:"maintenance_order_desc",query:{orderSn:e.orderSn}});window.open(t.href,"_blank")},updateOnlineRepairOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["Zb"])(e.orderSummaryTableList);case 2:if(r=t.sent,"000"!=r.code){t.next=8;break}return t.next=6,e.queryRepairOrderList();case 6:e.orderSummaryTableListEdit=!1,e.$emit("change-orderSummaryTableListEdit",!1);case 8:case"end":return t.stop()}}),t)})))()},changeOrderSummaryTableListEdit:function(e){this.orderSummaryTableListEdit=e,0==e&&this.queryRepairOrderList()},queryRepairOrderList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["Pb"])(e.params);case 2:r=t.sent,"000"==r.code&&(e.orderSummaryTableList=r.data.records,e.$emit("change-paginationTotal",r.data.total));case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.queryRepairOrderList()}},k=w,S=Object(f["a"])(k,y,g,!1,null,"fa428e4c",null),T=S.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"handoverSheetTable"},[r("el-table",{attrs:{border:"",data:e.checklistTableList}},[r("el-table-column",{attrs:{prop:"month",label:"故障日期",width:"140",fixed:"",align:"center"}}),r("el-table-column",{attrs:{prop:"relationOrderSn",label:"平台订单号",width:"150",fixed:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goToOrderDesc(a)}}},[e._v(e._s(a.relationOrderSn))])]}}])}),r("el-table-column",{attrs:{prop:"orderSn",label:"师傅订单号",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"企业名称",width:"140"}}),r("el-table-column",{attrs:{label:"订单类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.orderTypeName?r.orderTypeName:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"工单渠道",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.workOrderChannel?r.workOrderChannel:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"工单属性",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.workOrderProperty?r.workOrderProperty:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"师傅",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.masterRealName?r.masterRealName:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"masterType",label:"师傅类型",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.masterType?r.masterType:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"师傅人工",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.doorAmount?r.doorAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"师傅代买配件费",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.partsAmount?r.partsAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"运营费用25%",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("div",{style:{color:a.serviceAmount>0?"red":""}},[e._v(" "+e._s(a.serviceAmount?a.serviceAmount:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"质保金",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("div",{style:{color:a.retentionMoney>0?"red":""}},[e._v(" "+e._s(a.retentionMoney?a.retentionMoney:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"应付师傅总费用",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.payAmount?r.payAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"散单应收款",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.enterprisePayAmount?r.enterprisePayAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"客户验收",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.checkTime)+" ")]}}])}),r("el-table-column",{attrs:{label:"申请人",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.checklistTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"请填写申请人"},model:{value:a.kefuName,callback:function(t){e.$set(a,"kefuName",t)},expression:"row.kefuName"}}):r("div",[e._v(" "+e._s(a.kefuName?a.kefuName:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"客服交单时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.checklistTableListEdit?r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",size:"small"},model:{value:a.documentSubmitDate,callback:function(t){e.$set(a,"documentSubmitDate",t)},expression:"row.documentSubmitDate"}}):r("div",[e._v(" "+e._s(a.documentSubmitDate?a.documentSubmitDate:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"提成",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.checklistTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"输入提成"},model:{value:a.commission,callback:function(t){e.$set(a,"commission",e._n(t))},expression:"row.commission"}}):r("div",[e._v(" "+e._s(a.commission?a.commission:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"单量",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.checklistTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"输入单量"},model:{value:a.validOrderNum,callback:function(t){e.$set(a,"validOrderNum",e._n(t))},expression:"row.validOrderNum"}}):r("div",[e._v(" "+e._s(a.validOrderNum?a.validOrderNum:"/")+" ")])]}}])}),r("el-table-column",{attrs:{label:"备注",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.checklistTableListEdit?r("el-input",{attrs:{size:"small",placeholder:"输入备注"},model:{value:a.remark,callback:function(t){e.$set(a,"remark",t)},expression:"row.remark"}}):r("div",[e._v(" "+e._s(a.remark?a.remark:"/")+" ")])]}}])})],1)],1)},_=[],R={name:"HandoverSheetTable",props:{params:{type:Object,required:!0}},data:function(){return{checklistTableList:[],checklistTableListEdit:!1}},computed:{},methods:{updateOnlineEnrollRepairOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["Yb"])(e.checklistTableList);case 2:if(r=t.sent,"000"!=r.code){t.next=8;break}return t.next=6,e.queryEnrollRepairOrderList();case 6:e.checklistTableListEdit=!1,e.$emit("change-checklistTableListEdit",!1);case 8:case"end":return t.stop()}}),t)})))()},changeChecklistTableListEdit:function(e){this.checklistTableListEdit=e,0==e&&this.queryEnrollRepairOrderList()},goToOrderDesc:function(e){var t=this.$router.resolve({name:"maintenance_order_desc",query:{orderSn:e.relationOrderSn}});window.open(t.href,"_blank")},queryEnrollRepairOrderList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["ub"])(e.params);case 2:r=t.sent,"000"==r.code&&(e.checklistTableList=r.data.records,e.$emit("change-paginationTotal",r.data.total));case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.queryEnrollRepairOrderList()}},x=R,L=Object(f["a"])(x,O,_,!1,null,"a31154ec",null),P=L.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"accountTable"},[r("el-table",{ref:"accountTableRef",attrs:{data:e.repairOrderList,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"month",label:"月份",align:"center"}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":"",align:"center"}}),r("el-table-column",{attrs:{prop:"orderSn",label:"订单号","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goToOrderDesc(a)}}},[e._v(e._s(a.orderSn))])]}}])}),r("el-table-column",{attrs:{prop:"simpleDesc",label:"故障描述","show-overflow-tooltip":"",width:"200",align:"center"}}),r("el-table-column",{attrs:{label:"设备码","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.no?r.no:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"机台号","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.enterpriseDeviceNo?r.enterpriseDeviceNo:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"masterRealName",label:"师傅姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.masterRealName?r.masterRealName:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"人工费",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.doorAmount?r.doorAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"配件费",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.partsAmount?r.partsAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"税金",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.invoiceAmount?r.invoiceAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{label:"优惠减免费用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.discountAmount?r.discountAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"payAmount",label:"总金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.payAmount?r.payAmount:"/")+" ")]}}])}),r("el-table-column",{attrs:{prop:"checkTime",label:"验收时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.checkTime?r.checkTime:"/")+" ")]}}])})],1)],1)},N=[],$={name:"AccountTable",props:{params:{type:Object,required:!0}},data:function(){return{repairOrderList:[]}},computed:{},methods:{cleanTableChoose:function(){this.$refs.accountTableRef.clearSelection()},handleSelectionChange:function(e){this.$emit("change-tableSelection",e)},queryRepairOrderList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(e.params)),r.pageType=4,t.next=4,Object(d["Pb"])(r);case 4:a=t.sent,"000"==a.code&&(e.repairOrderList=a.data.records,e.$emit("change-paginationTotal",a.data.total));case 6:case"end":return t.stop()}}),t)})))()},goToOrderDesc:function(e){var t=this.$router.resolve({name:"maintenance_order_desc",query:{orderSn:e.orderSn}});window.open(t.href,"_blank")}},created:function(){this.queryRepairOrderList()}},j=$,E=Object(f["a"])(j,q,N,!1,null,"38817168",null),C=E.exports,D=r("17eb"),B=r("2f62"),A={components:{RepairOrderListTable:v,OrderSummaryTable:T,HandoverSheetTable:P,AccountTable:C},data:function(){return{mchNameList:["广东机将信息科技有限公司","东莞市机之工匠科技有限公司"],taxRateList:[{label:"1%",value:0},{label:"6%",value:.05},{label:"13%",value:.12}],tableType:1,multipleSelection:[],accountSelection:[],accountSelectionCopy:[],queryRepairOrderListParams:{pageNo:1,pageSize:10,masterUid:null,orderType:null,orderSn:null,enterpriseName:null,degree:null,no:null,settlementType:null,dataExamineStatus:null,deviceTypeId:null,deviceModel:null,queryTime:null,searchTime:null,timeoutFlag:!1,snkFlag:!1,status:null},paginationTotal:0,orderSummaryTableListEdit:!1,masterSearchList:[],orderTypeList:[{label:"全部",value:null},{label:"散单",value:1},{label:"年保",value:2},{label:"年卡",value:3}],degreeList:[{label:"全部",value:null},{label:"一般",value:1},{label:"常规",value:0},{label:"紧急",value:2}],settlementTypeList:[{label:"全部",value:null},{label:"现结",value:1},{label:"月结",value:2}],dataExamineStatusList:[{label:"全部",value:null},{label:"审核中",value:1},{label:"审核通过",value:2},{label:"审核驳回",value:3}],serviceTypesProps:{checkStrictly:!1,emitPath:!1,multiple:!1,value:"id",label:"name",children:"list"},deviceTypeList:[],orderSubscript:{},generateBillParams:{mchName:null,enterpriseName:null,relationOrderSnList:null,taxRateValue:0},generateBillParamsRules:{mchName:[{required:!0,message:"请选择甲方",trigger:"change"}],enterpriseName:[{required:!0,message:"请输入乙方",trigger:"blur"}],taxRateValue:[{required:!0,message:"请选择税率",trigger:"blur"}]},previewGenerateBillInfoVisible:!1,statusObjList:[{str:"totalNum",num:null,desc:"全部"},{str:"discardNum",num:-2,desc:"已废弃"},{str:"cancelNum",num:-1,desc:"已取消"},{str:"waitAssignNum",num:0,desc:"待指派"},{str:"waitReceiveNum",num:1,desc:"待接单"},{str:"waitServiceNum",num:2,desc:"待服务"},{str:"serviceNum",num:3,desc:"服务中"},{str:"waitCheckNum",num:4,desc:"待验收"},{str:"waitCollectionNum",num:5,desc:"待收/付款"},{str:"completeNum",num:6,desc:"已完成"}]}},computed:Object(o["a"])({},Object(B["c"])(["sidebar"])),methods:{closePreviewGenerateBill:function(){this.accountSelectionCopy=[],this.generateBillParams={mchName:null,enterpriseName:null,relationOrderSnList:null,taxRateValue:0},this.$refs["generateBillFormRef"].resetFields(),this.previewGenerateBillInfoVisible=!1},changeTaxRate:function(e){if(0===e)this.accountSelectionCopy=JSON.parse(JSON.stringify(this.accountSelection));else{var t=JSON.parse(JSON.stringify(this.accountSelection));t=t.map((function(t){for(var r=Object(o["a"])({},t),a=["doorAmount","partsAmount","payAmount"],n=0,l=a;n<l.length;n++){var i=l[n],s=t[i];if("number"===typeof s&&!isNaN(s)){var c=Math.round(s*(1+e)*100)/100;r[i]=Number.isInteger(c)?Math.floor(c):c}}return r})),this.accountSelectionCopy=t}},openPreviewGenerateBill:function(){this.accountSelectionCopy=JSON.parse(JSON.stringify(this.accountSelection)),this.generateBillParams.enterpriseName=this.accountSelection[0].enterpriseName,this.previewGenerateBillInfoVisible=!0},generateBill:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.generateBillFormRef.validate();case 2:return r=e.accountSelection.map((function(e){return String(e.orderSn)})),e.generateBillParams.taxRateLabel=.12===e.generateBillParams.taxRateValue?"13%":.05===e.generateBillParams.taxRateValue?"6%":"1%",e.generateBillParams.relationOrderSnList=r,t.next=7,Object(d["D"])(e.generateBillParams);case 7:if(a=t.sent,"000"!=a.code){t.next=15;break}return window.open(a.data,"_blank"),e.$message({message:"操作成功",type:"success"}),t.next=13,e.closePreviewGenerateBill();case 13:e.accountSelection=[],e.$refs.accountTableRef.cleanTableChoose();case 15:case"end":return t.stop()}}),t)})))()},handleTableExport:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:2==e.tableType?e.handleExport(1e3,d["X"],"订单总表"):3==e.tableType&&e.handleExport(1e3,d["Y"],"交接单");case 1:case"end":return t.stop()}}),t)})))()},changeOrderSummaryTableListEdit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.orderSummaryTableListEdit=!0,2!=e.tableType){t.next=6;break}return t.next=4,e.$refs.orderSummaryTableRef.changeOrderSummaryTableListEdit(!0);case 4:t.next=9;break;case 6:if(3!=e.tableType){t.next=9;break}return t.next=9,e.$refs.handoverSheetTableRef.changeChecklistTableListEdit(!0);case 9:case"end":return t.stop()}}),t)})))()},cancelOnlineRepairOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(2!=e.tableType){t.next=5;break}return t.next=3,e.$refs.orderSummaryTableRef.changeOrderSummaryTableListEdit(!1);case 3:t.next=8;break;case 5:if(3!=e.tableType){t.next=8;break}return t.next=8,e.$refs.handoverSheetTableRef.changeChecklistTableListEdit(!1);case 8:e.orderSummaryTableListEdit=!1;case 9:case"end":return t.stop()}}),t)})))()},updateOnlineRepairOrder:function(){2==this.tableType?this.$refs.orderSummaryTableRef.updateOnlineRepairOrder():3==this.tableType&&this.$refs.handoverSheetTableRef.updateOnlineEnrollRepairOrder()},changeOrderSummaryTableListEditBack:function(e){this.orderSummaryTableListEdit=e},tableTypeListFn:function(e){var t=1==e?"默认":2==e?"订单总表":3==e?"交接单":"对账单";e==this.tableType?this.$message({message:"您已经在 【".concat(t,"】 页面"),type:"warning"}):this.tableType=e},handleBatchProxyPayment:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.multipleSelection.map((function(e){return String(e.orderSn)})),t.next=3,Object(D["a"])({orderSnList:r});case 3:if(a=t.sent,"000"!=a.code){t.next=12;break}return e.$message({message:"操作成功",type:"success"}),e.multipleSelection=[],e.$refs.repairOrderListTableRef.cleanTableChoose(),t.next=10,e.getOrderSubscript();case 10:return t.next=12,e.$refs.repairOrderListTableRef.queryRepairOrderList();case 12:case"end":return t.stop()}}),t)})))()},changeTableSelection:function(e){1==this.tableType?this.multipleSelection=e:4==this.tableType&&(this.accountSelection=e)},changePageSize:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.queryRepairOrderListParams.pageSize=e,t.multipleSelection=[],t.$refs.repairOrderListTableRef&&t.$refs.repairOrderListTableRef.cleanTableChoose(),t.accountSelection=[],t.$refs.accountTableRef&&t.$refs.accountTableRef.cleanTableChoose(),1!=t.tableType){r.next=10;break}return r.next=8,t.$refs.repairOrderListTableRef.queryRepairOrderList();case 8:r.next=23;break;case 10:if(2!=t.tableType){r.next=15;break}return r.next=13,t.$refs.orderSummaryTableRef.queryRepairOrderList();case 13:r.next=23;break;case 15:if(3!=t.tableType){r.next=20;break}return r.next=18,t.$refs.handoverSheetTableRef.queryEnrollRepairOrderList();case 18:r.next=23;break;case 20:if(4!=t.tableType){r.next=23;break}return r.next=23,t.$refs.accountTableRef.queryRepairOrderList();case 23:case"end":return r.stop()}}),r)})))()},changePageNo:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.queryRepairOrderListParams.pageNo=e,t.multipleSelection=[],t.$refs.repairOrderListTableRef&&t.$refs.repairOrderListTableRef.cleanTableChoose(),t.accountSelection=[],t.$refs.accountTableRef&&t.$refs.accountTableRef.cleanTableChoose(),1!=t.tableType){r.next=10;break}return r.next=8,t.$refs.repairOrderListTableRef.queryRepairOrderList();case 8:r.next=23;break;case 10:if(2!=t.tableType){r.next=15;break}return r.next=13,t.$refs.orderSummaryTableRef.queryRepairOrderList();case 13:r.next=23;break;case 15:if(3!=t.tableType){r.next=20;break}return r.next=18,t.$refs.handoverSheetTableRef.queryEnrollRepairOrderList();case 18:r.next=23;break;case 20:if(4!=t.tableType){r.next=23;break}return r.next=23,t.$refs.accountTableRef.queryRepairOrderList();case 23:case"end":return r.stop()}}),r)})))()},changeInquireMasterFn:function(e){var t=this.masterSearchList.findIndex((function(t){return t.uid==e}));this.queryRepairOrderListParams.masterName=this.masterSearchList[t].realName},handleExport:function(e,t,r){var a=arguments,n=this;return Object(l["a"])(regeneratorRuntime.mark((function l(){var o,i,s;return regeneratorRuntime.wrap((function(l){while(1)switch(l.prev=l.next){case 0:if(a.length>3&&void 0!==a[3]?a[3]:"维保列表",!(n.paginationTotal>e)){l.next=4;break}return n.$message({message:"查询条数过多,请缩小搜索范围再导出",type:"warning"}),l.abrupt("return");case 4:return o=n.$loading({lock:!0,text:"数据传输中",spinner:"el-icon-loading"}),l.prev=5,i=JSON.parse(JSON.stringify(n.queryRepairOrderListParams)),i.pageSize=1e4,l.next=10,t(i);case 10:s=l.sent,null!==s&&void 0!==s&&s.data&&n.downloadFile(s.data,r),l.next=18;break;case 14:l.prev=14,l.t0=l["catch"](5),console.error("导出失败:",l.t0),n.$message({message:"导出失败，请稍后重试",type:"error"});case 18:return l.prev=18,o.close(),l.finish(18);case 21:case"end":return l.stop()}}),l,null,[[5,14,18,21]])})))()},downloadFile:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/vnd.ms-excel",a=document.createElement("a"),n=new Blob([e],{type:r});a.style.display="none",a.href=URL.createObjectURL(n),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)},exportListFn:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("导出"!=e){r.next=5;break}return r.next=3,t.handleExport(500,d["ib"],"维保列表");case 3:r.next=7;break;case 5:return r.next=7,t.handleExport(1e3,d["hb"],"维保企业列表");case 7:case"end":return r.stop()}}),r)})))()},changeOrderState:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.queryRepairOrderListParams.pageNo=1,e.multipleSelection=[],e.$refs.repairOrderListTableRef&&e.$refs.repairOrderListTableRef.cleanTableChoose(),e.accountSelection=[],e.$refs.accountTableRef&&e.$refs.accountTableRef.cleanTableChoose(),1!=e.tableType){t.next=10;break}return t.next=8,e.$refs.repairOrderListTableRef.queryRepairOrderList();case 8:t.next=23;break;case 10:if(2!=e.tableType){t.next=15;break}return t.next=13,e.$refs.orderSummaryTableRef.queryRepairOrderList();case 13:t.next=23;break;case 15:if(3!=e.tableType){t.next=20;break}return t.next=18,e.$refs.handoverSheetTableRef.queryEnrollRepairOrderList();case 18:t.next=23;break;case 20:if(4!=e.tableType){t.next=23;break}return t.next=23,e.$refs.accountTableRef.queryRepairOrderList();case 23:case"end":return t.stop()}}),t)})))()},resetTableList:function(){var e=this;this.queryRepairOrderListParams={pageNo:1,pageSize:10,masterUid:null,orderType:null,orderSn:null,enterpriseName:null,degree:null,no:null,settlementType:null,dataExamineStatus:null,deviceTypeId:null,deviceModel:null,queryTime:null,searchTime:null,timeoutFlag:!1,snkFlag:!1,status:null},this.multipleSelection=[],this.$refs.repairOrderListTableRef&&this.$refs.repairOrderListTableRef.cleanTableChoose(),this.accountSelection=[],this.$refs.accountTableRef&&this.$refs.accountTableRef.cleanTableChoose(),setTimeout(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!=e.tableType){t.next=5;break}return t.next=3,e.$refs.repairOrderListTableRef.queryRepairOrderList();case 3:t.next=18;break;case 5:if(2!=e.tableType){t.next=10;break}return t.next=8,e.$refs.orderSummaryTableRef.queryRepairOrderList();case 8:t.next=18;break;case 10:if(3!=e.tableType){t.next=15;break}return t.next=13,e.$refs.handoverSheetTableRef.queryEnrollRepairOrderList();case 13:t.next=18;break;case 15:if(4!=e.tableType){t.next=18;break}return t.next=18,e.$refs.accountTableRef.queryRepairOrderList();case 18:e.getOrderSubscript();case 19:case"end":return t.stop()}}),t)}))),500)},searchTableList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.queryRepairOrderListParams.pageNo=1,e.multipleSelection=[],e.$refs.repairOrderListTableRef&&e.$refs.repairOrderListTableRef.cleanTableChoose(),e.accountSelection=[],e.$refs.accountTableRef&&e.$refs.accountTableRef.cleanTableChoose(),1!=e.tableType){t.next=10;break}return t.next=8,e.$refs.repairOrderListTableRef.queryRepairOrderList();case 8:t.next=23;break;case 10:if(2!=e.tableType){t.next=15;break}return t.next=13,e.$refs.orderSummaryTableRef.queryRepairOrderList();case 13:t.next=23;break;case 15:if(3!=e.tableType){t.next=20;break}return t.next=18,e.$refs.handoverSheetTableRef.queryEnrollRepairOrderList();case 18:t.next=23;break;case 20:if(4!=e.tableType){t.next=23;break}return t.next=23,e.$refs.accountTableRef.queryRepairOrderList();case 23:e.getOrderSubscript();case 24:case"end":return t.stop()}}),t)})))()},changePaginationTotal:function(e){this.paginationTotal=e},getOrderSubscript:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["G"])(e.queryRepairOrderListParams);case 2:r=t.sent,"000"==r.code&&(e.orderSubscript=r.data);case 4:case"end":return t.stop()}}),t)})))()},changeSearchTime:function(e){this.queryRepairOrderListParams.queryTime=e[0]+"~"+e[1]},queryDeviceTypeList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["tb"])();case 2:r=t.sent,"000"==r.code&&(e.deviceTypeList=r.data);case 4:case"end":return t.stop()}}),t)})))()},getMasterList:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["d"])({realName:e});case 2:a=r.sent,t.masterSearchList=a.data.records;case 4:case"end":return r.stop()}}),r)})))()}},created:function(){this.queryDeviceTypeList(),this.getOrderSubscript()}},I=A,F=Object(f["a"])(I,a,n,!1,null,"15d11236",null);t["default"]=F.exports},"17eb":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"i",(function(){return s})),r.d(t,"m",(function(){return c})),r.d(t,"j",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"k",(function(){return p})),r.d(t,"l",(function(){return b})),r.d(t,"e",(function(){return f})),r.d(t,"c",(function(){return h}));var a=r("b775");function n(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleEnterpriseCheck?orderSn="+e,method:"GET"})}function l(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleProxyConfirmQuotation",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleProxyPayment?orderSn="+e,method:"get"})}function i(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleBatchProxyPayment",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleReleaseComment",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleTakeOrder",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleRemindStarted",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handlePhotographPunch",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleMasterQuotation",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleStartService?orderSn="+e,method:"get"})}function b(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleSubmitAcceptance",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleOnlineOrder?orderSn="+e,method:"get"})}function h(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleEnterpriseNegotiatedPrice",method:"post",data:e})}},"8ba4":function(e,t,r){var a=r("23e7"),n=r("eac5");a({target:"Number",stat:!0},{isInteger:n})},a15b:function(e,t,r){"use strict";var a=r("23e7"),n=r("e330"),l=r("44ad"),o=r("fc6a"),i=r("a640"),s=n([].join),c=l!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s(o(this),void 0===e?",":e)}})},c24f:function(e,t,r){"use strict";r.d(t,"g",(function(){return n})),r.d(t,"t",(function(){return l})),r.d(t,"k",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"u",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"n",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"e",(function(){return m})),r.d(t,"c",(function(){return p})),r.d(t,"v",(function(){return b})),r.d(t,"l",(function(){return f})),r.d(t,"m",(function(){return h})),r.d(t,"p",(function(){return v})),r.d(t,"q",(function(){return y})),r.d(t,"o",(function(){return g})),r.d(t,"h",(function(){return w})),r.d(t,"b",(function(){return k})),r.d(t,"s",(function(){return S})),r.d(t,"r",(function(){return T})),r.d(t,"i",(function(){return O})),r.d(t,"j",(function(){return _}));var a=r("b775");r("cb5c");function n(e){return Object(a["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/admin/business/handleSalesmanChatMapperBind",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/admin/userInfo/queryWithdrawal",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/admin/userInfo/handleWithdrawalExamine",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/admin/userInfo/handleWithdrawalExport",method:"post",responseType:"blob",data:e})}function v(e){return Object(a["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}function k(e){return Object(a["a"])({url:"/admin/userInfo/getAccountMoney?uid="+e,method:"get"})}function S(e){return Object(a["a"])({url:"/admin/userInfo/queryMoneyList",method:"post",data:e})}function T(e){return Object(a["a"])({url:"/admin/business/queryEnterpriseWechatList",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/admin/business/handleEnterpriseWechatBind",method:"post",data:e})}function _(){return Object(a["a"])({url:"/admin/business/handleRepairOrderBind",method:"post"})}},eac5:function(e,t,r){var a=r("861d"),n=Math.floor;e.exports=Number.isInteger||function(e){return!a(e)&&isFinite(e)&&n(e)===e}}}]);