(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45c4fea2"],{"6c2a":function(e,t,a){"use strict";a("bd6d")},bd6d:function(e,t,a){},c1bb:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"examineItem"},[a("el-card",[a("el-table",{attrs:{border:"",data:e.complaintList}},[a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{align:"center",prop:"realName",label:"师傅名称"}}),a("el-table-column",{attrs:{align:"center",label:"企业订单号"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(t){return e.goToOrderDetails(r.relationOrderSn)}}},[e._v(" "+e._s(r.relationOrderSn)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"orderSn",label:"师傅订单号"}}),a("el-table-column",{attrs:{align:"center",prop:"complaintContent",label:"投诉内容"}}),a("el-table-column",{attrs:{align:"center",label:"更多"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.platformProcessResult?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openJudgDialog(r,"详情")}}},[e._v("详情")]):a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openJudgDialog(r,"审核")}}},[e._v("审核")])]}}])})],1)],1),a("div",{staticClass:"tabelPagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.complaintListlenght,"page-size":e.queryRepairOrderComplaintParmas.pageSize},on:{"current-change":e.changePage}})],1),a("el-dialog",{attrs:{title:"审核投诉信息",visible:e.reviewComplaintVisible,"before-close":e.closeJudgDialog,"close-on-click-modal":!1,width:"40%",center:""}},[a("el-tabs",{model:{value:e.complaintActiveName,callback:function(t){e.complaintActiveName=t},expression:"complaintActiveName"}},[a("el-tab-pane",{attrs:{label:"基础信息",name:"first"}},[a("div",{staticClass:"reviewComplaintBox"},[a("el-descriptions",{attrs:{title:"投诉基础信息",column:2}},[a("el-descriptions-item",{attrs:{label:"企业名称"}},[e._v(e._s(e.complaintInfo[0]?e.complaintInfo[0].enterpriseName:"/"))]),a("el-descriptions-item",{attrs:{label:"订单号"}},[e._v(e._s(e.complaintInfo[0]?e.complaintInfo[0].relationOrderSn:"/"))]),"详情"==e.judgDialogType?a("el-descriptions-item",{attrs:{label:"平台处理结果"}},[e._v(e._s(e.complaintInfo[0]?e.complaintInfo[0].platformProcessResult:"/"))]):e._e(),"详情"==e.judgDialogType?a("el-descriptions-item",{attrs:{label:"平台备注"}},[e._v(e._s(e.complaintInfo[0]?e.complaintInfo[0].platformRemark:"/"))]):e._e()],1),e._l(e.complaintInfo,(function(t,r){return a("el-descriptions",{key:t.id,attrs:{title:0==r?"对师傅的投诉":"",column:2}},[a("el-descriptions-item",{attrs:{label:"投诉对象"}},[e._v(e._s(t.realName))]),a("el-descriptions-item",{attrs:{label:"投诉内容"}},[e._v(e._s(t.complaintContent))]),t.complaintImages?a("el-descriptions-item",{attrs:{label:"投诉图片"}},e._l(t.complaintImages,(function(e){return a("div",{key:e,staticStyle:{display:"inline-block","margin-right":"10px"}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e,"preview-src-list":t.complaintImages}})],1)})),0):e._e(),"详情"==e.judgDialogType?a("el-descriptions-item",{attrs:{label:"师傅处理结果"}},[e._v(e._s(t.masterProcessResult))]):e._e()],1)}))],2)]),"审核"==e.judgDialogType?a("el-tab-pane",{attrs:{label:"处理信息",name:"second"}},e._l(e.handleExamineRepairOrderComplaintParms.list,(function(t,r){return a("el-form",{key:t.orderSn},[a("el-form-item",{attrs:{label:"处理对象:"}},[e._v(" "+e._s(t.realName)+" ")]),a("el-form-item",{attrs:{label:"师傅处理结果:"}},[a("el-input",{attrs:{placeholder:"请输入师傅处理结果"},model:{value:t.masterProcessResult,callback:function(a){e.$set(t,"masterProcessResult",a)},expression:"item.masterProcessResult"}})],1),r==e.handleExamineRepairOrderComplaintParms.list.length-1?a("el-divider"):e._e(),r==e.handleExamineRepairOrderComplaintParms.list.length-1?a("el-form-item",{attrs:{label:"平台处理结果:(对外展示)"}},[a("el-input",{attrs:{placeholder:"请输入平台处理结果"},model:{value:t.platformProcessResult,callback:function(a){e.$set(t,"platformProcessResult",a)},expression:"item.platformProcessResult"}})],1):e._e(),r==e.handleExamineRepairOrderComplaintParms.list.length-1?a("el-form-item",{attrs:{label:"平台备注:(对内展示)"}},[a("el-input",{attrs:{placeholder:"请输入平台备注"},model:{value:t.platformRemark,callback:function(a){e.$set(t,"platformRemark",a)},expression:"item.platformRemark"}})],1):e._e()],1)})),1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["审核"==e.judgDialogType?a("el-button",{on:{click:e.closeJudgDialog}},[e._v("取 消")]):e._e(),"审核"==e.judgDialogType?a("el-button",{attrs:{type:"primary"},on:{click:e.handleExamineRepairOrderComplaint}},[e._v("确 定")]):e._e(),"详情"==e.judgDialogType?a("el-button",{on:{click:e.closeJudgDialog}},[e._v(" 关 闭 ")]):e._e()],1)],1)],1)},n=[],l=a("1da1"),i=(a("96cf"),a("498a"),a("159b"),a("ac1f"),a("1276"),a("d81d"),a("f8b7")),o={data:function(){return{complaintList:[],complaintListlenght:0,queryRepairOrderComplaintParmas:{pageNo:1,pageSize:10},reviewComplaintVisible:!1,complaintInfo:[],complaintActiveName:"first",handleExamineRepairOrderComplaintParms:{list:[{masterProcessResult:"",masterReply:"",orderSn:"",platformProcessResult:"",platformRemark:""}],relationOrderSn:""},judgDialogType:"审核"}},methods:{validateList:function(e){for(var t=0;t<e.length;t++){var a=e[t],r=a.masterProcessResult;if(null==r||""===String(r).trim())return this.$message({message:"".concat(a.realName,"师傅处理结果不能为空"),type:"warning"}),!1}var n=e[e.length-1],l=n.platformProcessResult,i=n.platformRemark;return null==l||""===String(l).trim()?(this.$message({message:"请填写平台处理结果，不能为空",type:"warning"}),!1):null!=i&&""!==String(i).trim()||(this.$message({message:"请填写平台备注，不能为空",type:"warning"}),{valid:!1})},handleExamineRepairOrderComplaint:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.validateList(e.handleExamineRepairOrderComplaintParms.list),!a){t.next=6;break}return t.next=4,Object(i["P"])(e.handleExamineRepairOrderComplaintParms);case 4:r=t.sent,"000"==r.code&&(e.$message({message:"操作成功",type:"success"}),e.closeJudgDialog(),e.queryRepairOrderComplaint());case 6:case"end":return t.stop()}}),t)})))()},goToOrderDetails:function(e){var t=this.$router.resolve({name:"maintenance_order_desc",query:{orderSn:e}});window.open(t.href,"_blank")},closeJudgDialog:function(){this.reviewComplaintVisible=!1,this.complaintInfo=[],this.complaintActiveName="first",this.handleExamineRepairOrderComplaintParms={list:[{masterProcessResult:"",masterReply:"",orderSn:"",platformProcessResult:"",platformRemark:""}],relationOrderSn:""}},openJudgDialog:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.judgDialogType=t,r.next=3,a.queryRepairOrderComplaintAll(e.relationOrderSn);case 3:a.reviewComplaintVisible=!0;case 4:case"end":return r.stop()}}),r)})))()},queryRepairOrderComplaintAll:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["Nb"])({pageNo:1,pageSize:10,relationOrderSn:e});case 2:r=a.sent,"000"==r.code&&(r.data.records.forEach((function(e){e.complaintImages&&(e.complaintImages=e.complaintImages.split(","))})),t.complaintInfo=r.data.records,t.handleExamineRepairOrderComplaintParms.list=r.data.records.map((function(e){return{masterProcessResult:"",masterReply:"",orderSn:e.orderSn,platformProcessResult:"",platformRemark:"",realName:e.realName}})),t.handleExamineRepairOrderComplaintParms.relationOrderSn=e);case 4:case"end":return a.stop()}}),a)})))()},changePage:function(e){this.queryRepairOrderComplaintParmas.pageNo=e,this.queryRepairOrderComplaint()},queryRepairOrderComplaint:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["Nb"])(e.queryRepairOrderComplaintParmas);case 2:a=t.sent,"000"==a.code&&(e.complaintList=a.data.records,e.complaintListlenght=a.data.total);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.queryRepairOrderComplaint()}},s=o,c=(a("6c2a"),a("2877")),m=Object(c["a"])(s,r,n,!1,null,"29a0a1f2",null);t["default"]=m.exports}}]);