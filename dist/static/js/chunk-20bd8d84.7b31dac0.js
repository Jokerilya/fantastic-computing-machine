(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20bd8d84"],{"019b":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"manage-top"},[t("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{"label-width":"80px","label-position":"right"},model:{value:e.searchForm,callback:function(r){e.searchForm=r},expression:"searchForm"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"师傅名称"}},[t("el-select",{attrs:{filterable:"",placeholder:"请选择","remote-method":e.searchMaster,remote:""},model:{value:e.searchForm.masterUid,callback:function(r){e.$set(e.searchForm,"masterUid",r)},expression:"searchForm.masterUid"}},e._l(e.masterSearchList,(function(e){return t("el-option",{key:e.uid,attrs:{label:e.realName,value:e.uid}})})),1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"订单状态"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(r){e.$set(e.searchForm,"status",r)},expression:"searchForm.status"}},e._l(e.util.global.mainStatus,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"订单类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.orderType,callback:function(r){e.$set(e.searchForm,"orderType",r)},expression:"searchForm.orderType"}},[t("el-option",{attrs:{label:"散单",value:1}},[e._v("散单")]),t("el-option",{attrs:{label:"年保",value:2}},[e._v("年保")])],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"平台状态"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.platformStatus,callback:function(r){e.$set(e.searchForm,"platformStatus",r)},expression:"searchForm.platformStatus"}},[t("el-option",{attrs:{label:"师傅取消",value:-1}},[e._v("师傅取消")]),t("el-option",{attrs:{label:"待检测定价",value:0}},[e._v("待检测定价")]),t("el-option",{attrs:{label:"待派发",value:1}},[e._v("待派发")]),t("el-option",{attrs:{label:"待审核定价",value:2}},[e._v("待审核定价")]),t("el-option",{attrs:{label:"待打款至师傅",value:3}},[e._v("待打款至师傅")])],1)],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"审核状态"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.finalExamineStatus,callback:function(r){e.$set(e.searchForm,"finalExamineStatus",r)},expression:"searchForm.finalExamineStatus"}},[t("el-option",{attrs:{label:"未审核",value:0}},[e._v("未审核")]),t("el-option",{attrs:{label:"部分审核",value:1}},[e._v("部分审核")]),t("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")])],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"企业名称"}},[t("el-input",{attrs:{placeholder:"企业名称"},model:{value:e.searchForm.enterpriseName,callback:function(r){e.$set(e.searchForm,"enterpriseName",r)},expression:"searchForm.enterpriseName"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"设备编码"}},[t("el-input",{attrs:{placeholder:"设备编码"},model:{value:e.searchForm.no,callback:function(r){e.$set(e.searchForm,"no",r)},expression:"searchForm.no"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"订单编号"}},[t("el-input",{attrs:{placeholder:"订单编号"},model:{value:e.searchForm.orderSn,callback:function(r){e.$set(e.searchForm,"orderSn",r)},expression:"searchForm.orderSn"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{icon:"el-icon-zoom-in",plain:"",type:"primary"},on:{click:e.query_queryRepairOrderList}},[e._v("查询")]),t("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"info"},on:{click:e.resetFn}},[e._v("重置")]),t("el-button",{attrs:{type:"success",plain:""},on:{click:e.exportList}},[e._v(" 导出 ")])],1)],1)],1)],1),t("div",{staticStyle:{height:"16px"}}),t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:e.dataList,height:"65vh"}},[t("el-table-column",{attrs:{prop:"orderSn",label:"订单编号","show-overflow-tooltip":"",width:"200",align:"center"}}),t("el-table-column",{attrs:{label:"工单类型","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){var t=r.row;return[e._v(" "+e._s(1===t.orderType?"普通":2===t.orderType?"年保":"年卡")+" ")]}}])}),t("el-table-column",{attrs:{prop:"enterpriseName",label:"企业名称","show-overflow-tooltip":"",width:"230",align:"center"}}),t("el-table-column",{attrs:{prop:"no",label:"设备编码","show-overflow-tooltip":"",width:"150",align:"center"}}),t("el-table-column",{attrs:{prop:"devicePlace",label:"设备产地","show-overflow-tooltip":"",width:"150",align:"center"}}),t("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型","show-overflow-tooltip":"",width:"130",align:"center"}}),t("el-table-column",{attrs:{prop:"deviceBrand",label:"设备品牌","show-overflow-tooltip":"",width:"90",align:"center"}}),t("el-table-column",{attrs:{prop:"deviceSystemName",label:"设备系统","show-overflow-tooltip":"",width:"140",align:"center"}}),t("el-table-column",{attrs:{prop:"serviceTime",label:"服务时间","show-overflow-tooltip":"",width:"150",align:"center"}}),t("el-table-column",{attrs:{prop:"simpleDesc",label:"故障描述","show-overflow-tooltip":"",width:"200",align:"center"}}),t("el-table-column",{attrs:{prop:"contactsPeople",label:"联系人","show-overflow-tooltip":"",width:"100",align:"center"}}),t("el-table-column",{attrs:{prop:"contactsPhone",label:"联系电话","show-overflow-tooltip":"",width:"160",align:"center"}}),t("el-table-column",{attrs:{prop:"masterRealName",label:"师傅名称","show-overflow-tooltip":"",width:"100",align:"center"}}),t("el-table-column",{attrs:{prop:"masterPhone",label:"师傅联系电话","show-overflow-tooltip":"",width:"160",align:"center"}}),t("el-table-column",{attrs:{prop:"comprehensiveScore",label:"客户综合评分","show-overflow-tooltip":"",width:"120",align:"center"}}),t("el-table-column",{attrs:{prop:"remarks",label:"备注","show-overflow-tooltip":"",width:"120",align:"center"}}),t("el-table-column",{attrs:{prop:"platformVisitMessage",label:"平台回访结果","show-overflow-tooltip":"",width:"120",align:"center"}}),t("el-table-column",{attrs:{prop:"orderStatusName",label:"状态","show-overflow-tooltip":"",width:"120",fixed:"right",align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":"",width:"120",fixed:"right",align:"center"}}),t("el-table-column",{attrs:{prop:"finalExamineStatusName",label:"审核状态","show-overflow-tooltip":"",width:"120",fixed:"right",align:"center"}}),t("el-table-column",{attrs:{label:"操作",width:"300",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.row;return[t("div",{staticClass:"settings"},[t("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:function(r){return e.queryDesc(a)}}},[e._v("详情")]),1==a.orderType?t("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:function(r){return e.openConvertToInsurance(a.orderSn)}}},[e._v("转类型")]):e._e(),t("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:function(r){return e.openRemarksDialog(a)}}},[e._v("备注")])],1)]}}])})],1),t("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.pageCount},on:{"current-change":e.updatePageNo}})],1)],1),t("el-dialog",{attrs:{title:"备注",width:"30%",visible:e.openRemarksShow,"before-close":e.closeRemarksDialog,center:""}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.remarksparams.remarks,callback:function(r){e.$set(e.remarksparams,"remarks",r)},expression:"remarksparams.remarks"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeRemarksDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.comfirmRemarks}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"散单转年保",width:"30%",visible:e.openConvertToInsuranceShow,"before-close":e.closeConvertToInsurance,center:""}},[t("el-form",[t("el-form-item",{attrs:{label:"类型选择","label-width":"70px"}},[t("el-radio-group",{model:{value:e.convertToInsuranceparams.type,callback:function(r){e.$set(e.convertToInsuranceparams,"type",r)},expression:"convertToInsuranceparams.type"}},[t("el-radio",{attrs:{label:2}},[e._v("转年保")]),t("el-radio",{attrs:{label:3}},[e._v("转年卡")])],1)],1),t("el-form-item",{attrs:{label:"设备编号","label-width":"70px"}},[t("el-input",{attrs:{rows:4,placeholder:"请输入设备编号"},model:{value:e.convertToInsuranceparams.no,callback:function(r){e.$set(e.convertToInsuranceparams,"no",r)},expression:"convertToInsuranceparams.no"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeConvertToInsurance}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.convertToInsurance}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"代下单",width:"30%",visible:e.replacePlaceOrderVisible,"close-on-click-modal":!1,"before-close":e.closeReplacePlaceOrderDialog,center:""}},[t("div",[t("el-form",{ref:"handleProxyCreateOrderRef",attrs:{"label-position":"left","label-width":"120px",model:e.handleProxyCreateOrderParams,rules:e.handleProxyCreateOrderRules}},[t("el-form-item",{attrs:{label:"设备编码",prop:"no"}},[t("el-input",{attrs:{placeholder:"请填写设备编码,例:粤Sxxxxxx"},on:{blur:e.getDeviceInfoByNo},model:{value:e.handleProxyCreateOrderParams.no,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"no",r)},expression:"handleProxyCreateOrderParams.no"}})],1),t("el-form-item",{attrs:{label:"故障类型",prop:"type"}},[t("el-radio-group",{model:{value:e.handleProxyCreateOrderParams.type,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"type",r)},expression:"handleProxyCreateOrderParams.type"}},[t("el-radio",{attrs:{label:1}},[e._v("电气故障")]),t("el-radio",{attrs:{label:2}},[e._v("机械故障")])],1)],1),t("el-form-item",{attrs:{label:"设备类型",prop:"deviceTypeId"}},[t("el-cascader",{attrs:{disabled:e.formItemDisabled,options:e.deviceTypeListOptions,"show-all-levels":!1,placeholder:"请选择设备类型"},on:{change:e.changeDeviceType},model:{value:e.handleProxyCreateOrderParams.deviceTypeId,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"deviceTypeId",r)},expression:"handleProxyCreateOrderParams.deviceTypeId"}})],1),t("el-form-item",{attrs:{label:"设备品牌",prop:"deviceBrand"}},[t("el-input",{attrs:{disabled:e.formItemDisabled,placeholder:"请填写设备品牌"},model:{value:e.handleProxyCreateOrderParams.deviceBrand,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"deviceBrand",r)},expression:"handleProxyCreateOrderParams.deviceBrand"}})],1),t("el-form-item",{attrs:{label:"设备型号",prop:"deviceModel"}},[t("el-input",{attrs:{disabled:e.formItemDisabled,placeholder:"请填写设备型号"},model:{value:e.handleProxyCreateOrderParams.deviceModel,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"deviceModel",r)},expression:"handleProxyCreateOrderParams.deviceModel"}})],1),t("el-form-item",{attrs:{label:"设备系统",prop:"deviceSystemId"}},[t("el-cascader",{attrs:{disabled:e.formItemDisabled,options:e.deviceSystemListOptions,"show-all-levels":!1,placeholder:"请选择设备系统"},on:{change:e.changeDeviceSystem},model:{value:e.handleProxyCreateOrderParams.deviceSystemId,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"deviceSystemId",r)},expression:"handleProxyCreateOrderParams.deviceSystemId"}})],1),t("el-form-item",{attrs:{label:"设备产地",prop:"devicePlace"}},[t("el-select",{attrs:{disabled:e.formItemDisabled,placeholder:"请选择设备产地"},model:{value:e.handleProxyCreateOrderParams.devicePlace,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"devicePlace",r)},expression:"handleProxyCreateOrderParams.devicePlace"}},e._l(e.devicePlaceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"故障部位",prop:"position"}},[t("el-cascader",{attrs:{options:e.positionOptions,"show-all-levels":!1,placeholder:"请选择故障部位"},on:{change:e.changePosition},model:{value:e.handleProxyCreateOrderParams.position,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"position",r)},expression:"handleProxyCreateOrderParams.position"}})],1),t("el-form-item",{attrs:{label:"联系人",prop:"contactsPeople"}},[t("el-input",{attrs:{placeholder:"请填写联系人"},model:{value:e.handleProxyCreateOrderParams.contactsPeople,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"contactsPeople",r)},expression:"handleProxyCreateOrderParams.contactsPeople"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"contactsPhone"}},[t("el-input",{attrs:{placeholder:"请填写联系电话"},model:{value:e.handleProxyCreateOrderParams.contactsPhone,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"contactsPhone",r)},expression:"handleProxyCreateOrderParams.contactsPhone"}})],1),t("el-form-item",{attrs:{label:"公司名称",prop:"enterpriseName"}},[t("el-input",{attrs:{disabled:e.formItemDisabled,placeholder:"请填写公司名称"},model:{value:e.handleProxyCreateOrderParams.enterpriseName,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"enterpriseName",r)},expression:"handleProxyCreateOrderParams.enterpriseName"}})],1),t("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[t("el-input",{attrs:{placeholder:"请填写联系地址"},model:{value:e.handleProxyCreateOrderParams.address,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"address",r)},expression:"handleProxyCreateOrderParams.address"}})],1),t("el-form-item",{attrs:{label:"期望时间",prop:"serviceTime"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择期望时间"},model:{value:e.handleProxyCreateOrderParams.serviceTime,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"serviceTime",r)},expression:"handleProxyCreateOrderParams.serviceTime"}})],1),t("el-form-item",{attrs:{label:"故障描述",prop:"simpleDesc"}},[t("el-input",{attrs:{placeholder:"请填写故障描述"},model:{value:e.handleProxyCreateOrderParams.simpleDesc,callback:function(r){e.$set(e.handleProxyCreateOrderParams,"simpleDesc",r)},expression:"handleProxyCreateOrderParams.simpleDesc"}})],1),t("el-form-item",{attrs:{label:"故障视图",prop:"images"}},[e.handleProxyCreateOrderParams.images?t("div",[t("el-button",{attrs:{type:"text"},on:{click:e.openFaultImg}},[e._v("查看视图")]),t("el-button",{attrs:{type:"text"},on:{click:e.delFaultImg}},[e._v("删除视图")])],1):t("div",[t("el-upload",{attrs:{accept:".jpg,.jpeg,.png,.mp4",action:"#","http-request":e.uploadFaultImg}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeReplacePlaceOrderDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleProxyCreateOrder}},[e._v("确 定")])],1)])],1)},n=[],s=t("5530"),o=t("1da1"),l=(t("159b"),t("b0c0"),t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("a15b"),t("4de4"),t("96cf"),t("c24f")),i=t("f8b7"),c=t("17eb"),u=t("8593"),d=t("ed08"),m={title:"course",data:function(){return{formItemDisabled:!1,handleProxyCreateOrderParams:{no:null,latitude:null,longitude:null,position:null,serviceTime:null,simpleDesc:null,type:null,images:null,enterpriseName:null,address:null,contactsPeople:null,areaId:null,contactsPhone:null,deviceBrand:null,deviceModel:null,devicePlace:null,deviceSystemId:null,deviceTypeId:null},handleProxyCreateOrderRules:{type:[{required:!0,message:"请选择故障类型",trigger:"change"}],deviceTypeId:[{required:!0,message:"请选择设备类型",trigger:"change"}],deviceBrand:[{required:!0,message:"请填写设备品牌",trigger:"blur"}],deviceModel:[{required:!0,message:"请填写设备型号",trigger:"blur"}],deviceSystemId:[{required:!0,message:"请选择设备系统",trigger:"change"}],devicePlace:[{required:!0,message:"请选择设备产地",trigger:"change"}],position:[{required:!0,message:"请选择故障部位",trigger:"change"}],contactsPeople:[{required:!0,message:"请填写联系人",trigger:"blur"}],address:[{required:!0,message:"请填写地址",trigger:"blur"}],serviceTime:[{required:!0,message:"请选择日期",trigger:"change"}],simpleDesc:[{required:!0,message:"请填写故障描述",trigger:"blur"}],images:[{required:!0,message:"请上传故障视图",trigger:"blur"}],enterpriseName:[{required:!0,message:"请填写公司名称",trigger:"blur"}],contactsPhone:[{required:!0,message:"请填写联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}]},replacePlaceOrderVisible:!1,deviceTypeListOptions:[],deviceSystemListOptions:[],positionOptions:[],devicePlaceOptions:[{value:"国产",label:"国产"},{value:"进口",label:"进口"}],masterSearchList:[],remarksparams:{remarks:null,orderSn:null},openRemarksShow:!1,convertToInsuranceparams:{orderSn:null,no:null,type:null},openConvertToInsuranceShow:!1,exportParams:null,searchForm:{masterUid:"",deviceTypeId:"",status:"",orderType:"",enterpriseName:"",no:"",platformStatus:"",orderSn:"",finalExamineStatus:null},dataList:[],pageCount:null,pageCountMaster:"",currentPage:1,tabelList:[],changeData:[],masterList:[],loading:!1,typeData:[],courseList:[],snatchList:[],courseDistriList:[],Name:"",Phone:"",enterpriseOrderSn:"",url:{query:"/admin/maintenance/queryRepairOrderList",querySnatch:"/admin/maintenance/queryMasterGrabOrderList",assign:"/admin/maintenance/handleAssignMaster",handleMasterQuotation:"/admin/maintenance/handleMasterQuotation"},rules:{worker:[{required:!0,message:"请输入接单人",trigger:"blur"}],workerPhone:[{required:!0,message:"请输入接单人手机",trigger:"blur"}]},finishForm:{payAmount:0},param:{},quotationForm:{}}},created:function(){var e;if(localStorage.getItem("queryRepairData")&&(e=JSON.parse(localStorage.getItem("queryRepairData"))),e){var r=e,t=r.pageNo,a=r.pageSize,n=r.enterpriseName,s=r.status,o=r.orderType,l=r.no,i=r.orderSn,c=r.platformStatus;this.currentPage=t,this.pageSize=a,this.searchForm.enterpriseName=n,this.searchForm.status=s,this.searchForm.orderType=o,this.searchForm.no=l,this.searchForm.orderSn=i,this.searchForm.platformStatus=c}else this.currentPage=1,this.pageSize=10;this._queryRepairOrderList()},methods:{handleProxyCreateOrder:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$refs["handleProxyCreateOrderRef"].validate();case 2:return r.next=4,Object(c["e"])(e.handleProxyCreateOrderParams);case 4:t=r.sent,"操作成功"==t.message&&(e.closeReplacePlaceOrderDialog(),e._queryRepairOrderList());case 6:case"end":return r.stop()}}),r)})))()},getDeviceInfoByNo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t,a,n,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["B"])(e.handleProxyCreateOrderParams.no);case 2:t=r.sent,t.data?(a=t.data,n=a.deviceBrand,s=a.deviceModel,o=a.devicePlace,l=a.deviceSystemId,c=a.deviceTypeId,u=a.enterpriseAddress,d=a.enterpriseName,e.handleProxyCreateOrderParams.deviceBrand=n,e.handleProxyCreateOrderParams.deviceModel=s,e.handleProxyCreateOrderParams.devicePlace=o,e.handleProxyCreateOrderParams.deviceSystemId=l,e.handleProxyCreateOrderParams.deviceTypeId=c,e.handleProxyCreateOrderParams.address=u,e.handleProxyCreateOrderParams.enterpriseName=d,e.formItemDisabled=!0):(e.handleProxyCreateOrderParams.deviceBrand=null,e.handleProxyCreateOrderParams.deviceModel=null,e.handleProxyCreateOrderParams.devicePlace=null,e.handleProxyCreateOrderParams.deviceSystemId=null,e.handleProxyCreateOrderParams.deviceTypeId=null,e.handleProxyCreateOrderParams.address=null,e.handleProxyCreateOrderParams.enterpriseName=null,e.formItemDisabled=!1);case 4:case"end":return r.stop()}}),r)})))()},openReplacePlaceOrderDialog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.queryDeviceTypeList();case 2:return r.next=4,e.queryDeviceSystemList();case 4:return r.next=6,e.queryFaultPosition();case 6:e.replacePlaceOrderVisible=!0;case 7:case"end":return r.stop()}}),r)})))()},closeReplacePlaceOrderDialog:function(){this.$refs["handleProxyCreateOrderRef"].resetFields(),this.handleProxyCreateOrderParams={no:null,latitude:null,longitude:null,position:null,serviceTime:null,simpleDesc:null,type:null,images:null,enterpriseName:null,address:null,contactsPeople:null,areaId:null,contactsPhone:null,deviceBrand:null,deviceModel:null,devicePlace:null,deviceSystemId:null,deviceTypeId:null},this.replacePlaceOrderVisible=!1},changePosition:function(e){this.handleProxyCreateOrderParams.position=e[e.length-1]},changeDeviceSystem:function(e){this.handleProxyCreateOrderParams.deviceSystemId=e[e.length-1]},changeDeviceType:function(e){this.handleProxyCreateOrderParams.deviceTypeId=e[e.length-1]},queryFaultPositionOne:function(e,r){return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],t.next=3,Object(i["mb"])(e);case 3:return n=t.sent,n.data.forEach((function(e){a.push({value:e,label:e})})),t.abrupt("return",{value:r,label:r,children:a});case 6:case"end":return t.stop()}}),t)})))()},queryFaultPosition:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.queryFaultPositionOne(1,"加工中心");case 2:return t=r.sent,r.next=5,e.queryFaultPositionOne(2,"数控车床");case 5:a=r.sent,e.positionOptions=[t,a];case 7:case"end":return r.stop()}}),r)})))()},queryDeviceSystemList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["gb"])();case 2:t=r.sent,t.data&&(a=[],t.data.forEach((function(e){var r=[];e.list&&e.list.forEach((function(e){r.push({value:e.id,label:e.name})})),a.push({value:e.id,label:e.name,children:r})})),e.deviceSystemListOptions=a);case 4:case"end":return r.stop()}}),r)})))()},queryDeviceTypeList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["hb"])();case 2:t=r.sent,t.data&&(a=[],t.data.forEach((function(e){var r=[];e.list&&e.list.forEach((function(e){r.push({value:e.id,label:e.name})})),a.push({value:e.id,label:e.name,children:r})})),e.deviceTypeListOptions=a);case 4:case"end":return r.stop()}}),r)})))()},uploadFaultImg:function(e){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e.file),t.next=4,Object(u["a"])(a);case 4:n=t.sent,"操作成功"==n.message&&(r.handleProxyCreateOrderParams.images=n.data);case 6:case"end":return t.stop()}}),t)})))()},delFaultImg:function(){this.handleProxyCreateOrderParams.images=""},openFaultImg:function(){window.open(this.handleProxyCreateOrderParams.images,"_blank")},convertToInsurance:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["f"])(e.convertToInsuranceparams);case 2:t=r.sent,"操作成功"===t.message&&(e.$message({message:"操作成功",type:"success"}),e.closeConvertToInsurance(),e._queryRepairOrderList());case 4:case"end":return r.stop()}}),r)})))()},closeConvertToInsurance:function(){this.openConvertToInsuranceShow=!1,this.convertToInsuranceparams={orderSn:null,no:null}},openConvertToInsurance:function(e){this.convertToInsuranceparams.orderSn=e,this.openConvertToInsuranceShow=!0},searchMaster:function(e){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])({realName:e});case 2:a=t.sent,r.masterSearchList=a.data.records,console.log(625,r.masterSearchList);case 5:case"end":return t.stop()}}),t)})))()},comfirmRemarks:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["Z"])(e.remarksparams);case 2:t=r.sent,"操作成功"===t.message&&(e.closeRemarksDialog(),e._queryRepairOrderList());case 4:case"end":return r.stop()}}),r)})))()},closeRemarksDialog:function(){this.remarksparams={remarks:null,orderSn:null},this.openRemarksShow=!1},openRemarksDialog:function(e){var r=e.orderSn,t=e.remarks;this.remarksparams.orderSn=r,this.remarksparams.remarks=t,this.openRemarksShow=!0},query_queryRepairOrderList:function(){this.currentPage=1,this._queryRepairOrderList()},exportList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var t,a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=e.$loading({lock:!0,text:"数据传输中",spinner:"el-icon-loading"}),e.exportParams.pageSize=1e4,r.next=4,Object(i["W"])(e.exportParams);case 4:a=r.sent,a&&(n=document.createElement("a"),s=new Blob([a.data],{type:"application/vnd.ms-excel"}),n.style.display="none",n.href=URL.createObjectURL(s),n.download="维保列表",document.body.appendChild(n),n.click(),document.body.removeChild(n),t.close());case 6:case"end":return r.stop()}}),r)})))()},resetFn:function(){this.currentPage=1,this.searchForm={deviceTypeId:"",status:"",orderType:"",enterpriseName:"",no:"",platformStatus:"",orderSn:"",finalExamineStatus:null},this._queryRepairOrderList()},templateDownload:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["k"])();case 2:r=e.sent,window.location.href=r.data;case 4:case"end":return e.stop()}}),e)})))()},workOrderImport:function(e){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e.file),t.next=4,Object(i["Nb"])(a);case 4:n=t.sent,"操作成功"===n.message&&(r.$message({message:"已成功批量下单",type:"success"}),r._queryAssignableMasterList(),r._queryRepairOrderList());case 6:case"end":return t.stop()}}),t)})))()},_queryAssignableMasterList:function(){var e=this,r={pageNo:this.currentPage,pageSize:10,realName:this.Name};Object(l["l"])(r).then((function(r){r&&(e.masterList=r.data.records,e.pageCountMaster=r.data.total,e.currentPage=r.data.current)}))},_queryRepairOrderList:function(){var e=this,r=Object(s["a"])({pageNo:this.currentPage,pageSize:10},this.searchForm);Object(d["b"])("queryRepairData",JSON.stringify(r)),this.exportParams=r,Object(i["Hb"])(r).then((function(r){r&&(e.dataList=r.data.records,e.pageCount=r.data.total)})).finally((function(){}))},updatePageNo:function(e){this.currentPage=e,this._queryRepairOrderList()},handleCurrentChange:function(e){this.currentPage=e,this._getMasterList()},changeMaster:function(e){console.log("row",e.uid),this.tabelList.push(e.uid),console.log("list",this.tabelList)},seedItout:function(){var e=this,r={enterpriseOrderSn:this.enterpriseOrderSn,masterUidList:[]};Object(l["i"])(r).then((function(r){console.log("指派师傅",r),r.success?(e.$message({showClose:!0,message:r.message,type:"success"}),e.$refs.snatch.close()):e.$message({showClose:!0,message:r.message,type:"false"})}))},seedIt:function(){var e=this,r=this.tabelList;r.join(","),console.log("选中id",r);var t={enterpriseOrderSn:this.enterpriseOrderSn,masterUidList:r};Object(l["i"])(t).then((function(r){console.log("指派师傅",r),r.success?(e.$message({showClose:!0,message:r.message,type:"success"}),e.$refs.snatch.close()):e.$message({showClose:!0,message:r.message,type:"false"})}))},queryDesc:function(e){this.$router.push({name:"maintenance_order_desc",query:{orderSn:e.orderSn}})},closeSnatch:function(e){e(!1)},assign:function(e){var r=this;this.$axios.post(this.url.assign,{enterpriseOrderSn:this.param.enterpriseOrderSn,masterOrderSn:e}).then((function(e){"000"==e.code&&(r.$message({showClose:!0,message:e.message,type:"success"}),r.$refs.snatch.close(),r.query())})).catch((function(e){console.error(e)}))},getType:function(e){return this.typeData.filter((function(r){if(r.id==e)return r}))[0].name},_handleAssignMaster:function(e){var r=this;console.log(e);var t={enterpriseOrderSn:this.enterpriseOrderSn,masterUid:e.uid};Object(l["i"])(t).then((function(e){console.log("指派师傅",e),e.success?(r.$message({showClose:!0,message:e.message,type:"success"}),r.$refs.snatch.close()):r.$message({showClose:!0,message:e.message,type:"false"})}))},_addOrder:function(){this.$router.push({name:"maintenance"})},_getMasterList:function(){var e=this,r={pageNo:this.currentPage,pageSize:10,realName:this.Name,phone:this.Phone};Object(l["e"])(r).then((function(r){r&&(e.masterList=r.data.records,console.log("师傅列表",e.masterList),e.pageCount=r.data.total,e.currentPage=r.data.current)}))}}},p=m,h=t("2877"),f=Object(h["a"])(p,a,n,!1,null,"5b788922",null);r["default"]=f.exports},"17eb":function(e,r,t){"use strict";t.d(r,"a",(function(){return n})),t.d(r,"d",(function(){return s})),t.d(r,"f",(function(){return o})),t.d(r,"j",(function(){return l})),t.d(r,"g",(function(){return i})),t.d(r,"c",(function(){return c})),t.d(r,"b",(function(){return u})),t.d(r,"h",(function(){return d})),t.d(r,"i",(function(){return m})),t.d(r,"e",(function(){return p}));var a=t("b775");function n(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleEnterpriseCheck?orderSn="+e,method:"GET"})}function s(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleProxyConfirmQuotation",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleProxyPayment?orderSn="+e,method:"get"})}function l(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleTakeOrder",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleRemindStarted",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handlePhotographPunch",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleMasterQuotation",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleStartService?orderSn="+e,method:"get"})}function m(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleSubmitAcceptance",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/admin/maintenance/proxy/handleProxyCreateOrder",method:"post",data:e})}},a15b:function(e,r,t){"use strict";var a=t("23e7"),n=t("e330"),s=t("44ad"),o=t("fc6a"),l=t("a640"),i=n([].join),c=s!=Object,u=l("join",",");a({target:"Array",proto:!0,forced:c||!u},{join:function(e){return i(o(this),void 0===e?",":e)}})},c24f:function(e,r,t){"use strict";t.d(r,"j",(function(){return n})),t.d(r,"p",(function(){return s})),t.d(r,"a",(function(){return o})),t.d(r,"q",(function(){return l})),t.d(r,"e",(function(){return i})),t.d(r,"l",(function(){return c})),t.d(r,"i",(function(){return u})),t.d(r,"f",(function(){return d})),t.d(r,"d",(function(){return m})),t.d(r,"b",(function(){return p})),t.d(r,"h",(function(){return h})),t.d(r,"g",(function(){return f})),t.d(r,"c",(function(){return v})),t.d(r,"n",(function(){return b})),t.d(r,"o",(function(){return g})),t.d(r,"m",(function(){return y})),t.d(r,"k",(function(){return P}));var a=t("b775");t("cb5c");function n(e){return Object(a["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function m(e){return Object(a["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/admin/userInfo/handleUserInfoStatus",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/admin/userInfo/handleAccountEdit",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/admin/userInfo/queryMoney",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/admin/userInfo/toVip",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function P(e){return Object(a["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}}}]);