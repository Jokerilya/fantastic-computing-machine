(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ea4cca3"],{4424:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"statisticsStatement"},[e("el-card",[e("h1",[t._v("订单统计报表")]),e("div",[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.timeChangeChart},model:{value:t.handleRepairOrderExportV2ParamsQuery,callback:function(a){t.handleRepairOrderExportV2ParamsQuery=a},expression:"handleRepairOrderExportV2ParamsQuery"}}),e("el-button",{staticStyle:{"margin-left":"20px"},on:{click:t.exportListV2}},[t._v(" 导出 ")]),e("el-button",{staticStyle:{"margin-left":"20px"},on:{click:t.exportByFaults}},[t._v(" 导出(故障项目) ")])],1),e("div",{staticClass:"chartBox"},[e("div",{staticClass:"chartLeft"},[t.chartLeftData.data.length>0?e("div",{style:{width:"700px",height:"600px"},attrs:{id:"chartLeft"}}):t._e(),e("div",{staticClass:"orderRank"},[e("div",[t._v(" 师傅完成订单排行 "),e("span",{staticStyle:{"margin-left":"30px"}},[t._v("合计:"+t._s(t.totalOrderNum)+"单")])]),t._l(t.chartLeftData.data.length,(function(a,r){return e("div",{key:a.name,staticClass:"masterItemOrder"},[e("div",{staticClass:"numLv",style:{color:0==r?"#e66a59":1==r?"#f4a739":2==r?"#f6ca3a":"#000"}},[t._v(" "+t._s(r+1)+" ")]),e("div",{staticClass:"masterName"},[t._v(t._s(t.chartLeftData.nameList[r]))]),e("div",[t._v("完成单量:"+t._s(t.chartLeftData.data[r])+"单")])])}))],2)]),e("div",{staticClass:"chartRight"},[t.chartLeftData.data.length>0?e("div",{style:{width:"700px",height:"600px"},attrs:{id:"chartRight"}}):t._e(),e("div",{staticClass:"orderRank"},[e("div",[t._v(" 师傅完成订单金额排行 "),e("span",{staticStyle:{"margin-left":"30px"}},[t._v("合计:"+t._s(t.totalOrderAmount)+"元")])]),t._l(t.chartRightData.data.length,(function(a,r){return e("div",{key:a.name,staticClass:"masterItemOrder"},[e("div",{staticClass:"numLv",style:{color:0==r?"#e66a59":1==r?"#f4a739":2==r?"#f6ca3a":"#000"}},[t._v(" "+t._s(r+1)+" ")]),e("div",{staticClass:"masterName"},[t._v(t._s(t.chartRightData.nameList[r]))]),e("div",[t._v("完成金额:"+t._s(t.chartRightData.data[r])+"元")])])}))],2)])])])],1)},n=[],i=e("1da1"),c=(e("159b"),e("4d90"),e("99af"),e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("96cf"),e("f8b7")),s={data:function(){return{chartLeftData:{chartName:"师傅完成订单对比图",data:[],nameList:[]},chartRightData:{chartName:"完成订单金额对比图",data:[],nameList:[]},handleRepairOrderExportV2ParamsQuery:null,handleRepairOrderExportV2Params:{query:""},totalOrderAmount:null,totalOrderNum:null}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.getNowDate(),a.next=3,t.queryMasterOrderRankData();case 3:t.drawChartLeft(),t.drawChartRight();case 5:case"end":return a.stop()}}),a)})))()},methods:{queryMasterOrderRankData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,r,n,i,s,o,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["Eb"])(t.handleRepairOrderExportV2Params);case 2:e=a.sent,r=e.data.orderNumList,n=[],i=[],r.forEach((function(t){n.push(t.value),i.push(t.realName)})),t.chartLeftData.data=n,t.chartLeftData.nameList=i,s=e.data.orderAmountList,o=[],d=[],s.forEach((function(t){o.push(t.value),d.push(t.realName)})),t.chartRightData.data=o,t.chartRightData.nameList=d,t.totalOrderAmount=e.data.totalOrderAmount,t.totalOrderNum=e.data.totalOrderNum;case 17:case"end":return a.stop()}}),a)})))()},getNowDate:function(){var t=new Date,a=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");t.getMonth()+1>=7?(this.handleRepairOrderExportV2ParamsQuery=["".concat(a,"-07-01"),"".concat(a,"-").concat(e,"-").concat(r)],this.handleRepairOrderExportV2Params.query="".concat(a,"-07-01~").concat(a,"-").concat(e,"-").concat(r)):(this.handleRepairOrderExportV2ParamsQuery=["".concat(a,"-01-01"),"".concat(a,"-").concat(e,"-").concat(r)],this.handleRepairOrderExportV2Params.query="".concat(a,"-01-01~").concat(a,"-").concat(e,"-").concat(r))},timeChangeChart:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a.handleRepairOrderExportV2Params.query=t[0]+"~"+t[1],e.next=4,a.queryMasterOrderRankData();case 4:a.drawChartLeft(),a.drawChartRight(),e.next=13;break;case 8:return a.handleRepairOrderExportV2Params.query=null,e.next=11,a.queryMasterOrderRankData();case 11:a.drawChartLeft(),a.drawChartRight();case 13:case"end":return e.stop()}}),e)})))()},exportByFaults:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.$loading({lock:!0,text:"数据传输中",spinner:"el-icon-loading"}),a.next=3,Object(c["cb"])(t.handleRepairOrderExportV2Params);case 3:r=a.sent,r&&(n=document.createElement("a"),i=new Blob([r.data],{type:"application/vnd.ms-excel"}),n.style.display="none",n.href=URL.createObjectURL(i),n.download="维保列表新版",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.close());case 5:case"end":return a.stop()}}),a)})))()},exportListV2:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.$loading({lock:!0,text:"数据传输中",spinner:"el-icon-loading"}),a.next=3,Object(c["db"])(t.handleRepairOrderExportV2Params);case 3:r=a.sent,r&&(n=document.createElement("a"),i=new Blob([r.data],{type:"application/vnd.ms-excel"}),n.style.display="none",n.href=URL.createObjectURL(i),n.download="维保列表新版",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.close());case 5:case"end":return a.stop()}}),a)})))()},drawChartLeft:function(){var t=this.$echarts.init(document.getElementById("chartLeft"));t.setOption({title:{text:this.chartLeftData.chartName,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:this.chartLeftData.nameList,inverse:!0},series:[{type:"bar",data:this.chartLeftData.data,itemStyle:{color:"#5470c6"}}]})},drawChartRight:function(){var t=this.$echarts.init(document.getElementById("chartRight"));t.setOption({title:{text:this.chartRightData.chartName,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:this.chartRightData.nameList,inverse:!0},series:[{type:"bar",data:this.chartRightData.data}]})}}},o=s,d=(e("a1c4"),e("2877")),l=Object(d["a"])(o,r,n,!1,null,"2e790424",null);a["default"]=l.exports},"7f5c":function(t,a,e){},a1c4:function(t,a,e){"use strict";e("7f5c")}}]);