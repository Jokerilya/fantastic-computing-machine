(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b8c3cfc"],{"58ef":function(t,e,i){},a15b:function(t,e,i){"use strict";var r=i("23e7"),a=i("e330"),n=i("44ad"),c=i("fc6a"),s=i("a640"),o=a([].join),l=n!=Object,u=s("join",",");r({target:"Array",proto:!0,forced:l||!u},{join:function(t){return o(c(this),void 0===t?",":t)}})},b792:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activityProductList"},[i("div",{staticClass:"activityProductList_btnline"},[i("el-button",{on:{click:function(e){return t.openAddEditActivityProductDialog(null)}}},[t._v("新增")])],1),i("el-card",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.activityProductList}},[i("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),i("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(1==i.type?"保养服务":2==i.type?"检测服务":"维保服务")+" ")]}}])}),i("el-table-column",{attrs:{align:"center",prop:"title",label:"标题"}}),i("el-table-column",{attrs:{align:"center",label:"主图"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[i("el-image",{staticStyle:{width:"120px",height:"90px"},attrs:{src:e.coverImage,"preview-src-list":[e.coverImage]}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"轮播图"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[i("el-image",{staticStyle:{width:"120px",height:"90px"},attrs:{src:e.images&&e.images[0],"preview-src-list":e.images}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"内容"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[i("el-image",{staticStyle:{width:"120px",height:"90px"},attrs:{src:e.content,fit:"cover","preview-src-list":[e.content]}})]}}])}),i("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"}}),i("el-table-column",{attrs:{align:"center",width:"80",prop:"sort",label:"排序"}}),i("el-table-column",{attrs:{align:"center",label:"更多"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[i("el-button",{attrs:{type:"text"},on:{click:function(e){return t.unmountProductFn(r)}}},[t._v(t._s(0==r.isShelves?"上架":"下架"))]),i("el-button",{attrs:{type:"text"},on:{click:function(e){return t.openAddEditActivityProductDialog(r)}}},[t._v("编辑")])]}}])})],1)],1),i("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.activityProductDialogTitle,visible:t.activityProductDialogVisible,"show-close":!1,center:"",width:"50%"}},[i("el-form",{ref:"queryActivityProductListRef",attrs:{"label-width":"100px","label-position":"left",model:t.queryActivityProductListParams,rules:t.queryActivityProductListRules}},[i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-radio-group",{model:{value:t.queryActivityProductListParams.type,callback:function(e){t.$set(t.queryActivityProductListParams,"type",e)},expression:"queryActivityProductListParams.type"}},[i("el-radio",{attrs:{label:1}},[t._v("保养服务")]),i("el-radio",{attrs:{label:2}},[t._v("检测服务")]),i("el-radio",{attrs:{label:3}},[t._v("维保服务")])],1)],1),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.queryActivityProductListParams.title,callback:function(e){t.$set(t.queryActivityProductListParams,"title",e)},expression:"queryActivityProductListParams.title"}})],1),i("el-form-item",{attrs:{label:"价格",prop:"price"}},[i("el-input",{attrs:{type:"number",placeholder:"请输入价格"},model:{value:t.queryActivityProductListParams.price,callback:function(e){t.$set(t.queryActivityProductListParams,"price",e)},expression:"queryActivityProductListParams.price"}})],1),i("el-form-item",{attrs:{label:"排序"}},[i("div",{staticStyle:{color:"#999","font-size":"26px"}},[t._v(" Tip:数字越低,排序越靠前 ")]),i("el-input",{attrs:{type:"number",placeholder:"请输入排序的顺序"},model:{value:t.queryActivityProductListParams.sort,callback:function(e){t.$set(t.queryActivityProductListParams,"sort",e)},expression:"queryActivityProductListParams.sort"}})],1),i("el-form-item",{attrs:{label:"封面图",prop:"coverImage"}},[i("div",{staticStyle:{color:"#999","font-size":"26px"}},[t._v(" Tip:封面图的尺寸最佳比例:宽 1486像素 : 高 1486像素 ")]),i("el-upload",{ref:"uploadCoverImageRef",attrs:{action:"#","list-type":"picture-card",multiple:!1,"file-list":t.coverImageFileList,"http-request":t.uploadCoverImageFileList,"on-remove":t.delCoverImage,limit:1}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form-item",{attrs:{label:"轮播图",prop:"images"}},[i("div",{staticStyle:{color:"#999","font-size":"26px"}},[t._v(" Tip:轮播图的尺寸最佳比例:宽 1486 像素 : 高 991 像素 ")]),i("el-upload",{ref:"uploadImageRef",attrs:{action:"#","list-type":"picture-card",limit:5,multiple:"","file-list":t.imagesFileList,"http-request":t.uploadImagesFileList,"on-remove":t.delImages}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form-item",{attrs:{label:"内容图",prop:"content"}},[i("div",{staticStyle:{color:"#999","font-size":"26px"}},[t._v(" 轮播图的尺寸最佳比例:宽750像素 ")]),i("el-upload",{ref:"uploadContentRef",attrs:{action:"#","list-type":"picture-card",multiple:!1,"file-list":t.contentFileList,"http-request":t.uploadContentFileList,"on-remove":t.delContent,limit:1}},[i("i",{staticClass:"el-icon-plus"})])],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeActivityProductDialog}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmActivityProduct}},[t._v("确 定")])],1)],1)],1)},a=[],n=i("5530"),c=i("1da1"),s=(i("c740"),i("a434"),i("159b"),i("a15b"),i("ac1f"),i("1276"),i("96cf"),i("8593")),o=i("ca41"),l={data:function(){return{activityProductList:[],activityProductDialogVisible:!1,activityProductDialogTitle:"新增活动产品",queryActivityProductListParams:{type:null,title:null,price:null,images:null,coverImage:null,content:null,sort:null},coverImageFileList:[],contentFileList:[],imagesFileList:[],queryActivityProductListRules:{type:[{required:!0,message:"请选择类型",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],coverImage:[{required:!0,message:"请上传封面图",trigger:"change"}],content:[{required:!0,message:"请上传内容图",trigger:"change"}],images:[{required:!0,message:"请上传轮播图",trigger:"change"}]}}},methods:{unmountProductFn:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$confirm("您是否".concat(0==t.isShelves?"上架":"下架","该活动产品"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:if(r=i.sent,"confirm"!=r){i.next=9;break}return a=0==t.isShelves?1:0,i.next=7,Object(o["t"])({id:t.id,isShelves:a});case 7:n=i.sent,"操作成功"==n.message&&(e.$message({message:n.message,type:"success"}),e.queryActivityProductList());case 9:case"end":return i.stop()}}),i)})))()},confirmActivityProduct:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs["queryActivityProductListRef"].validate();case 2:return e.next=4,Object(o["e"])(t.queryActivityProductListParams);case 4:i=e.sent,"操作成功"==i.message&&(t.$message({message:i.message,type:"success"}),t.queryActivityProductList(),t.closeActivityProductDialog());case 6:case"end":return e.stop()}}),e)})))()},closeActivityProductDialog:function(){this.activityProductDialogVisible=!1,this.queryActivityProductListParams={type:null,title:null,price:null,images:null,coverImage:null,content:null},this.coverImageFileList=[],this.contentFileList=[],this.imagesFileList=[],this.$refs.uploadImageRef.$children[1].$el.style.display="",this.$refs.uploadContentRef.$children[1].$el.style.display="",this.$refs.uploadCoverImageRef.$children[1].$el.style.display="",this.$refs["queryActivityProductListRef"].resetFields()},delImages:function(t){var e=this.imagesFileList.findIndex((function(e){return e.url==t.url}));this.imagesFileList.splice(e,1);var i=[];this.imagesFileList.forEach((function(t){i.push(t.url)})),this.queryActivityProductListParams.images=i.join(","),this.$refs.queryActivityProductListRef.validateField("images"),this.$refs.uploadImageRef.$children[1].$el.style.display=""},uploadImagesFileList:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=new FormData,r.append("file",t.file),i.next=4,Object(s["a"])(r);case 4:a=i.sent,e.imagesFileList.push({url:a.data}),n=[],e.imagesFileList.forEach((function(t){n.push(t.url)})),e.queryActivityProductListParams.images=n.join(","),e.$refs.queryActivityProductListRef.validateField("images"),e.imagesFileList.length>=5&&(e.$refs.uploadImageRef.$children[1].$el.style.display="none");case 11:case"end":return i.stop()}}),i)})))()},delContent:function(){this.contentFileList=[],this.queryActivityProductListParams.content=null,this.$refs.queryActivityProductListRef.validateField("content"),this.$refs.uploadContentRef.$children[1].$el.style.display=""},uploadContentFileList:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=new FormData,r.append("file",t.file),i.next=4,Object(s["a"])(r);case 4:a=i.sent,e.contentFileList=[{url:a.data}],e.queryActivityProductListParams.content=a.data,e.$refs.queryActivityProductListRef.validateField("content"),1==e.contentFileList.length&&(e.$refs.uploadContentRef.$children[1].$el.style.display="none");case 9:case"end":return i.stop()}}),i)})))()},delCoverImage:function(t){this.coverImageFileList=[],this.queryActivityProductListParams.coverImage=null,this.$refs.queryActivityProductListRef.validateField("coverImage"),this.$refs.uploadCoverImageRef.$children[1].$el.style.display=""},uploadCoverImageFileList:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=new FormData,r.append("file",t.file),i.next=4,Object(s["a"])(r);case 4:a=i.sent,e.coverImageFileList=[{url:a.data}],e.queryActivityProductListParams.coverImage=a.data,e.$refs.queryActivityProductListRef.validateField("coverImage"),1==e.coverImageFileList.length&&(e.$refs.uploadCoverImageRef.$children[1].$el.style.display="none");case 9:case"end":return i.stop()}}),i)})))()},openAddEditActivityProductDialog:function(t){var e=this;if(t){if(this.activityProductDialogTitle="编辑活动产品",this.activityProductDialogVisible=!0,this.queryActivityProductListParams=Object(n["a"])({},t),this.queryActivityProductListParams.coverImage&&(this.coverImageFileList=[{url:this.queryActivityProductListParams.coverImage}],setTimeout((function(){e.$refs.uploadCoverImageRef.$children[1].$el.style.display="none"}),300)),this.queryActivityProductListParams.content&&(this.contentFileList=[{url:this.queryActivityProductListParams.content}],setTimeout((function(){e.$refs.uploadContentRef.$children[1].$el.style.display="none"}),300)),this.queryActivityProductListParams.images){var i=[],r=[];this.queryActivityProductListParams.images.forEach((function(t){i.push({url:t}),r.push(t)})),this.queryActivityProductListParams.images=r.join(","),this.imagesFileList=i,this.imagesFileList.length>=5&&setTimeout((function(){e.$refs.uploadContentRef.$children[1].$el.style.display="none"}),300)}}else this.activityProductDialogVisible=!0,this.activityProductDialogTitle="新增活动产品"},queryActivityProductList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["n"])();case 2:i=e.sent,i.data.forEach((function(t){t.images&&(t.images=t.images.split(","))})),t.activityProductList=i.data;case 5:case"end":return e.stop()}}),e)})))()}},created:function(){this.queryActivityProductList()}},u=l,d=(i("c0c1"),i("2877")),m=Object(d["a"])(u,r,a,!1,null,"457eb21c",null);e["default"]=m.exports},c0c1:function(t,e,i){"use strict";i("58ef")},ca41:function(t,e,i){"use strict";i.d(e,"o",(function(){return a})),i.d(e,"f",(function(){return n})),i.d(e,"b",(function(){return c})),i.d(e,"q",(function(){return s})),i.d(e,"h",(function(){return o})),i.d(e,"p",(function(){return l})),i.d(e,"g",(function(){return u})),i.d(e,"s",(function(){return d})),i.d(e,"c",(function(){return m})),i.d(e,"a",(function(){return p})),i.d(e,"j",(function(){return f})),i.d(e,"r",(function(){return y})),i.d(e,"i",(function(){return v})),i.d(e,"d",(function(){return g})),i.d(e,"e",(function(){return h})),i.d(e,"n",(function(){return P})),i.d(e,"t",(function(){return b})),i.d(e,"m",(function(){return L})),i.d(e,"l",(function(){return A})),i.d(e,"k",(function(){return q}));var r=i("b775");i("cb5c");function a(t){return Object(r["a"])({url:"/admin/operation/queryOperationAd",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/admin/operation/editOperationAd",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/admin/operation/delOperationAd",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/admin/operation/queryOperation",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/admin/operation/editOperation",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/admin/coupon/list",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/admin/coupon/addOrUpdate",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/admin/coupon/receiveRecords",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/admin/coupon/delete?couponId="+t,method:"get"})}function p(t){return Object(r["a"])({url:"/admin/coupon/detail",method:"get",params:t})}function f(t){return Object(r["a"])({url:"/admin/coupon/give",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/admin/base/queryPartner",method:"post",data:t})}function v(t){return Object(r["a"])({url:"/admin/base/editPartner",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/admin/base/deletePartner",method:"get",params:t})}function h(t){return Object(r["a"])({url:"/admin/activity/editActivityProduct",method:"post",data:t})}function P(){return Object(r["a"])({url:"/admin/activity/queryActivityProductList",method:"get"})}function b(t){return Object(r["a"])({url:"/admin/activity/shelvesActivityProduct",method:"post",data:t})}function L(t){return Object(r["a"])({url:"/admin/activity/queryActivityOrderList",method:"post",data:t})}function A(t){return Object(r["a"])({url:"/admin/activity/queryActivityOrderDetail?relationOrderSn=".concat(t),method:"get"})}function q(t){return Object(r["a"])({url:"/admin/activity/handleActivityOrderAssign",method:"post",data:t})}}}]);