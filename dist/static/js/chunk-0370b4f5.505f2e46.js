(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0370b4f5"],{"38ba":function(t,e,n){},"3e83":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content_box"},[n("first-title",{attrs:{title:"商品分类管理"}}),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataConfig.loading,expression:"dataConfig.loading"}],ref:"dragTable",staticClass:"list",staticStyle:{width:"100%"},attrs:{data:t.dataList,"row-key":"id",border:"",lazy:"",load:t.load,"tree-props":{children:"children",hasChildren:"isSubset"}}},[n("el-table-column",{attrs:{label:"ID",fixed:"",width:"150",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?n("span",[t._v(t._s(e.row.id))]):t._e(),e.row.id?t._e():n("i",{staticClass:"el-icon-delete el_delete",on:{click:function(n){return t.deleteAddItemFn(e.$index)}}})]}}])}),n("el-table-column",{attrs:{label:"分类名称","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.row.name,callback:function(n){t.$set(e.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{label:"图标(官网)",fixed:"",width:"100",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("upload-img",{attrs:{radius:!0,img:e.row.icon},on:{uploadSuc:function(n){return t.upIconSucFn(n,e.$index)}}})]}}])}),n("el-table-column",{attrs:{label:"图标(小程序)",fixed:"",width:"130",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("upload-img",{attrs:{radius:!0,img:e.row.appletIcon},on:{uploadSuc:function(n){return t.upapplemtIconSucFn(n,e.$index)}}})]}}])}),n("el-table-column",{attrs:{label:"排序","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"number",placeholder:"请输入内容"},model:{value:e.row.sort,callback:function(n){t.$set(e.row,"sort",n)},expression:"scope.row.sort"}})]}}])}),n("el-table-column",{attrs:{label:"描述","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.row.description,callback:function(n){t.$set(e.row,"description",n)},expression:"scope.row.description"}})]}}])}),n("el-table-column",{attrs:{label:"是否显示",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{model:{value:e.row.isShow,callback:function(n){t.$set(e.row,"isShow",n)},expression:"scope.row.isShow"}})]}}])}),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"280",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.editItemFn(e.row)}}},[t._v("提交编辑")]),e.row.id?n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.deleteItemFn(e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1)},a=[],r=(n("d81d"),n("d3b7"),n("25f0"),n("b0c0"),n("a434"),n("ac1f"),n("1276"),n("a4d3"),n("e01a"),n("c4c8")),i=n("aa47"),c=n("1d6e"),u={name:"GoodsClass",components:{uploadImg:c["a"]},data:function(){return{fatherCategoryArr:[],dataList:[],pid:0,defDdata:{isShow:!1,name:"",icon:"",appletIcon:"",sort:0,pids:"",description:"",pidsArr:""},dataConfig:{loading:!0},categoryList:{lazy:!0,checkStrictly:!0,lazyLoad:function(t,e){Object(r["l"])({pid:t.value||0}).then((function(t){var n=t.data,o=n.map((function(t){return{value:t.id.toString(),label:t.name}}));e(o)}))}}}},beforeMount:function(){this.queryProductCategoryFn()},computed:{},watch:{},methods:{deleteItemFn:function(t){var e=this;this.deleteAlert().then((function(){var e=Object(r["b"])({id:t.id});return e})).then((function(t){var n=e.resDataFn(t);"000"===n&&(e.$message({showClose:!0,message:"操作成功！",type:"success"}),e.queryProductCategoryFn())}))},upIconSucFn:function(t,e){this.$set(this.dataList,e,Object.assign({},this.dataList[e],{icon:t}))},upapplemtIconSucFn:function(t,e){this.$set(this.dataList,e,Object.assign({},this.dataList[e],{appletIcon:t}))},addItemFn:function(){this.dataList.unshift(Object.assign({},this.defDdata))},deleteAddItemFn:function(t){this.dataList.splice(t,1)},editItemFn:function(t){var e=this;console.info(t),this.dataConfig.loading=!0;var n=t.pids.split(",");if(t.id==n[n.length-1])return this.$message({showClose:!0,message:"不能选择当前分类为父级！",type:"warning"}),void(this.dataConfig.loading=!1);Object(r["e"])({id:t.id,isShow:t.isShow?1:0,name:t.name,icon:t.icon,appletIcon:t.appletIcon,sort:t.sort,pids:t.pids,description:t.description}).then((function(t){e.dataConfig.loading=!1;var n=e.resDataFn(t);"000"===n&&(e.$message({showClose:!0,message:"操作成功！",type:"success"}),e.queryProductCategoryFn())})).catch((function(){e.dataConfig.loading=!1}))},backlastFcategoryFn:function(){var t=this.fatherCategoryArr;"0"!==t[0]&&(1===t.length?this.pid=0:this.pid=t[t.length-2],this.queryProductCategoryFn())},backFcategoryFn:function(){this.pid=0,this.queryProductCategoryFn()},getChildrenFn:function(t){this.pid=t,this.queryProductCategoryFn()},queryProductCategoryFn:function(){var t=this;Object(r["l"])({pid:this.pid}).then((function(e){var n=t.resDataFn(e);n.map((function(t){t.isShow=1==t.isShow})),t.dataList=n,t.dragInit()}))},load:function(t,e,n){var o=this;Object(r["l"])({pid:t.id}).then((function(t){var e=o.resDataFn(t);e.map((function(t){t.isShow=1==t.isShow})),n(e),o.$forceUpdate()}))},dragInit:function(){var t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];console.info(t),this.sortable=i["a"].create(t,{sort:!0,delay:0,ghostClass:"sortable-ghost",setData:function(t){t.setData("Text","")},onChoose:function(t){console.info(t),t.oldIndex},onUnchoose:function(t){console.info(t)},onStart:function(t){console.info(t),t.oldIndex},onEnd:function(t){console.info(t);t.item;t.to,t.from,t.oldIndex,t.newIndex,t.clone,t.pullMode}})}}},d=u,s=(n("f4fd"),n("2877")),l=Object(s["a"])(d,o,a,!1,null,"a864b8c2",null);e["default"]=l.exports},c4c8:function(t,e,n){"use strict";n.d(e,"l",(function(){return a})),n.d(e,"m",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"n",(function(){return u})),n.d(e,"k",(function(){return d})),n.d(e,"c",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"j",(function(){return p})),n.d(e,"p",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"o",(function(){return g})),n.d(e,"g",(function(){return b})),n.d(e,"d",(function(){return y})),n.d(e,"i",(function(){return w}));var o=n("b775");n("cb5c");function a(t){return Object(o["a"])({url:"/admin/product/queryProductCategory",method:"get",params:t})}function r(t){return Object(o["a"])({url:"/admin/product/queryProductFittingCategory",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/admin/product/editProductCategory",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/admin/product/delProductCategory",method:"get",params:t})}function u(t){return Object(o["a"])({url:"/admin/product/queryProduct",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/admin/product/handleProductDropOff",method:"get",params:t})}function s(t){return Object(o["a"])({url:"/admin/product/delProduct",method:"get",params:t})}function l(t){return Object(o["a"])({url:"/admin/product/getProductDetail",method:"get",params:t})}function f(t){return Object(o["a"])({url:"/admin/product/editProduct",method:"post",data:t})}function p(t){return Object(o["a"])({url:"/admin/product/queryRecommendProduct",method:"get",params:t})}function h(t){return Object(o["a"])({url:"/admin/product/updateRecommendProduct ",method:"post",data:t})}function m(t){return Object(o["a"])({url:"/admin/product/dataAcquisition",method:"post",data:t})}function g(t){return Object(o["a"])({url:"/admin/supplier/querySupplierList",method:"post",data:t})}function b(t){return Object(o["a"])({url:"/admin/supplier/editSupplier",method:"post",data:t})}function y(t){return Object(o["a"])({url:"/admin/supplier/deleteSupplier",method:"get",params:t})}function w(t){return Object(o["a"])({url:"/admin/supplier/getSupplier",method:"get",params:t})}},f4fd:function(t,e,n){"use strict";n("38ba")}}]);