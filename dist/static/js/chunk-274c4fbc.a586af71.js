(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-274c4fbc"],{"14e2":function(e,t,n){"use strict";n("5d80")},"17eb":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"g",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"j",(function(){return u})),n.d(t,"n",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return g}));var r=n("b775");function a(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleEnterpriseCheck?orderSn="+e,method:"GET"})}function i(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyConfirmQuotation",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyPayment?orderSn="+e,method:"get"})}function o(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleBatchProxyPayment",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleReleaseComment",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleTakeOrder",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleRemindStarted",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handlePhotographPunch",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleMasterQuotation",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleStartService?orderSn="+e,method:"get"})}function h(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleSubmitAcceptance",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyCreateOrder",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleOnlineOrder?orderSn="+e,method:"get"})}function g(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleEnterpriseNegotiatedPrice",method:"post",data:e})}},"5d80":function(e,t,n){},c24f:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"t",(function(){return i})),n.d(t,"k",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"u",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"v",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return b})),n.d(t,"p",(function(){return g})),n.d(t,"q",(function(){return y})),n.d(t,"o",(function(){return v})),n.d(t,"h",(function(){return O})),n.d(t,"b",(function(){return w})),n.d(t,"s",(function(){return k})),n.d(t,"r",(function(){return j})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return L}));var r=n("b775");n("cb5c");function a(e){return Object(r["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/admin/business/handleSalesmanChatMapperBind",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/admin/userInfo/queryWithdrawal",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/admin/userInfo/handleWithdrawalExamine",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/admin/userInfo/handleWithdrawalExport",method:"post",responseType:"blob",data:e})}function g(e){return Object(r["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/admin/userInfo/getAccountMoney?uid="+e,method:"get"})}function k(e){return Object(r["a"])({url:"/admin/userInfo/queryMoneyList",method:"post",data:e})}function j(e){return Object(r["a"])({url:"/admin/business/queryEnterpriseWechatList",method:"post",data:e})}function x(e){return Object(r["a"])({url:"/admin/business/handleEnterpriseWechatBind",method:"post",data:e})}function L(){return Object(r["a"])({url:"/admin/business/handleRepairOrderBind",method:"post"})}},d3c4:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"assignedWorker"},[n("div",{staticClass:"searchTool"},[n("div",{staticClass:"workerName"},[n("h4",{staticStyle:{color:"#999"}},[e._v("师傅名称")]),n("div",{staticClass:"inp",staticStyle:{"margin-right":"10px"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入你的师傅名称"},model:{value:e.params.realName,callback:function(t){e.$set(e.params,"realName",t)},expression:"params.realName"}})],1),n("h4",{staticStyle:{color:"#999"}},[e._v("服务地区")]),n("div",{staticClass:"inp"},[n("el-cascader",{attrs:{options:e.serviceAreasList,props:e.serviceAreasProps},model:{value:e.params.areaId,callback:function(t){e.$set(e.params,"areaId",t)},expression:"params.areaId"}})],1),n("h4",{staticStyle:{color:"#999",width:"90px","margin-left":"20px"}},[e._v("指派的师傅:")]),n("div",{staticClass:"assignedWorkerList"},e._l(e.masterNameList,(function(t){return n("span",{key:t,staticClass:"item"},[e._v(" "+e._s(t)+" ")])})),0)]),n("div",{staticClass:"operationBtnList"},[n("el-button",{attrs:{type:"primary"},on:{click:e.realNameBlurFn}},[e._v(" 搜索 ")]),n("el-button",{staticClass:"thrownIntoMarketBtn",attrs:{type:"success"},on:{click:e.handleTakeOrder}},[e._v("代师傅接单")]),n("el-button",{staticClass:"thrownIntoMarketBtn",attrs:{type:"success"},on:{click:function(t){return e.assignedBtn("worker")}}},[e._v("指派师傅")])],1)]),n("div",{staticClass:"workerTable"},[n("el-card",[n("el-table",{ref:"masterListRef",staticStyle:{width:"100%"},attrs:{height:"70vh","header-cell-style":{background:"#f6f8fc",color:"#707070"},data:e.masterList,"row-key":e.getRowKeys},on:{"selection-change":e.handleChangeWorker}},[n("el-table-column",{attrs:{label:"多选",type:"selection","reserve-selection":!0,width:"55"}}),n("el-table-column",{attrs:{label:"师傅头像",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("div",{staticStyle:{position:"relative",width:"70px",height:"70px"}},[n("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:r.realPortrait?r.realPortrait.split(",")[0]:""}}),r.number&&(r.number.includes("V")||r.number.includes("v"))?n("el-image",{staticStyle:{width:"70px",height:"70px",position:"absolute",left:"0",top:"0","z-index":"3"},attrs:{src:"https://snk-1305456087.cos.ap-guangzhou.myqcloud.com/user/20240927/AU04149909.png"}}):e._e()],1)]}}])}),n("el-table-column",{attrs:{prop:"realName",label:"师傅",align:"center",width:"150"}}),n("el-table-column",{attrs:{prop:"phone",label:"师傅电话",align:"center",width:"120"}}),n("el-table-column",{attrs:{label:"类型",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(3==n.type?"全职":2==n.type?"签约":"普通兼职")+" ")]}}])}),n("el-table-column",{attrs:{prop:"orderNum",label:"当月订单数量",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.orderNum)+"单 ")]}}])}),n("el-table-column",{attrs:{prop:"orderSnList",label:"目前维修订单号",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(r.orderSnList,(function(t){return n("div",{key:t},[n("a",{staticStyle:{color:"#60a7e1"},attrs:{type:"text"},on:{click:function(n){return e.queryDesc(t)}}},[e._v(e._s(t))])])})),0==r.orderSnList.length?n("div",[e._v("空闲师傅")]):e._e()]}}])}),n("el-table-column",{attrs:{prop:"serviceAreas",label:"服务地区",align:"center",width:"350"}}),n("el-table-column",{attrs:{prop:"serviceTypes",label:"服务类型",align:"center"}}),n("el-table-column",{attrs:{prop:"createTime",label:"入驻时间",align:"center",width:"130"}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("a",{staticClass:"operationBtn",attrs:{href:"#"},on:{click:function(t){return e.$router.push("/maintenance/worker/workerDetails?id="+r.id)}}},[e._v("详情")])]}}])})],1),n("div",{staticClass:"pagingTool"},[n("el-pagination",{attrs:{total:e.total,"page-size":10,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.currentChange}})],1)],1)],1),n("el-dialog",{attrs:{title:"区域指派",width:"30%",visible:e.regionChooseDialog,"show-close":!1}},[n("div",{staticClass:"content"},[n("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择市"},on:{change:e.cityValueChage},model:{value:e.cityValue,callback:function(t){e.cityValue=t},expression:"cityValue"}},e._l(e.cityList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),n("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择区"},model:{value:e.districtValue,callback:function(t){e.districtValue=t},expression:"districtValue"}},e._l(e.districtList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.regionChooseDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRegionChoose}},[e._v("确 定")])],1)])],1)},a=[],i=n("1da1"),s=(n("96cf"),n("159b"),n("a434"),n("17eb")),o=n("c24f"),u=n("8593"),c={data:function(){return{districtValue:null,districtList:null,cityValue:null,cityList:null,regionChooseDialog:!1,enterpriseOrderSn:"",params:{pageNo:1,pageSize:10,realName:"",areaId:null},serviceAreasList:[],serviceAreasProps:{checkStrictly:!1,emitPath:!1,value:"id",label:"name",children:"child"},masterList:[],total:null,masterUidList:[],masterNameList:[]}},mounted:function(){this.serviceAreasList=n("58fa")},methods:{queryDesc:function(e){var t=this.$router.resolve({name:"maintenance_order_desc",query:{orderSn:e}});window.open(t.href,"_blank")},getRowKeys:function(e){return e.id},handleChangeWorker:function(e){var t=[],n=[];e.forEach((function(e){t.push(e.uid),n.push(e.realName)})),this.masterUidList=t,this.masterNameList=n},handleTakeOrder:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.masterUidList.length>0&&e.masterUidList.length<2){t.next=3;break}return e.$message({message:"请选择一名师傅进行指派",type:"warning"}),t.abrupt("return");case 3:return n={uid:e.masterUidList[0],relationOrderSn:e.enterpriseOrderSn},t.next=6,Object(s["n"])(n);case 6:r=t.sent,"操作成功"==r.message&&(e.$message({message:"操作成功",type:"success"}),e.$router.push({name:"maintenance_order_desc",query:{orderSn:e.enterpriseOrderSn}}));case 8:case"end":return t.stop()}}),t)})))()},confirmRegionChoose:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["f"])({areaIdList:e.districtValue,enterpriseOrderSn:e.enterpriseOrderSn,masterUidList:null});case 2:n=t.sent,"操作成功"===n.message&&(e.$message({message:"指派成功",type:"success"}),e.$router.push({name:"maintenance_order_desc",query:{orderSn:e.enterpriseOrderSn}}));case 4:case"end":return t.stop()}}),t)})))()},cityValueChage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["d"])(e.cityValue);case 2:n=t.sent,e.districtList=n.data;case 4:case"end":return t.stop()}}),t)})))()},openRegionChooseDialog:function(){this.regionChooseDialog=!0},delAssignedWorker:function(e){var t=this;this.$confirm("您确定取消指派"+this.masterNameList[e]+"?","取消指派",{type:"warning"}).then((function(){t.masterUidList.splice(e,1),t.masterNameList.splice(e,1),t.$message({type:"success",message:"删除成功!"})}))},assignedBtn:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={enterpriseOrderSn:t.enterpriseOrderSn},r.masterUidList="worker"===e?t.masterUidList:[],n.next=4,Object(o["f"])(r);case 4:a=n.sent,"操作成功"===a.message&&(t.$message({message:"指派成功",type:"success"}),t.$router.push({name:"maintenance_order_desc",query:{orderSn:t.enterpriseOrderSn}}));case 6:case"end":return n.stop()}}),n)})))()},realNameBlurFn:function(){this.params.pageNo=1,this.getMasterList()},currentChange:function(e){this.params.pageNo=e,this.getMasterList()},getMasterList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$loading(),t.next=3,Object(o["n"])(e.params);case 3:r=t.sent,"000"==r.code&&(e.masterList=r.data.records,e.total=r.data.total,n.close());case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query,r=n.masterNameList,a=n.masterUidList,i=n.orderSn,r||(r=[]),a||(a=[]),r.forEach((function(t){e.masterNameList.push(t)})),a.forEach((function(t){e.masterUidList.push(t)})),t.next=7,Object(u["d"])(44e4);case 7:s=t.sent,e.cityList=s.data,e.enterpriseOrderSn=i,e.getMasterList();case 11:case"end":return t.stop()}}),t)})))()}},l=c,d=(n("14e2"),n("2877")),m=Object(d["a"])(l,r,a,!1,null,"0a3ed53d",null);t["default"]=m.exports}}]);