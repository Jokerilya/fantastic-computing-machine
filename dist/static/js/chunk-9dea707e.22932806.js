(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9dea707e"],{"17eb":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"i",(function(){return d})),a.d(t,"e",(function(){return p}));var r=a("b775");function n(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleEnterpriseCheck?orderSn="+e,method:"GET"})}function s(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyConfirmQuotation",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyPayment?orderSn="+e,method:"get"})}function o(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleTakeOrder",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleRemindStarted",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handlePhotographPunch",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleMasterQuotation",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleStartService?orderSn="+e,method:"get"})}function d(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleSubmitAcceptance",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/admin/maintenance/proxy/handleProxyCreateOrder",method:"post",data:e})}},"5add":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:0==e.data.examineStatus?"(未审核)企业描述":"(已审核)企业描述",name:"desc"}},[r("div",{staticClass:"big_title"},[r("div",{staticClass:"bigTitleLeft"},[r("div",{staticClass:"item",staticStyle:{"margin-right":"40px"}},[r("div",[e._v("企业订单号:")]),r("div",[e._v(e._s(e.data.orderSn))])]),r("div",{staticClass:"item"},[r("div",[e._v("下单时间:")]),r("div",[e._v(e._s(e.data.createTime))])])]),r("div",[r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.synchronizationJdOrder(e.data.orderSn)}}},[e._v("同步金蝶单据")]),-2001!=e.data.enterpriseSubStatus?r("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:e.goAssignedMasterPage}},[e._v(" 指派师傅 ")]):e._e(),e.data.enterpriseMainStatus>-1&&e.data.enterpriseMainStatus<=4?r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.clickCancelOrderDialog}},[e._v("取消订单")]):e._e()],1)]),r("div",{staticClass:"information",staticStyle:{padding:"20px"}},[r("div",{staticClass:"oneline"},[r("div",{staticClass:"item1"},[e._v("需求信息:")]),r("div",{staticClass:"item2"},[e.data.no?r("div",[e._v(" 订单类型: "),r("span",[e._v(e._s(1==e.data.orderType?"散单":2==e.data.orderType?"年保":"年卡"))])]):e._e(),e.data.no?r("div",[e._v(" 设备编码: "),r("span",[e._v(e._s(e.data.no))])]):e._e(),r("div",[e._v(" 设备产地: "),r("span",[e._v(e._s(e.data.devicePlace))])]),r("div",[e._v(" 设备类型: "),r("span",[e._v(e._s(e.data.deviceTypeName))])]),r("div",[e._v(" 设备品牌: "),r("span",[e._v(e._s(e.data.deviceBrand))])]),r("div",[e._v(" 设备数量: "),r("span",[e._v(e._s(e.data.num)+"台")])]),r("div",[e._v(" 设备系统: "),r("span",[e._v(e._s(e.data.deviceSystemName))])]),r("div",[e._v(" 期望时间: "),r("span",[e._v(e._s(e.data.serviceTime))])]),r("div",[e._v(" 企业设备编号: "),r("span",[e._v(e._s(e.data.enterpriseDeviceNo))])]),r("div",[e._v(" 企业设备位置: "),r("span",[e._v(e._s(e.data.enterpriseDevicePosition))])]),r("div",[e._v(" 设备型号: "),r("span",[e._v(e._s(e.data.deviceModel))])]),r("div",[e._v(" 出厂时间: "),r("span",[e._v(e._s(e.data.factoryTime))])]),r("div",[e._v(" 故障描述: "),r("span",[e._v(e._s(e.data.simpleDesc))])]),e.data.videoList&&e.data.videoList[0]||e.data.pictureList&&e.data.pictureList[0]?r("div",[e._v(" 故障部位: "),r("span",[e._v(e._s(e.data.position))])]):e._e(),e.data.videoList&&e.data.videoList[0]||e.data.pictureList&&e.data.pictureList[0]?r("div",[e._v(" 故障视图: "),r("span",[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.viewVideo(e.data.videoList[0]||e.data.pictureList[0])}}},[e._v("查看视图")])],1)]):e._e()]),r("div",{staticClass:"item3"},[e._v("企业信息:")]),r("div",{staticClass:"item4"},[r("div",[e._v(" 企业名称: "),r("span",[e._v(e._s(e.data.enterpriseName))])]),r("div",[e._v(" 联系人员: "),r("span",[e._v(e._s(e.data.contactsPeople))])]),r("div",[e._v(" 联系电话: "),r("span",[e._v(e._s(e.data.phone))])]),r("div",[e._v(" 联系地址: "),r("span",[e._v(e._s(e.data.address))])])])]),r("div",{staticClass:"people"},[e.data.createPeople?r("div",{staticClass:"createPeople"},[r("div",{staticClass:"title"},[e._v("创建人:")]),r("div",{staticClass:"content"},[e._v(e._s(e.data.createPeople))])]):e._e(),e.data.operationPeople?r("div",{staticClass:"handlePeople"},[r("div",{staticClass:"title"},[e._v("负责人:")]),r("div",{staticClass:"content"},[e._v(e._s(e.data.operationPeople))])]):e._e()])]),e.judgeFault()?r("el-descriptions",{attrs:{title:"故障解决方案",column:1}},e._l(e.data.programmeList,(function(t,a){return r("el-descriptions-item",{key:t.desc+a,attrs:{label:"解决方案"}},[r("el-row",{staticStyle:{"font-size":"12px !important"}},[r("el-col",{attrs:{span:24}},[r("span",[e._v("故障描述：")]),e._v(" "+e._s(t.desc)+" ")]),r("el-col",{attrs:{span:24}},[r("span",[e._v("故障分析：")]),e._v(" "+e._s(t.analysis)+" ")]),r("el-col",{attrs:{span:24}},[r("span",[e._v("维保方案:")]),e._v(" "+e._s(t.programme)+" ")])],1)],1)})),1):e._e()],1),e._l(e.data.enrollRepairOrderOutList,(function(t,n){return r("el-tab-pane",{key:t.realName,attrs:{label:t.realName+"报价明细",name:"meg"+n}},[r("div",{staticClass:"big_title"},[r("div",{staticClass:"bigTitleLeft"},[r("div",{staticClass:"item",staticStyle:{"margin-right":"40px"}},[r("div",[e._v(e._s(e.data.orderSn))]),e._v(" / "),r("div",[e._v(e._s(t.orderSn))])]),r("div",{staticClass:"item",staticStyle:{"margin-right":"40px"}},[r("div",[e._v("设备编码:")]),r("div",[e._v(e._s(e.data.no))])]),r("div",{staticClass:"item",staticStyle:{"margin-right":"40px"}},[r("div",[e._v("订单状态:")]),r("div",[e._v(e._s(t.subStatusName))])]),r("div",{staticClass:"item",staticStyle:{color:"red"}},[0===t.discountFlag?r("span",[e._v("(不纳入折扣)")]):e._e()])]),n!=e.data.enrollRepairOrderOutList.length-1?r("div",[r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.openConsultPriceDialog(t.orderSn,t.doorAmount,t.partsAmount)}}},[e._v("协商费用")])],1):e._e(),n==e.data.enrollRepairOrderOutList.length-1?r("div",[r("el-dropdown",{staticStyle:{"margin-right":"10px"}},[r("el-button",{attrs:{size:"mini",plain:"",type:"success"}},[e._v(" 代企业操作"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("div",{on:{click:function(a){return e.handleProxyConfirmQuotation(t.orderSn)}}},[e._v(" 代企业确认师傅报价 ")])]),r("el-dropdown-item",[r("div",{on:{click:function(a){return e.handleEnterpriseCheck(t.orderSn)}}},[e._v(" 代企业确认验收 ")])]),r("el-dropdown-item",[r("div",{on:{click:function(a){return e.handleProxyPayment(t.orderSn)}}},[e._v(" 代企业付款 ")])])],1)],1),r("el-dropdown",{staticStyle:{"margin-right":"10px"}},[r("el-button",{attrs:{type:"warning",size:"mini",plain:""}},[e._v(" 代师傅操作"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("div",{on:{click:function(a){return e.openRemindStartedDialog(t.orderSn)}}},[e._v(" 代师傅开始出发 ")])]),r("el-dropdown-item",[r("div",{on:{click:function(a){return e.openHandlePhotographPunchDialog(t.orderSn)}}},[e._v(" 代师傅拍照打卡 ")])]),r("el-dropdown-item",[r("div",{on:{click:function(a){return e.handleMasterQuotation(t.orderSn)}}},[e._v(" 代师傅提交检测报价 ")])]),r("el-dropdown-item",[r("div",{on:{click:function(a){return e.handleStartService(t.orderSn)}}},[e._v(" 代师傅开始服务 ")])]),r("el-dropdown-item",[r("div",{on:{click:function(a){return e.openSubmitAcceptanceDialog(t.orderSn)}}},[e._v(" 代师傅提交验收 ")])])],1)],1),r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.openOrderDiscountDialog(t.orderSn,t.discountFlag)}}},[e._v("订单折扣")]),r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.openConsultPriceDialog(t.orderSn,t.doorAmount,t.partsAmount)}}},[e._v("协商费用")]),["2202"].includes(e.data.enterpriseSubStatus)?r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.sumbitQuotation(t.orderSn)}}},[e._v("确认报价")]):e._e(),-2001!=e.data.enterpriseSubStatus?r("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:e.goAssignedMasterPage}},[e._v(" 指派师傅 ")]):e._e(),e.data.enterpriseMainStatus>-1&&e.data.enterpriseMainStatus<=4?r("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.clickCancelOrderDialog}},[e._v("取消订单")]):e._e()],1):e._e()]),r("div",{staticClass:"meg"},[r("div",{staticClass:"masterContact"},[r("div",{staticClass:"title"},[e._v("师傅联系方式:")]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("联系人:")]),r("span",{staticClass:"content"},[e._v(e._s(t.realName))])]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("联系电话:")]),r("span",{staticClass:"content"},[e._v(e._s(t.phone))])])]),t.punchTime?r("div",{staticClass:"masterContact"},[r("div",{staticClass:"title"},[e._v("师傅到点打卡:")]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("打卡时间:")]),r("span",{staticClass:"content"},[e._v(e._s(t.punchTime))])]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("打卡图片:")]),r("span",{staticClass:"content"},[r("el-image",{staticStyle:{height:"80px",width:"80px"},attrs:{src:t.punchImages,"preview-src-list":[t.punchImages]}})],1)])]):e._e(),r("div",{staticClass:"solvePlan"},[r("div",{staticClass:"title"},[r("div",[e._v("故障项目方案:")]),r("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.openAddFaultDialog(t.orderSn)}}},[e._v(" 新增故障项目")])],1),r("el-table",{key:Math.random(),attrs:{data:t.faults}},[r("el-table-column",{attrs:{label:"故障编码",prop:"code",align:"center"}}),r("el-table-column",{attrs:{label:"机床类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(1==a.machineType?"加工中心":"数控车床")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"故障部位",prop:"position",align:"center"}}),r("el-table-column",{attrs:{label:"故障描述",prop:"simpleDesc",align:"center"}}),r("el-table-column",{attrs:{label:"师傅价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.masterAmount?a.masterAmount:"0")+" ")]}}],null,!0)}),1!=e.data.orderType?r("el-table-column",{attrs:{label:"年保企业价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.annualAmount)+" ")]}}],null,!0)}):e._e(),1==e.data.orderType?r("el-table-column",{attrs:{label:"散单企业价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.generalAmount)+" ")]}}],null,!0)}):e._e(),r("el-table-column",{attrs:{label:"师傅协商价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.masterConsultAmount?a.masterConsultAmount:0)+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"企业协商价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.enterpriseConsultAmount?a.enterpriseConsultAmount:0)+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"故障视频",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.image&&a.image[1]?r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.viewVideo(a.image[1])}}},[e._v("查看视频")]):e._e()]}}],null,!0)}),r("el-table-column",{attrs:{label:"故障图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.image&&a.image[0]?r("el-image",{staticStyle:{width:"100px",height:"100px","margin-right":"20px"},attrs:{src:a.image[0],"preview-src-list":[a.image[0]]}}):e._e()]}}],null,!0)}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.openExamineFaultsDialog(n,t.orderSn,e.data.orderType)}}},[e._v("修改")]),r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.delSolvePlan(n,t.orderSn)}}},[e._v("删除")])]}}],null,!0)})],1)],1),r("div",{staticClass:"peijian",staticStyle:{"margin-top":"30px"}},[r("div",{staticClass:"peijianTitle"},[e._v("配件明细:")]),r("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.openAddEditPart(null,null,t.orderSn)}}},[e._v("新增配件")]),e._e()],1),r("div",{staticClass:"addPartcs"},[r("el-table",{key:Math.random(),attrs:{data:t.parts}},[r("el-table-column",{attrs:{align:"center",prop:"name",label:"配件图片",width:"110"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.image&&t.image.split(",")[0],"preview-src-list":t.image&&t.image.split(",")}})]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",prop:"name",label:"配件模式"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(1==a.model?"外发维修":"采买新件")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{label:"采买角色",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[2!==n.type?r("img",{attrs:{src:a("a8e1"),width:"28px"}}):e._e(),2===n.type?r("img",{attrs:{src:a("bae6"),width:"28px"}}):e._e()]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",prop:"name",label:"配件名称"}}),r("el-table-column",{attrs:{align:"center",prop:"num",label:"配件数量",width:"80"}}),r("el-table-column",{attrs:{align:"center",prop:"price",label:"配件单价",width:"80"}}),r("el-table-column",{attrs:{align:"center",label:"配件品牌"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("div",{class:[1!==a.type||a.brandId?"":"inquireBrandNone"]},[e._v(" "+e._s(a.brand)+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",prop:"parameter",label:"配件参数"}}),r("el-table-column",{attrs:{align:"center",prop:"number",label:"物料编码"}}),r("el-table-column",{attrs:{align:"center",label:"配件总金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("div",{staticStyle:{color:"red"}},[e._v("￥"+e._s(a.num*a.price))])]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",label:"快递公司",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(1==a.expressType?"顺丰":2==a.expressType?"货拉拉":"无")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",label:"供应商"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.supplierName?a.supplierName:"无")+" ")]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",prop:"remarks",label:"备注"}}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row,s=a.$index;return[2==n.type&&e.data.enterpriseSubStatus>2202||e.data.enterpriseSubStatus>2202&&2==n.model&&2==n.type?r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.goToLogisticsDetails(n.id,n.model,t.orderSn)}}},[e._v("物流详情")]):e._e(),1==n.status&&1==n.model?r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.openSetLogistics(n,t.orderSn)}}},[e._v(" 物流设置 ")]):e._e(),r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.openAddEditPart(n,s,t.orderSn)}}},[e._v("修改")]),r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.delPartsList(n,t.orderSn)}}},[e._v("删除")])]}}],null,!0)})],1)],1),t.completePictureList?r("div",{staticClass:"finishWork"},[r("div",{staticClass:"title"},[e._v("完工信息:")]),e._l(t.completePictureList,(function(t){return r("div",{key:t,staticClass:"pic"},[t?r("el-image",{staticStyle:{width:"150px",height:"150px","margin-right":"20px"},attrs:{lazy:"",src:t,"preview-src-list":t.completePictureList}}):e._e()],1)}))],2):e._e(),t.completeImages?r("div",{staticClass:"finishWork"},[r("div",{staticClass:"title"},[e._v("完工照片")]),e._l(t.completeImages,(function(t){return r("div",{key:t},[t?r("el-image",{staticStyle:{width:"150px",height:"150px","margin-right":"20px"},attrs:{src:t,lazy:"","preview-src-list":[t]}}):e._e()],1)}))],2):e._e(),r("div",{staticClass:"finishWork"},[r("div",{staticClass:"title"},[r("div",[e._v("工单图片")]),r("el-upload",{attrs:{action:"#",data:{orderSn:t.orderSn},"show-file-list":!1,"http-request":e.handleOfflineImages}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),t.offlineImages?r("div",[r("el-image",{staticStyle:{width:"150px",height:"150px","margin-right":"20px"},attrs:{src:t.offlineImages,lazy:"","preview-src-list":[t.offlineImages]}})],1):e._e()]),t.repairComment?r("div",{staticClass:"customerEvaluate"},[r("div",{staticClass:"title",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",width:"250px"}},[r("div",[e._v("客户评价:")])]),r("div",{staticClass:"descPic"},[r("div",{staticClass:"item"},[r("div",{staticClass:"label"},[e._v("满意程度:")]),r("div",[e._v(" "+e._s(e.markTrunText[t.repairComment.serviceScore+2])+" ")])]),r("div",{staticClass:"item"},[r("div",{staticClass:"label"},[e._v("评价内容:")]),r("div",[e._v(" "+e._s(t.repairComment.content)+" ")])]),e.repairCommentImage?r("div",{staticClass:"item"},[r("div",{staticClass:"label"},[e._v("评价图片:")]),e._l(e.repairCommentImage,(function(t){return r("el-image",{key:t,staticStyle:{width:"150px",height:"150px","margin-right":"20px"},attrs:{lazy:"",src:t,"preview-src-list":e.repairCommentImage}})}))],2):e._e(),r("div",{staticClass:"item"},[r("div",{staticClass:"label1"},[e._v("客服回访描述:")]),t.repairComment.platformVisitMessage?r("div",[e._v(" "+e._s(t.repairComment.platformVisitMessage)+" ")]):r("div",{staticStyle:{position:"relative"}},[r("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:4,placeholder:"填写电话回访记录,以便考核师傅",resize:"none"},model:{value:e.platformVisitMessage,callback:function(t){e.platformVisitMessage=t},expression:"platformVisitMessage"}}),r("div",{staticStyle:{position:"absolute",right:"15px",bottom:"10px"}},[r("el-button",{staticStyle:{width:"85px","background-color":"#2e4c9e",height:"35px",color:"#fff"},on:{click:e.addReturnVistInfo}},[e._v("确定")])],1)],1)])])]):e._e(),r("div",{staticClass:"information"},[r("div",{staticClass:"oneline"},[r("div",{staticClass:"item1"},[e._v("订单费用:")]),r("div",{staticClass:"item2"},[n==e.data.enrollRepairOrderOutList.length-1?r("div",[r("div",{staticStyle:{"font-weight":"700"}},[e._v("企业付款")]),r("div",[e._v(" 上门费: "),r("span",[e._v("￥"+e._s(t.enterpriseDoorAmount)+"元")])]),r("div",[e._v(" 配件费: "),r("span",[e._v("￥"+e._s(t.enterprisePartsAmount)+"元")])]),r("div",[e._v(" 支付金额: "),r("span",[e._v("￥"+e._s(t.enterprisePayAmount)+"元")])]),r("div",[e._v(" 总金额: "),r("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(t.enterpriseTotalAmount)+"元")])])]):e._e(),r("div",{staticStyle:{"font-weight":"700"}},[e._v("师傅收款")]),r("div",[e._v(" 人工费: "),r("span",[e._v("￥"+e._s(t.doorAmount)+"元")])]),r("div",[e._v(" 配件费: "),r("span",[e._v("￥"+e._s(t.partsAmount)+"元")])]),r("div",[e._v(" 交通费: "),r("span",[e._v("￥"+e._s(t.otherAmount)+"元")])]),e.data.enterpriseSubStatus>=2202?r("div",[r("div",[e._v(" 权益奖励: "),r("span",[e._v("￥"+e._s(t.premiumAmount?t.premiumAmount:0)+"元")])]),r("div",[e._v(" 平台抽成: "),r("span",[e._v("￥"+e._s(t.serviceAmount?t.serviceAmount:0)+"元")])]),r("div",[e._v(" 评价扣款: "),r("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(t.deductAmount?t.deductAmount:0)+"元")])])]):e._e(),r("div",[r("div",[e._v(" 订单费用调整: "),r("span",[e._v("￥"+e._s(t.faultReductionAmount?t.faultReductionAmount:0)+"元")]),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(a){return e.openFaultDeratePriceDialog(t.orderSn,t.faultReductionAmount,t.faultReductionRemark)}}},[e._v("设置")])],1),r("div",[e._v(" 调整费用备注: "),r("span",[e._v(e._s(t.faultReductionRemark))])]),r("div",[e._v(" 折扣金额: "),r("span",[e._v("￥"+e._s(t.discountAmount)+"元")])]),r("div",[e._v(" 折扣标识描述: "),r("span",[e._v(e._s(t.discountRemark))])]),r("div",[e._v(" 最终协商价: "),r("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(t.consultAmount?t.consultAmount:0)+"元")]),t.consultRemarks?r("span",[e._v(" (备注:"+e._s(t.consultRemarks)+") ")]):e._e()]),r("div",[e._v(" 合计: "),r("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(t.totalAmount)+"元")])])])])])]),t.cancelReason?r("div",{staticClass:"cancelOrder"},[r("div",{staticClass:"title"},[e._v("取消订单原因:")]),r("div",{staticClass:"content"},[e._v(e._s(t.cancelReason))])]):e._e()])])})),r("el-tab-pane",{attrs:{label:"操作日志",name:"log"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data.orderNodeOutList,border:""}},[r("el-table-column",{attrs:{prop:"createTime",label:"时间"}}),r("el-table-column",{attrs:{prop:"type",label:"状态所属方"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.util.global.getLabel("operator",a.operator)))]}}])}),r("el-table-column",{attrs:{prop:"node",label:"操作节点"}}),r("el-table-column",{attrs:{prop:"personnel",label:"操作人员"}}),r("el-table-column",{attrs:{prop:"simpleDesc",label:"节点描述"}})],1)],1),r("el-tab-pane",{attrs:{label:"操作日志(旧)",name:"oldLog"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data.orderTrackOutList,border:""}},[r("el-table-column",{attrs:{prop:"title",label:"标题"}}),r("el-table-column",{attrs:{prop:"simpleDesc",label:"描述"}}),r("el-table-column",{attrs:{fixed:"",prop:"operator",label:"业务触发方"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.util.global.getLabel("operator",a.operator)))]}}])}),r("el-table-column",{attrs:{prop:"type",label:"状态所属方"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.util.global.getLabel("operator",a.type)))]}}])}),r("el-table-column",{attrs:{prop:"createTime",label:"触发时间"}})],1)],1)],2),r("model",{ref:"quotationForm",attrs:{title:"确认报价"},on:{ok:e.sumbitQuotation,close:e.resetQuotationForm}},[r("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.quotationForm,"status-icon":"","label-width":"120px"}},[r("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"状态",prop:"status"}},[r("el-radio-group",{model:{value:e.quotationForm.status,callback:function(t){e.$set(e.quotationForm,"status",t)},expression:"quotationForm.status"}},e._l(e.util.global.rejectStatus,(function(t){return r("el-radio",{key:t.label,attrs:{label:t.value},on:{change:function(a){return e.changeStuta(t)}}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"驳回原因",prop:"rejectReason"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.quotationForm.rejectReason,callback:function(t){e.$set(e.quotationForm,"rejectReason",t)},expression:"quotationForm.rejectReason"}})],1)],1)],1),r("model",{ref:"platform",attrs:{title:"打款信息"},on:{ok:function(t){return e.sumbitPlatformPay()},close:e.resetPlatformPay}},[r("el-form",{staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"120px"}},[r("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"师傅卡号"}},[e._v(e._s(e.data.bankCode))]),r("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"所属银行"}},[e._v(e._s(e.data.bankName))])],1)],1),r("el-dialog",{attrs:{title:"设置故障减免费用",width:"40%",center:"","show-close":!1,visible:e.faultDeratePriceVisible}},[r("el-form",{ref:"faultDeratePriceParamsRef",attrs:{model:e.faultDeratePriceParams,rules:e.faultDeratePriceParamsRules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"订单费用调整",prop:"amount"}},[r("el-input",{attrs:{type:"number",placeholder:"填写订单费用调整"},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.faultDeratePriceParams.amount,callback:function(t){e.$set(e.faultDeratePriceParams,"amount",e._n(t))},expression:"faultDeratePriceParams.amount"}})],1),r("el-form-item",{attrs:{label:"调整费用备注",prop:"remark"}},[r("el-input",{attrs:{placeholder:"填写调整费用备注"},model:{value:e.faultDeratePriceParams.remark,callback:function(t){e.$set(e.faultDeratePriceParams,"remark",t)},expression:"faultDeratePriceParams.remark"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeFaultDeratePriceDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmSetFaultDeratePrice}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{visible:e.cancelOrderDialog,width:"50%","before-close":e.closecancelOrderDialog}},[r("div",{staticStyle:{"text-align":"center",padding:"0 70px"}},[r("div",{staticStyle:{color:"#707070","font-size":"20px","font-weight":"700"}},[e._v(" 取消说明 ")]),r("el-input",{staticStyle:{"margin-top":"20px"},attrs:{type:"textarea",resize:"none",rows:10,placeholder:"请输入取消订单的原因"},model:{value:e.delOrderinpValue,callback:function(t){e.delOrderinpValue=t},expression:"delOrderinpValue"}})],1),r("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticStyle:{width:"150px","background-color":"#ffffff",color:"#2e4c9e"},on:{click:e.closecancelOrderDialog}},[e._v("取 消")]),r("el-button",{staticStyle:{width:"150px","background-color":"#2e4c9e"},attrs:{type:"primary"},on:{click:e._cancelRepairOrder}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"审核配件",width:"30%",visible:e.examineParts,"before-close":e.closeExaminePartsDialog,"close-on-click-modal":!1}},[r("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[r("el-form-item",{attrs:{label:"物料编码"}},[r("el-input",{attrs:{placeholder:"请输入物料编码"},model:{value:e.examinePartsForm.number,callback:function(t){e.$set(e.examinePartsForm,"number","string"===typeof t?t.trim():t)},expression:"examinePartsForm.number"}})],1),r("el-form-item",{attrs:{label:"配件名称"}},[r("el-input",{attrs:{placeholder:"请输入配件名称"},model:{value:e.examinePartsForm.name,callback:function(t){e.$set(e.examinePartsForm,"name","string"===typeof t?t.trim():t)},expression:"examinePartsForm.name"}})],1),r("el-form-item",{attrs:{label:"配件参数"}},[r("el-input",{attrs:{placeholder:"请输入配件参数"},model:{value:e.examinePartsForm.parameter,callback:function(t){e.$set(e.examinePartsForm,"parameter","string"===typeof t?t.trim():t)},expression:"examinePartsForm.parameter"}})],1),r("el-form-item",{attrs:{label:"配件单价"}},[r("el-input-number",{attrs:{min:1,max:9999},model:{value:e.examinePartsForm.price,callback:function(t){e.$set(e.examinePartsForm,"price",t)},expression:"examinePartsForm.price"}})],1),r("el-form-item",{attrs:{label:"配件品牌"}},[r("el-input",{attrs:{placeholder:"请输入配件品牌"},model:{value:e.examinePartsForm.brand,callback:function(t){e.$set(e.examinePartsForm,"brand","string"===typeof t?t.trim():t)},expression:"examinePartsForm.brand"}})],1),r("el-form-item",{attrs:{label:"配件数量"}},[r("el-input-number",{attrs:{min:1,max:99},model:{value:e.examinePartsForm.num,callback:function(t){e.$set(e.examinePartsForm,"num",t)},expression:"examinePartsForm.num"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeExaminePartsDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.comfirmExamineParts}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"审核故障项目",width:"40%","before-close":e.closeExamineFaultsDialog,visible:e.examineFaults,"close-on-click-modal":!1}},[r("el-form",{attrs:{"label-position":"left","label-width":"120px"}},[r("el-form-item",{attrs:{label:"故障描述"}},[r("el-input",{attrs:{placeholder:"请输入故障描述"},model:{value:e.examineFaultsForm.simpleDesc,callback:function(t){e.$set(e.examineFaultsForm,"simpleDesc",t)},expression:"examineFaultsForm.simpleDesc"}})],1),r("el-form-item",{attrs:{label:"师傅展示价格"}},[r("el-input",{attrs:{placeholder:"请输入师傅展示价格",type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.examineFaultsForm.masterAmount,callback:function(t){e.$set(e.examineFaultsForm,"masterAmount",e._n(t))},expression:"examineFaultsForm.masterAmount"}})],1),r("el-form-item",{attrs:{label:"年保企业价格"}},[r("el-input",{attrs:{placeholder:"请输入年保企业价格",type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.examineFaultsForm.annualAmount,callback:function(t){e.$set(e.examineFaultsForm,"annualAmount",e._n(t))},expression:"examineFaultsForm.annualAmount"}})],1),r("el-form-item",{attrs:{label:"散单企业价格"}},[r("el-input",{attrs:{placeholder:"请输入散单企业价格",type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.examineFaultsForm.generalAmount,callback:function(t){e.$set(e.examineFaultsForm,"generalAmount",e._n(t))},expression:"examineFaultsForm.generalAmount"}})],1),r("el-form-item",{attrs:{label:"师傅协商价格"}},[r("el-input",{attrs:{placeholder:"请输入师傅协商价格",type:"number"},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.examineFaultsForm.masterConsultAmount,callback:function(t){e.$set(e.examineFaultsForm,"masterConsultAmount",e._n(t))},expression:"examineFaultsForm.masterConsultAmount"}})],1),r("el-form-item",{attrs:{label:"企业协商价格"}},[r("el-input",{attrs:{placeholder:"请输入企业协商价格",type:"number"},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.examineFaultsForm.enterpriseConsultAmount,callback:function(t){e.$set(e.examineFaultsForm,"enterpriseConsultAmount",e._n(t))},expression:"examineFaultsForm.enterpriseConsultAmount"}})],1),r("el-form-item",{attrs:{label:"故障视频"}},[r("div",{staticStyle:{display:"flex"}},[e.examineFaultsFormVideoList&&e.examineFaultsFormVideoList[0]&&e.examineFaultsFormVideoList[0].url?r("div",[r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"small",type:"text"},on:{click:function(t){return e.viewVideo(e.examineFaultsFormVideoList[0].url)}}},[e._v("查看视频")]),r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"small",type:"text"},on:{click:e.delExamineFaultsFormVideo}},[e._v("删除视频")])],1):r("el-upload",{staticClass:"upload-demo",attrs:{action:"#",limit:1,"http-request":e.uploadExamineFaultsFormVideoList,"file-list":e.examineFaultsFormVideoList,"show-file-list":!1}},[r("el-button",{attrs:{type:"text"}},[e._v("点击上传")])],1)],1)]),r("el-form-item",{attrs:{label:"故障图片"}},[r("el-upload",{attrs:{action:"#","list-type":"picture-card","file-list":e.examineFaultsFormPicList,limit:1,"on-remove":e.delExamineFaultsFormPicList,"http-request":e.uploadExamineFaultsFormPicList}},[r("i",{staticClass:"el-icon-plus"})])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeExamineFaultsDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.comfirmExamineFaults}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"一键寄修",width:"25%","before-close":e.closeOneClickSendrepair,"close-on-click-modal":!1,visible:e.oneClickSendrepair,center:""}},[r("div",{staticClass:"oneClickSendrepair"},[r("h3",[e._v("请确定寄修信息:")]),r("div",{staticClass:"oneClickSendrepairList"},e._l(e.data.partsList,(function(t){return r("div",{key:t.name,staticClass:"oneClickSendrepairItem"},[1==t.model?r("div",[r("div",{staticClass:"oneClickSendrepairItem_top"},[r("el-image",{staticClass:"oneClickSendrepairItem_image",attrs:{src:t.image,"preview-src-list":[t.image]}}),r("div",{staticClass:"oneClickSendrepairItem_top_line"},[r("div",{staticStyle:{"font-weight":"700"}},[e._v(e._s(t.name))]),r("div",[e._v("数量:"+e._s(t.num))]),r("div",[e._v("品牌:"+e._s(t.brand))]),r("div",[e._v("参数:"+e._s(t.parameter))])])],1),r("div",{staticClass:"oneClickSendrepairItem_line"},[e._v(" 维修公司:"+e._s(t.supplierName)+" ")]),r("div",{staticClass:"oneClickSendrepairItem_line"},[e._v(" 维修范围:"+e._s(t.businessScope)+" ")]),r("div",{staticClass:"oneClickSendrepairItem_line"},[e._v(" 物流方式:"+e._s(1==t.expressType?"顺丰":"货拉拉")+" ")])]):e._e()])})),0)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeOneClickSendrepair}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmSendrepair}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:e.addEditPartTitle,width:"35%",top:"5vh","append-to-body":!0,"close-on-click-modal":!1,visible:e.addEditPartDialogShow,"before-close":e.closeAddEditPart}},[r("div",{staticStyle:{width:"100%"}},[r("el-form",{ref:"partInfoRuleForm",attrs:{"label-position":"left","label-width":"80px",model:e.partInfo,rules:e.partInfoRules}},[r("el-form-item",{attrs:{label:"配件模式",prop:"model"}},[r("el-radio-group",{on:{input:e.changeModel},model:{value:e.partInfo.model,callback:function(t){e.$set(e.partInfo,"model",t)},expression:"partInfo.model"}},[r("el-radio",{attrs:{label:1}},[e._v("外发维修")]),r("el-radio",{attrs:{label:2}},[e._v("采买新件")])],1)],1),r("el-form-item",{attrs:{label:"采买角色",prop:"type"},on:{input:e.changeType}},[r("el-radio-group",{model:{value:e.partInfo.type,callback:function(t){e.$set(e.partInfo,"type",t)},expression:"partInfo.type"}},[r("el-radio",{attrs:{label:1}},[e._v("师傅自费")]),r("el-radio",{attrs:{label:2}},[e._v("平台购买")])],1)],1),r("el-form-item",{attrs:{label:"配件来源"}},[r("el-radio-group",{on:{input:e.changeStashPartsWay},model:{value:e.partInfo.stashPartsWay,callback:function(t){e.$set(e.partInfo,"stashPartsWay",t)},expression:"partInfo.stashPartsWay"}},[r("el-radio",{attrs:{label:1}},[e._v("新增配件")]),r("el-radio",{attrs:{label:2}},[e._v("仓库搜索")]),2==e.partInfo.stashPartsWay?r("el-button",{attrs:{size:"mini",icon:"el-icon-search"},on:{click:e.openWarehouseSearch}}):e._e()],1)],1),r("el-form-item",{attrs:{label:"物料编码"}},[r("el-input",{attrs:{disabled:2==e.partInfo.stashPartsWay,placeholder:"请输入物料编码"},model:{value:e.partInfo.number,callback:function(t){e.$set(e.partInfo,"number",t)},expression:"partInfo.number"}})],1),r("el-form-item",{attrs:{label:"配件名称",prop:"name"}},[r("el-input",{attrs:{disabled:2==e.partInfo.stashPartsWay,placeholder:"请输入配件名称"},model:{value:e.partInfo.name,callback:function(t){e.$set(e.partInfo,"name",t)},expression:"partInfo.name"}})],1),r("el-form-item",{attrs:{label:"配件品牌",prop:"brand"}},[r("el-input",{attrs:{disabled:2==e.partInfo.stashPartsWay,placeholder:"请输入配件品牌"},model:{value:e.partInfo.brand,callback:function(t){e.$set(e.partInfo,"brand",t)},expression:"partInfo.brand"}})],1),r("el-form-item",{attrs:{label:"配件参数",prop:"parameter"}},[r("el-input",{attrs:{disabled:2==e.partInfo.stashPartsWay,placeholder:"请输入配件参数"},model:{value:e.partInfo.parameter,callback:function(t){e.$set(e.partInfo,"parameter",t)},expression:"partInfo.parameter"}})],1),r("el-form-item",{attrs:{label:"配件故障"}},[r("el-input",{attrs:{placeholder:"请输入配件故障"},model:{value:e.partInfo.remarks,callback:function(t){e.$set(e.partInfo,"remarks",t)},expression:"partInfo.remarks"}})],1),r("el-form-item",{attrs:{label:"配件单价",prop:"price"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入配件单价"},model:{value:e.partInfo.price,callback:function(t){e.$set(e.partInfo,"price",e._n(t))},expression:"partInfo.price"}})],1),r("el-form-item",{attrs:{label:"配件数量"}},[r("el-input-number",{attrs:{min:1,max:999},model:{value:e.partInfo.num,callback:function(t){e.$set(e.partInfo,"num",e._n(t))},expression:"partInfo.num"}})],1),r("el-form-item",{attrs:{label:"配件图片"}},[r("div",{staticClass:"hiddenUploadBox"},[r("el-upload",{attrs:{action:"#","list-type":"picture-card","http-request":e.uploadPartImg,"file-list":e.uploadPartImgList,"on-remove":e.delUploadPartImg,multiple:!0,limit:3}},[r("i",{staticClass:"el-icon-plus"})])],1)])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeAddEditPart}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddEditPart}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"仓库搜索",width:"30%",top:"5vh","before-close":e.closeWarehouseSearch,visible:e.warehouseSearchDialogShow,"close-on-click-modal":!1}},[r("div",{staticClass:"warehouseSearchDialog"},[r("div",{staticClass:"warehouseSearchDialogTop"},[r("el-input",{staticClass:"warehouseSearchDialogTopInput",attrs:{placeholder:"输入配件名称"},model:{value:e.queryJdProductListParams.query,callback:function(t){e.$set(e.queryJdProductListParams,"query",t)},expression:"queryJdProductListParams.query"}}),r("el-button",{on:{click:e.queryJdProductList}},[e._v("搜索")])],1),r("div",{staticClass:"warehouseSearchDialogList"},[r("el-radio-group",{model:{value:e.choosePartIndex,callback:function(t){e.choosePartIndex=t},expression:"choosePartIndex"}},e._l(e.jdProductList,(function(t,a){return r("el-radio",{key:a,staticStyle:{display:"flex","align-items":"center",padding:"8px"},attrs:{label:a}},[r("p",[e._v("商品名称:"+e._s(t.name))]),r("p",{staticStyle:{margin:"5px 0"}},[e._v("商品品牌:"+e._s(t.brandName))]),r("p",[e._v("商品型号:"+e._s(t.model))]),r("p",{staticStyle:{margin:"5px 0"}},[e._v("物料编码:"+e._s(t.number))])])})),1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeWarehouseSearch}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.comfirmWarehousePart}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"选择供应商",width:"40%",top:"5vh",visible:e.setLogisticsDialogShow}},[r("div",{staticClass:"setLogisticsDialog"},[r("div",{staticClass:"setLogisticsDialogSearch"},[r("el-input",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"输入供应商名字搜索"},model:{value:e.supplierInfoListParams.query,callback:function(t){e.$set(e.supplierInfoListParams,"query",t)},expression:"supplierInfoListParams.query"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.searchMaintenanceSupplierInfo}},[e._v("搜索")])],1),r("div",{staticClass:"supplierList"},[r("el-radio-group",{on:{change:e.changeSupplier},model:{value:e.setLogisticsData.supplierName,callback:function(t){e.$set(e.setLogisticsData,"supplierName",t)},expression:"setLogisticsData.supplierName"}},e._l(e.supplierList,(function(t,a){return r("el-radio",{key:a,staticStyle:{display:"flex","align-items":"center",padding:"8px"},attrs:{label:t.supplierName}},[r("div",[e._v("供应商名称:"+e._s(t.supplierName))]),r("div",{staticStyle:{margin:"5px 0"}},[e._v("地址 :"+e._s(t.supplierAddress))]),r("div",[e._v("范围:"+e._s(t.businessScope))])])})),1)],1),r("div",{staticClass:"tabelPagination"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.supplierInfoListTotal,"page-size":10,"current-page":e.supplierInfoListParams.pageNo},on:{"current-change":e.changesupplierInfoListPage}})],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeSetLogistics}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmSetLogistics}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"修改差评金额",width:"30%",visible:e.editBadPirceShow,center:""}},[r("div",[r("el-form",{attrs:{"label-position":"left","label-width":"60px"}},[r("el-form-item",{attrs:{label:"方式:"}},[r("el-radio-group",{model:{value:e.editBadPirceData.operateType,callback:function(t){e.$set(e.editBadPirceData,"operateType",t)},expression:"editBadPirceData.operateType"}},[r("el-radio",{attrs:{label:1}},[e._v("增加")]),r("el-radio",{attrs:{label:2}},[e._v("扣除")])],1)],1),r("el-form-item",{attrs:{label:"金额:"}},[r("el-input",{attrs:{type:"number",placeholder:"请填写您要修改的差评金额"},model:{value:e.editBadPirceData.amount,callback:function(t){e.$set(e.editBadPirceData,"amount",e._n(t))},expression:"editBadPirceData.amount"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmEditBadPirce}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"新增故障项目",width:"50%",visible:e.addFaultVisible,"close-on-click-modal":!1,"before-close":e.closeAddFaultDialog,center:""}},[r("div",{staticClass:"addFaultDialog"},[r("div",{staticClass:"searchBox"},[r("el-input",{staticClass:"searchInp",attrs:{placeholder:"请填写故障描述"},model:{value:e.queryFaultItemsParams.query,callback:function(t){e.$set(e.queryFaultItemsParams,"query",t)},expression:"queryFaultItemsParams.query"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.searchFaultList}},[e._v("搜索")])],1),r("div",{staticClass:"tabelBox"},[r("el-table",{ref:"faultTable",attrs:{data:e.faultItemList,border:"","highlight-current-row":""},on:{"current-change":e.chooseFaultItem}},[r("el-table-column",{attrs:{label:"故障编码",prop:"code"}}),r("el-table-column",{attrs:{label:"机床类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(1==a.machineType?"加工中心":"数控车床")+" ")]}}])}),r("el-table-column",{attrs:{label:"项目部位",prop:"position"}}),r("el-table-column",{attrs:{label:"项目描述",prop:"simpleDesc"}})],1)],1),r("div",{staticClass:"paginationBox"},[r("el-pagination",{attrs:{"current-page":e.queryFaultItemsParams.pageNo,background:"",total:e.faultItemTotal,layout:"prev, pager, next"},on:{"current-change":e.changeFaultDialogPage}})],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeAddFaultDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddFault}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"协商费用(该功能仅支持异常订单使用)",width:"40%",center:"",visible:e.consultPriceVisible,"close-on-click-modal":!1,"before-close":e.closeConsultPriceDialog}},[r("div",{staticClass:"consultPriceDialog"},[r("el-form",{ref:"consultCostForm",attrs:{model:e.consultCostParams,rules:e.consultCostRules,"label-position":"left","label-width":"120px"}},[r("el-form-item",{attrs:{label:"是否纳入折扣",prop:"flag"}},[r("el-radio-group",{model:{value:e.consultCostParams.flag,callback:function(t){e.$set(e.consultCostParams,"flag",t)},expression:"consultCostParams.flag"}},[r("el-radio",{attrs:{label:0}},[e._v("不纳入")]),r("el-radio",{attrs:{label:1}},[e._v("纳入")])],1)],1),r("el-form-item",{attrs:{label:"协商金额",prop:"amount"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入协商金额"},model:{value:e.consultCostParams.amount,callback:function(t){e.$set(e.consultCostParams,"amount",e._n(t))},expression:"consultCostParams.amount"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{placeholder:"请输入想备注的内容"},model:{value:e.consultCostParams.remarks,callback:function(t){e.$set(e.consultCostParams,"remarks",t)},expression:"consultCostParams.remarks"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeConsultPriceDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmConsultPrice}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"订单折扣",width:"40%",center:"",visible:e.orderDiscountVisible,"close-on-click-modal":!1,"before-close":e.closeOrderDiscountDialog}},[r("div",{staticClass:"orderDiscount"},[r("el-form",{attrs:{"label-position":"right","label-width":"250px"}},[r("el-form-item",{attrs:{label:"是否使用:"}},[r("el-radio-group",{model:{value:e.handleOrderDiscountFlagParams.flag,callback:function(t){e.$set(e.handleOrderDiscountFlagParams,"flag",t)},expression:"handleOrderDiscountFlagParams.flag"}},[r("el-radio",{attrs:{label:0}},[e._v("不计算折扣")]),r("el-radio",{attrs:{label:1}},[e._v("计算折扣")])],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeOrderDiscountDialog}},[e._v(" 取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmOrderDiscount}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"代师傅拍照打卡",width:"40%",center:"",visible:e.photographPunchDialogVisible,"close-on-click-modal":!1,"before-close":e.closeHandlePhotographPunchDialog}},[r("div",[r("el-form",{ref:"handlePhotographPunchParamsRef",attrs:{model:e.handlePhotographPunchParams,rules:e.handlePhotographPunchParamsRules}},[r("el-form-item",{attrs:{label:"打卡时间",prop:"punchTime"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择打卡时间"},model:{value:e.handlePhotographPunchParams.punchTime,callback:function(t){e.$set(e.handlePhotographPunchParams,"punchTime",t)},expression:"handlePhotographPunchParams.punchTime"}})],1),r("el-form-item",{attrs:{label:"打卡照片",prop:"punchImages"}},[r("el-upload",{ref:"uploadPunchImagesRef",attrs:{"file-list":e.punchImagesList,"http-request":e.uploadPunchImages,"on-remove":e.delPunchImages,limit:1,action:"#","list-type":"picture-card"}},[r("i",{staticClass:"el-icon-plus"})])],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeHandlePhotographPunchDialog}},[e._v(" 取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handlePhotographPunch}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"代师傅开始出发",width:"40%",center:"",visible:e.remindStartedDialogVisible,"close-on-click-modal":!1,"before-close":e.closeRemindStartedDialog}},[r("div",[r("el-form",{ref:"handleRemindStartedParamsRef",attrs:{model:e.handleRemindStartedParams,rules:e.handleRemindStartedParamsRules}},[r("el-form-item",{attrs:{label:"出发时间",prop:"punchTime"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择出发时间"},model:{value:e.handleRemindStartedParams.punchTime,callback:function(t){e.$set(e.handleRemindStartedParams,"punchTime",t)},expression:"handleRemindStartedParams.punchTime"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeRemindStartedDialog}},[e._v(" 取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleRemindStarted}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"代师傅提交验收",width:"40%",center:"",visible:e.submitAcceptanceDialogVisible,"close-on-click-modal":!1,"before-close":e.closeSubmitAcceptanceDialog}},[r("div",[r("el-form",{ref:"handleSubmitAcceptanceParamsRef",attrs:{model:e.handleSubmitAcceptanceParams,rules:e.handleSubmitAcceptanceParamsRules}},[r("el-form-item",{attrs:{label:"验收时间",prop:"time"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择验收时间"},model:{value:e.handleSubmitAcceptanceParams.time,callback:function(t){e.$set(e.handleSubmitAcceptanceParams,"time",t)},expression:"handleSubmitAcceptanceParams.time"}})],1),r("el-form-item",{attrs:{label:"工单照片",prop:"offlineImages"}},[r("el-upload",{ref:"uploadOfflineImagesRef",attrs:{"file-list":e.offlineImagesList,"http-request":e.uploadOfflineImages,"on-remove":e.delOfflineImages,limit:1,action:"#","list-type":"picture-card"}},[r("i",{staticClass:"el-icon-plus"})])],1),r("el-form-item",{attrs:{label:"完工照片",prop:"completeImages"}},[r("div",[r("el-upload",{ref:"uploadCompleteImagesRef",attrs:{"file-list":e.completeImagesList,"http-request":e.uploadCompleteImages,"on-remove":e.delCompleteImages,multiple:!0,limit:6,action:"#","list-type":"picture-card"}},[r("i",{staticClass:"el-icon-plus"})])],1)])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeSubmitAcceptanceDialog}},[e._v(" 取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitAcceptance}},[e._v("确 定")])],1)])],1)},n=[],s=a("2909"),i=a("5530"),o=a("1da1"),l=(a("159b"),a("a15b"),a("a434"),a("d81d"),a("c740"),a("b0c0"),a("ac1f"),a("1276"),a("a9e3"),a("96cf"),a("c24f")),c=a("17eb"),u=a("f8b7"),m=a("8593"),d={title:"maintenance_order_desc",data:function(){return{handlePhotographPunchParams:{orderSn:null,punchImages:null,punchTime:null},photographPunchDialogVisible:!1,punchImagesList:[],handleRemindStartedParams:{orderSn:null,punchTime:null},remindStartedDialogVisible:!1,handleSubmitAcceptanceParams:{completeImages:"",offlineImages:"",orderSn:"",time:""},submitAcceptanceDialogVisible:!1,offlineImagesList:[],completeImagesList:[],handleRemindStartedParamsRules:{punchTime:[{required:!0,message:"请选择上门时间",trigger:"change"}]},handlePhotographPunchParamsRules:{punchImages:[{required:!0,message:"请上传打卡照片",trigger:"change"}],punchTime:[{required:!0,message:"请选择打卡时间",trigger:"change"}]},handleSubmitAcceptanceParamsRules:{time:[{required:!0,message:"请选择验收时间",trigger:"change"}],offlineImages:[{required:!0,message:"请上传线下工单",trigger:"change"}],completeImages:[{required:!0,message:"请上传线下工单",trigger:"change"}]},supplierInfoListTotal:null,supplierInfoListParams:{pageNo:1,pageSize:10,query:""},orderDiscountVisible:!1,handleOrderDiscountFlagParams:{orderSn:null,flag:null},faultDeratePriceVisible:!1,faultDeratePriceParams:{amount:null,orderSn:null,remark:null},faultDeratePriceParamsRules:{amount:[{required:!0,message:"请输入故障减免费用",trigger:"blur"}],remark:[{required:!0,message:"请输入减免费用备注",trigger:"blur"}]},consultCostRules:{amount:[{required:!0,message:"请填写协商金额",trigger:"blur"}],remarks:[{required:!0,message:"请填写备注",trigger:"blur"}],flag:[{required:!0,message:"请选择是否纳入折扣",trigger:"change"}]},consultCostParams:{orderSn:null,amount:null,remarks:null,flag:1},consultPriceVisible:!1,examineFaultsFormVideoList:[],examineFaultsFormPicList:[],chooseFaultItemVal:{},queryFaultItemsParams:{pageNo:1,pageSize:10,query:null},faultItemPages:null,faultItemTotal:null,faultItemList:[],addFaultVisible:!1,editBadPirceData:{operateType:"",amount:"",orderSn:""},editBadPirceShow:!1,partItemSend:!1,addEditPartTitle:"新增配件",setLogisticsData:{supplierId:null,supplierName:null},supplierList:[],setLogisticsDialogShow:!1,uploadPartImgList:[],searchPartQuery:null,choosePartIndex:null,jdProductList:[],warehouseSearchDialogShow:!1,partInfo:{remarks:null,stashPartsWay:1,brand:"",brandId:"",image:"",model:"",name:"",num:"",number:"",parameter:"",price:"",type:"",id:"",partId:""},addEditPartDialogShow:!1,oneClickSendrepair:!1,markTrunText:["非常不满意","不满意","一般","满意","非常满意"],examineFaultsForm:{},examineFaults:!1,examinePartsForm:{},examineParts:!1,platformVisitMessage:"",repairCommentImage:null,content:"",delOrderinpValue:"",cancelOrderDialog:!1,orderSn:"",data:{},activeName:"desc",status:"",url:{handleMasterQuotation:"/admin/maintenance/handleMasterQuotation",handleConfirmDeposit:"/admin/maintenance/handleConfirmDeposit",handleEnterpriseCheck:"/admin/maintenance/handleEnterpriseCheck",handleConfirmDepositToMaster:"/admin/maintenance/handleConfirmDepositToMaster",handleConfirmBalanceToMaster:"/admin/maintenance/handleConfirmBalanceToMaster"},quotationForm:{rejectReason:""},checkForm:{rejectReason:""},parts:{orderSn:"",doorAmount:"",otherAmount:"",partsAmount:"",technologyAmount:""},queryJdProductListParams:{pageNo:1,pageSize:100,query:""},partInfoRules:{model:[{required:!0,message:"请选择配件模式",trigger:"blur"}],type:[{required:!0,message:"请选择采买角色",trigger:"blur"}],name:[{required:!0,message:"请填写配件名称",trigger:"blur"}],brand:[{required:!0,message:"请填写配件品牌",trigger:"blur"}],parameter:[{required:!0,message:"请填写配件参数",trigger:"blur"}],price:[{required:!0,message:"请填写配件单价",trigger:"blur"}]}}},mounted:function(){this._getRepairOrderDetail(),console.info(this.$store)},created:function(){this.orderSn=this.$route.query.orderSn,this._getRepairOrderDetail()},methods:{handleEnterpriseCheck:function(e){var t=this;this.$confirm("您确定要操作代企业确认验收?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["a"])(e);case 2:r=a.sent,"操作成功"===r.message&&(t.$message({message:r.message,type:"success"}),t._getRepairOrderDetail());case 4:case"end":return a.stop()}}),a)}))))},handleProxyConfirmQuotation:function(e){var t=this;this.$confirm("您确定要操作代企业确认师傅报价?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["d"])({orderSn:e});case 2:r=a.sent,"操作成功"===r.message&&(t.$message({message:r.message,type:"success"}),t._getRepairOrderDetail());case 4:case"end":return a.stop()}}),a)}))))},handleProxyPayment:function(e){var t=this;this.$confirm("您确定要操作代企业付款(手动后标记企业已付款)?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["f"])(e);case 2:r=a.sent,"操作成功"===r.message&&(t.$message({message:r.message,type:"success"}),t._getRepairOrderDetail());case 4:case"end":return a.stop()}}),a)}))))},handleRemindStarted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["handleRemindStartedParamsRef"].validate();case 2:return t.next=4,Object(c["g"])(e.handleRemindStartedParams);case 4:a=t.sent,"操作成功"==a.message&&(e._getRepairOrderDetail(),e.closeRemindStartedDialog());case 6:case"end":return t.stop()}}),t)})))()},openRemindStartedDialog:function(e){this.handleRemindStartedParams.orderSn=e,this.remindStartedDialogVisible=!0},closeRemindStartedDialog:function(){this.$refs["handleRemindStartedParamsRef"].resetFields(),this.handleRemindStartedParams={orderSn:null,punchTime:null},this.remindStartedDialogVisible=!1},handlePhotographPunch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["handlePhotographPunchParamsRef"].validate();case 2:return t.next=4,Object(c["c"])(e.handlePhotographPunchParams);case 4:a=t.sent,"操作成功"==a.message&&(e._getRepairOrderDetail(),e.closeHandlePhotographPunchDialog());case 6:case"end":return t.stop()}}),t)})))()},openHandlePhotographPunchDialog:function(e){this.handlePhotographPunchParams.orderSn=e,this.photographPunchDialogVisible=!0},closeHandlePhotographPunchDialog:function(){this.$refs["handlePhotographPunchParamsRef"].resetFields(),this.handlePhotographPunchParams={orderSn:null,punchImages:null,punchTime:null},this.punchImagesList=[],this.$refs.uploadPunchImagesRef.$children[1].$el.style.display="",this.photographPunchDialogVisible=!1},uploadPunchImages:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.append("file",e.file),a.next=4,Object(m["a"])(r);case 4:n=a.sent,"操作成功"==n.message&&(t.handlePhotographPunchParams.punchImages=n.data,t.punchImagesList=[{url:n.data}],t.$refs.uploadPunchImagesRef.$children[1].$el.style.display="none",t.$refs.handlePhotographPunchParamsRef.validateField("punchImages"));case 6:case"end":return a.stop()}}),a)})))()},delPunchImages:function(){this.handlePhotographPunchParams.punchImages="",this.$refs.uploadPunchImagesRef.$children[1].$el.style.display="",this.$refs.handlePhotographPunchParamsRef.validateField("punchImages")},handleMasterQuotation:function(e){var t=this;this.$confirm("您确定要操作代师傅提交检测报价?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["b"])({orderSn:e});case 2:r=a.sent,"操作成功"===r.message&&(t.$message({message:r.message,type:"success"}),t._getRepairOrderDetail());case 4:case"end":return a.stop()}}),a)}))))},handleStartService:function(e){var t=this;this.$confirm("您确定要操作代师傅开始服务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["h"])(e);case 2:r=a.sent,"操作成功"===r.message&&(t.$message({message:r.message,type:"success"}),t._getRepairOrderDetail());case 4:case"end":return a.stop()}}),a)}))))},handleSubmitAcceptance:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["handleSubmitAcceptanceParamsRef"].validate();case 2:return t.next=4,Object(c["i"])(e.handleSubmitAcceptanceParams);case 4:a=t.sent,"操作成功"==a.message&&(e._getRepairOrderDetail(),e.closeSubmitAcceptanceDialog());case 6:case"end":return t.stop()}}),t)})))()},openSubmitAcceptanceDialog:function(e){this.handleSubmitAcceptanceParams.orderSn=e,this.submitAcceptanceDialogVisible=!0},closeSubmitAcceptanceDialog:function(){this.$refs["handleSubmitAcceptanceParamsRef"].resetFields(),this.handleSubmitAcceptanceParams={completeImages:"",offlineImages:"",orderSn:"",time:""},this.completeImagesList=[],this.offlineImagesList=[],this.$refs.uploadOfflineImagesRef.$children[1].$el.style.display="",this.$refs.uploadCompleteImagesRef.$children[1].$el.style.display="",this.submitAcceptanceDialogVisible=!1},uploadOfflineImages:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.append("file",e.file),a.next=4,Object(m["a"])(r);case 4:n=a.sent,"操作成功"==n.message&&(t.handleSubmitAcceptanceParams.offlineImages=n.data,t.offlineImagesList=[{url:n.data}],t.$refs.uploadOfflineImagesRef.$children[1].$el.style.display="none",t.$refs.handleSubmitAcceptanceParamsRef.validateField("offlineImages"));case 6:case"end":return a.stop()}}),a)})))()},delOfflineImages:function(){this.handleSubmitAcceptanceParams.offlineImages="",this.$refs.uploadOfflineImagesRef.$children[1].$el.style.display="",this.$refs.handleSubmitAcceptanceParamsRef.validateField("offlineImages")},uploadCompleteImages:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.append("file",e.file),a.next=4,Object(m["a"])(r);case 4:n=a.sent,"操作成功"==n.message&&(t.completeImagesList.push({url:n.data}),s=[],t.completeImagesList.forEach((function(e){s.push(e.url)})),t.handleSubmitAcceptanceParams.completeImages=s.join(","),s.length>=6&&(t.$refs.uploadCompleteImagesRef.$children[1].$el.style.display="none"),t.$refs.handleSubmitAcceptanceParamsRef.validateField("completeImages"));case 6:case"end":return a.stop()}}),a)})))()},delCompleteImages:function(e){var t=[];this.completeImagesList.forEach((function(e){t.push(e.url)}));var a=t.indexOf(e.url);this.completeImagesList.splice(a,1),t.splice(a,1),this.handleSubmitAcceptanceParams.completeImages=t.join(","),this.$refs.uploadCompleteImagesRef.$children[1].$el.style.display="",this.$refs.handleSubmitAcceptanceParamsRef.validateField("completeImages")},handleOfflineImages:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.append("file",e.file),a.next=4,Object(m["a"])(r);case 4:if(n=a.sent,"操作成功"!=n.message){a.next=10;break}return a.next=8,Object(u["Q"])({offlineImages:n.data,orderSn:e.data.orderSn});case 8:s=a.sent,"操作成功"==s.message&&t._getRepairOrderDetail();case 10:case"end":return a.stop()}}),a)})))()},changesupplierInfoListPage:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.supplierInfoListParams.pageNo=e,a.next=3,Object(u["mb"])(t.supplierInfoListParams);case 3:r=a.sent,t.supplierList=r.data.records,t.supplierInfoListTotal=r.data.total;case 6:case"end":return a.stop()}}),a)})))()},confirmOrderDiscount:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.handleOrderDiscountFlagParams,r=a.orderSn,n=a.flag,t.next=3,Object(u["R"])(r,n);case 3:if(s=t.sent,"操作成功"!=s.message){t.next=10;break}return e.$message({message:s.message,type:"success"}),t.next=8,e._getRepairOrderDetail();case 8:return t.next=10,e.closeOrderDiscountDialog();case 10:case"end":return t.stop()}}),t)})))()},closeOrderDiscountDialog:function(){this.handleOrderDiscountFlagParams={orderSn:null,flag:null},this.orderDiscountVisible=!1},openOrderDiscountDialog:function(e,t){this.handleOrderDiscountFlagParams.orderSn=e,this.handleOrderDiscountFlagParams.flag=t,this.orderDiscountVisible=!0},changeType:function(){this.$refs.partInfoRuleForm.validateField("type")},changeModel:function(){this.$refs.partInfoRuleForm.validateField("model")},confirmSetFaultDeratePrice:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["faultDeratePriceParamsRef"].validate();case 2:return t.next=4,Object(u["I"])(e.faultDeratePriceParams);case 4:a=t.sent,"操作成功"==a.message&&(e.$message({message:a.message,type:"success"}),e._getRepairOrderDetail(),e.closeFaultDeratePriceDialog());case 6:case"end":return t.stop()}}),t)})))()},closeFaultDeratePriceDialog:function(){this.faultDeratePriceParams={amount:null,orderSn:null,remark:null},this.$refs["faultDeratePriceParamsRef"].resetFields(),this.faultDeratePriceVisible=!1},openFaultDeratePriceDialog:function(e,t,a){this.faultDeratePriceParams.orderSn=e,this.faultDeratePriceParams.amount=t,this.faultDeratePriceParams.remark=a,this.faultDeratePriceVisible=!0},searchMaintenanceSupplierInfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.supplierInfoListParams.pageNo=1,t.next=3,Object(u["mb"])(e.supplierInfoListParams);case 3:a=t.sent,e.supplierList=a.data.records,e.supplierInfoListTotal=a.data.total;case 6:case"end":return t.stop()}}),t)})))()},synchronizationJdOrder:function(e){var t=this;this.$confirm("您确定同步金蝶单据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["Gb"])({orderSn:e});case 2:r=a.sent,"操作成功"===r.message&&t._getRepairOrderDetail();case 4:case"end":return a.stop()}}),a)}))))},markOrderCompletion:function(e){var t=this;this.$confirm("确认操作吗？(散单需企业实际支付才可以点击此操作)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["Z"])(e);case 2:r=a.sent,"操作成功"===r.message&&(t.$message({message:"操作成功",type:"success"}),t._getRepairOrderDetail());case 4:case"end":return a.stop()}}),a)}))))},handleSystemCreateOrder:function(e){var t=this;this.$confirm("您确实要操作机将大师傅接单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["X"])(e);case 2:r=a.sent,"操作成功"==r.message&&(t.$message({type:"success",message:r.message}),t._getRepairOrderDetail());case 4:case"end":return a.stop()}}),a)}))))},delExamineFaultsFormPicList:function(){this.examineFaultsForm.image[0]=null,this.examineFaultsFormPicList=[]},confirmConsultPrice:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["consultCostForm"].validate();case 2:return t.next=4,Object(u["e"])(e.consultCostParams);case 4:a=t.sent,"操作成功"===a.message&&(e.closeConsultPriceDialog(),e._getRepairOrderDetail());case 6:case"end":return t.stop()}}),t)})))()},openConsultPriceDialog:function(e,t,a){this.consultCostParams.orderSn=e,this.consultCostParams.amount=(t?+t:0)+(a?+a:0),this.consultPriceVisible=!0},closeConsultPriceDialog:function(){this.consultCostParams={orderSn:null,amount:null,remarks:null,flag:1},this.$refs["consultCostForm"].resetFields(),this.consultPriceVisible=!1},delExamineFaultsFormVideo:function(){this.examineFaultsFormVideoList=[],this.examineFaultsForm.image[1]=null},viewVideo:function(e){window.open(e)},uploadExamineFaultsFormVideoList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$loading({lock:!0,text:"上传故障视频...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=new FormData,n.append("file",e.file),a.next=5,Object(m["a"])(n);case 5:s=a.sent,s&&(r.close(),s.data&&(t.examineFaultsForm.image||(t.examineFaultsForm.image=[]),t.examineFaultsForm.image[1]=s.data,t.examineFaultsFormVideoList=[{url:s.data}]));case 7:case"end":return a.stop()}}),a)})))()},uploadExamineFaultsFormPicList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$loading({lock:!0,text:"上传故障图片...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=new FormData,n.append("file",e.file),a.next=5,Object(m["a"])(n);case 5:s=a.sent,s&&(r.close(),s.data&&(t.examineFaultsForm.image||(t.examineFaultsForm.image=[]),t.examineFaultsForm.image[0]=s.data,t.examineFaultsFormPicList=[{url:s.data}]));case 7:case"end":return a.stop()}}),a)})))()},confirmAddFault:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.chooseFaultItemVal.id){t.next=3;break}return e.$message({showClose:!0,message:"请选择要新增的故障项目",type:"warning"}),t.abrupt("return");case 3:return t.next=5,Object(u["a"])(e.chooseFaultItemVal);case 5:if(a=t.sent,"操作成功"!=a.message){t.next=10;break}return t.next=9,e._getRepairOrderDetail();case 9:e.closeAddFaultDialog();case 10:case"end":return t.stop()}}),t)})))()},closeAddFaultDialog:function(){this.chooseFaultItemVal={},this.queryFaultItemsParams={pageNo:1,pageSize:10,query:null},this.addFaultVisible=!1},searchFaultList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.queryFaultItemsParams.pageNo=1,t.next=3,e.queryFaultItems();case 3:case"end":return t.stop()}}),t)})))()},changeFaultDialogPage:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.queryFaultItemsParams.pageNo=e,a.next=3,t.queryFaultItems();case 3:case"end":return a.stop()}}),a)})))()},chooseFaultItem:function(e){this.chooseFaultItemVal=Object(i["a"])(Object(i["a"])({},this.chooseFaultItemVal),e)},queryFaultItems:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["ib"])(e.queryFaultItemsParams);case 2:a=t.sent,e.faultItemList=a.data.records,e.faultItemPages=a.data.pages,e.faultItemTotal=a.data.total;case 6:case"end":return t.stop()}}),t)})))()},openAddFaultDialog:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.queryFaultItems();case 2:t.chooseFaultItemVal.orderSn=e,t.addFaultVisible=!0;case 4:case"end":return a.stop()}}),a)})))()},closeEditBadPirce:function(){this.editBadPirceShow=!1,this.editBadPirceData={operateType:"",amount:"",orderSn:""}},confirmEditBadPirce:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["J"])(e.editBadPirceData);case 2:a=t.sent,"操作成功"==a.message&&(e._getRepairOrderDetail(),e.closeEditBadPirce());case 4:case"end":return t.stop()}}),t)})))()},openEditBadPirce:function(){this.editBadPirceShow=!0,this.editBadPirceData.orderSn=this.orderSn},oneClickSendrepairFn:function(){var e=this;this.$confirm("确认配件信息无误，一键寄修","一键寄修",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["Fb"])(e.orderSn);case 2:a=t.sent,"操作成功"==a.message&&(e.$message({type:"success",message:a.message}),e._getRepairOrderDetail());case 4:case"end":return t.stop()}}),t)}))))},delUploadPartImg:function(e){var t=this.uploadPartImgList.map((function(e){return e.url})).indexOf(e.url);this.uploadPartImgList.splice(t,1);var a=[];this.uploadPartImgList.forEach((function(e){a.push(e.url)})),this.partInfo.image=a.join(",")},confirmSetLogistics:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["z"])(e.setLogisticsData);case 2:a=t.sent,"操作成功"==a.message&&(e.$message({type:"success",message:"操作成功!"}),e._getRepairOrderDetail(),e.closeSetLogistics());case 4:case"end":return t.stop()}}),t)})))()},closeSetLogistics:function(){this.setLogisticsData={supplierId:null,supplierName:null},this.supplierInfoListParams={pageNo:1,pageSize:10,query:""},this.setLogisticsDialogShow=!1},changeSupplier:function(e){var t=this.supplierList.findIndex((function(t){return t.supplierName==e}));this.setLogisticsData.supplierId=this.supplierList[t].id},openSetLogistics:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.setLogisticsData.orderSn=t,a.setLogisticsData.id=e.id,a.setLogisticsData.model=e.model,e.supplierId&&(n=e.supplierId,s=e.supplierName,a.setLogisticsData.supplierId=n,a.setLogisticsData.supplierName=s),r.next=6,Object(u["mb"])(a.supplierInfoListParams);case 6:i=r.sent,a.supplierList=i.data.records,a.supplierInfoListTotal=i.data.total,a.setLogisticsDialogShow=!0;case 10:case"end":return r.stop()}}),r)})))()},confirmAddEditPart:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["partInfoRuleForm"].validate();case 2:return a=Object(i["a"])({},e.partInfo),t.next=5,Object(u["t"])(a);case 5:r=t.sent,"操作成功"==r.message&&(e.$message({type:"success",message:"操作成功!"}),e._getRepairOrderDetail(),e.closeAddEditPart());case 7:case"end":return t.stop()}}),t)})))()},changeStashPartsWay:function(){this.partInfo.brand="",this.partInfo.brandId="",this.partInfo.parameter="",this.partInfo.name="",this.partInfo.number="",this.partInfo.unitId="",this.partInfo.price="",this.partInfo.partId=""},uploadPartImg:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$loading({lock:!0,text:"图片上传中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),setTimeout((function(){r.close()}),7e3),n=new FormData,n.append("file",e.file),a.next=6,Object(m["a"])(n);case 6:s=a.sent,t.uploadPartImgList||(t.uploadPartImgList=[]),t.uploadPartImgList.push({url:s.data}),i=[],t.uploadPartImgList.forEach((function(e){i.push(e.url)})),t.partInfo.image=i.join(","),r.close();case 13:case"end":return a.stop()}}),a)})))()},closeAddEditPart:function(){this.partInfo={stashPartsWay:1,brand:"",brandId:"",image:"",model:"",name:"",num:"",number:"",parameter:"",price:"",type:"",id:"",partId:""},this.uploadPartImgList=[],this.addEditPartDialogShow=!1,this.$refs["partInfoRuleForm"].resetFields()},comfirmWarehousePart:function(){var e=this.jdProductList[this.choosePartIndex],t=e.brandId,a=e.brandName,r=e.id,n=e.model,s=e.name,i=e.number,o=e.unitId,l=e.price;this.partInfo.brand=a,this.partInfo.brandId=t,this.partInfo.partId=r,this.partInfo.parameter=n,this.partInfo.name=s,this.partInfo.number=i,this.partInfo.unitId=o,this.partInfo.price=l,this.closeWarehouseSearch()},closeWarehouseSearch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.queryJdProductListParams.query="",e.jdProductList=[],e.queryJdProductList(),e.warehouseSearchDialogShow=!1;case 4:case"end":return t.stop()}}),t)})))()},queryJdProductList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.choosePartIndex=null,t.next=3,Object(u["kb"])(e.queryJdProductListParams);case 3:a=t.sent,e.jdProductList=a.data.records;case 5:case"end":return t.stop()}}),t)})))()},openWarehouseSearch:function(){this.warehouseSearchDialogShow=!0,this.queryJdProductList()},openAddEditPart:function(e,t,a){var r=this;if(t||0==t){if(this.partInfo=Object(i["a"])({},e),e.image){var n=e.image.split(",");this.uploadPartImgList=[],n.forEach((function(e){r.uploadPartImgList.push({url:e})}))}this.addEditPartTitle="修改配件"}else this.addEditPartTitle="新增配件";this.partInfo.orderSn=a,this.addEditPartDialogShow=!0},confirmSendrepair:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["Fb"])(e.orderSn);case 2:e.closeOneClickSendrepair();case 3:case"end":return t.stop()}}),t)})))()},closeOneClickSendrepair:function(){this.oneClickSendrepair=!1},openOneClickSendrepair:function(){this.oneClickSendrepair=!0},comfirmExamineFaults:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Array.isArray(e.examineFaultsForm.image)&&(e.examineFaultsForm.image=JSON.stringify(e.examineFaultsForm.image)),t.next=3,Object(u["v"])(e.examineFaultsForm);case 3:if(a=t.sent,"操作成功"!=a.message){t.next=10;break}return e.$message({type:"success",message:"操作成功!"}),t.next=8,e.closeExamineFaultsDialog();case 8:return t.next=10,e._getRepairOrderDetail();case 10:case"end":return t.stop()}}),t)})))()},closeExamineFaultsDialog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.examineFaultsFormVideoList=[],e.examineFaultsFormPicList=[],e.examineFaultsForm={},e.examineFaults=!1;case 4:case"end":return t.stop()}}),t)})))()},openExamineFaultsDialog:function(e,t,a){this.examineFaultsForm=Object(i["a"])({},e),this.examineFaultsForm.enterpriseConsultAmount||(this.examineFaultsForm.enterpriseConsultAmount=this.examineFaultsForm.annualAmount),this.examineFaultsForm.image&&(this.examineFaultsForm.image[0]&&(this.examineFaultsFormPicList=[{url:this.examineFaultsForm.image[0]}]),this.examineFaultsForm.image[1]&&(this.examineFaultsFormVideoList=[{url:this.examineFaultsForm.image[1]}])),Array.isArray(e.image)&&e.image.length>0&&(this.examineFaultsForm.image=Object(s["a"])(e.image)),this.examineFaultsForm.orderSn=t,this.examineFaults=!0},delSolvePlan:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.$confirm("您确定删除该故障项目吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e.id),r.next=3,Object(u["i"])({id:e.id,orderSn:t});case 3:n=r.sent,"操作成功"==n.message&&(a.$message({type:"success",message:"删除成功"}),a._getRepairOrderDetail());case 5:case"end":return r.stop()}}),r)}))));case 1:case"end":return r.stop()}}),r)})))()},editOfferPrice:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=0,e.data.partsList.forEach((function(e){a+=e.num*e.price})),e.data.partsAmount=a,r=0,e.data.faults.forEach((function(e){r+=Number(e.masterAmount)})),e.data.doorAmount=r,n=JSON.stringify(e.data.faults),s=JSON.stringify(e.data.partsList),e.data.faults=n,e.data.parts=s,t.next=12,Object(u["u"])(e.data);case 12:i=t.sent,"操作成功"===i.message&&e._getRepairOrderDetail();case 14:case"end":return t.stop()}}),t)})))()},delPartsList:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.$confirm("您确定删除该配件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["j"])({id:e.id,orderSn:t});case 2:n=r.sent,"操作成功"==n.message&&(a.$message({type:"success",message:"删除成功"}),a._getRepairOrderDetail());case 4:case"end":return r.stop()}}),r)}))));case 1:case"end":return r.stop()}}),r)})))()},comfirmExamineParts:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["y"])(e.examinePartsForm);case 2:a=t.sent,"操作成功"===a.message&&(e.$message({message:a.message,type:"success"}),e.closeExaminePartsDialog(),e._getRepairOrderDetail());case 4:case"end":return t.stop()}}),t)})))()},closeExaminePartsDialog:function(){this.examinePartsForm=[],this.examineParts=!1},openExaminePartsDialog:function(e,t){var a=this;this.$confirm("确认配件信息无误，通过审核","审核配件",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["y"])({id:e.id,orderSn:t});case 2:n=r.sent,"操作成功"==n.message&&a._getRepairOrderDetail();case 4:case"end":return r.stop()}}),r)}))))},goToLogisticsDetails:function(e,t,a){this.$router.push({name:"logisticsDetails",query:{partId:e,model:t,orderSn:a}})},addReturnVistInfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.platformVisitMessage){t.next=4;break}e.$message({message:"回访信息不能为空",type:"warning"}),t.next=8;break;case 4:return t.next=6,Object(u["U"])({orderSn:e.orderSn,platformVisitMessage:e.platformVisitMessage});case 6:a=t.sent,"操作成功"==a.message?(e.$message({message:a.message,type:"success"}),e._getRepairOrderDetail()):e.$message({message:"网络不佳，稍后重试",type:"warning"});case 8:case"end":return t.stop()}}),t)})))()},goAssignedMasterPage:function(){var e=this.data,t=e.orderSn,a=e.masterUidList,r=e.masterNameList;this.$router.push({path:"/maintenance/assignedWorker",query:{orderSn:t,masterUidList:a,masterNameList:r}})},judgeAssignedBtnShow:function(){return 1===this.data.enterpriseMainStatus||(0===this.data.enterpriseMainStatus?0!==this.data.platformStatus:-1===this.data.enterpriseMainStatus&&-1===this.data.platformStatus||void 0)},descConfirm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={content:e.content,orderSn:e.data.orderSn},t.next=3,Object(u["s"])(a);case 3:r=t.sent,"操作成功"===r.message&&location.reload();case 5:case"end":return t.stop()}}),t)})))()},clickCancelOrderDialog:function(){this.cancelOrderDialog=!0},closecancelOrderDialog:function(){this.cancelOrderDialog=!1,this.delOrderinpValue=""},judgeParts:function(){return!!this.data.partsList&&(!this.data.partsList||0!==this.data.partsList.length)},judgeFault:function(){return!!this.data.programmeList&&(void 0!==this.data.programmeList.analysis||void 0!==this.data.programmeList.desc||void 0!==this.data.programmeList.programme)},judgeOrderCost:function(){var e=this.data,t=e.doorAmount,a=e.technologyAmount,r=e.partsAmount,n=e.otherAmount;return!(0===t&&0===a&&0===n&0===r)},_cancelRepairOrder:function(){var e=this,t={orderSn:this.orderSn,cancelReason:this.delOrderinpValue};Object(u["d"])(t).then((function(t){t&&(e.$message({showClose:!0,message:t.message,type:"success"}),e.$router.push("/maintenance/maintenance_order"))}))},changeStuta:function(e){1==e.value?this.status=2:this.status=3},srueAccomont:function(){this.$refs.quotationForm.open()},_handleMasterPayment:function(){var e=this,t={orderSn:this.orderSn};Object(u["N"])(t).then((function(t){t&&e.$message({showClose:!0,message:t.message,type:"success"})}))},sumbitQuotation:function(e){var t=this;this.$confirm("确认定价无误?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),r={orderSn:e,status:2,rejectReason:""};Object(u["x"])(r).then((function(e){a.close(),e.success&&(t.$message({showClose:!0,message:e.message,type:"success"}),t.$router.push("/maintenance/maintenance_order"))})).catch((function(){a.close()}))}))},quotationInit:function(){this.quotationForm={enterpriseOrderSn:this.data.orderSn,status:"0"},this.$refs.quotationForm.open()},resetQuotationForm:function(e){this._getRepairOrderDetail(),e(!1)},jump2check:function(){this.$router.push({name:"checkPricing",query:{orderSn:this.data.orderSn,edit:!0}})},pay:function(){var e=this;this.$axios.post(this.url.handleConfirmDeposit,{enterpriseOrderSn:location.hash.split("?enterpriseOrderSn=")[1],type:2305==this.data.enterpriseSubStatus?1:2}).then((function(t){"000"==t.code&&(e.$message({showClose:!0,message:t.message,type:"success"}),e._getRepairOrderDetail())})).catch((function(e){console.error(e)}))},checkInit:function(){this.checkForm={enterpriseOrderSn:this.data.orderSn,status:"0"},this.$refs.checkForm.open()},resetCheckForm:function(e){this._getRepairOrderDetail(),e(!1)},handleConfirmDepositToMaster:function(e){var t=this;this.$axios.post(this.url.handleConfirmDepositToMaster,{enterpriseOrderSn:location.hash.split("?enterpriseOrderSn=")[1],type:"2306"==this.data.enterpriseSubStatus?1:2}).then((function(a){"000"==a.code&&t.$message({showClose:!0,message:a.message,type:"success"}),t.resetPlatformPay(e)})).catch((function(e){console.error(e)}))},platformPayInit:function(){"2502"!=this.data.enterpriseSubStatus?this.$refs.platform.open():this.handleConfirmDepositToMaster()},sumbitPlatformPay:function(e){"2601"==this.data.enterpriseSubStatus?this.remit(e):this.handleConfirmDepositToMaster(e)},remit:function(e){var t=this;this.$axios.post(this.url.handleConfirmBalanceToMaster,{enterpriseOrderSn:location.hash.split("?enterpriseOrderSn=")[1]}).then((function(a){"000"==a.code&&t.$message({showClose:!0,message:a.message,type:"success"}),t.resetPlatformPay(e)})).catch((function(e){console.error(e)}))},resetPlatformPay:function(e){this._getRepairOrderDetail(),e(!1)},_getRepairOrderDetail:function(){var e=this,t={enterpriseOrderSn:this.orderSn};Object(l["f"])(t).then((function(t){var a,r;t.success&&(t.data.enrollRepairOrderOutList&&t.data.enrollRepairOrderOutList.forEach((function(e){var t;e.faults&&(e.faults=JSON.parse(e.faults),(null===(t=e.faults)||void 0===t?void 0:t.length)>0&&e.faults.forEach((function(e){"string"==typeof e.image&&(e.image=JSON.parse(e.image))})));e.parts&&(console.log(4050,e.parts),e.parts=JSON.parse(e.parts)),e.completeImages&&(e.completeImages=e.completeImages.split(","))})),t.data.faults=JSON.parse(t.data.faults),(null===(a=t.data.faults)||void 0===a?void 0:a.length)>0&&t.data.faults.forEach((function(e){"string"==typeof e.image&&(e.image=JSON.parse(e.image))})),t.data.partsList&&t.data.partsList.forEach((function(t){1==t.model&&2==t.type&&(e.partItemSend=!0)})),e.data=t.data,t.data&&null!==(r=t.data.repairComment)&&void 0!==r&&r.images&&(e.repairCommentImage=e.data.repairComment.images.split(",")),e.$message({showClose:!0,message:t.message,type:"success"}))}))}}},p=d,f=(a("bd03"),a("2877")),h=Object(f["a"])(p,r,n,!1,null,"71e3ccb0",null);t["default"]=h.exports},"5d07":function(e,t,a){},a15b:function(e,t,a){"use strict";var r=a("23e7"),n=a("e330"),s=a("44ad"),i=a("fc6a"),o=a("a640"),l=n([].join),c=s!=Object,u=o("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return l(i(this),void 0===e?",":e)}})},a8e1:function(e,t){e.exports="data:image/png;base64,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"},bae6:function(e,t){e.exports="data:image/png;base64,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"},bd03:function(e,t,a){"use strict";a("5d07")},c24f:function(e,t,a){"use strict";a.d(t,"j",(function(){return n})),a.d(t,"p",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"q",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"l",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"h",(function(){return f})),a.d(t,"g",(function(){return h})),a.d(t,"c",(function(){return g})),a.d(t,"n",(function(){return v})),a.d(t,"o",(function(){return b})),a.d(t,"m",(function(){return y})),a.d(t,"k",(function(){return x}));var r=a("b775");a("cb5c");function n(e){return Object(r["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/admin/userInfo/handleUserInfoStatus",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/admin/userInfo/handleAccountEdit",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/admin/userInfo/queryMoney",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/admin/userInfo/toVip",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function x(e){return Object(r["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}}}]);