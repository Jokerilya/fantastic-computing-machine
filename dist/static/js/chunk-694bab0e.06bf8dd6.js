(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-694bab0e"],{"1e35":function(t,e,n){},"39c1":function(t,e,n){"use strict";n("ba7b")},"7c64":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"manage-top",staticStyle:{display:"flex"}},[n("el-form",{staticStyle:{width:"100%"},attrs:{"label-width":"88px","label-position":"right"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",[n("el-button",{staticStyle:{"margin-bottom":"22px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addNews("new")}}},[t._v("添加资讯")])],1)],1)],1)],1),n("div",{staticStyle:{height:"16px"}}),n("div",{staticClass:"manage-table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataConfig.loading,expression:"dataConfig.loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"","header-cell-style":{color:"#666"}}},[n("el-table-column",{attrs:{label:"编号",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.id||"--"))])]}}])}),n("el-table-column",{attrs:{label:"封面图片",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("el-image",{staticStyle:{height:"80px"},attrs:{"preview-src-list":[t.row.coverPicture],src:t.row.coverPicture}})]}}])}),n("el-table-column",{attrs:{label:"资讯标题","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.title||"--"))])]}}])}),n("el-table-column",{attrs:{label:"添加时间",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.createTime||"--"))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.addNews("edit",e.row)}}},[t._v("编辑")]),n("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(n){return t.classifyDel(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),n("div",{staticStyle:{height:"16px"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"table-block"},[n("el-pagination",{attrs:{background:"","current-page":t.dataConfig.pageNo,"page-size":t.dataConfig.pageSize,"page-sizes":[20,30,50,100],layout:"total,sizes, prev, pager, next",total:t.dataConfig.total},on:{"size-change":t.handleSizeChange,"current-change":t.currentChangeFn,"update:currentPage":function(e){return t.$set(t.dataConfig,"pageNo",e)},"update:current-page":function(e){return t.$set(t.dataConfig,"pageNo",e)}}})],1),n("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"1000px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"newsForm",staticStyle:{"padding-right":"20px"},attrs:{model:t.newsForm,rules:t.rules,"label-width":"110px"}},[n("el-form-item",{attrs:{label:"资讯标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入新闻资讯的标题"},model:{value:t.newsForm.title,callback:function(e){t.$set(t.newsForm,"title",e)},expression:"newsForm.title"}})],1),n("el-form-item",{attrs:{label:"资讯封面图",prop:"coverPicture"}},[n("upload-img",{attrs:{width:"80px",height:"80px",img:t.newsForm.coverPicture},on:{uploadSuc:t.uploadSucFn}})],1),n("el-form-item",{attrs:{label:"资讯详情",prop:"content"}},[t.dialogVisible?n("tinymce",{attrs:{height:600},model:{value:t.newsForm.content,callback:function(e){t.$set(t.newsForm,"content",e)},expression:"newsForm.content"}}):t._e()],1)],1),n("span",{staticStyle:{"padding-right":"20px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addNewsSubmit("newsForm")}}},[t._v("确定"+t._s("编辑新闻资讯"===t.dialogTitle?"编辑":"添加"))])],1)],1)],1)},a=[],s=n("2909"),r=n("1da1"),o=(n("96cf"),n("a434"),n("99af"),n("b775"));n("cb5c");function c(t){return Object(o["a"])({url:"/admin/operation/queryOperationNews",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/admin/operation/getOperationNewsDetail",method:"get",params:t})}function u(t){return Object(o["a"])({url:"/admin/operation/editOperationNews",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/admin/operation/delOperationNews",method:"get",params:t})}var g=n("1d6e"),p=n("8256"),h={components:{Tinymce:p["a"],uploadImg:g["a"]},data:function(){return{dataList:[],dataConfig:{pageNo:1,pageSize:20,total:0,loading:!0},dialogTitle:"添加新闻资讯",dialogVisible:!1,newsForm:{title:"",coverPicture:"",content:"",sort:0},rules:{title:[{required:!0,message:"请输入新闻资讯的标题",trigger:"blur"}],coverPicture:[{required:!0,message:"请上传封面图",trigger:"upload"}],content:[{required:!0,message:"请输入新闻详情",trigger:"blur"}]}}},created:function(){this.getDataListFn()},methods:{getDataListFn:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dataConfig.loading=!0,e.next=3,c({pageNo:t.dataConfig.pageNo,pageSize:t.dataConfig.pageSize});case 3:i=e.sent,a=t.resDataFn(i),t.dataConfig.total=a.total,(n=t.dataList).splice.apply(n,[0,t.dataList.length].concat(Object(s["a"])(a.records)));case 7:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.dataConfig.pageSize=t,this.getDataListFn()},currentChangeFn:function(t){this.dataConfig.pageNo=t,this.getDataListFn()},queryDataFn:function(){this.dataConfig.pageNo=1,this.dataConfig.pageSize=20,this.getDataListFn()},resSetQueryFn:function(){this.dataConfig.pageNo=1,this.dataConfig.pageSize=20,this.getDataListFn()},uploadSucFn:function(t){this.newsForm.coverPicture=t},addNews:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var a,s,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(s in a=n.$loading(),n.dialogTitle="添加新闻资讯",n.newsForm)"number"===typeof n.newsForm[s]?n.newsForm[s]=0:n.newsForm[s]="";if("edit"!==t){i.next=9;break}return n.dialogTitle="编辑新闻资讯",i.next=7,l({id:e.id});case 7:r=i.sent,"000"===r.code&&(n.newsForm=r.data);case 9:a.close(),n.dialogVisible=!0;case 11:case"end":return i.stop()}}),i)})))()},addNewsSubmit:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$refs[t].validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return t.abrupt("return",!1);case 4:return"添加新闻资讯"===e.dialogTitle&&delete e.newsForm.id,delete e.newsForm.createTime,t.next=8,u(e.newsForm);case 8:i=t.sent,"000"===i.code&&(e.$message({type:"success",message:"操作成功!"}),e.dialogVisible=!1,e.getDataListFn());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},classifyDel:function(t,e){var n=this;this.$confirm("此操作将永久删除该条资讯, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,d({id:e.id});case 2:a=i.sent,"000"===a.code&&(n.$message({type:"success",message:"删除成功!"}),n.dataList.splice(t,1));case 4:case"end":return i.stop()}}),i)})))).catch((function(){}))}}},f=h,m=(n("db25"),n("2877")),b=Object(m["a"])(f,i,a,!1,null,"5905a631",null);e["default"]=b.exports},8256:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},a=[],s=(n("b680"),n("a9e3"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 上传图片 ")]),n("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-upload",{ref:"uploadImg",staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"before-upload":t.beforeUpload,action:t.qiniuHost,"list-type":"picture-card","http-request":t.httpRequestFn},scopedSlots:t._u([{key:"file",fn:function(e){var i=e.file;return n("div",{staticClass:"show_img_box"},[n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:i.url,alt:""}}),n("div",{staticClass:"progress"},[parseInt(t.fileProgress[i.uid])>=100?n("span",{staticClass:"delete_icon",on:{click:function(e){return t.handleRemove(i)}}},[n("i",{staticClass:"el-icon-delete"})]):t._e(),parseInt(t.fileProgress[i.uid])<100?n("el-progress",{staticStyle:{color:"#FFFFFF"},attrs:{type:"circle",percentage:parseInt(t.fileProgress[i.uid])}}):t._e()],1)])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 确认 ")])],1)],1)}),r=[],o=n("5530"),c=(n("b64b"),n("d81d"),n("c740"),n("a434"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("cb5c")),l=n("2f62"),u=n("8593"),d={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{qiniuHost:c["qiniuHost"],dialogVisible:!1,listObj:{},fileList:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(l["c"])(["token"])),{},{fileProgress:function(){return this.$store.state.user.fileProgress}}),methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},httpRequestFn:function(t){var e=this,n=this.$loading({text:"上传中.."}),i=new FormData;i.append("file",t.file),Object(u["a"])(i).then((function(i){console.log(i),e.$emit("uploadSuc",i),e.handleSuccess(i.data,t.file),e.checkAllSuccess()&&(n.close(),e.$message({showClose:!0,message:"图片上传成功！点击确认插入文本编辑器",type:"success"}))})).catch((function(){e.$message({showClose:!0,message:"文件上传失败！",type:"warning"}),n.close()}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(console.log(e),this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待图片上传成功。如果出现网络问题，请刷新页面并重新上传！")},handleSuccess:function(t,e){for(var n=e.uid,i=Object.keys(this.listObj),a=0,s=i.length;a<s;a++)if(this.listObj[i[a]].uid===n)return this.listObj[i[a]].url=t,void(this.listObj[i[a]].hasSuccess=!0)},handleRemove:function(t){var e=this.$refs.uploadImg.uploadFiles,n=e.findIndex((function(e){return e.uid===t.uid}));e.splice(n,1);var i=t.uid;delete this.listObj[i]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(a,s){var r=new Image;r.src=n.createObjectURL(t),r.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},a(!0)}))}}},g=d,p=(n("8502"),n("2877")),h=Object(p["a"])(g,s,r,!1,null,null,null),f=h.exports,m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],b=m,w=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],y=w,v=n("b85c"),_=[];function C(){return window.tinymce}var k=function(t,e){var n=document.getElementById(t),i=e||function(){};if(!n){var a=document.createElement("script");a.src=t,a.id=t,document.body.appendChild(a),_.push(i);var s="onload"in a?r:o;s(a)}function r(e){e.onload=function(){this.onerror=this.onload=null;var t,n=Object(v["a"])(_);try{for(n.s();!(t=n.n()).done;){var i=t.value;i(null,e)}}catch(a){n.e(a)}finally{n.f()}_=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error(t+"加载失败"),e)}}function o(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,n=Object(v["a"])(_);try{for(n.s();!(e=n.n()).done;){var i=e.value;i(null,t)}}catch(a){n.e(a)}finally{n.f()}_=null}}}n&&i&&(C()?i(null,n):_.push(i))},S=k,x="https://snk-1305456087.cos.ap-guangzhou.myqcloud.com/js/tinymce%404.9.3.min.js",F={name:"Tinymce",components:{editorImage:f},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{language:function(){return this.languageTypeList["zh"]},containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))},language:function(){var t=this;this.destroyTinymce(),this.$nextTick((function(){return t.initTinymce()}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;S(x,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:y,menubar:this.menubar,plugins:b,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",n.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},j=F,O=(n("39c1"),Object(p["a"])(j,i,a,!1,null,"510d2bda",null));e["a"]=O.exports},8502:function(t,e,n){"use strict";n("1e35")},a093:function(t,e,n){},ba7b:function(t,e,n){},db25:function(t,e,n){"use strict";n("a093")}}]);