(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc9ec292"],{"068d":function(e,t,r){},5113:function(e,t,r){"use strict";r("068d")},"7d6d1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"rebateRecord"},[r("div",{staticClass:"manage-top"},[r("el-form",{staticClass:"rule-form",attrs:{"label-width":"88px","label-position":"right"}},[r("el-row",{attrs:{gutter:25}},[r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"订单号"}},[r("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"输入订单号"},model:{value:e.queryOrderCommissionListParams.orderCode,callback:function(t){e.$set(e.queryOrderCommissionListParams,"orderCode",t)},expression:"queryOrderCommissionListParams.orderCode"}})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[r("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.batchPay}},[e._v("批量付款")]),r("el-button",{attrs:{icon:"el-icon-zoom-in",plain:"",type:"primary"},on:{click:e.queryOrderCommissionList}},[e._v("查询")]),r("el-button",{attrs:{icon:"el-icon-refresh",plain:"",type:"info"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1),r("el-row",{staticStyle:{"text-align":"right",color:"red","padding-right":"20px"},attrs:{gutter:25}},[e._v(" 单次批量打款操作，针对同一用户最多只能勾选6个订单! ")])],1)],1),r("div",{staticStyle:{height:"16px"}}),r("el-card",[r("el-table",{attrs:{"highlight-current-row":"",data:e.rebateRecordList,height:"70vh","empty-text":"暂无返佣记录"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:"订单编号","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goToOrderdesc(a)}}},[e._v(e._s(a.orderSn))])]}}])}),r("el-table-column",{attrs:{label:"企业名称",prop:"enterpriseName","show-overflow-tooltip":"",align:"center"}}),r("el-table-column",{attrs:{label:"订单支付金额","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" ￥"+e._s(r.payAmount))]}}])}),r("el-table-column",{attrs:{label:"返佣金额","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" ￥"+e._s(r.commissionAmount)+" ")]}}])}),r("el-table-column",{attrs:{label:"返佣人",prop:"nickName","show-overflow-tooltip":"",align:"center"}}),r("el-table-column",{attrs:{label:"审核状态","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-tag",{attrs:{type:e.getExamineStatusType(a.examineStatus),size:"small"}},[e._v(" "+e._s(e.getExamineStatusText(a.examineStatus))+" ")])]}}])}),r("el-table-column",{attrs:{label:"支付状态","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-tag",{attrs:{type:1===a.paymentStatus?"success":"info",size:"small"}},[e._v(" "+e._s(1===a.paymentStatus?"已支付":"未支付")+" ")])]}}])}),r("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.examineStatus?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openReviewDialog(a.id)}}},[e._v(" 审核 ")]):2==a.examineStatus&&0==a.paymentStatus?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleOrderCommissionPayment(a)}}},[e._v(" 打款 ")]):r("div",[e._v("/")])]}}])})],1),r("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"center"}},[r("el-pagination",{attrs:{background:"",layout:"total,  prev, pager, next, jumper","page-size":e.queryOrderCommissionListParams.pageSize,total:e.rebateRecordListTotal},on:{"current-change":e.updatePageNo}})],1)],1),r("el-dialog",{attrs:{title:"审核",visible:e.reviewDialogVisible,width:"25%","before-close":e.closeReviewDialog,"close-on-click-modal":!1}},[r("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[r("el-form-item",{attrs:{label:"审核状态: "}},[r("el-radio-group",{model:{value:e.handleOrderCommissionStatusParams.status,callback:function(t){e.$set(e.handleOrderCommissionStatusParams,"status",t)},expression:"handleOrderCommissionStatusParams.status"}},[r("el-radio",{attrs:{label:2}},[e._v("审核通过")]),r("el-radio",{attrs:{label:3}},[e._v("审核驳回")])],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeReviewDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleOrderCommissionStatus}},[e._v("确 定")])],1)],1)],1)},n=[],o=r("ade3"),s=r("1da1"),i=(r("96cf"),r("a15b"),r("d81d"),r("99af"),r("f8b7")),l={PENDING:1,PASS:2,REJECT:3},c={UNPAID:0,PAID:1},u={name:"RebateRecord",data:function(){return{EXAMINE_STATUS:l,PAYMENT_STATUS:c,rebateRecordList:[],rebateRecordListTotal:0,queryOrderCommissionListParams:{orderCode:null,pageNo:1,pageSize:10},reviewDialogVisible:!1,handleOrderCommissionStatusParams:{id:null,status:null},multipleSelection:[]}},methods:{goToOrderdesc:function(e){var t=this.$router.resolve({name:"maintenance_order_desc",query:{orderSn:e.orderSn}});window.open(t.href,"_blank")},batchPay:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.multipleSelection.map((function(e){return e.id})).join(","),t.next=3,Object(i["Y"])(r);case 3:a=t.sent,"000"==a.code&&(e.$message({message:"操作成功",type:"success"}),e.queryOrderCommissionList());case 5:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.multipleSelection=e},handleOrderCommissionPayment:function(e){var t=this;this.$confirm("您确定要给【".concat(e.nickName,"】打款￥").concat(e.commissionAmount),"打款",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["Y"])(e.id);case 2:a=r.sent,"000"==a.code&&(t.$message({message:"操作成功",type:"success"}),t.queryOrderCommissionList());case 4:case"end":return r.stop()}}),r)}))))},resetSearch:function(){this.queryOrderCommissionListParams={orderCode:null,pageNo:1,pageSize:10},this.queryOrderCommissionList()},getExamineStatusText:function(e){var t,r=(t={},Object(o["a"])(t,this.EXAMINE_STATUS.PENDING,"审核中"),Object(o["a"])(t,this.EXAMINE_STATUS.PASS,"审核通过"),Object(o["a"])(t,this.EXAMINE_STATUS.REJECT,"审核驳回"),t);return r[e]||"-"},getExamineStatusType:function(e){var t,r=(t={},Object(o["a"])(t,this.EXAMINE_STATUS.PENDING,"warning"),Object(o["a"])(t,this.EXAMINE_STATUS.PASS,"success"),Object(o["a"])(t,this.EXAMINE_STATUS.REJECT,"danger"),t);return r[e]||"info"},handleOrderCommissionStatus:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.handleOrderCommissionStatusParams.status){t.next=3;break}return e.$message({message:"请勾选审核状态",type:"warning"}),t.abrupt("return");case 3:return t.next=5,Object(i["Z"])(e.handleOrderCommissionStatusParams);case 5:r=t.sent,"000"==r.code&&(e.$message({message:"操作成功",type:"success"}),e.queryOrderCommissionList(),e.closeReviewDialog());case 7:case"end":return t.stop()}}),t)})))()},closeReviewDialog:function(){this.handleOrderCommissionStatusParams={id:null,status:null},this.reviewDialogVisible=!1},openReviewDialog:function(e){this.handleOrderCommissionStatusParams.id=e,this.reviewDialogVisible=!0},updatePageNo:function(e){this.queryOrderCommissionListParams.pageNo=e,this.queryOrderCommissionList()},queryOrderCommissionList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["Ib"])(e.queryOrderCommissionListParams);case 2:r=t.sent,"000"==r.code&&(e.rebateRecordListTotal=r.data.total,e.rebateRecordList=r.data.records);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.queryOrderCommissionList()}},m=u,d=(r("5113"),r("2877")),p=Object(d["a"])(m,a,n,!1,null,"abb1230e",null);t["default"]=p.exports},a15b:function(e,t,r){"use strict";var a=r("23e7"),n=r("e330"),o=r("44ad"),s=r("fc6a"),i=r("a640"),l=n([].join),c=o!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:c||!u},{join:function(e){return l(s(this),void 0===e?",":e)}})}}]);