(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5df289d5"],{4424:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"statisticsStatement"},[a("el-card",[a("h1",[t._v("订单统计报表")]),a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.timeChangeChart},model:{value:t.handleRepairOrderExportV2ParamsQuery,callback:function(e){t.handleRepairOrderExportV2ParamsQuery=e},expression:"handleRepairOrderExportV2ParamsQuery"}}),a("span",{staticStyle:{"margin-left":"10px","font-size":"20px",color:"red"}},[t._v("ps:请选择三个月内")])],1),a("div",[a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:t.exportListV2}},[t._v(" 导出 ")]),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:t.exportByFaults}},[t._v(" 导出(故障项目) ")])],1)]),a("div",{staticClass:"chartBox"},[a("div",{staticClass:"chartLeft"},[t.chartLeftData.data.length>0?a("div",{style:{width:"700px",height:"600px"},attrs:{id:"chartLeft"}}):t._e(),a("div",{staticClass:"orderRank"},[a("div",[t._v(" 师傅完成订单排行 "),a("span",{staticStyle:{"margin-left":"30px"}},[t._v("合计:"+t._s(t.totalOrderNum)+"单")])]),t._l(t.chartLeftData.data.length,(function(e,r){return a("div",{key:e.name,staticClass:"masterItemOrder"},[a("div",{staticClass:"numLv",style:{color:0==r?"#e66a59":1==r?"#f4a739":2==r?"#f6ca3a":"#000"}},[t._v(" "+t._s(r+1)+" ")]),a("div",{staticClass:"masterName"},[t._v(t._s(t.chartLeftData.nameList[r]))]),a("div",[t._v("完成单量:"+t._s(t.chartLeftData.data[r])+"单")])])}))],2)]),a("div",{staticClass:"chartRight"},[t.chartLeftData.data.length>0?a("div",{style:{width:"700px",height:"600px"},attrs:{id:"chartRight"}}):t._e(),a("div",{staticClass:"orderRank"},[a("div",[t._v(" 师傅完成订单金额排行 "),a("span",{staticStyle:{"margin-left":"30px"}},[t._v("合计:"+t._s(t.totalOrderAmount)+"元")])]),t._l(t.chartRightData.data.length,(function(e,r){return a("div",{key:e.name,staticClass:"masterItemOrder"},[a("div",{staticClass:"numLv",style:{color:0==r?"#e66a59":1==r?"#f4a739":2==r?"#f6ca3a":"#000"}},[t._v(" "+t._s(r+1)+" ")]),a("div",{staticClass:"masterName"},[t._v(t._s(t.chartRightData.nameList[r]))]),a("div",[t._v("完成金额:"+t._s(t.chartRightData.data[r])+"元")])])}))],2)])])])],1)},n=[],i=a("1da1"),s=(a("159b"),a("4d90"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("96cf"),a("f8b7")),c={data:function(){return{chartLeftData:{chartName:"师傅完成订单对比图",data:[],nameList:[]},chartRightData:{chartName:"完成订单金额对比图",data:[],nameList:[]},handleRepairOrderExportV2ParamsQuery:null,handleRepairOrderExportV2Params:{queryTime:""},totalOrderAmount:null,totalOrderNum:null}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getNowDate(),e.next=3,t.queryMasterOrderRankData();case 3:t.drawChartLeft(),t.drawChartRight();case 5:case"end":return e.stop()}}),e)})))()},methods:{queryMasterOrderRankData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,i,c,o,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["Gb"])(t.handleRepairOrderExportV2Params);case 2:a=e.sent,r=a.data.orderNumList,n=[],i=[],r.forEach((function(t){n.push(t.value),i.push(t.realName)})),t.chartLeftData.data=n,t.chartLeftData.nameList=i,c=a.data.orderAmountList,o=[],d=[],c.forEach((function(t){o.push(t.value),d.push(t.realName)})),t.chartRightData.data=o,t.chartRightData.nameList=d,t.totalOrderAmount=a.data.totalOrderAmount,t.totalOrderNum=a.data.totalOrderNum;case 17:case"end":return e.stop()}}),e)})))()},subtractDays:function(t,e){var a=new Date(t);a.setDate(a.getDate()-e);var r=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0");return"".concat(r,"-").concat(n,"-").concat(i)},getNowDate:function(){var t=new Date,e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),n=this.subtractDays("".concat(e,"-").concat(a,"-").concat(r),90);this.handleRepairOrderExportV2ParamsQuery=[n,"".concat(e,"-").concat(a,"-").concat(r)],this.handleRepairOrderExportV2Params.queryTime="".concat(n,"~").concat(e,"-").concat(a,"-").concat(r)},daysBetween:function(t,e){var a=new Date(t),r=new Date(e),n=Math.abs(r-a),i=Math.ceil(n/864e5);return i},timeChangeChart:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.daysBetween(t[0],t[1]),e.days=r,!(r>95)){a.next=5;break}return e.$message({message:"请选择三个月内",type:"warning"}),a.abrupt("return");case 5:if(!t){a.next=13;break}return e.handleRepairOrderExportV2Params.queryTime=t[0]+"~"+t[1],a.next=9,e.queryMasterOrderRankData();case 9:e.drawChartLeft(),e.drawChartRight(),a.next=18;break;case 13:return e.handleRepairOrderExportV2Params.queryTime=null,a.next=16,e.queryMasterOrderRankData();case 16:e.drawChartLeft(),e.drawChartRight();case 18:case"end":return a.stop()}}),a)})))()},exportByFaults:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.days>95)){e.next=3;break}return t.$message({message:"请选择三个月内",type:"warning"}),e.abrupt("return");case 3:return a=t.$loading({lock:!0,text:"数据传输中",spinner:"el-icon-loading"}),e.next=6,Object(s["eb"])(t.handleRepairOrderExportV2Params);case 6:r=e.sent,r&&(n=document.createElement("a"),i=new Blob([r.data],{type:"application/vnd.ms-excel"}),n.style.display="none",n.href=URL.createObjectURL(i),n.download="维保列表新版",document.body.appendChild(n),n.click(),document.body.removeChild(n),a.close());case 8:case"end":return e.stop()}}),e)})))()},exportListV2:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.days>95)){e.next=3;break}return t.$message({message:"请选择三个月内",type:"warning"}),e.abrupt("return");case 3:return a=t.$loading({lock:!0,text:"数据传输中",spinner:"el-icon-loading"}),e.next=6,Object(s["fb"])(t.handleRepairOrderExportV2Params);case 6:r=e.sent,r&&(n=document.createElement("a"),i=new Blob([r.data],{type:"application/vnd.ms-excel"}),n.style.display="none",n.href=URL.createObjectURL(i),n.download="维保列表新版",document.body.appendChild(n),n.click(),document.body.removeChild(n),a.close());case 8:case"end":return e.stop()}}),e)})))()},drawChartLeft:function(){var t=this.$echarts.init(document.getElementById("chartLeft"));t.setOption({title:{text:this.chartLeftData.chartName,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:this.chartLeftData.nameList,inverse:!0},series:[{type:"bar",data:this.chartLeftData.data,itemStyle:{color:"#5470c6"}}]})},drawChartRight:function(){var t=this.$echarts.init(document.getElementById("chartRight"));t.setOption({title:{text:this.chartRightData.chartName,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:this.chartRightData.nameList,inverse:!0},series:[{type:"bar",data:this.chartRightData.data}]})}}},o=c,d=(a("e3a4"),a("2877")),l=Object(d["a"])(o,r,n,!1,null,"6899b20e",null);e["default"]=l.exports},"544d":function(t,e,a){},e3a4:function(t,e,a){"use strict";a("544d")}}]);