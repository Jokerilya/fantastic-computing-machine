(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e0c32aa"],{"338a":function(e,t,a){"use strict";var o=a("5530"),i=(a("99af"),a("159b"),a("d81d"),a("a9e3"),{data:function(){return{page:{dataSumNum:1,dataNum:10,pageNo:1},queryMethod:"post",searchForm:{},addForm:{},editForm:{},selection:[],dataList:[]}},methods:{query:function(){var e=this;this.loading=!0,"post"==this.queryMethod?this.$axios.post(this.url.query,Object(o["a"])({pageNo:this.page.pageNo,pageSize:this.page.dataNum},this.searchForm)).then((function(t){var a=t.data,o=a.records,i=a.total,r=a.current;e.dataList=o,e.page.dataSumNum=i,e.page.pageNo=r})).catch((function(e){console.error(e)})):this.$axios.get("".concat(this.url.query,"?pageNo=").concat(this.page.pageNo,"&pageSize=").concat(this.page.dataNum)).then((function(t){var a=t.data,o=a.records,i=a.total,r=a.current;e.dataList=o,e.page.dataSumNum=i,e.page.pageNo=r})).catch((function(e){console.error(e)})),this.loading=!1},querySelectData:function(){},reset:function(){this.searchForm={},this.page.pageNo=1,this.query()},updatePageNo:function(e){this.page.pageNo=e,this.query()},handleSizeChange:function(e){this.page.dataNum=e,this.query()},submitForm:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,this.$refs.addForm.validate((function(i){if(!i)return!1;t.$axios.post(t.url.add,Object(o["a"])(Object(o["a"])({},t.addForm),a)).then((function(a){t.util.message(t,a.status,a.message),t.query(),t.handleClose(),t.loading=!1,e(!1)})).catch((function(e){this.loading=!1,console.info(e)}))}))},handleClose:function(e){this.addForm={},e&&e(!1)},editInit:function(e,t){var a=this;t?t.forEach((function(t){a.editForm[t]=e[t]})):this.editForm=e,this.$refs.editModel.open()},edit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$refs.editForm.validate((function(i){if(!i)return!1;t.$axios.post(t.url.edit,Object(o["a"])(Object(o["a"])({},t.editForm),a)).then((function(a){var o=a.code,i=a.message;t.util.message(t,o,i),t.resetEditForm(),t.query(),e(!1)})).catch((function(e){console.info(e)}))}))},resetEditForm:function(e){e&&e(!1)},handleSelectionChange:function(e){this.selection=e.map((function(e){return e.id}))},updateStatus:function(e){var t=this;this.$axios.post(this.url.updateStatus,{id:e.id,status:Number(!e.status)}).then((function(e){t.util.message(t,e.status,e.message),t.query()})).catch((function(e){console.info(e)}))},updateTopStatus:function(e){var t=this;this.$axios.post(this.url.updateTopStatus,{id:e.id,isTop:Number(!e.isTop)}).then((function(e){t.util.message(t,e.status,e.message),t.query()})).catch((function(e){console.info(e)}))},remove:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){void 0!==e||(e=t.selection,0!==e.length)?t.$axios.get(t.url.delete+"?id="+e).then((function(e){console.info(t.util),t.util.message(t,e.code,e.message),t.query()})).catch((function(e){console.info(e)})):t.util.message(t,0,"请选择菜单")})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},mounted:function(){this.query(),this.querySelectData()}});t["a"]=i},"7ba7":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"manage-top"},[a("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{model:e.searchForm,"label-width":"88px","label-position":"right"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"设备系统"}},[a("el-cascader",{attrs:{placeholder:"请选择",options:e.systemData,props:{children:"list",label:"name",value:"id",checkStrictly:!0},"show-all-levels":!1},on:{change:e.selelctSystem}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.deviceTypeId,callback:function(t){e.$set(e.searchForm,"deviceTypeId",t)},expression:"searchForm.deviceTypeId"}},e._l(e.typeData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"订单状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.util.global.maintenanceStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{icon:"el-icon-zoom-in",type:"primary"},on:{click:function(t){return e.query()}}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh",type:"info"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)],1),a("div",{staticStyle:{height:"16px"}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:e.dataList}},[a("el-table-column",{attrs:{prop:"orderSn",label:"订单编号","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"需求标题","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"simpleDesc",label:"需求描述","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"images",label:"故障图片","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("y-image",{attrs:{src:t.images?t.images.split(",")[0]:"",srcList:t.images?t.images.split(","):""}})]}}])}),a("el-table-column",{attrs:{prop:"deviceKnife",label:"设备刀组","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"deviceSystemName",label:"设备系统","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"serviceTime",label:"服务时间","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":"",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("span",{class:e.util.global.mainStatus2[o.status].class},[e._v(" "+e._s(e.util.global.mainStatus2[o.status].label)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"enterpriseName",label:"企业名称","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"contactsPeople",label:"联系人","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"contactsPhone",label:"联系电话","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"serviceArea",label:"服务区域","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"address",label:"详细地址","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"worker",label:"接单师傅","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"workerPhone",label:"师傅电话","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"receiveTime",label:"接单时间","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"cancelReason",label:"取消原因","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"cancelTime",label:"取消时间","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"payAmount",label:"订单金额","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"completeTime",label:"完成时间","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"completeImages",label:"完结图片","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("y-image",{attrs:{src:t.completeImages?t.completeImages.split(",")[0]:"",srcList:t.completeImages?t.completeImages.split(","):""}})]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间","show-overflow-tooltip":"",width:"150",align:"center",fixed:"right"}}),a("el-table-column",{attrs:{label:"操作",width:"300px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"settings"},[a("el-button",{attrs:{type:"warning",size:"mini",plain:"",disabled:1!=o.status},on:{click:function(t){return e.editInit(o,["orderSn"])}}},[e._v("分配师傅")]),a("el-button",{attrs:{type:"warning",size:"mini",plain:"",disabled:2!=o.status},on:{click:function(t){return e.dispatch(o)}}},[e._v("派遣师傅")]),a("el-button",{attrs:{type:"warning",size:"mini",plain:"",disabled:3!=o.status},on:{click:function(t){return e.finishInit(o)}}},[e._v("完结此单")])],1)]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.page.pageNo,"page-sizes":[10,20,50,100],"page-size":e.page.dataNum,layout:"total, sizes, prev, pager, next, jumper",total:e.page.dataSumNum},on:{"size-change":e.handleSizeChange,"current-change":e.updatePageNo}}),a("model",{ref:"editModel",attrs:{title:"师傅接单"},on:{ok:e.edit,close:e.resetEditForm}},[a("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.rules,"status-icon":"","label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"接单人",prop:"worker"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.editForm.worker,callback:function(t){e.$set(e.editForm,"worker",t)},expression:"editForm.worker"}})],1),a("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"接单人手机",prop:"workerPhone"}},[a("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.editForm.workerPhone,callback:function(t){e.$set(e.editForm,"workerPhone",t)},expression:"editForm.workerPhone"}})],1)],1)],1),a("model",{ref:"finishModel",attrs:{title:"完结此单"},on:{ok:e.finish,close:e.resetFinishForm}},[a("el-form",{ref:"finishForm",staticClass:"demo-ruleForm",attrs:{model:e.finishForm,rules:e.rules,"status-icon":"","label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"订单金额",prop:"payAmount"}},[a("el-input-number",{attrs:{precision:2},model:{value:e.finishForm.payAmount,callback:function(t){e.$set(e.finishForm,"payAmount",t)},expression:"finishForm.payAmount"}})],1),a("el-form-item",{staticStyle:{width:"calc(100% - 120px)"},attrs:{label:"图片",prop:"completeImages"}},[a("upload",{ref:"completeImages",attrs:{type:"image/*",limit:"9",size:2*Math.pow(1024,2)}})],1)],1)],1)],1)},i=[],r=a("5530"),n=a("1da1"),l=(a("96cf"),a("a15b"),a("338a")),s={title:"course",mixins:[l["a"]],data:function(){return{loading:!1,typeData:[],systemData:[],courseList:[],courseDistriList:[],url:{query:"/admin/maintenance/queryProgrammOrderList",queryType:"/admin/maintenance/queryDeviceTypeList",querySystem:"/admin/maintenance/queryDeviceSystemList",edit:"/admin/maintenance/orderTaking",dispatch:"/admin/maintenance/handleHavingOrder",finish:"/admin/maintenance/handleCompleteOrder"},rules:{worker:[{required:!0,message:"请输入接单人",trigger:"blur"}],workerPhone:[{required:!0,message:"请输入接单人手机",trigger:"blur"}]},finishForm:{payAmount:0}}},methods:{querySelectData:function(){var e=this;this.loading=!0,this.$axios.post(this.url.querySystem).then((function(t){var a=t.data;e.systemData=a})).catch((function(e){console.info(e)})),this.$axios.post(this.url.queryType).then((function(t){var a=t.data;e.typeData=a})).catch((function(e){console.info(e)})),this.loading=!1},selelctSystem:function(e){this.searchForm.deviceSystemId=e[e.length-1]},dispatch:function(e){var t=this;this.$axios.post(this.url.dispatch,{orderSn:e.orderSn}).then((function(e){var a=e.code,o=e.message;t.util.message(t,a,o),t.resetEditForm(),t.query(),fn(!1)})).catch((function(e){console.info(e)}))},finishInit:function(e){this.finishForm.orderSn=e.orderSn,this.$refs.finishModel.open()},finish:function(e){var t=this;this.$refs.finishForm.validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o){a.next=11;break}if(!t.$refs.completeImages.isNull()){a.next=4;break}return t.$message.error("请上传图片"),a.abrupt("return",!1);case 4:return a.next=6,t.$refs.completeImages.uploadFile();case 6:i=a.sent.join(","),t.$refs.completeImages.reset([]),t.$axios.post(t.url.finish,Object(r["a"])(Object(r["a"])({},t.finishForm),{},{completeImages:i})).then((function(a){t.util.message(t,a.code,a.message),t.resetFinishForm(),t.query(),e(!1)})).catch((function(e){console.info(e)})),a.next=12;break;case 11:return a.abrupt("return",!1);case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},resetFinishForm:function(e){e&&e(!1)}}},c=s,u=a("2877"),p=Object(u["a"])(c,o,i,!1,null,"3025eccc",null);t["default"]=p.exports},a15b:function(e,t,a){"use strict";var o=a("23e7"),i=a("e330"),r=a("44ad"),n=a("fc6a"),l=a("a640"),s=i([].join),c=r!=Object,u=l("join",",");o({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s(n(this),void 0===e?",":e)}})}}]);