(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c01412a"],{"338a":function(e,t,n){"use strict";var a=n("5530"),s=(n("99af"),n("159b"),n("d81d"),n("a9e3"),{data:function(){return{page:{dataSumNum:1,dataNum:10,pageNo:1},queryMethod:"post",searchForm:{},addForm:{},editForm:{},selection:[],dataList:[]}},methods:{query:function(){var e=this;this.loading=!0,"post"==this.queryMethod?this.$axios.post(this.url.query,Object(a["a"])({pageNo:this.page.pageNo,pageSize:this.page.dataNum},this.searchForm)).then((function(t){var n=t.data,a=n.records,s=n.total,r=n.current;e.dataList=a,e.page.dataSumNum=s,e.page.pageNo=r})).catch((function(e){console.error(e)})):this.$axios.get("".concat(this.url.query,"?pageNo=").concat(this.page.pageNo,"&pageSize=").concat(this.page.dataNum)).then((function(t){var n=t.data,a=n.records,s=n.total,r=n.current;e.dataList=a,e.page.dataSumNum=s,e.page.pageNo=r})).catch((function(e){console.error(e)})),this.loading=!1},querySelectData:function(){},reset:function(){this.searchForm={},this.page.pageNo=1,this.query()},updatePageNo:function(e){this.page.pageNo=e,this.query()},handleSizeChange:function(e){this.page.dataNum=e,this.query()},submitForm:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,this.$refs.addForm.validate((function(s){if(!s)return!1;t.$axios.post(t.url.add,Object(a["a"])(Object(a["a"])({},t.addForm),n)).then((function(n){t.util.message(t,n.status,n.message),t.query(),t.handleClose(),t.loading=!1,e(!1)})).catch((function(e){this.loading=!1,console.info(e)}))}))},handleClose:function(e){this.addForm={},e&&e(!1)},editInit:function(e,t){var n=this;t?t.forEach((function(t){n.editForm[t]=e[t]})):this.editForm=e,this.$refs.editModel.open()},edit:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$refs.editForm.validate((function(s){if(!s)return!1;t.$axios.post(t.url.edit,Object(a["a"])(Object(a["a"])({},t.editForm),n)).then((function(n){var a=n.code,s=n.message;t.util.message(t,a,s),t.resetEditForm(),t.query(),e(!1)})).catch((function(e){console.info(e)}))}))},resetEditForm:function(e){e&&e(!1)},handleSelectionChange:function(e){this.selection=e.map((function(e){return e.id}))},updateStatus:function(e){var t=this;this.$axios.post(this.url.updateStatus,{id:e.id,status:Number(!e.status)}).then((function(e){t.util.message(t,e.status,e.message),t.query()})).catch((function(e){console.info(e)}))},updateTopStatus:function(e){var t=this;this.$axios.post(this.url.updateTopStatus,{id:e.id,isTop:Number(!e.isTop)}).then((function(e){t.util.message(t,e.status,e.message),t.query()})).catch((function(e){console.info(e)}))},remove:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){void 0!==e||(e=t.selection,0!==e.length)?t.$axios.get(t.url.delete+"?id="+e).then((function(e){console.info(t.util),t.util.message(t,e.code,e.message),t.query()})).catch((function(e){console.info(e)})):t.util.message(t,0,"请选择菜单")})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},mounted:function(){this.query(),this.querySelectData()}});t["a"]=s},"49cd":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"headInfo"},[n("el-card",[n("div",{staticClass:"statusTop"},[n("div",{staticClass:"statusTop_statu"},[0===e.orderMsg.status?n("div",{staticStyle:{color:"red"}},[e._v("未支付")]):e._e(),1===e.orderMsg.status?n("div",{staticStyle:{color:"green"}},[e._v("已支付")]):e._e()]),n("div",{staticClass:"statusTop_code"},[n("span",[e._v("订单号: ")]),n("span",[e._v(" "+e._s(e.orderMsg.orderSn))])])]),n("hr"),n("div",{staticClass:"headInfo_content"},[n("h2",[e._v("基本信息")]),n("div",{staticClass:"content"},[n("div",{staticClass:"itemLine"},[n("div",{staticClass:"item"},[n("span",{staticClass:"itemTitle"},[e._v("客户名称: ")]),n("span",{staticStyle:{"font-size":"18px"}},[e._v(e._s(e.orderMsg.enterpriseName))])])]),n("div",{staticClass:"itemLine"},[n("div",{staticClass:"item"},[n("span",{staticClass:"itemTitle"},[e._v("客户负责人: ")]),n("span",{staticStyle:{"font-size":"18px"}},[e._v(" "+e._s(e.orderMsg.contactsPeople))])])]),n("div",{staticClass:"itemLine"},[n("div",{staticClass:"item"},[n("span",{staticClass:"itemTitle"},[e._v("客户电话: ")]),n("span",{staticStyle:{"font-size":"18px"}},[e._v(" "+e._s(e.orderMsg.contactsPhone))])])])])])])],1),n("div",{staticStyle:{height:"16px"}}),n("el-card",[n("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:e.orderDetail,height:"80vh"}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-table",{staticStyle:{width:"100%"},attrs:{data:a.partsList,border:"","cell-style":{"text-align":"center"},"header-cell-style":{background:"#f6f8fc",color:"#707070","text-align":"center"}}},[n("el-table-column",{attrs:{prop:"category",label:"配件大类"}}),n("el-table-column",{attrs:{prop:"deviceBrand",label:"配件品牌"}}),n("el-table-column",{attrs:{prop:"deviceModel",label:"配件型号"}}),n("el-table-column",{attrs:{prop:"name",label:"配件名称"}}),n("el-table-column",{attrs:{prop:"specification",label:"配件规格"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("a",{staticStyle:{color:"#0b2059"},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.editAccessoriesFn(a)}}},[e._v(" 编辑 ")]),n("a",{staticStyle:{color:"#0b2059"},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.delAccessoriesFn(a.id)}}},[e._v(" 删除")])]}}],null,!0)})],1)]}}])}),n("el-table-column",{attrs:{prop:"no",label:"设备编号","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{label:"设备铭牌","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("y-image",{attrs:{src:t.nameplateImg?t.nameplateImg.split(",")[0]:"",srcList:t.nameplateImg?t.nameplateImg.split(","):""}})]}}])}),n("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"deviceBrand",label:"设备品牌","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"deviceModel",label:"设备型号","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"deviceSystemName",label:"设备系统","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"devicePlace",label:"设备产地","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"price",label:"维保价格","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"startTime",label:"投保时间","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"factoryTime",label:"出厂时间","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"endTime",label:"到期时间","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("a",{staticStyle:{color:"#0b2059"},on:{click:function(t){return t.preventDefault(),e.addAccessoriesFn(a.id)}}},[e._v("添加 ")]),n("a",{staticStyle:{color:"#0b2059"},on:{click:function(t){return t.preventDefault(),e.deleteDeviceInfo(a.id)}}},[e._v(" 删除")])]}}])})],1)],1),n("addEditDialog",{ref:"addEditDialog",attrs:{title:e.dislogTitle,dialogVisible:e.dialogState},on:{closeFn:function(t){e.dialogState=!1},refreshList:e._getButlerOrderDetail}})],1)},s=[],r=n("1da1"),i=n("5530"),o=n("ade3"),c=(n("a15b"),n("b0c0"),n("4de4"),n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{width:"40%",visible:e.dialogVisible,"before-close":e.handleClose,center:!0}},[n("template",{slot:"title"},[n("div",{staticClass:"titleStyle",staticStyle:{"padding-top":"20px"}},[e._v(e._s(e.title))])]),n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("el-form",{attrs:{"label-position":"left","label-width":"120px",model:e.accessoriesForm}},[n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"titleStyle"},[e._v("配件大类")])]),n("el-input",{staticClass:"inpstyle",attrs:{prop:"category"},model:{value:e.accessoriesForm.category,callback:function(t){e.$set(e.accessoriesForm,"category",t)},expression:"accessoriesForm.category"}})],2),n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"titleStyle"},[e._v("配件名称")])]),n("el-input",{staticClass:"inpstyle",attrs:{prop:"name"},model:{value:e.accessoriesForm.name,callback:function(t){e.$set(e.accessoriesForm,"name",t)},expression:"accessoriesForm.name"}})],2),n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"titleStyle"},[e._v("配件品牌")])]),n("el-input",{staticClass:"inpstyle",attrs:{prop:"deviceBrand"},model:{value:e.accessoriesForm.deviceBrand,callback:function(t){e.$set(e.accessoriesForm,"deviceBrand",t)},expression:"accessoriesForm.deviceBrand"}})],2),n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"titleStyle"},[e._v("配件型号")])]),n("el-input",{staticClass:"inpstyle",attrs:{prop:"deviceModel"},model:{value:e.accessoriesForm.deviceModel,callback:function(t){e.$set(e.accessoriesForm,"deviceModel",t)},expression:"accessoriesForm.deviceModel"}})],2),n("el-form-item",[n("template",{slot:"label"},[n("span",{staticClass:"titleStyle"},[e._v("配件规格")])]),n("el-input",{staticClass:"inpstyle",attrs:{prop:"specification"},model:{value:e.accessoriesForm.specification,callback:function(t){e.$set(e.accessoriesForm,"specification",t)},expression:"accessoriesForm.specification"}})],2)],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"cancelBtn",on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{staticClass:"confirmBtn",attrs:{type:"primary"},on:{click:e.confirmFn}},[e._v("确 定")])],1)],2)],1)}),l=[],u=n("740f"),d={props:{dialogVisible:{type:Boolean,default:!1},title:{type:String,default:""}},data:function(){return{accessoriesForm:{category:"",deviceBrand:"",deviceId:"",deviceModel:"",name:"",specification:""}}},methods:{confirmFn:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n in e.accessoriesForm)null===e.accessoriesForm[n]&&(e.accessoriesForm[n]="");return t.next=3,Object(u["d"])(e.accessoriesForm);case 3:e.$emit("refreshList"),e.handleClose("comfirm");case 5:case"end":return t.stop()}}),t)})))()},handleClose:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.accessoriesForm={category:"",deviceBrand:"",deviceId:"",deviceModel:"",name:"",specification:""},e.$emit("closeFn");case 2:case"end":return t.stop()}}),t)})))()}}},m=d,f=(n("8f49"),n("2877")),p=Object(f["a"])(m,c,l,!1,null,"9e5486ca",null),h=p.exports,g=n("c24f"),b=n("f8b7"),v=n("338a"),y={title:"course",mixins:[v["a"]],data:function(){var e;return e={dialogState:!1,dislogTitle:"",orderMsg:[],orderSn:"",People:"",Name:"",Phone:"",orderDetail:[],tabelList:[],changeData:[],masterList:[],loading:!1,typeData:[],courseList:[],snatchList:[],courseDistriList:[]},Object(o["a"])(e,"Name",""),Object(o["a"])(e,"Phone",""),Object(o["a"])(e,"enterpriseOrderSn",""),Object(o["a"])(e,"url",{query:"/admin/maintenance/queryRepairOrderList",queryType:"/admin/maintenance/queryDeviceTypeList",querySnatch:"/admin/maintenance/queryMasterGrabOrderList",assign:"/admin/maintenance/handleAssignMaster",handleMasterQuotation:"/admin/maintenance/handleMasterQuotation"}),Object(o["a"])(e,"rules",{worker:[{required:!0,message:"请输入接单人",trigger:"blur"}],workerPhone:[{required:!0,message:"请输入接单人手机",trigger:"blur"}]}),Object(o["a"])(e,"finishForm",{payAmount:0}),Object(o["a"])(e,"param",{}),Object(o["a"])(e,"quotationForm",{}),e},components:{addEditDialog:h},watch:{$route:function(e,t){e.query.id&&(this.orderSn=e.query.orderSn,this._getButlerOrderDetail())}},created:function(){console.log(326,this.$route.query.orderSn),this.orderSn=this.$route.query.orderSn,this._getButlerOrderDetail()},methods:{addAccessoriesFn:function(e){this.$refs.addEditDialog.accessoriesForm.deviceId=e,this.dislogTitle="新增配件",this.dialogState=!0},editAccessoriesFn:function(e){this.$refs.addEditDialog.accessoriesForm=Object(i["a"])({},e),this.dislogTitle="编辑配件",this.dialogState=!0},deleteDeviceInfo:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,confirm("您确定要删除该设备吗?");case 2:if(a=n.sent,!a){n.next=7;break}return n.next=6,Object(u["a"])(e);case 6:t._getButlerOrderDetail();case 7:case"end":return n.stop()}}),n)})))()},delAccessoriesFn:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,confirm("您确定要删除该配件吗?");case 2:if(a=n.sent,!a){n.next=7;break}return n.next=6,Object(u["b"])(e);case 6:t._getButlerOrderDetail();case 7:case"end":return n.stop()}}),n)})))()},_getButlerOrderDetail:function(){var e=this,t={orderSn:this.orderSn};Object(b["D"])(t).then((function(t){t&&(console.log(t.data.deviceList),e.orderDetail=t.data.deviceList,e.orderMsg=t.data)}))},changeMaster:function(e){console.log("row",e.uid),this.tabelList.push(e.uid),console.log("list",this.tabelList)},seedItout:function(){var e=this,t={enterpriseOrderSn:this.enterpriseOrderSn,masterUidList:[]};Object(g["g"])(t).then((function(t){console.log("指派师傅",t),t.success?(e.$message({showClose:!0,message:t.message,type:"success"}),e.$refs.snatch.close()):e.$message({showClose:!0,message:t.message,type:"false"})}))},seedIt:function(){var e=this,t=this.tabelList;t.join(","),console.log("选中id",t);var n={enterpriseOrderSn:this.enterpriseOrderSn,masterUidList:t};Object(g["g"])(n).then((function(t){console.log("指派师傅",t),t.success?(e.$message({showClose:!0,message:t.message,type:"success"}),e.$refs.snatch.close()):e.$message({showClose:!0,message:t.message,type:"false"})}))},_handleAssignMaster:function(e){var t=this;console.log(e);var n={enterpriseOrderSn:this.enterpriseOrderSn,masterUid:e.uid};Object(g["g"])(n).then((function(e){console.log("指派师傅",e),e.success?(t.$message({showClose:!0,message:e.message,type:"success"}),t.$refs.snatch.close()):t.$message({showClose:!0,message:e.message,type:"false"})}))},_getMasterList:function(){var e=this,t={pageNo:1,pageSize:10,realName:this.Name,phone:this.Phone};Object(g["d"])(t).then((function(t){t&&(console.log(t),e.masterList=t.data.records,console.log("师傅列表",e.masterList))}))},queryDesc:function(e){this.$router.push("/maintenance/maintenance_order_desc?enterpriseOrderSn="+e.orderSn),this.$router.push({name:"maintenance_order_desc",query:{orderSn:e.orderSn}})},querySelectData:function(){var e=this;this.loading=!0,this.$axios.post(this.url.queryType).then((function(t){var n=t.data;e.typeData=n})).catch((function(e){console.info(e)})),this.loading=!1},querySnatchList:function(e){var t=e.orderSn;this.$refs.snatch.open(),this.enterpriseOrderSn=t},closeSnatch:function(e){e(!1)},assign:function(e){var t=this;this.$axios.post(this.url.assign,{enterpriseOrderSn:this.param.enterpriseOrderSn,masterOrderSn:e}).then((function(e){"000"==e.code&&(t.$message({showClose:!0,message:e.message,type:"success"}),t.$refs.snatch.close(),t.query())})).catch((function(e){console.error(e)}))},getType:function(e){return this.typeData.filter((function(t){if(t.id==e)return t}))[0].name}}},O=y,S=(n("7428"),Object(f["a"])(O,a,s,!1,null,"1c6efe4c",null));t["default"]=S.exports},"740f":function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return u}));var a=n("b775");function s(e){return Object(a["a"])({url:"/admin/maintenance/queryDeviceList",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/admin/maintenance/getDeviceInfoDetail",method:"post",params:e})}function i(e){return Object(a["a"])({url:"/admin/maintenance/deleteDeviceParts",method:"get",params:{id:e}})}function o(e){return Object(a["a"])({url:"/admin/maintenance/deleteDeviceInfo",method:"get",params:{id:e}})}function c(e){return Object(a["a"])({url:"/admin/maintenance/editDeviceParts",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/admin/maintenance/editDeviceInfo",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/admin/maintenance/getDeviceInfoCode?no=".concat(e),method:"get"})}},7428:function(e,t,n){"use strict";n("fba2")},"8f49":function(e,t,n){"use strict";n("f975")},a15b:function(e,t,n){"use strict";var a=n("23e7"),s=n("e330"),r=n("44ad"),i=n("fc6a"),o=n("a640"),c=s([].join),l=r!=Object,u=o("join",",");a({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(i(this),void 0===e?",":e)}})},c24f:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"q",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"l",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"r",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"n",(function(){return h})),n.d(t,"o",(function(){return g})),n.d(t,"m",(function(){return b})),n.d(t,"i",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"p",(function(){return O})),n.d(t,"f",(function(){return S}));var a=n("b775");n("cb5c");function s(e){return Object(a["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function d(e){return Object(a["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/admin/userInfo/queryWithdrawal",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/admin/userInfo/handleWithdrawalExamine",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/admin/userInfo/handleWithdrawalExport",method:"post",responseType:"blob",data:e})}function h(e){return Object(a["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/admin/userInfo/getAccountMoney?uid="+e,method:"get"})}function O(e){return Object(a["a"])({url:"/admin/userInfo/queryMoneyList",method:"post",data:e})}function S(e){return Object(a["a"])({url:"/admin/userInfo/handleAccountEdit",method:"post",data:e})}},f975:function(e,t,n){},fba2:function(e,t,n){}}]);