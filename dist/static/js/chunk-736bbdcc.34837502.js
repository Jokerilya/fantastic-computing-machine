(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-736bbdcc"],{"0de3":function(e,t,a){},"779f":function(e,t,a){"use strict";a("0de3")},9129:function(e,t,a){var s=a("23e7");s({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},a15b:function(e,t,a){"use strict";var s=a("23e7"),r=a("e330"),o=a("44ad"),i=a("fc6a"),n=a("a640"),l=r([].join),c=o!=Object,u=n("join",",");s({target:"Array",proto:!0,forced:c||!u},{join:function(e){return l(i(this),void 0===e?",":e)}})},a8e1:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAACIpJREFUeF7tW3tollUYf163uc2p25zOqcsLec0LZoiWmZRoUQY6CJGoDEKyCxLhiIL+CAy1JLpRjCALIiyYUSqpmLfSTKvhXTfTNV023U2d23L69f4OPB9nZ+ec97zf983NzfOPuO9cf+e5/p7zeuS3pN2r53k3Iq9FIjTe8ygLf+uqzT9jnX/GI5Ee3srrMws3eEm7Vs33IrS+qx7Ydq6IRwu85B2r9pJH07sjABShX72kHSt9kfAyuyMAkUik3kveuSrievjCO6ZRVnIaba/7m7bWnnYdFnO/Z/Mm0efnD1rHz8keQQ9mDRV9Xj+9U/zrMo4nDQVA2bTnaVhqXyr6p4ReLN0S88FcB16csYzSeiRT8YUT9PTxDdphb4+YRcv9i0F79NC39NTA8bQo9y460VhDayp+CwQwZgDKm+ppyeC7Xc/Spt+e+rPGQ6Hzx6Pm0pJBk8W4N/ybXV2xzwkAdHpv5Gwak95P9P+prpwePrjOuE8jACxadS1N0cVlCahvaY4iHwsKey6do1klXxmH8lrlzZfoXPNlarrRou3bLzmdJvfOFb9hTu43IWMA5ab0ovrrzfT75fP0738NWsCNALBoVV27SkP2fiQWcFWBzZMW0kNZw0geGwYkWayhbiwJYeZQ+5r20ikBgO5nJqUKPZ6w/zPruVUbENY4dzoAiscX0OM5I6k5cp1eLt0aNWKQKl0zqYDcFyrAHkKdIy4A4BZ1hjArOVXcIBp0WG0mAwj39eGoOZTqJbVRn2sPFMasATZ7ExcAsviF2Z1pQ2xjMJeqswyA6oJtKsDztTsA6mZNRpD/rtsQ/8ZAdisAvhw7TwQvaND9W04F4pEAWYQxT2XzFeHXTRLwQ3UZHb9aHdW4sb1yhNFEe0cJlp7JmyhigU6tAgi41k8oEAd468zPNDt7uDaG6NI2ACpw1o/24KpM9qNTe4F4VED1HkEAdKgKXJn5qjBQyLoQcenCZRwoFi/AQAQBoLpBORZZenKz2BfcH1pezwyx34TZABbDjgAgTJxhshe6OQKzQQyCbgLpFX7ujexq0dHvb5oEwD4M9G8yTEMihoZcApkkt3d9fkDNFZz5AI7REdqO3PepmPNmqIAcHYYBQddXR+Q4A3B46nOCZJAJhpsBgHoQXMQnlX9aKbmEqIC8MHz1polPRIMNzqxcAFh8fKNgaEBtcZJkY2lsXAJfAtRw+antRror4QDwpmT9D6MC+6csjrI2QVydDQBcxNqxj4noDs1ElSUUADZ+WBA+uOBIcVQ4dIyszQ266HAQm+QCQsIAkBdDsANxdmFcgg5hA8JlLO8r0+cdttScbnUpmDthAJy79yUhbsjQPjh7wMiqqAdyOYQJBNexIE8GpKQLwha2ATaGG6h7NCRHJiaI+1q9AHxwwYAxoQ7f3iqgA062MfidmWCd31fHB7pB2AATJ2+6RdzOqPRs8XPQDbjYhfbsEwhAey7eGea+pQGAMUQpDLXKoBqiCex2A4DVAIxNRlIK3emrBOJyWzUorETIVNqSkz/GBIITALK/503e0ycvul9w89kpaeL/nIKaDmMqduyc/CQNSe1jxUAFkI2fnJ+EBdGaDYKqQj4dS+N6ANf1UJsD61PaWKu9KZekRyZemErD/tQALcx+rRIg30rttSaqaWlsNXeZfxgUSbnZ3g0E1extdUddzpEI8ce+nVTA5u5eGDyFxmXk0ILDxcYoUSY+vzh/SPu2ICwAHKS53rbpTUMgAKjTz+8/mhr98jTzAPKiXMh0yfAwzhSdqQAwrYU1VQmQqXRd6U3eH0eFMQOglqrVlyFMlCD66v/L+20uRNZVW7VXBUCm3/AEBq9A2Abw7ePwzAOaJCEoLwiUAEzM1hY5Qe/da1qtBd0uGv2I+JsuPYUdua/vkDbVXnXDrgDsu1QZLYS4PNVhAEyS5wSAfEidxWU1UH+TxwU9VXEBABeABsvP0oRxIFrWVR3T2haVyFWBdwJAlgKdqHM2trnmr1abkJ+5BImqCwBQgcMNF2hGZn707QBT9V9XHdU+gUkYADCGqLUda6gWCY7MC7DBKvK5Ok6c5IcOKHkFJVSuAOC5DidoMlmjiwRdXo84SwCMWb4fqelibp2hgfjDRVb4hkpmkUzGKgwAPIeOqZbjjYQCYPO3QZbWxVfHAgCPge0BUwziVlbRuACIpxjpcmC1XBUWAJmpZvHnOdjid2kAWPzl2ILD45IrVTT1j7XRAEpls+ULcrYB6q3KAY76m4t/tsUBB/xXXYgtOPDR5QLseuW1ZKlI2bWaGBDbe8WYAJDZYn7SggNhoSDO3sUI8itUTnNNoTDWxhO4HJ8czfYfcfPaWANuETXFoAeboQFQDw+2mB8r4zaQN/BGwkiCbAMG9ewtoj22EyoAfPsqmAAMWSue2EANkL0mFAD43WX5U9tQ5bIX+O5iaavqTSy5OpfAACDUQXW9+H14WqaISeBm8WZIfioP9QEYp/x0HQDYCBNnCeBACGGoWidQ3SCkBLfGj5hhqF4p2+ZUVOHwGYZrV10Fze03gs74L9PlJ7PoA3LFVKThQCmud4IsXjiM/PwcGyuqLGlFd5viAJmvdy2u8BiI/0bfv785/H4R+wflEjrbEjcAXBhhWgyitKJ8TxuRtAVC7K54g6Y58Dvrulz9lb8bCGNTMB/vy5QnoI9WBbDowtxx0fe+6MjRlk7sgiJB2XYwEKpaoA/ftnpQ+RWpK/srU2a2Dy60AMg+HjcmJzk6UQsCgMfgIMjkVCITUgJdtxGcbBhNpIpaH2R22hYEGSUAP+BGhvmW1uXbIFcAMC8XM+RvgLBW4dDptKn6lPEzGoxb6n+iY3odoqoa1sLlfePzBLbynLMXsMX3/JZ/W+2ZwLTXNk9H/JYQADpi44la8/aHk7c/ne3uH09Dl7rz5/P/A7Q94GvzXkkWAAAAAElFTkSuQmCC"},bae6:function(e,t){e.exports="data:image/png;base64,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"},c24f:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"p",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"q",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"k",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"r",(function(){return p})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return v})),a.d(t,"m",(function(){return f})),a.d(t,"n",(function(){return A})),a.d(t,"l",(function(){return b})),a.d(t,"h",(function(){return g})),a.d(t,"b",(function(){return y})),a.d(t,"o",(function(){return C}));var s=a("b775");a("cb5c");function r(e){return Object(s["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function i(e){return Object(s["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function c(e){return Object(s["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function m(e){return Object(s["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/admin/userInfo/queryWithdrawal",method:"post",data:e})}function h(e){return Object(s["a"])({url:"/admin/userInfo/handleWithdrawalExamine",method:"post",data:e})}function v(e){return Object(s["a"])({url:"/admin/userInfo/handleWithdrawalExport",method:"post",responseType:"blob",data:e})}function f(e){return Object(s["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function A(e){return Object(s["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function b(e){return Object(s["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function g(e){return Object(s["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}function y(e){return Object(s["a"])({url:"/admin/userInfo/getAccountMoney?uid="+e,method:"get"})}function C(e){return Object(s["a"])({url:"/admin/userInfo/queryMoneyList",method:"post",data:e})}},d5f6:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"amendPricing"},[s("el-card",{staticStyle:{padding:"0 100px"}},[s("h3",{staticClass:"oneLineTitle"},[e._v("故障解决方案")]),s("div",{staticClass:"faultType"},[s("h3",[e._v("故障类型:")]),s("div",[s("el-checkbox-group",{model:{value:e.faultTypeValue,callback:function(t){e.faultTypeValue=t},expression:"faultTypeValue"}},[s("el-checkbox",{attrs:{label:"机械故障"}},[e._v("机械故障")]),s("el-checkbox",{attrs:{label:"电气故障"}},[e._v("电气故障")]),s("el-checkbox",{attrs:{label:"系统故障"}},[e._v("系统故障")])],1)],1)]),s("div",{staticClass:"siteOfFailure"},[s("h3",[e._v("故障部位:")]),s("div",[s("el-checkbox-group",{model:{value:e.siteOfFailureValue,callback:function(t){e.siteOfFailureValue=t},expression:"siteOfFailureValue"}},e._l(e.equipmentPosition,(function(t){return s("el-checkbox",{key:t.name,staticStyle:{"margin-bottom":"15px"},attrs:{label:t.name}},[e._v(e._s(t.name))])})),1)],1)]),1===e.orderDetails.orderType?s("div",[s("h3",{staticClass:"oneLineTitle"},[e._v("增值服务项")]),s("div",{staticClass:"faultType"},[s("h3",[e._v("预防性检测:")]),s("div",[s("el-radio-group",{model:{value:e.orderDetails.preventType,callback:function(t){e.$set(e.orderDetails,"preventType",t)},expression:"orderDetails.preventType"}},[s("el-radio",{attrs:{label:2}},[e._v("不需要")]),s("el-radio",{attrs:{label:1}},[e._v("需要(5%)")])],1)],1)]),s("div",{staticClass:"faultType"},[s("h3",[e._v("协助清理机台:")]),s("div",[s("el-radio-group",{model:{value:e.orderDetails.assistCleanType,callback:function(t){e.$set(e.orderDetails,"assistCleanType",t)},expression:"orderDetails.assistCleanType"}},[s("el-radio",{attrs:{label:2}},[e._v("不需要")]),s("el-radio",{attrs:{label:1}},[e._v("需要(1%)")])],1)],1)]),s("div",{staticClass:"faultType"},[s("h3",[e._v("配件:")]),s("div",[s("el-radio-group",{model:{value:e.orderDetails.accessoryType,callback:function(t){e.$set(e.orderDetails,"accessoryType",t)},expression:"orderDetails.accessoryType"}},[s("el-radio",{attrs:{label:1}},[e._v("自备")]),s("el-radio",{attrs:{label:2}},[e._v("平台提供(1%)")])],1)],1)]),s("div",{staticClass:"faultType"},[s("h3",[e._v("到达时间:")]),s("div",[s("el-radio-group",{model:{value:e.orderDetails.arrivalTimeType,callback:function(t){e.$set(e.orderDetails,"arrivalTimeType",t)},expression:"orderDetails.arrivalTimeType"}},[s("el-radio",{attrs:{label:3}},[e._v("当天")]),s("el-radio",{attrs:{label:1}},[e._v("1小时(10%)")]),s("el-radio",{attrs:{label:2}},[e._v("2小时(5%)")])],1)],1)]),s("div",{staticClass:"faultType"},[s("h3",[e._v("师傅技术能力:")]),s("div",[s("el-radio-group",{model:{value:e.orderDetails.technicalCapabilitiesType,callback:function(t){e.$set(e.orderDetails,"technicalCapabilitiesType",t)},expression:"orderDetails.technicalCapabilitiesType"}},[s("el-radio",{attrs:{label:3}},[e._v("初级")]),s("el-radio",{attrs:{label:2}},[e._v("中级(5%)")]),s("el-radio",{attrs:{label:1}},[e._v("高级(10%)")])],1)],1)]),s("div",{staticClass:"faultType"},[s("h3",[e._v("配件质保时间:")]),s("div",[s("el-radio-group",{model:{value:e.orderDetails.warrantyPeriodType,callback:function(t){e.$set(e.orderDetails,"warrantyPeriodType",t)},expression:"orderDetails.warrantyPeriodType"}},[s("el-radio",{attrs:{label:1}},[e._v("7天")]),s("el-radio",{attrs:{label:2}},[e._v("30天(1%)")]),s("el-radio",{attrs:{label:3}},[e._v("90天(2%)")]),s("el-radio",{attrs:{label:4}},[e._v("180天(3%)")])],1)],1)])]):e._e(),s("div",{staticClass:"solvePlan"},[s("h3",[e._v(" 解决方案 "),s("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addSolvePlan}})]),e.solvePlanList?s("div",e._l(e.solvePlanList,(function(t,a){return s("div",{key:a,staticClass:"item"},[s("h3",{staticClass:"title",staticStyle:{position:"relative"}},[e._v(" 方案"+e._s(a+1)+": "),s("i",{staticClass:"el-icon-s-tools",staticStyle:{position:"absolute",right:"25px",top:"0"},on:{click:function(t){return e.editSolvePlanFn(a)}}}),s("i",{staticClass:"el-icon-delete-solid",staticStyle:{position:"absolute",right:"0",top:"0"},on:{click:function(t){return e.delSolvePlanFn(a)}}})]),s("div",{staticClass:"content"},[s("div",{staticClass:"content_item"},[s("div",{staticClass:"tile"},[e._v("故障描述:")]),s("div",{staticClass:"conten"},[e._v(" "+e._s(t.desc)+" ")])]),s("div",{staticClass:"content_item"},[s("div",{staticClass:"tile"},[e._v("故障分析:")]),s("div",{staticClass:"conten"},[e._v(" "+e._s(t.analysis)+" ")])]),s("div",{staticClass:"content_item"},[s("div",{staticClass:"tile"},[e._v("维保方案:")]),s("div",{staticClass:"conten"},[e._v(" "+e._s(t.programme)+" ")])])])])})),0):e._e()]),s("div",{staticClass:"accessoriesDetail"},[s("h3",[e._v(" 配件明细"),s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addAccessories(t)}}},[e._v("添加配件")])]),s("div",{staticClass:"content"},[s("el-table",{key:e.againTableRefresh,attrs:{data:e.accessoriesList}},[s("el-table-column",{attrs:{label:"采购方式",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[2!==r.type?s("img",{attrs:{src:a("a8e1"),width:"28px"}}):e._e(),2===r.type?s("img",{attrs:{src:a("bae6"),width:"28px"}}):e._e()]}}])}),s("el-table-column",{attrs:{align:"center",prop:"name",label:"配件名称"}}),s("el-table-column",{attrs:{align:"center",prop:"num",label:"配件数量",width:"80"}}),s("el-table-column",{attrs:{align:"center",prop:"price",label:"配件单价",width:"80"}}),s("el-table-column",{attrs:{align:"center",label:"配件品牌"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("div",{class:[1!==a.type||a.brandId?"":"inquireBrandNone"]},[e._v(" "+e._s(a.brand)+" ")])]}}])}),s("el-table-column",{attrs:{align:"center",prop:"parameter",label:"配件参数"}}),s("el-table-column",{attrs:{align:"center",prop:"number",label:"物料编码"}}),s("el-table-column",{attrs:{align:"center",label:"配件总金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[s("div",{staticStyle:{color:"red"}},[e._v("￥"+e._s(a.num*a.price))])]}}])}),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,r=t.$index;return[s("a",{staticStyle:{color:"#4889fb","margin-right":"10px"},on:{click:function(t){return t.preventDefault(),e.delAccessoriesFn(a,r)}}},[e._v("删除")]),s("a",{staticStyle:{color:"#4889fb"},on:{click:function(t){return t.preventDefault(),e.editAccessories(a,r)}}},[e._v("编辑")])]}}])})],1)],1)]),s("div",{staticClass:"maintenanceOffer"},[s("h3",{staticStyle:{color:"#0b2059"}},[e._v("维保报价")]),s("div",{staticClass:"content"},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[e._v("人工费 "),s("i",[e._v("建议每公里2元,估算距离费用")])]),s("el-input",{staticClass:"inp",attrs:{placeholder:"0.00"},on:{input:function(t){return e.judgeInp("doorAmount")}},model:{value:e.doorAmount,callback:function(t){e.doorAmount=t},expression:"doorAmount"}})],1),s("div",{staticClass:"item"},[s("span",[e._v("配件费")]),s("el-input",{staticClass:"inp",attrs:{disabled:!0,placeholder:"0.00"},model:{value:e.partsAmount,callback:function(t){e.partsAmount=t},expression:"partsAmount"}})],1),s("div",{staticClass:"item"},[s("span",[e._v("合计")]),s("span",{staticClass:"text",staticStyle:{color:"red"}},[e._v(e._s(e.priceSum)+"元")])])])])]),s("div",{staticClass:"toolBottom"},[s("el-button",{staticClass:"toolBottom_cancel",on:{click:function(t){return e.$router.push("/maintenance/maintenance_order_desc?orderSn="+e.orderSn)}}},[e._v("取消")]),s("el-button",{staticClass:"toolBottom_comfirm",on:{click:e.confirmEditBtn}},[e._v("确定修改")])],1),s("el-dialog",{attrs:{title:e.addSolvePlanDialogTitle,visible:e.addSolvePlanDialog,width:"30%","before-close":e.closeAddSolvePlanDialog,"close-on-click-modal":!1}},[s("div",[s("div",{staticStyle:{"margin-bottom":"15px"}},[s("a",{class:1===e.active?"activeTextColor":"",staticStyle:{"margin-right":"15px"},on:{click:function(t){t.preventDefault(),e.active=1}}},[e._v("故障描述")]),s("a",{class:2===e.active?"activeTextColor":"",staticStyle:{"margin-right":"15px"},on:{click:function(t){t.preventDefault(),e.active=2}}},[e._v("故障分析")]),s("a",{class:3===e.active?"activeTextColor":"",on:{click:function(t){t.preventDefault(),e.active=3}}},[e._v("维保方案")])]),s("div",[1===e.active?s("el-input",{attrs:{type:"textarea",rows:7,placeholder:"请输入故障描述...",resize:"none"},model:{value:e.addSolvePlanList.desc,callback:function(t){e.$set(e.addSolvePlanList,"desc",t)},expression:"addSolvePlanList.desc"}}):e._e(),2===e.active?s("el-input",{attrs:{resize:"none",type:"textarea",rows:7,placeholder:"请输入故障分析..."},model:{value:e.addSolvePlanList.analysis,callback:function(t){e.$set(e.addSolvePlanList,"analysis",t)},expression:"addSolvePlanList.analysis"}}):e._e(),3===e.active?s("el-input",{attrs:{resize:"none",type:"textarea",rows:7,placeholder:"请输入维保方案..."},model:{value:e.addSolvePlanList.programme,callback:function(t){e.$set(e.addSolvePlanList,"programme",t)},expression:"addSolvePlanList.programme"}}):e._e()],1)]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.closeAddSolvePlanDialog}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.addSolvePlanConfirm}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{visible:e.addAccessoriesDialog,width:"35%","before-close":e.closeAddAccessoriesDialog,"close-on-click-modal":!1}},[s("div",{staticStyle:{"font-weight":"700",color:"#707070","font-size":"20px"},attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.accessoriesTitle)+" ")]),s("el-form",{ref:"accessoriesForm",attrs:{"label-width":"80px","label-position":"right",model:e.accessoriesForm,rules:e.accessoriesRules}},[s("el-form-item",{attrs:{label:"配件选择"}},[s("el-radio-group",{on:{input:e.changeChoose},model:{value:e.accessoriesForm.choose,callback:function(t){e.$set(e.accessoriesForm,"choose",t)},expression:"accessoriesForm.choose"}},[s("el-radio",{attrs:{label:2}},[e._v("仓库")]),s("el-radio",{attrs:{label:1}},[e._v("新增")])],1)],1),2!=e.accessoriesForm.choose?s("el-form-item",{attrs:{label:"配件采购",prop:"type"}},[s("el-radio-group",{model:{value:e.accessoriesForm.type,callback:function(t){e.$set(e.accessoriesForm,"type",t)},expression:"accessoriesForm.type"}},[s("el-radio",{attrs:{label:1}},[e._v("师傅自费")]),s("el-radio",{attrs:{label:2}},[e._v("平台购买")])],1)],1):e._e(),2==e.accessoriesForm.choose?s("el-form-item",{attrs:{label:"勾选配件"}},[s("el-input",{attrs:{placeholder:"点击选择仓库已有的配件"},on:{focus:e.openChooseStashParts},model:{value:e.accessoriesForm.chooseStashPartsValue,callback:function(t){e.$set(e.accessoriesForm,"chooseStashPartsValue",t)},expression:"accessoriesForm.chooseStashPartsValue"}})],1):e._e(),2!=e.accessoriesForm.choose?s("el-form-item",{attrs:{label:"配件品牌",prop:"brand"}},[s("div",{staticClass:"accessoriesItem"},[s("el-input",{attrs:{placeholder:"请填写配件品牌"},model:{value:e.accessoriesForm.brand,callback:function(t){e.$set(e.accessoriesForm,"brand",t)},expression:"accessoriesForm.brand"}})],1)]):e._e(),2!=e.accessoriesForm.choose?s("el-form-item",{attrs:{label:"配件名称",prop:"name"}},[s("div",{staticClass:"accessoriesItem"},[s("el-input",{attrs:{placeholder:"请填写配件名称"},model:{value:e.accessoriesForm.name,callback:function(t){e.$set(e.accessoriesForm,"name",t)},expression:"accessoriesForm.name"}})],1)]):e._e(),2!=e.accessoriesForm.choose?s("el-form-item",{attrs:{label:"配件参数",prop:"parameter"}},[s("div",{staticClass:"accessoriesItem"},[s("el-input",{attrs:{placeholder:"请填写配件参数"},model:{value:e.accessoriesForm.parameter,callback:function(t){e.$set(e.accessoriesForm,"parameter",t)},expression:"accessoriesForm.parameter"}})],1)]):e._e(),s("el-form-item",{attrs:{label:"配件单价",prop:"price"}},[s("div",{staticClass:"accessoriesItem"},[s("el-input",{attrs:{placeholder:"请填写配件单价"},model:{value:e.accessoriesForm.price,callback:function(t){e.$set(e.accessoriesForm,"price",t)},expression:"accessoriesForm.price"}})],1)]),s("el-form-item",{attrs:{label:"配件数量",prop:"num"}},[s("div",{staticClass:"accessoriesItem"},[s("el-input",{attrs:{placeholder:"请填写配件数量"},model:{value:e.accessoriesForm.num,callback:function(t){e.$set(e.accessoriesForm,"num",e._n(t))},expression:"accessoriesForm.num"}})],1)])],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticStyle:{display:"flex","justify-content":"center"}},[s("el-button",{staticStyle:{width:"120px",border:"1px #2d4da0 solid",color:"#2d4da0"},on:{click:e.closeAddAccessoriesDialog}},[e._v("取 消")]),s("el-button",{staticStyle:{width:"120px","background-color":"#2d4da0",color:"#ffffff"},on:{click:function(t){return e.addAccessoriesComfirm(e.accessoriesForm.index)}}},[e._v("确 定")])],1)])],1),s("el-dialog",{attrs:{title:"选择仓库配件","close-on-click-modal":!1,visible:e.chooseStashPartsVisible,"before-close":e.closeChooseStashParts,center:""}},[s("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[s("el-input",{staticStyle:{width:"20vw","margin-right":"10px"},attrs:{placeholder:"请输入商品名称查询"},model:{value:e.jdProductListQuery,callback:function(t){e.jdProductListQuery=t},expression:"jdProductListQuery"}}),s("el-button",{on:{click:e.queryJdProductList}},[e._v("搜索")])],1),s("el-table",{attrs:{height:"400px","highlight-current-row":"",data:e.stashPartsData},on:{"current-change":e.changeStashParts}},[s("el-table-column",{attrs:{type:"index"}}),s("el-table-column",{attrs:{label:"商品名称",property:"name"}}),s("el-table-column",{attrs:{label:"品牌名称",property:"brandName"}}),s("el-table-column",{attrs:{label:"物料编码",property:"number"}}),s("el-table-column",{attrs:{label:"规格型号",property:"model"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.closeChooseStashParts}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.comfirmChooseStashParts}},[e._v("确 定")])],1)],1)],1)},r=[],o=a("5530"),i=a("1da1"),n=(a("96cf"),a("b0c0"),a("159b"),a("9129"),a("a9e3"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("b680"),a("f8b7")),l=a("c24f"),c={data:function(){return{chooseStashPartData:[],stashPartsData:[],jdProductListQuery:"",chooseStashPartsVisible:!1,orderSn:null,editIndex:null,accessoriesTitle:"添加配件",againTableRefresh:!0,equipmentPosition:null,faultTypeValue:[],siteOfFailureValue:[],qualityEnsureCycleValue:null,orderDetails:null,solvePlanList:[],accessoriesList:[],doorAmount:null,technologyAmount:null,otherAmount:null,partsAmount:null,addSolvePlanDialog:!1,addSolvePlanDialogTitle:"新增解决方案",active:1,addSolvePlanList:{analysis:"",desc:"",programme:""},addAccessoriesDialog:!1,accessoriesForm:{type:null,name:"",price:"",num:"",brand:null,parameter:null,choose:2,chooseStashPartsValue:"",number:null},accessoriesRules:{name:[{required:!0,message:"配件名称不能为空",trigger:"blur"}],price:[{required:!0,message:"配件单价不能为空",trigger:"blur"},{pattern:/^(?!(0[0-9]{0,}$))[0-9]{1,}[.]{0,}[0-9]{0,}$/,message:"配件单价必须为数字",trigger:"blur"}],num:[{required:!0,message:"配件数量不能为空",trigger:"blur"},{type:"number",message:"配件数量必须为数字值",trigger:"blur"}],type:[{required:!0,message:"配件采购不能为空",trigger:"blur"}],brand:[{required:!0,message:"配件品牌不能为空",trigger:"blur"}],parameter:[{required:!0,message:"配件参数不能为空",trigger:"blur"}]}}},methods:{judgNoWorkTime:function(e,t){var a=new Date,s=a.getDay(),r=a.getHours();return 6===s||0===s||r<8||r>=18?e+.2*t:e},comfirmChooseStashParts:function(){var e=this.chooseStashPartData,t=e.brandId,a=e.brandName,s=e.model,r=e.name,o=e.id,i=e.unitId,n=e.number;this.accessoriesForm.chooseStashPartsValue=r+"/"+a+"/"+s,this.closeChooseStashParts(),this.accessoriesForm.id=o,this.accessoriesForm.brand=a,this.accessoriesForm.brandId=t,this.accessoriesForm.parameter=s,this.accessoriesForm.name=r,this.accessoriesForm.unitId=i,this.accessoriesForm.number=n},changeStashParts:function(e){this.chooseStashPartData=e},queryJdProductList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["lb"])({query:e.jdProductListQuery});case 2:a=t.sent,e.stashPartsData=a.data;case 4:case"end":return t.stop()}}),t)})))()},changeChoose:function(){this.accessoriesForm.type=null,this.accessoriesForm.price="",this.accessoriesForm.num="",this.$refs["accessoriesForm"].clearValidate()},closeChooseStashParts:function(){this.jdProductListQuery="",this.chooseStashPartData=[],this.chooseStashPartsVisible=!1},openChooseStashParts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading"}),t.next=3,e.queryJdProductList();case 3:e.chooseStashPartsVisible=!0,a.close();case 5:case"end":return t.stop()}}),t)})))()},editAccessories:function(e,t){this.accessoriesTitle="编辑配件",this.accessoriesForm=Object(o["a"])(Object(o["a"])({},e),{},{index:t}),this.addAccessoriesDialog=!0},getAccessoriesSum:function(){var e=this;this.partsAmount=0,this.accessoriesList.forEach((function(t){e.partsAmount+=t.num*t.price}))},judgeInp:function(e){Number.isNaN(+this[e])&&(this[e]=null,this.$message({message:"输入框只能输数字",type:"warning"}))},confirmEditBtn:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r,o,i,l,c,u,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.orderDetails,s=a.accessoryType,r=a.assistCleanType,o=a.warrantyPeriodType,i=a.technicalCapabilitiesType,l=a.preventType,c=a.arrivalTimeType,u={orderSn:e.orderSn,warrantyTime:e.qualityEnsureCycleValue,parts:JSON.stringify(e.accessoriesList),programme:JSON.stringify(e.solvePlanList),partsAmount:+e.partsAmount,doorAmount:+e.doorAmount,technologyAmount:+e.technologyAmount,otherAmount:+e.otherAmount,type:e.faultTypeValue.join(","),servicePositions:e.siteOfFailureValue.join(","),accessoryType:s,assistCleanType:r,warrantyPeriodType:o,technicalCapabilitiesType:i,preventType:l,arrivalTimeType:c},t.next=4,Object(n["x"])(u);case 4:d=t.sent,"操作成功"===d.message&&(m="/maintenance/maintenance_order_desc?orderSn="+e.orderSn,e.$router.push(m),e.$message({showClose:!0,message:d.message,type:"success"}));case 6:case"end":return t.stop()}}),t)})))()},delAccessoriesFn:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a.$confirm("您确定删除"+e.name+"吗?","提示",{type:"warning"}).then((function(){a.accessoriesList.splice(t,1),a.getAccessoriesSum(),a.$message({type:"success",message:"删除成功!"})}));case 1:case"end":return s.stop()}}),s)})))()},closeAddAccessoriesDialog:function(){this.accessoriesForm={name:"",price:"",num:"",type:null,brand:null,parameter:null,choose:2,id:null,number:null},this.accessoriesForm.chooseStashPartsValue="",this.addAccessoriesDialog=!1},addAccessoriesComfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,i,n,l,c,u,d,m,p,h,v,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return 2===t.accessoriesForm.choose&&(t.accessoriesForm.type=2),a.next=3,t.$refs.accessoriesForm.validate();case 3:"新增配件"===t.accessoriesTitle?(t.accessoriesList||(t.accessoriesList=[]),t.accessoriesList.push(Object(o["a"])({},t.accessoriesForm))):(s=t.accessoriesForm,r=s.price,i=s.num,n=s.type,l=s.name,c=s.brand,u=s.parameter,d=s.brandId,m=s.choose,p=s.chooseStashPartsValue,h=s.id,v=s.unitId,f=s.number,t.accessoriesList[e]={id:h,price:r,num:i,type:n,name:l,brand:c,parameter:u,choose:m,brandId:d,unitId:v,number:f,chooseStashPartsValue:p},t.againTableRefresh=!t.againTableRefresh),t.getAccessoriesSum(),t.closeAddAccessoriesDialog();case 6:case"end":return a.stop()}}),a)})))()},addAccessories:function(){this.accessoriesTitle="新增配件",this.addAccessoriesDialog=!0},editSolvePlanFn:function(e){this.addSolvePlanDialogTitle="编辑方案"+(e+1),this.editIndex=e,this.addSolvePlanList=Object(o["a"])({},this.solvePlanList[e]),this.addSolvePlanDialog=!0},delSolvePlanFn:function(e){var t=this;this.$confirm("你确定删除该方案吗, 是否继续?","删除方案"+(e+1),{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.solvePlanList.splice(e,1);case 2:t.$message({type:"success",message:"删除成功"});case 3:case"end":return a.stop()}}),a)}))))},addSolvePlanConfirm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.solvePlanList||(e.solvePlanList=[]),"新增解决方案"!==e.addSolvePlanDialogTitle){t.next=6;break}return t.next=4,e.solvePlanList.push(e.addSolvePlanList);case 4:t.next=7;break;case 6:e.solvePlanList[e.editIndex]=e.addSolvePlanList;case 7:e.closeAddSolvePlanDialog();case 8:case"end":return t.stop()}}),t)})))()},closeAddSolvePlanDialog:function(){this.addSolvePlanList={analysis:"",desc:"",programme:""},this.active=1,this.addSolvePlanDialog=!1},addSolvePlan:function(){this.addSolvePlanDialogTitle="新增解决方案",this.addSolvePlanDialog=!0}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,r,o,i,c,u,d,m,p,h,v,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$loading({text:"数据正在回显中,请稍等..."}),t.next=3,Object(n["fb"])();case 3:return s=t.sent,e.equipmentPosition=s.data,e.orderSn=e.$route.query.orderSn,t.next=8,Object(l["e"])({enterpriseOrderSn:e.orderSn});case 8:r=t.sent,o=r.data,i=o.type,c=o.servicePositions,u=o.programmeList,d=o.warrantyTime,m=o.partsList,p=o.doorAmount,h=o.technologyAmount,v=o.otherAmount,f=o.partsAmount,e.orderDetails=o,e.faultTypeValue=i?i.split(","):[],e.siteOfFailureValue=c?c.split(","):[],e.solvePlanList=u,e.qualityEnsureCycleValue=d,e.accessoriesList=m,e.doorAmount=p||0,e.technologyAmount=h||0,e.otherAmount=v||0,e.partsAmount=f||0,a.close();case 22:case"end":return t.stop()}}),t)})))()},computed:{priceSum:function(){var e={accessoryType:{2:.01},assistCleanType:{1:.01},warrantyPeriodType:{2:.01,3:.02,4:.03},technicalCapabilitiesType:{1:.1,2:.05},preventType:{1:.05},arrivalTimeType:{1:.1,2:.05}},t=0;for(var a in e)"accessoryType"==a?e[a][this.orderDetails[a]]&&(t+=e[a][this.orderDetails[a]]*this.partsAmount):e[a][this.orderDetails[a]]&&(t+=e[a][this.orderDetails[a]]*this.doorAmount);var s=Number(this.doorAmount)+Number(this.partsAmount)+t;return 1===this.orderDetails.orderType&&(s=this.judgNoWorkTime(s,this.doorAmount)),s.toFixed(2)}}},u=c,d=(a("779f"),a("2877")),m=Object(d["a"])(u,s,r,!1,null,"070b6a80",null);t["default"]=m.exports}}]);