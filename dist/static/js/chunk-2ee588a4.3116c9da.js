(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ee588a4"],{"00c6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"faultItemsExamine"},[n("first-title",{attrs:{title:"月结申请记录"}}),n("div",{staticClass:"faultItemsExamine_table"},[n("el-card",[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.monthlyApplyRecords}},[n("el-table-column",{attrs:{label:"企业名称",prop:"enterpriseName",align:"center"}}),n("el-table-column",{attrs:{label:"税号",prop:"taxpayerNo",align:"center"}}),n("el-table-column",{attrs:{label:"联系人",prop:"contactPeople",align:"center"}}),n("el-table-column",{attrs:{label:"联系电话",prop:"contactPhone",align:"center"}}),n("el-table-column",{attrs:{label:"税率",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(100*n.taxPoint)+"% ")]}}])}),n("el-table-column",{attrs:{label:"状态",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("div",{style:{color:2===r.status?"#67C23A":3===r.status?"#F56C6C":"#909399"}},[e._v(" "+e._s(2===r.status?"已通过":3===r.status?"已驳回":"待审核")+" ")])]}}])}),n("el-table-column",{attrs:{label:"周期",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.settlementDay?n.settlementDay+"天":"/")+" ")]}}])}),n("el-table-column",{attrs:{label:"驳回原因",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(n.reason?n.reason:"/")+" ")]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[1==r.status?n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openExamineDialog(r)}}},[e._v("审核")]):n("div",[e._v("/")])]}}])})],1),n("div",{staticClass:"faultItemsExamine_table_pagination"},[n("el-pagination",{attrs:{background:"","page-size":e.queryEnterpriseSettlementApplyParams.pageSize,total:e.monthlyApplyRecordsTotal,layout:"prev, pager, next"},on:{"current-change":e.changePage}})],1)],1),n("el-dialog",{attrs:{title:"审核月结申请",visible:e.reviewMonthlyApplyVisible,"before-close":e.closeReviewMonthlyApplyDialog,"close-on-click-modal":!1,width:"30%"}},[n("el-form",{ref:"handleEnterpriseSettlementApplyFef",attrs:{"label-width":"80px",model:e.handleEnterpriseSettlementApplyParams,rules:e.handleEnterpriseSettlementApplyRules}},[n("el-form-item",{attrs:{label:"审核状态",prop:"status"}},[n("el-radio-group",{model:{value:e.handleEnterpriseSettlementApplyParams.status,callback:function(t){e.$set(e.handleEnterpriseSettlementApplyParams,"status",t)},expression:"handleEnterpriseSettlementApplyParams.status"}},[n("el-radio",{attrs:{label:2}},[e._v("通过")]),n("el-radio",{attrs:{label:3}},[e._v("拒绝")])],1)],1),3===e.handleEnterpriseSettlementApplyParams.status?n("el-form-item",{attrs:{label:"驳回原因",prop:"reason"}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入驳回原因"},model:{value:e.handleEnterpriseSettlementApplyParams.reason,callback:function(t){e.$set(e.handleEnterpriseSettlementApplyParams,"reason",t)},expression:"handleEnterpriseSettlementApplyParams.reason"}})],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeReviewMonthlyApplyDialog}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleEnterpriseSettlementApply}},[e._v("确 定")])],1)],1)],1)],1)},a=[],l=n("1da1"),s=(n("96cf"),n("b775"));function i(e){return Object(s["a"])({url:"/admin/enterprise/handleEnterpriseSettlementApply",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/admin/enterprise/queryEnterpriseSettlementApply",method:"post",data:e})}var p=n("4412"),c={data:function(){return{monthlyApplyRecords:[],monthlyApplyRecordsTotal:0,queryEnterpriseSettlementApplyParams:{pageNo:1,pageSize:10},handleEnterpriseSettlementApplyParams:{id:null,reason:null,status:null},handleEnterpriseSettlementApplyRules:{status:[{required:!0,message:"请选择审核状态",trigger:"change"}]},reviewMonthlyApplyVisible:!1}},methods:{editEnterpriseInfo:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm("您确定要将该企业转为月结吗?","转月结",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(p["a"])({id:e.enterpriseId,settlementType:2});case 2:r=n.sent,r&&"000"===r.code&&(t.$message({message:"操作成功",type:"success"}),t.queryEnterpriseSettlementApply());case 4:case"end":return n.stop()}}),n)}))));case 1:case"end":return n.stop()}}),n)})))()},handleEnterpriseSettlementApply:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.handleEnterpriseSettlementApplyFef.validate();case 2:return t.next=4,i(e.handleEnterpriseSettlementApplyParams);case 4:n=t.sent,n&&"000"===n.code&&(e.$message.success("操作成功"),e.closeReviewMonthlyApplyDialog(),e.queryEnterpriseSettlementApply());case 6:case"end":return t.stop()}}),t)})))()},closeReviewMonthlyApplyDialog:function(){this.handleEnterpriseSettlementApplyParams={id:null,reason:null,status:null},this.$refs.handleEnterpriseSettlementApplyFef.resetFields(),this.reviewMonthlyApplyVisible=!1},openExamineDialog:function(e){this.handleEnterpriseSettlementApplyParams.id=e.id,this.reviewMonthlyApplyVisible=!0},changePage:function(e){this.queryEnterpriseSettlementApplyParams.pageNo=e,this.queryEnterpriseSettlementApply()},queryEnterpriseSettlementApply:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o(e.queryEnterpriseSettlementApplyParams);case 2:n=t.sent,n&&"000"===n.code&&(e.monthlyApplyRecords=n.data.records||[],e.monthlyApplyRecordsTotal=n.data.total||0);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){this.queryEnterpriseSettlementApply()}},u=c,m=(n("157a"),n("2877")),d=Object(m["a"])(u,r,a,!1,null,"369dd999",null);t["default"]=d.exports},"157a":function(e,t,n){"use strict";n("bce8")},4412:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n("b775");n("cb5c");function a(e){return Object(r["a"])({url:"/admin/maintenance/queryEnterpriseName?query="+e,method:"get"})}function l(e){return Object(r["a"])({url:"/admin/maintenance/editEnterpriseInfo",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/admin/maintenance/handleEnterpriseExamine",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/admin/maintenance/getEnterpriseInfo?id=".concat(e.id),method:"get"})}function o(e){return Object(r["a"])({url:"/admin/maintenance/getEnterpriseInvitationCode?id=".concat(e),method:"get"})}},bce8:function(e,t,n){}}]);