(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-395e93b5"],{"024f":function(e,t,r){"use strict";r("2fbb")},"2fbb":function(e,t,r){},c24f:function(e,t,r){"use strict";r.d(t,"j",(function(){return a})),r.d(t,"p",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"q",(function(){return o})),r.d(t,"e",(function(){return c})),r.d(t,"l",(function(){return u})),r.d(t,"i",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"b",(function(){return p})),r.d(t,"h",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"c",(function(){return g})),r.d(t,"n",(function(){return b})),r.d(t,"o",(function(){return v})),r.d(t,"m",(function(){return w})),r.d(t,"k",(function(){return y}));var n=r("b775");r("cb5c");function a(e){return Object(n["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function u(e){return Object(n["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/admin/userInfo/handleUserInfoStatus",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/admin/userInfo/handleAccountEdit",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/admin/userInfo/queryMoney",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/admin/userInfo/toVip",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function w(e){return Object(n["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}},d3c4:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"assignedWorker"},[r("div",{staticClass:"searchTool"},[r("div",{staticClass:"workerName"},[r("h4",{staticStyle:{color:"#999"}},[e._v("师傅名称")]),r("div",{staticClass:"inp"},[r("el-input",{attrs:{clearable:"",placeholder:"请输入你的师傅名称"},model:{value:e.params.realName,callback:function(t){e.$set(e.params,"realName",t)},expression:"params.realName"}})],1),r("h4",{staticStyle:{color:"#999",width:"90px","margin-left":"20px"}},[e._v("指派的师傅:")]),r("div",{staticClass:"assignedWorkerList"},[e._l(e.masterNameList,(function(t,n){return r("span",{key:t,staticClass:"item",on:{click:function(t){return e.delAssignedWorker(n)}}},[e._v(" "+e._s(t)+" ")])})),r("div",{staticClass:"notiveText"},[e._v("( 注:点击姓名即可删除！)")])],2)]),r("div",{staticClass:"operationBtnList"},[r("el-button",{attrs:{type:"primary"},on:{click:e.realNameBlurFn}},[e._v(" 搜索 ")]),r("el-button",{staticClass:"thrownIntoMarketBtn",attrs:{type:"success"},on:{click:e.handleTakeOrder}},[e._v("代师傅接单")]),r("el-button",{staticClass:"thrownIntoMarketBtn",attrs:{type:"success"},on:{click:function(t){return e.assignedBtn("worker")}}},[e._v("指派师傅")])],1)]),r("div",{staticClass:"workerTable"},[r("el-card",[r("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tableShow,expression:"tableShow"}],staticStyle:{width:"100%"},attrs:{height:"70vh","header-cell-style":{background:"#f6f8fc",color:"#707070"},data:e.masterList}},[r("el-table-column",{attrs:{label:"多选",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("input",{directives:[{name:"model",rawName:"v-model",value:n.show,expression:"row.show"}],staticStyle:{zoom:"120%"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.show)?e._i(n.show,null)>-1:n.show},on:{click:function(t){return e.manyPeopleAssigned(n.show,n.uid,n.realName)},change:function(t){var r=n.show,a=t.target,s=!!a.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);a.checked?o<0&&e.$set(n,"show",r.concat([i])):o>-1&&e.$set(n,"show",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(n,"show",s)}}})]}}])}),r("el-table-column",{attrs:{label:"师傅头像",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("img",{attrs:{src:t.realPortrait,width:"75px",height:"75px"}})]}}])}),r("el-table-column",{attrs:{prop:"realName",label:"师傅",align:"center"}}),r("el-table-column",{attrs:{prop:"phone",label:"师傅电话",align:"center"}}),r("el-table-column",{attrs:{prop:"identity",label:"角色",align:"center"}}),r("el-table-column",{attrs:{label:"服务状态",align:"center"}},[[e._v(" 可接单状态 ")]],2),r("el-table-column",{attrs:{prop:"createTime",label:"入驻时间",align:"center"}}),r("el-table-column",{attrs:{label:"所属",align:"center"}},[[e._v(" 广东机床加工有限公司 ")]],2),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("a",{staticClass:"operationBtn",attrs:{href:"#"},on:{click:function(t){return e.$router.push("/maintenance/worker/workerDetails?id="+n.id)}}},[e._v("详情")])]}}])})],1),r("div",{staticClass:"pagingTool"},[r("el-pagination",{attrs:{total:e.total,"page-size":10,layout:"total, prev, pager, next, jumper"},on:{"current-change":e.currentChange}})],1)],1)],1),r("el-dialog",{attrs:{title:"区域指派",width:"30%",visible:e.regionChooseDialog,"show-close":!1}},[r("div",{staticClass:"content"},[r("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择市"},on:{change:e.cityValueChage},model:{value:e.cityValue,callback:function(t){e.cityValue=t},expression:"cityValue"}},e._l(e.cityList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),r("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择区"},model:{value:e.districtValue,callback:function(t){e.districtValue=t},expression:"districtValue"}},e._l(e.districtList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.regionChooseDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmRegionChoose}},[e._v("确 定")])],1)])],1)},a=[],s=r("1da1"),i=(r("a434"),r("159b"),r("96cf"),r("f8b7")),o=r("c24f"),c=r("8593"),u={data:function(){return{districtValue:null,districtList:null,cityValue:null,cityList:null,regionChooseDialog:!1,enterpriseOrderSn:"",params:{pageNo:1,pageSize:10,realName:""},masterList:null,total:null,masterUidList:[],masterNameList:[],tableShow:!0}},methods:{handleTakeOrder:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.masterUidList.length>0&&e.masterUidList.length<2){t.next=3;break}return e.$message({message:"请选择一名师傅进行指派",type:"warning"}),t.abrupt("return");case 3:return r={uid:e.masterUidList[0],relationOrderSn:e.enterpriseOrderSn},t.next=6,Object(i["T"])(r);case 6:n=t.sent,"操作成功"==n.message&&(e.$message({message:"操作成功",type:"success"}),e.$router.push({name:"maintenance_order_desc",query:{orderSn:e.enterpriseOrderSn}}));case 8:case"end":return t.stop()}}),t)})))()},confirmRegionChoose:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["i"])({areaIdList:e.districtValue,enterpriseOrderSn:e.enterpriseOrderSn,masterUidList:null});case 2:r=t.sent,"操作成功"===r.message&&(e.$message({message:"指派成功",type:"success"}),e.$router.push({name:"maintenance_order_desc",query:{orderSn:e.enterpriseOrderSn}}));case 4:case"end":return t.stop()}}),t)})))()},cityValueChage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])(e.cityValue);case 2:r=t.sent,e.districtList=r.data;case 4:case"end":return t.stop()}}),t)})))()},openRegionChooseDialog:function(){this.regionChooseDialog=!0},delAssignedWorker:function(e){var t=this;this.$confirm("您确定取消指派"+this.masterNameList[e]+"?","取消指派",{type:"warning"}).then((function(){t.masterUidList.splice(e,1),t.masterNameList.splice(e,1),t.$message({type:"success",message:"删除成功!"})}))},manyPeopleAssigned:function(e,t,r){if(e){var n=this.masterUidList.indexOf(t);this.masterUidList.splice(n,1);var a=this.masterNameList.indexOf(r);this.masterNameList.splice(a,1),console.log(this.masterUidList)}else-1===this.masterUidList.indexOf(t)&&this.masterUidList.push(t),-1===this.masterNameList.indexOf(r)&&this.masterNameList.push(r)},assignedBtn:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={enterpriseOrderSn:t.enterpriseOrderSn},n.masterUidList="worker"===e?t.masterUidList:[],r.next=4,Object(o["i"])(n);case 4:a=r.sent,"操作成功"===a.message&&(t.$message({message:"指派成功",type:"success"}),t.$router.push({name:"maintenance_order_desc",query:{orderSn:t.enterpriseOrderSn}}));case 6:case"end":return r.stop()}}),r)})))()},realNameBlurFn:function(){this.params.pageNo=1,this.getMasterList()},currentChange:function(e){this.params.pageNo=e,this.getMasterList()},getMasterList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading(),e.tableShow=!1,t.next=4,Object(o["l"])(e.params);case 4:n=t.sent,e.masterList=n.data.records,e.masterList.forEach((function(e){e.show=!1})),e.total=n.data.total,e.tableShow=!0,r.close();case 10:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.query,n=r.masterNameList,a=r.masterUidList,s=r.orderSn,n&&n.forEach((function(t){e.masterNameList.push(t)})),a&&a.forEach((function(t){e.masterUidList.push(t)})),t.next=5,Object(c["d"])(44e4);case 5:i=t.sent,e.cityList=i.data,e.enterpriseOrderSn=s,e.getMasterList();case 9:case"end":return t.stop()}}),t)})))()}},l=u,d=(r("024f"),r("2877")),m=Object(d["a"])(l,n,a,!1,null,"a4e63b76",null);t["default"]=m.exports}}]);