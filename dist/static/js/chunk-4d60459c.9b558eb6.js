(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d60459c"],{"019b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"manage-top"},[r("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{"label-width":"80px","label-position":"right"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"师傅名称"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择","remote-method":e.searchMaster,remote:""},model:{value:e.searchForm.masterUid,callback:function(t){e.$set(e.searchForm,"masterUid",t)},expression:"searchForm.masterUid"}},e._l(e.masterSearchList,(function(e){return r("el-option",{key:e.uid,attrs:{label:e.realName,value:e.uid}})})),1)],1)],1),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"订单状态"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.util.global.mainStatus,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"订单类型"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.orderType,callback:function(t){e.$set(e.searchForm,"orderType",t)},expression:"searchForm.orderType"}},[r("el-option",{attrs:{label:"散单",value:1}},[e._v("散单")]),r("el-option",{attrs:{label:"年保",value:2}},[e._v("年保")])],1)],1)],1),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"平台状态"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.platformStatus,callback:function(t){e.$set(e.searchForm,"platformStatus",t)},expression:"searchForm.platformStatus"}},[r("el-option",{attrs:{label:"师傅取消",value:-1}},[e._v("师傅取消")]),r("el-option",{attrs:{label:"待检测定价",value:0}},[e._v("待检测定价")]),r("el-option",{attrs:{label:"待派发",value:1}},[e._v("待派发")]),r("el-option",{attrs:{label:"待审核定价",value:2}},[e._v("待审核定价")]),r("el-option",{attrs:{label:"待打款至师傅",value:3}},[e._v("待打款至师傅")])],1)],1)],1),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"审核状态"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.finalExamineStatus,callback:function(t){e.$set(e.searchForm,"finalExamineStatus",t)},expression:"searchForm.finalExamineStatus"}},[r("el-option",{attrs:{label:"未审核",value:0}},[e._v("未审核")]),r("el-option",{attrs:{label:"部分审核",value:1}},[e._v("部分审核")]),r("el-option",{attrs:{label:"已审核",value:2}},[e._v("已审核")])],1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"企业名称"}},[r("el-input",{attrs:{placeholder:"企业名称"},model:{value:e.searchForm.enterpriseName,callback:function(t){e.$set(e.searchForm,"enterpriseName",t)},expression:"searchForm.enterpriseName"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"设备编码"}},[r("el-input",{attrs:{placeholder:"设备编码"},model:{value:e.searchForm.no,callback:function(t){e.$set(e.searchForm,"no",t)},expression:"searchForm.no"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"订单编号"}},[r("el-input",{attrs:{placeholder:"订单编号"},model:{value:e.searchForm.orderSn,callback:function(t){e.$set(e.searchForm,"orderSn",t)},expression:"searchForm.orderSn"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{icon:"el-icon-zoom-in",plain:"",type:"primary"},on:{click:e.query_queryRepairOrderList}},[e._v("查询")]),r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"el-icon-refresh",plain:"",type:"info"},on:{click:e.resetFn}},[e._v("重置")]),r("el-button",{attrs:{type:"success",plain:""},on:{click:e.exportList}},[e._v(" 导出 ")])],1)],1)],1)],1),r("div",{staticStyle:{height:"16px"}}),r("el-card",[r("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:e.dataList,height:"65vh"}},[r("el-table-column",{attrs:{prop:"orderSn",label:"订单编号","show-overflow-tooltip":"",width:"200",align:"center"}}),r("el-table-column",{attrs:{label:"工单类型","show-overflow-tooltip":"",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(1===r.orderType?"普通":2===r.orderType?"年保":"年卡")+" ")]}}])}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"企业名称","show-overflow-tooltip":"",width:"230",align:"center"}}),r("el-table-column",{attrs:{prop:"no",label:"设备编码","show-overflow-tooltip":"",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"devicePlace",label:"设备产地","show-overflow-tooltip":"",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"deviceTypeName",label:"设备类型","show-overflow-tooltip":"",width:"130",align:"center"}}),r("el-table-column",{attrs:{prop:"deviceBrand",label:"设备品牌","show-overflow-tooltip":"",width:"90",align:"center"}}),r("el-table-column",{attrs:{prop:"deviceSystemName",label:"设备系统","show-overflow-tooltip":"",width:"140",align:"center"}}),r("el-table-column",{attrs:{prop:"serviceTime",label:"服务时间","show-overflow-tooltip":"",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"simpleDesc",label:"故障描述","show-overflow-tooltip":"",width:"200",align:"center"}}),r("el-table-column",{attrs:{prop:"contactsPeople",label:"联系人","show-overflow-tooltip":"",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"contactsPhone",label:"联系电话","show-overflow-tooltip":"",width:"160",align:"center"}}),r("el-table-column",{attrs:{prop:"masterRealName",label:"师傅名称","show-overflow-tooltip":"",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"masterPhone",label:"师傅联系电话","show-overflow-tooltip":"",width:"160",align:"center"}}),r("el-table-column",{attrs:{prop:"comprehensiveScore",label:"客户综合评分","show-overflow-tooltip":"",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"remarks",label:"备注","show-overflow-tooltip":"",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"platformVisitMessage",label:"平台回访结果","show-overflow-tooltip":"",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"orderStatusName",label:"状态","show-overflow-tooltip":"",width:"120",fixed:"right",align:"center"}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":"",width:"120",fixed:"right",align:"center"}}),r("el-table-column",{attrs:{prop:"finalExamineStatusName",label:"审核状态","show-overflow-tooltip":"",width:"120",fixed:"right",align:"center"}}),r("el-table-column",{attrs:{label:"操作",width:"300",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("div",{staticClass:"settings"},[r("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:function(t){return e.queryDesc(a)}}},[e._v("详情")]),1==a.orderType?r("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:function(t){return e.openConvertToInsurance(a.orderSn)}}},[e._v("转类型")]):e._e(),r("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:function(t){return e.openRemarksDialog(a)}}},[e._v("备注")])],1)]}}])})],1),r("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.pageCount},on:{"current-change":e.updatePageNo}})],1)],1),r("el-dialog",{attrs:{title:"备注",width:"30%",visible:e.openRemarksShow,"before-close":e.closeRemarksDialog,center:""}},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.remarksparams.remarks,callback:function(t){e.$set(e.remarksparams,"remarks",t)},expression:"remarksparams.remarks"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeRemarksDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.comfirmRemarks}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"散单转年保",width:"30%",visible:e.openConvertToInsuranceShow,"before-close":e.closeConvertToInsurance,center:""}},[r("el-form",[r("el-form-item",{attrs:{label:"类型选择","label-width":"70px"}},[r("el-radio-group",{model:{value:e.convertToInsuranceparams.type,callback:function(t){e.$set(e.convertToInsuranceparams,"type",t)},expression:"convertToInsuranceparams.type"}},[r("el-radio",{attrs:{label:2}},[e._v("转年保")]),r("el-radio",{attrs:{label:3}},[e._v("转年卡")])],1)],1),r("el-form-item",{attrs:{label:"设备编号","label-width":"70px"}},[r("el-input",{attrs:{rows:4,placeholder:"请输入设备编号"},model:{value:e.convertToInsuranceparams.no,callback:function(t){e.$set(e.convertToInsuranceparams,"no",t)},expression:"convertToInsuranceparams.no"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeConvertToInsurance}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.convertToInsurance}},[e._v("确 定")])],1)],1)],1)},n=[],o=r("5530"),s=r("1da1"),i=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("a15b"),r("b0c0"),r("4de4"),r("96cf"),r("c24f")),l=r("f8b7"),c=r("ed08"),u={title:"course",data:function(){return{masterSearchList:[],remarksparams:{remarks:null,orderSn:null},openRemarksShow:!1,convertToInsuranceparams:{orderSn:null,no:null,type:null},openConvertToInsuranceShow:!1,exportParams:null,searchForm:{masterUid:"",deviceTypeId:"",status:"",orderType:"",enterpriseName:"",no:"",platformStatus:"",orderSn:"",finalExamineStatus:null},dataList:[],pageCount:null,pageCountMaster:"",currentPage:1,tabelList:[],changeData:[],masterList:[],loading:!1,typeData:[],courseList:[],snatchList:[],courseDistriList:[],Name:"",Phone:"",enterpriseOrderSn:"",url:{query:"/admin/maintenance/queryRepairOrderList",queryType:"/admin/maintenance/queryDeviceTypeList",querySnatch:"/admin/maintenance/queryMasterGrabOrderList",assign:"/admin/maintenance/handleAssignMaster",handleMasterQuotation:"/admin/maintenance/handleMasterQuotation"},rules:{worker:[{required:!0,message:"请输入接单人",trigger:"blur"}],workerPhone:[{required:!0,message:"请输入接单人手机",trigger:"blur"}]},finishForm:{payAmount:0},param:{},quotationForm:{}}},created:function(){var e;if(localStorage.getItem("queryRepairData")&&(e=JSON.parse(localStorage.getItem("queryRepairData"))),e){var t=e,r=t.pageNo,a=t.pageSize,n=t.enterpriseName,o=t.status,s=t.orderType,i=t.no,l=t.orderSn,c=t.platformStatus;this.currentPage=r,this.pageSize=a,this.searchForm.enterpriseName=n,this.searchForm.status=o,this.searchForm.orderType=s,this.searchForm.no=i,this.searchForm.orderSn=l,this.searchForm.platformStatus=c}else this.currentPage=1,this.pageSize=10;this._queryRepairOrderList()},methods:{convertToInsurance:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["f"])(e.convertToInsuranceparams);case 2:r=t.sent,"操作成功"===r.message&&(e.$message({message:"操作成功",type:"success"}),e.closeConvertToInsurance(),e._queryRepairOrderList());case 4:case"end":return t.stop()}}),t)})))()},closeConvertToInsurance:function(){this.openConvertToInsuranceShow=!1,this.convertToInsuranceparams={orderSn:null,no:null}},openConvertToInsurance:function(e){this.convertToInsuranceparams.orderSn=e,this.openConvertToInsuranceShow=!0},searchMaster:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["e"])({realName:e});case 2:a=r.sent,t.masterSearchList=a.data.records,console.log(625,t.masterSearchList);case 5:case"end":return r.stop()}}),r)})))()},comfirmRemarks:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["V"])(e.remarksparams);case 2:r=t.sent,"操作成功"===r.message&&(e.closeRemarksDialog(),e._queryRepairOrderList());case 4:case"end":return t.stop()}}),t)})))()},closeRemarksDialog:function(){this.remarksparams={remarks:null,orderSn:null},this.openRemarksShow=!1},openRemarksDialog:function(e){var t=e.orderSn,r=e.remarks;this.remarksparams.orderSn=t,this.remarksparams.remarks=r,this.openRemarksShow=!0},query_queryRepairOrderList:function(){this.currentPage=1,this._queryRepairOrderList()},exportList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading({lock:!0,text:"数据传输中",spinner:"el-icon-loading"}),e.exportParams.pageSize=1e4,t.next=4,Object(l["U"])(e.exportParams);case 4:a=t.sent,a&&(n=document.createElement("a"),o=new Blob([a.data],{type:"application/vnd.ms-excel"}),n.style.display="none",n.href=URL.createObjectURL(o),n.download="维保列表",document.body.appendChild(n),n.click(),document.body.removeChild(n),r.close());case 6:case"end":return t.stop()}}),t)})))()},resetFn:function(){this.currentPage=1,this.searchForm={deviceTypeId:"",status:"",orderType:"",enterpriseName:"",no:"",platformStatus:"",orderSn:"",finalExamineStatus:null},this._queryRepairOrderList()},templateDownload:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["k"])();case 2:t=e.sent,window.location.href=t.data;case 4:case"end":return e.stop()}}),e)})))()},workOrderImport:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=new FormData,a.append("file",e.file),r.next=4,Object(l["Fb"])(a);case 4:n=r.sent,"操作成功"===n.message&&(t.$message({message:"已成功批量下单",type:"success"}),t._queryAssignableMasterList(),t._queryRepairOrderList());case 6:case"end":return r.stop()}}),r)})))()},_queryAssignableMasterList:function(){var e=this,t={pageNo:this.currentPage,pageSize:10,realName:this.Name};Object(i["l"])(t).then((function(t){t&&(e.masterList=t.data.records,e.pageCountMaster=t.data.total,e.currentPage=t.data.current)}))},_queryRepairOrderList:function(){var e=this,t=Object(o["a"])({pageNo:this.currentPage,pageSize:10},this.searchForm);Object(c["b"])("queryRepairData",JSON.stringify(t)),this.exportParams=t,Object(l["zb"])(t).then((function(t){t&&(e.dataList=t.data.records,e.pageCount=t.data.total)})).finally((function(){}))},updatePageNo:function(e){this.currentPage=e,this._queryRepairOrderList()},handleCurrentChange:function(e){this.currentPage=e,this._getMasterList()},changeMaster:function(e){console.log("row",e.uid),this.tabelList.push(e.uid),console.log("list",this.tabelList)},seedItout:function(){var e=this,t={enterpriseOrderSn:this.enterpriseOrderSn,masterUidList:[]};Object(i["i"])(t).then((function(t){console.log("指派师傅",t),t.success?(e.$message({showClose:!0,message:t.message,type:"success"}),e.$refs.snatch.close()):e.$message({showClose:!0,message:t.message,type:"false"})}))},seedIt:function(){var e=this,t=this.tabelList;t.join(","),console.log("选中id",t);var r={enterpriseOrderSn:this.enterpriseOrderSn,masterUidList:t};Object(i["i"])(r).then((function(t){console.log("指派师傅",t),t.success?(e.$message({showClose:!0,message:t.message,type:"success"}),e.$refs.snatch.close()):e.$message({showClose:!0,message:t.message,type:"false"})}))},queryDesc:function(e){this.$router.push({name:"maintenance_order_desc",query:{orderSn:e.orderSn}})},closeSnatch:function(e){e(!1)},assign:function(e){var t=this;this.$axios.post(this.url.assign,{enterpriseOrderSn:this.param.enterpriseOrderSn,masterOrderSn:e}).then((function(e){"000"==e.code&&(t.$message({showClose:!0,message:e.message,type:"success"}),t.$refs.snatch.close(),t.query())})).catch((function(e){console.error(e)}))},getType:function(e){return this.typeData.filter((function(t){if(t.id==e)return t}))[0].name},querySelectData:function(){var e=this;this.loading=!0,this.$axios.post(this.url.queryType).then((function(t){var r=t.data;e.typeData=r})).catch((function(e){console.info(e)})),this.loading=!1},_handleAssignMaster:function(e){var t=this;console.log(e);var r={enterpriseOrderSn:this.enterpriseOrderSn,masterUid:e.uid};Object(i["i"])(r).then((function(e){console.log("指派师傅",e),e.success?(t.$message({showClose:!0,message:e.message,type:"success"}),t.$refs.snatch.close()):t.$message({showClose:!0,message:e.message,type:"false"})}))},_addOrder:function(){this.$router.push({name:"maintenance"})},_getMasterList:function(){var e=this,t={pageNo:this.currentPage,pageSize:10,realName:this.Name,phone:this.Phone};Object(i["e"])(t).then((function(t){t&&(e.masterList=t.data.records,console.log("师傅列表",e.masterList),e.pageCount=t.data.total,e.currentPage=t.data.current)}))}}},m=u,p=r("2877"),d=Object(p["a"])(m,a,n,!1,null,"54e894ae",null);t["default"]=d.exports},a15b:function(e,t,r){"use strict";var a=r("23e7"),n=r("e330"),o=r("44ad"),s=r("fc6a"),i=r("a640"),l=n([].join),c=o!=Object,u=i("join",",");a({target:"Array",proto:!0,forced:c||!u},{join:function(e){return l(s(this),void 0===e?",":e)}})},c24f:function(e,t,r){"use strict";r.d(t,"j",(function(){return n})),r.d(t,"p",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"q",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"i",(function(){return u})),r.d(t,"f",(function(){return m})),r.d(t,"d",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"h",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"c",(function(){return g})),r.d(t,"n",(function(){return b})),r.d(t,"o",(function(){return v})),r.d(t,"m",(function(){return w})),r.d(t,"k",(function(){return y}));var a=r("b775");r("cb5c");function n(e){return Object(a["a"])({url:"/admin/maintenance/handleCommission",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/admin/business/querySalesmanList",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/maintenance/bindUserAccount",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/admin/userInfo/queryUserInfo",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/admin/maintenance/queryMasterList",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/admin/maintenance/queryAssignableMasterList",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/admin/maintenance/handleAssignMaster",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/admin/maintenance/getRepairOrderDetail",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/admin/maintenance/queryEnterpriseList",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/admin/userInfo/handleUserInfoStatus",method:"get",params:e})}function h(e){return Object(a["a"])({url:"/admin/userInfo/handleAccountEdit",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/admin/userInfo/queryMoney",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/admin/userInfo/toVip",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/admin/business/queryCustomerPool",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/admin/business/queryCustomerVisitList",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/admin/business/queryCustomerApplyVisitList",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/admin/business/handleCustomerApplyVisit",method:"post",data:e})}}}]);