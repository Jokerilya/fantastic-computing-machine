(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9001afaa"],{"740f":function(e,t,i){"use strict";i.d(t,"f",(function(){return s})),i.d(t,"e",(function(){return n})),i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return r})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return c}));var a=i("b775");function s(e){return Object(a["a"])({url:"/admin/maintenance/queryDeviceList",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/admin/maintenance/getDeviceInfoDetail",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/admin/maintenance/deleteDeviceParts",method:"get",params:{id:e}})}function r(e){return Object(a["a"])({url:"/admin/maintenance/deleteDeviceInfo",method:"get",params:{id:e}})}function o(e){return Object(a["a"])({url:"/admin/maintenance/editDeviceParts",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/admin/maintenance/editDeviceInfo",method:"post",data:e})}},"80ff":function(e,t,i){"use strict";i("bf62")},"8aa8":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"equipmentDetails"},[i("div",{staticClass:"equipmentDetails_basicInfo"},[i("h2",{staticClass:"basicInfo_title"},[e._v(e._s(e.titleName))]),i("el-card",[i("div",{staticClass:"basicInfo_content"},[i("div",{staticClass:"itemLine"},[i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("贴片编码")]),i("el-input",{attrs:{placeholder:"请输入贴片编码"},model:{value:e.equipmentAddForm.no,callback:function(t){e.$set(e.equipmentAddForm,"no",t)},expression:"equipmentAddForm.no"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("保养周期")]),i("el-input",{attrs:{placeholder:"请输入保养周期"},on:{input:function(t){return e.judgmentInputValue("cycle")}},model:{value:e.equipmentAddForm.cycle,callback:function(t){e.$set(e.equipmentAddForm,"cycle",e._n(t))},expression:"equipmentAddForm.cycle"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("出厂时间")]),i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"请输入出厂时间"},model:{value:e.equipmentAddForm.factoryTime,callback:function(t){e.$set(e.equipmentAddForm,"factoryTime",t)},expression:"equipmentAddForm.factoryTime"}})],1)]),i("div",{staticClass:"itemLine"},[i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("设备类型")]),i("el-cascader",{staticStyle:{width:"100%"},attrs:{props:{label:"name",children:"list",checkStrictly:!0,emitPath:!1,value:"id"},clearable:"","show-all-levels":!1,"collapse-tags":!0,options:e.deviceTypeList,placeholder:"请输入设备类型"},model:{value:e.equipmentAddForm.deviceTypeId,callback:function(t){e.$set(e.equipmentAddForm,"deviceTypeId",t)},expression:"equipmentAddForm.deviceTypeId"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("设备品牌")]),i("el-input",{attrs:{placeholder:"请输入设备品牌"},model:{value:e.equipmentAddForm.deviceBrand,callback:function(t){e.$set(e.equipmentAddForm,"deviceBrand",t)},expression:"equipmentAddForm.deviceBrand"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("设备型号")]),i("el-input",{attrs:{placeholder:"请输入设备型号"},model:{value:e.equipmentAddForm.deviceModel,callback:function(t){e.$set(e.equipmentAddForm,"deviceModel",t)},expression:"equipmentAddForm.deviceModel"}})],1)]),i("div",{staticClass:"itemLine"},[i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("设备轴数")]),i("el-input",{attrs:{placeholder:"请输入设备轴数"},model:{value:e.equipmentAddForm.axesNumber,callback:function(t){e.$set(e.equipmentAddForm,"axesNumber",t)},expression:"equipmentAddForm.axesNumber"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("设备系统")]),i("el-cascader",{staticStyle:{width:"100%"},attrs:{props:{label:"name",children:"list",checkStrictly:!0,emitPath:!1,value:"id"},clearable:"","show-all-levels":!1,"collapse-tags":!0,options:e.deviceSystemList,placeholder:"请输入设备系统"},model:{value:e.equipmentAddForm.deviceSystemId,callback:function(t){e.$set(e.equipmentAddForm,"deviceSystemId",t)},expression:"equipmentAddForm.deviceSystemId"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("设备产地")]),i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备产地"},model:{value:e.equipmentAddForm.devicePlace,callback:function(t){e.$set(e.equipmentAddForm,"devicePlace",t)},expression:"equipmentAddForm.devicePlace"}},[i("el-option",{attrs:{label:"进口",value:"进口"}}),i("el-option",{attrs:{label:"国产",value:"国产"}})],1)],1)]),i("div",{staticClass:"itemLine"},[i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("维保时间")]),i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("价格")]),i("el-input",{attrs:{placeholder:"请输入价格"},on:{input:function(t){return e.judgmentInputValue("price")}},model:{value:e.equipmentAddForm.price,callback:function(t){e.$set(e.equipmentAddForm,"price",e._n(t))},expression:"equipmentAddForm.price"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("设备类型")]),i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.equipmentAddForm.type,callback:function(t){e.$set(e.equipmentAddForm,"type",t)},expression:"equipmentAddForm.type"}},[i("el-option",{attrs:{label:"普通",value:1}}),i("el-option",{attrs:{label:"年保",value:2}}),i("el-option",{attrs:{label:"年卡",value:3}})],1)],1)]),i("div",{staticClass:"itemLine"},[i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("企业设备编码")]),i("el-input",{attrs:{placeholder:"请输入企业设备编码"},model:{value:e.equipmentAddForm.enterpriseDeviceNo,callback:function(t){e.$set(e.equipmentAddForm,"enterpriseDeviceNo",t)},expression:"equipmentAddForm.enterpriseDeviceNo"}})],1),i("div",{staticClass:"item"},[i("span",{staticClass:"item_title"},[e._v("企业设备位置")]),i("el-input",{attrs:{placeholder:"请输入企业设备位置"},model:{value:e.equipmentAddForm.enterpriseDevicePosition,callback:function(t){e.$set(e.equipmentAddForm,"enterpriseDevicePosition",t)},expression:"equipmentAddForm.enterpriseDevicePosition"}})],1)]),i("el-button",{staticClass:"btnTool",on:{click:e.addEditEquipment}},[e._v(e._s("新增设备信息"===e.titleName?"确定新增设备":"确定编辑设备"))])],1)])],1),"新增设备信息"!==e.titleName?i("div",{staticClass:"equipmentDetails_configInfo"},[i("div",{staticClass:"tool"},[i("h2",{staticClass:"configInfo_title"},[e._v("设备配件信息")]),i("el-button",{staticStyle:{"background-color":"#2f4d9e",color:"#fffefd"},on:{click:e.addPartsList}},[e._v("新增")]),i("el-button",{staticStyle:{color:"#2f4d9e",border:"1px solid #2f4d9e"}},[e._v("保存")]),i("span",{staticStyle:{"margin-left":"10px",color:"red"}},[e._v("注:配件修改完必须保存")])],1),i("el-card",[i("el-table",{key:e.certinfoKey,staticStyle:{width:"100%"},attrs:{data:e.partsList,"cell-style":{"text-align":"center"},"header-cell-style":{background:"#f6f8fc",color:"#707070","text-align":"center"}}},[i("el-table-column",{attrs:{label:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1)+" ")]}}],null,!1,2477450002)}),i("el-table-column",{attrs:{prop:"category",label:"项目大类"}}),i("el-table-column",{attrs:{prop:"name",label:"项目名称"}}),i("el-table-column",{attrs:{prop:"deviceBrand",label:"品牌"}}),i("el-table-column",{attrs:{prop:"deviceModel",label:"型号"}}),i("el-table-column",{attrs:{label:"单位"}},[e._v("mm")]),i("el-table-column",{attrs:{prop:"specification",label:"规格"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{staticStyle:{color:"#2f4d9e","margin-right":"10px"},on:{click:function(i){return e.editpartsList(t.row,t.$index)}}},[e._v("修改")]),i("a",{staticStyle:{color:"#2f4d9e"},on:{click:function(i){return e.delpartsList(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3810101498)})],1)],1)],1):e._e(),i("el-dialog",{attrs:{visible:e.addPartsListDialogShow,width:"40%",center:!0,"show-close":!1}},[i("div",{staticStyle:{"margin-top":"20px",color:"#7a797c","font-weight":"700"},attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.addPartsListName)+" ")]),i("div",{staticStyle:{padding:"0 20%"}},[i("el-form",{attrs:{model:e.partsListForm,"label-width":"100px","label-position":"left"}},[i("el-form-item",{attrs:{label:"项目大类"}},[i("el-input",{model:{value:e.partsListForm.category,callback:function(t){e.$set(e.partsListForm,"category",t)},expression:"partsListForm.category"}})],1),i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{model:{value:e.partsListForm.name,callback:function(t){e.$set(e.partsListForm,"name",t)},expression:"partsListForm.name"}})],1),i("el-form-item",{attrs:{label:"品牌"}},[i("el-input",{model:{value:e.partsListForm.deviceBrand,callback:function(t){e.$set(e.partsListForm,"deviceBrand",t)},expression:"partsListForm.deviceBrand"}})],1),i("el-form-item",{attrs:{label:"型号"}},[i("el-input",{model:{value:e.partsListForm.deviceModel,callback:function(t){e.$set(e.partsListForm,"deviceModel",t)},expression:"partsListForm.deviceModel"}})],1),i("el-form-item",{attrs:{label:"规格"}},[i("el-input",{model:{value:e.partsListForm.specification,callback:function(t){e.$set(e.partsListForm,"specification",t)},expression:"partsListForm.specification"}})],1)],1)],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{width:"100px",color:"#2d4da0",border:"1px solid #2d4da0"},on:{click:e.closeAddPartsListDialog}},[e._v("取消")]),i("el-button",{staticStyle:{width:"100px","background-color":"#2d4da0",color:"#fff"},on:{click:function(t){return e.addPartsListComfirm(e.partsListForm.index)}}},[e._v("确定")])],1)])],1)},s=[],n=i("1da1"),l=i("5530"),r=(i("96cf"),i("b0c0"),i("a434"),i("740f")),o=i("f8b7"),c=i("8593"),d={data:function(){return{equipmentAddForm:{no:"",cycle:null,factoryTime:"",deviceTypeId:"",deviceBrand:"",deviceModel:"",axesNumber:"",deviceSystemId:"",devicePlace:"",startTime:"",endTime:"",price:null,enterpriseDeviceNo:"",enterpriseDevicePosition:"",nameplateImg:"",type:null,orderSn:"SE447443"},time:"",deviceTypeList:null,deviceSystemList:null,upload_btn:!1,partsList:null,titleName:"新增设备信息",addPartsListName:"新增设备配件",id:"",addPartsListDialogShow:!1,partsListForm:{name:"",category:"",deviceBrand:"",deviveModel:"",specification:""},certinfoKey:!0}},methods:{judgmentInputValue:function(e){var t=/^[0-9]+.?[0-9]*/;""===this.equipmentAddForm[e]?this.equipmentAddForm[e]=0:t.test(this.equipmentAddForm[e])||(this.$message({message:"只能输数字哦",type:"warning"}),this.equipmentAddForm[e]=0)},editpartsList:function(e,t){this.addPartsListName="编辑设备配件",this.addPartsListDialogShow=!0,this.partsListForm=Object(l["a"])(Object(l["a"])({},e),{},{index:t})},addPartsListComfirm:function(e){"编辑设备配件"===this.addPartsListName?(this.partsList[e]=this.partsListForm,this.certinfoKey=!this.certinfoKey):(this.partsList||(this.partsList=[]),this.partsList.push(this.partsListForm)),this.$message({type:"success",message:"编辑设备配件"===this.addPartsListName?"编辑成功":"添加成功"}),this.closeAddPartsListDialog()},closeAddPartsListDialog:function(){this.addPartsListDialogShow=!1,this.partsListForm={name:"",category:"",deviceBrand:"",deviveMoDEL:"",specification:""}},addPartsList:function(){this.addPartsListName="新增设备配件",this.addPartsListDialogShow=!0},delpartsList:function(e,t){var i=this;this.$confirm("您确定删除"+t.name+"?","删除",{type:"warning"}).then((function(){i.partsList.splice(e,1),i.$message({type:"success",message:"删除成功"})}))},addEditEquipment:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.time&&(e.equipmentAddForm.endTime=e.time[1]+" 00:00:00",e.equipmentAddForm.startTime=e.time[0]+" 00:00:00"),t.next=3,Object(r["c"])(e.equipmentAddForm);case 3:i=t.sent,"操作成功"===i.message&&e.$router.push({name:"equipmentDetails",query:{id:e.equipmentAddForm.id}});case 5:case"end":return t.stop()}}),t)})))()},removeNameplatePic:function(){var e=this;this.equipmentAddForm.nameplateImg="",setTimeout((function(){e.upload_btn=!1}),1050)},uploadNameplatePic:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.$loading({lock:!0,text:"上传铭牌中...",spinner:"el-icon-loading"}),s=new FormData,t.upload_btn=!0,s.append("file",e.file),i.next=6,Object(c["a"])(s);case 6:n=i.sent,t.equipmentAddForm.nameplateImg=n.data,a.close();case 9:case"end":return i.stop()}}),i)})))()}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.titleName=e.$route.query.titleName,"新增设备信息"===e.titleName){t.next=9;break}return e.id=e.$route.query.id,t.next=5,Object(r["e"])({id:e.id});case 5:i=t.sent,e.equipmentAddForm=Object(l["a"])({},i.data),e.equipmentAddForm.startTime&&(e.time=[i.data.startTime.substring(0,10),i.data.endTime.substring(0,10)]),e.partsList=i.data.partsList;case 9:return t.next=11,Object(o["mb"])();case 11:return a=t.sent,e.deviceTypeList=a.data,t.next=15,Object(o["lb"])();case 15:s=t.sent,e.deviceSystemList=s.data;case 17:case"end":return t.stop()}}),t)})))()}},m=d,u=(i("80ff"),i("2877")),p=Object(u["a"])(m,a,s,!1,null,"04f34bc2",null);t["default"]=p.exports},bf62:function(e,t,i){}}]);