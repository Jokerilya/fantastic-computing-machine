{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-38dc3f9e\"],{\"1e35\":function(e,t,n){},\"7c64\":function(e,t,n){\"use strict\";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"div\",{staticClass:\"manage-top\",staticStyle:{display:\"flex\"}},[n(\"el-form\",{staticStyle:{width:\"100%\"},attrs:{\"label-width\":\"88px\",\"label-position\":\"right\"}},[n(\"el-row\",{attrs:{gutter:20}},[n(\"el-col\",[n(\"el-button\",{staticStyle:{\"margin-bottom\":\"22px\"},attrs:{type:\"primary\",icon:\"el-icon-plus\"},on:{click:function(t){return e.addNews(\"new\")}}},[e._v(\"添加资讯\")])],1)],1)],1)],1),n(\"div\",{staticStyle:{height:\"16px\"}}),n(\"div\",{staticClass:\"manage-table\"},[n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.dataConfig.loading,expression:\"dataConfig.loading\"}],ref:\"multipleTable\",staticStyle:{width:\"100%\"},attrs:{data:e.dataList,border:\"\",\"header-cell-style\":{color:\"#666\"}}},[n(\"el-table-column\",{attrs:{label:\"编号\",width:\"100\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[e._v(e._s(t.row.id||\"--\"))])]}}])}),n(\"el-table-column\",{attrs:{label:\"封面图片\",width:\"300\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(e){return[n(\"el-image\",{staticStyle:{height:\"80px\"},attrs:{\"preview-src-list\":[e.row.coverPicture],src:e.row.coverPicture}})]}}])}),n(\"el-table-column\",{attrs:{label:\"资讯标题\",\"header-align\":\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[e._v(e._s(t.row.title||\"--\"))])]}}])}),n(\"el-table-column\",{attrs:{label:\"添加时间\",align:\"center\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[e._v(e._s(t.row.createTime||\"--\"))])]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\",width:\"150\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-button\",{attrs:{type:\"text\"},on:{click:function(n){return e.addNews(\"edit\",t.row)}}},[e._v(\"编辑\")]),n(\"el-button\",{staticStyle:{color:\"red\"},attrs:{type:\"text\"},on:{click:function(n){return e.classifyDel(t.$index,t.row)}}},[e._v(\"删除\")])]}}])})],1)],1),n(\"div\",{staticStyle:{height:\"16px\"}}),n(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.dataList.length>0,expression:\"dataList.length > 0\"}],staticClass:\"table-block\"},[n(\"el-pagination\",{attrs:{background:\"\",\"current-page\":e.dataConfig.pageNo,\"page-size\":e.dataConfig.pageSize,\"page-sizes\":[20,30,50,100],layout:\"total,sizes, prev, pager, next\",total:e.dataConfig.total},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.currentChangeFn,\"update:currentPage\":function(t){return e.$set(e.dataConfig,\"pageNo\",t)},\"update:current-page\":function(t){return e.$set(e.dataConfig,\"pageNo\",t)}}})],1),n(\"el-dialog\",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:\"1000px\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[n(\"el-form\",{ref:\"newsForm\",staticStyle:{\"padding-right\":\"20px\"},attrs:{model:e.newsForm,rules:e.rules,\"label-width\":\"110px\"}},[n(\"el-form-item\",{attrs:{label:\"资讯标题\",prop:\"title\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入新闻资讯的标题\"},model:{value:e.newsForm.title,callback:function(t){e.$set(e.newsForm,\"title\",t)},expression:\"newsForm.title\"}})],1),n(\"el-form-item\",{attrs:{label:\"资讯封面图\",prop:\"coverPicture\"}},[n(\"upload-img\",{attrs:{width:\"80px\",height:\"80px\",img:e.newsForm.coverPicture},on:{uploadSuc:e.uploadSucFn}})],1),n(\"el-form-item\",{attrs:{label:\"资讯详情\",prop:\"content\"}},[e.dialogVisible?n(\"tinymce\",{attrs:{height:600},model:{value:e.newsForm.content,callback:function(t){e.$set(e.newsForm,\"content\",t)},expression:\"newsForm.content\"}}):e._e()],1)],1),n(\"span\",{staticStyle:{\"padding-right\":\"20px\"},attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addNewsSubmit(\"newsForm\")}}},[e._v(\"确定\"+e._s(\"编辑新闻资讯\"===e.dialogTitle?\"编辑\":\"添加\"))])],1)],1)],1)},a=[],s=n(\"2909\"),r=n(\"1da1\"),o=(n(\"96cf\"),n(\"a434\"),n(\"99af\"),n(\"b775\"));n(\"cb5c\");function c(e){return Object(o[\"a\"])({url:\"/admin/operation/queryOperationNews\",method:\"post\",data:e})}function l(e){return Object(o[\"a\"])({url:\"/admin/operation/getOperationNewsDetail\",method:\"get\",params:e})}function u(e){return Object(o[\"a\"])({url:\"/admin/operation/editOperationNews\",method:\"post\",data:e})}function d(e){return Object(o[\"a\"])({url:\"/admin/operation/delOperationNews\",method:\"get\",params:e})}var g=n(\"1d6e\"),f=n(\"8256\"),h={components:{Tinymce:f[\"a\"],uploadImg:g[\"a\"]},data:function(){return{dataList:[],dataConfig:{pageNo:1,pageSize:20,total:0,loading:!0},dialogTitle:\"添加新闻资讯\",dialogVisible:!1,newsForm:{title:\"\",coverPicture:\"\",content:\"\",sort:0},rules:{title:[{required:!0,message:\"请输入新闻资讯的标题\",trigger:\"blur\"}],coverPicture:[{required:!0,message:\"请上传封面图\",trigger:\"upload\"}],content:[{required:!0,message:\"请输入新闻详情\",trigger:\"blur\"}]}}},created:function(){this.getDataListFn()},methods:{getDataListFn:function(){var e=this;return Object(r[\"a\"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataConfig.loading=!0,t.next=3,c({pageNo:e.dataConfig.pageNo,pageSize:e.dataConfig.pageSize});case 3:i=t.sent,a=e.resDataFn(i),e.dataConfig.total=a.total,(n=e.dataList).splice.apply(n,[0,e.dataList.length].concat(Object(s[\"a\"])(a.records)));case 7:case\"end\":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.dataConfig.pageSize=e,this.getDataListFn()},currentChangeFn:function(e){this.dataConfig.pageNo=e,this.getDataListFn()},queryDataFn:function(){this.dataConfig.pageNo=1,this.dataConfig.pageSize=20,this.getDataListFn()},resSetQueryFn:function(){this.dataConfig.pageNo=1,this.dataConfig.pageSize=20,this.getDataListFn()},uploadSucFn:function(e){this.newsForm.coverPicture=e},addNews:function(e,t){var n=this;return Object(r[\"a\"])(regeneratorRuntime.mark((function i(){var a,s,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(s in a=n.$loading(),n.dialogTitle=\"添加新闻资讯\",n.newsForm)\"number\"===typeof n.newsForm[s]?n.newsForm[s]=0:n.newsForm[s]=\"\";if(\"edit\"!==e){i.next=9;break}return n.dialogTitle=\"编辑新闻资讯\",i.next=7,l({id:t.id});case 7:r=i.sent,\"000\"===r.code&&(n.newsForm=r.data);case 9:a.close(),n.dialogVisible=!0;case 11:case\"end\":return i.stop()}}),i)})))()},addNewsSubmit:function(e){var t=this;return Object(r[\"a\"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$refs[e].validate(function(){var e=Object(r[\"a\"])(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.abrupt(\"return\",!1);case 4:return\"添加新闻资讯\"===t.dialogTitle&&delete t.newsForm.id,delete t.newsForm.createTime,e.next=8,u(t.newsForm);case 8:i=e.sent,\"000\"===i.code&&(t.$message({type:\"success\",message:\"操作成功!\"}),t.dialogVisible=!1,t.getDataListFn());case 10:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case\"end\":return n.stop()}}),n)})))()},classifyDel:function(e,t){var n=this;this.$confirm(\"此操作将永久删除该条资讯, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(Object(r[\"a\"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,d({id:t.id});case 2:a=i.sent,\"000\"===a.code&&(n.$message({type:\"success\",message:\"删除成功!\"}),n.dataList.splice(e,1));case 4:case\"end\":return i.stop()}}),i)})))).catch((function(){}))}}},p=h,m=(n(\"db25\"),n(\"2877\")),b=Object(m[\"a\"])(p,i,a,!1,null,\"5905a631\",null);t[\"default\"]=b.exports},8256:function(e,t,n){\"use strict\";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tinymce-container\",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[n(\"textarea\",{staticClass:\"tinymce-textarea\",attrs:{id:e.tinymceId}}),e._v(\" \"),n(\"div\",{staticClass:\"editor-custom-btn-container\"},[n(\"editorImage\",{staticClass:\"editor-upload-btn\",attrs:{color:\"#1890ff\"},on:{successCBK:e.imageSuccessCBK}})],1)])},a=[],s=(n(\"b680\"),n(\"a9e3\"),n(\"159b\"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"upload-container\"},[n(\"el-button\",{style:{background:e.color,borderColor:e.color},attrs:{icon:\"el-icon-upload\",size:\"mini\",type:\"primary\"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(\" 上传图片 \")]),n(\"el-dialog\",{attrs:{visible:e.dialogVisible,\"append-to-body\":!0},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[n(\"el-upload\",{ref:\"uploadImg\",staticClass:\"editor-slide-upload\",attrs:{multiple:!0,\"file-list\":e.fileList,\"show-file-list\":!0,\"before-upload\":e.beforeUpload,action:e.qiniuHost,\"list-type\":\"picture-card\",\"http-request\":e.httpRequestFn},scopedSlots:e._u([{key:\"file\",fn:function(t){var i=t.file;return n(\"div\",{staticClass:\"show_img_box\"},[n(\"img\",{staticClass:\"el-upload-list__item-thumbnail\",attrs:{src:i.url,alt:\"\"}}),n(\"div\",{staticClass:\"progress\"},[parseInt(e.fileProgress[i.uid])>=100?n(\"span\",{staticClass:\"delete_icon\",on:{click:function(t){return e.handleRemove(i)}}},[n(\"i\",{staticClass:\"el-icon-delete\"})]):e._e(),parseInt(e.fileProgress[i.uid])<100?n(\"el-progress\",{staticStyle:{color:\"#FFFFFF\"},attrs:{type:\"circle\",percentage:parseInt(e.fileProgress[i.uid])}}):e._e()],1)])}}])},[n(\"i\",{staticClass:\"el-icon-plus\",attrs:{slot:\"default\"},slot:\"default\"})]),n(\"el-button\",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(\" 取消 \")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.handleSubmit}},[e._v(\" 确认 \")])],1)],1)}),r=[],o=n(\"5530\"),c=(n(\"b64b\"),n(\"d81d\"),n(\"c740\"),n(\"a434\"),n(\"d3b7\"),n(\"3ca3\"),n(\"ddb0\"),n(\"2b3d\"),n(\"cb5c\")),l=n(\"2f62\"),u=n(\"8593\"),d={name:\"EditorSlideUpload\",props:{color:{type:String,default:\"#1890ff\"}},data:function(){return{qiniuHost:c[\"qiniuHost\"],dialogVisible:!1,listObj:{},fileList:[]}},computed:Object(o[\"a\"])(Object(o[\"a\"])({},Object(l[\"c\"])([\"token\"])),{},{fileProgress:function(){return this.$store.state.user.fileProgress}}),methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},httpRequestFn:function(e){var t=this,n=this.$loading({text:\"上传中..\"}),i=new FormData;i.append(\"file\",e.file),Object(u[\"a\"])(i).then((function(i){console.log(i),t.$emit(\"uploadSuc\",i),t.handleSuccess(i.data,e.file),t.checkAllSuccess()&&(n.close(),t.$message({showClose:!0,message:\"图片上传成功！点击确认插入文本编辑器\",type:\"success\"}))})).catch((function(){t.$message({showClose:!0,message:\"文件上传失败！\",type:\"warning\"}),n.close()}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(console.log(t),this.$emit(\"successCBK\",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message(\"请等待图片上传成功。如果出现网络问题，请刷新页面并重新上传！\")},handleSuccess:function(e,t){for(var n=t.uid,i=Object.keys(this.listObj),a=0,s=i.length;a<s;a++)if(this.listObj[i[a]].uid===n)return this.listObj[i[a]].url=e,void(this.listObj[i[a]].hasSuccess=!0)},handleRemove:function(e){var t=this.$refs.uploadImg.uploadFiles,n=t.findIndex((function(t){return t.uid===e.uid}));t.splice(n,1);var i=e.uid;delete this.listObj[i]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new Promise((function(a,s){var r=new Image;r.src=n.createObjectURL(e),r.onload=function(){t.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},a(!0)}))}}},g=d,f=(n(\"8502\"),n(\"2877\")),h=Object(f[\"a\"])(g,s,r,!1,null,null,null),p=h.exports,m=[\"advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount\"],b=m,w=[\"searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample\",\"hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen\"],y=w,v=n(\"b85c\"),_=[];function C(){return window.tinymce}var k=function(e,t){var n=document.getElementById(e),i=t||function(){};if(!n){var a=document.createElement(\"script\");a.src=e,a.id=e,document.body.appendChild(a),_.push(i);var s=\"onload\"in a?r:o;s(a)}function r(t){t.onload=function(){this.onerror=this.onload=null;var e,n=Object(v[\"a\"])(_);try{for(n.s();!(e=n.n()).done;){var i=e.value;i(null,t)}}catch(a){n.e(a)}finally{n.f()}_=null},t.onerror=function(){this.onerror=this.onload=null,i(new Error(e+\"加载失败\"),t)}}function o(e){e.onreadystatechange=function(){if(\"complete\"===this.readyState||\"loaded\"===this.readyState){this.onreadystatechange=null;var t,n=Object(v[\"a\"])(_);try{for(n.s();!(t=n.n()).done;){var i=t.value;i(null,e)}}catch(a){n.e(a)}finally{n.f()}_=null}}}n&&i&&(C()?i(null,n):_.push(i))},S=k,x=\"https://snk-1305456087.cos.ap-guangzhou.myqcloud.com/js/tinymce%404.9.3.min.js\",F={name:\"Tinymce\",components:{editorImage:p},props:{id:{type:String,default:function(){return\"vue-tinymce-\"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:\"\"},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:\"file edit insert view format table\"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:\"auto\"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:\"en\",zh:\"zh_CN\",es:\"es_MX\",ja:\"ja\"}}},computed:{language:function(){return this.languageTypeList[\"zh\"]},containerWidth:function(){var e=this.width;return/^[\\d]+(\\.[\\d]+)?$/.test(e)?\"\".concat(e,\"px\"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||\"\")}))},language:function(){var e=this;this.destroyTinymce(),this.$nextTick((function(){return e.initTinymce()}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;S(x,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({language:this.language,selector:\"#\".concat(this.tinymceId),height:this.height,body_class:\"panel-body \",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:y,menubar:this.menubar,plugins:b,end_container_on_empty_block:!0,powerpaste_word_import:\"clean\",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:\"square\",advlist_number_styles:\"default\",imagetools_cors_hosts:[\"www.tinymce.com\",\"codepen.io\"],default_link_target:\"_blank\",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on(\"NodeChange Change KeyUp SetContent\",(function(){e.hasChange=!0,e.$emit(\"input\",n.getContent())}))},setup:function(e){e.on(\"FullscreenStateChanged\",(function(e){t.fullscreen=e.state}))},convert_urls:!1})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand(\"mceFullScreen\"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){window.tinymce.get(t.tinymceId).insertContent('<img class=\"wscnph\" src=\"'.concat(e.url,'\" >'))}))}}},j=F,O=(n(\"d075\"),Object(f[\"a\"])(j,i,a,!1,null,\"6957a58d\",null));t[\"a\"]=O.exports},8502:function(e,t,n){\"use strict\";n(\"1e35\")},a093:function(e,t,n){},d075:function(e,t,n){\"use strict\";n(\"f9eb\")},db25:function(e,t,n){\"use strict\";n(\"a093\")},f9eb:function(e,t,n){}}]);","extractedComments":[]}