{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-dac94fa6\"],{\"63f0\":function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"content_box\"},[a(\"first-title\",{attrs:{title:\"新增/编辑商品\"}}),a(\"div\",{staticClass:\"edit_view\"},[a(\"el-form\",{ref:\"form\",attrs:{model:t.addEditData,\"label-width\":\"110px\"}},[a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"是否多规格\"}},[a(\"el-select\",{staticStyle:{width:\"300px\"},attrs:{disabled:\"\"!=t.addEditData.id,placeholder:\"请选择是否多规格\"},model:{value:t.addEditData.isExistManySpec,callback:function(e){t.$set(t.addEditData,\"isExistManySpec\",e)},expression:\"addEditData.isExistManySpec\"}},t._l(t.isExistManySpec,(function(t){return a(\"el-option\",{key:t.val,attrs:{label:t.name,value:t.val}})})),1)],1),a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"商品型号\"}},[a(\"el-input\",{staticStyle:{width:\"300px\"},attrs:{placeholder:\"请输入商品型号\"},model:{value:t.addEditData.mode,callback:function(e){t.$set(t.addEditData,\"mode\",e)},expression:\"addEditData.mode\"}})],1),a(\"el-form-item\",{staticClass:\"float_item\",staticStyle:{height:\"auto\"},attrs:{label:\"商品名称\"}},[a(\"el-input\",{staticStyle:{width:\"300px\"},attrs:{rows:\"3\",type:\"textarea\",resize:\"none\"},model:{value:t.addEditData.title,callback:function(e){t.$set(t.addEditData,\"title\",e)},expression:\"addEditData.title\"}})],1),a(\"el-form-item\",{staticClass:\"float_item\",staticStyle:{height:\"auto\"},attrs:{label:\"商品简述\"}},[a(\"el-input\",{staticStyle:{width:\"300px\"},attrs:{rows:\"3\",type:\"textarea\",resize:\"none\"},model:{value:t.addEditData.simpleDesc,callback:function(e){t.$set(t.addEditData,\"simpleDesc\",e)},expression:\"addEditData.simpleDesc\"}})],1),a(\"div\",{staticStyle:{width:\"100%\",height:\"auto\",overflow:\"hidden\",float:\"left\"}},[a(\"el-form-item\",{staticClass:\"float_item\",staticStyle:{height:\"auto\"},attrs:{label:\"商品封面图\"}},[a(\"upload-img\",{attrs:{width:\"80px\",height:\"80px\",img:t.addEditData.coverImage},on:{uploadSuc:t.uploadSucFn}})],1),a(\"el-form-item\",{staticClass:\"float_item\",staticStyle:{height:\"auto\"},attrs:{label:\"商品多图\"}},[a(\"upload-imgs\",{attrs:{imgs:t.addEditData.images},on:{uploadSuc:t.uploadImgsSucFn,deleteImg:t.deleteImgFn}})],1)],1),a(\"div\",{staticStyle:{width:\"100%\",height:\"auto\",overflow:\"hidden\",float:\"left\"}},[a(\"el-form-item\",{staticClass:\"float_item\",staticStyle:{height:\"auto\"},attrs:{label:\"商品背景图\"}},[a(\"upload-img\",{attrs:{width:\"80px\",height:\"80px\",img:t.addEditData.backImage},on:{uploadSuc:t.uploadSucFn2}}),a(\"span\",{staticStyle:{\"font-size\":\"12px\",color:\"#999\"}},[t._v(\"注：鼠标移入显示的图片\")])],1),a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"商品类型\"}},[a(\"el-select\",{staticStyle:{width:\"300px\"},attrs:{placeholder:\"请选择商品类型\"},on:{change:t.productTypeChange},model:{value:t.addEditData.type,callback:function(e){t.$set(t.addEditData,\"type\",e)},expression:\"addEditData.type\"}},t._l(t.types,(function(t){return a(\"el-option\",{key:t.val,attrs:{label:t.name,value:t.val}})})),1)],1)],1),a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"商品分类\"}},[a(\"el-cascader\",{class:{el_cascader:\"\"!=t.addEditData.categoryId},staticStyle:{width:\"300px\"},attrs:{placeholder:t.addEditData.categoryId?t.addEditData.categoryName:\"请选择商品分类\",\"expand-trigger\":\"hover\",props:t.categoryList,\"show-all-levels\":!1,clearable:\"\",disabled:!t.addEditData.type},model:{value:t.addEditData.categoryId,callback:function(e){t.$set(t.addEditData,\"categoryId\",e)},expression:\"addEditData.categoryId\"}})],1),a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"上/下架\"}},[a(\"el-select\",{staticStyle:{width:\"300px\"},attrs:{placeholder:\"请选择上/下架\"},model:{value:t.addEditData.isShelves,callback:function(e){t.$set(t.addEditData,\"isShelves\",e)},expression:\"addEditData.isShelves\"}},t._l(t.isShelves,(function(t){return a(\"el-option\",{key:t.val,attrs:{label:t.name,value:t.val}})})),1)],1),0==t.addEditData.isExistManySpec?a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"参考价(销售价)\"}},[a(\"el-input\",{staticStyle:{width:\"300px\"},attrs:{min:\"0\",type:\"number\"},model:{value:t.addEditData.price,callback:function(e){t.$set(t.addEditData,\"price\",e)},expression:\"addEditData.price\"}})],1):t._e(),a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"运费\"}},[a(\"el-select\",{staticStyle:{width:\"300px\"},attrs:{clearable:\"\",placeholder:\"请选择运费模板\"},model:{value:t.addEditData.expId,callback:function(e){t.$set(t.addEditData,\"expId\",e)},expression:\"addEditData.expId\"}},t._l(t.expList,(function(t){return a(\"el-option\",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"供应商\"}},[a(\"el-select\",{staticStyle:{width:\"300px\"},attrs:{filterable:\"\",clearable:\"\",placeholder:\"请选择供应商\"},model:{value:t.addEditData.supplierId,callback:function(e){t.$set(t.addEditData,\"supplierId\",e)},expression:\"addEditData.supplierId\"}},t._l(t.supplierList,(function(t){return a(\"el-option\",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),0==t.addEditData.isExistManySpec?a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"库存\"}},[a(\"el-input\",{staticStyle:{width:\"300px\"},attrs:{min:\"0\",type:\"number\",placeholder:\"请输入库存\"},model:{value:t.addEditData.lastInventory,callback:function(e){t.$set(t.addEditData,\"lastInventory\",e)},expression:\"addEditData.lastInventory\"}})],1):t._e(),0==t.addEditData.isExistManySpec?a(\"el-form-item\",{staticClass:\"float_item\",attrs:{label:\"原价\"}},[a(\"el-input\",{staticStyle:{width:\"300px\"},attrs:{min:\"0\",type:\"number\",placeholder:\"请输入原价\"},model:{value:t.addEditData.originalPrice,callback:function(e){t.$set(t.addEditData,\"originalPrice\",e)},expression:\"addEditData.originalPrice\"}})],1):t._e(),2===t.addEditData.type?[a(\"el-form-item\",{staticClass:\"float_item\",staticStyle:{height:\"auto\"},attrs:{label:\"拼团库存\"}},[a(\"el-input-number\",{staticStyle:{width:\"300px\"},model:{value:t.addEditData.groupNum,callback:function(e){t.$set(t.addEditData,\"groupNum\",e)},expression:\"addEditData.groupNum\"}})],1),a(\"el-form-item\",{staticClass:\"float_item\",staticStyle:{height:\"auto\"},attrs:{label:\"活动截止时间\"}},[a(\"el-date-picker\",{staticClass:\"mg_r15 mg_t10\",attrs:{type:\"datetimerange\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:t.addEditData.activityTime,callback:function(e){t.$set(t.addEditData,\"activityTime\",e)},expression:\"addEditData.activityTime\"}})],1)]:t._e(),1==t.addEditData.isExistManySpec?a(\"el-form-item\",{staticStyle:{clear:\"both\"},attrs:{label:\"商品规格属性\"}},[a(\"el-table\",{staticClass:\"list_table\",staticStyle:{width:\"100%\"},attrs:{data:t.addEditData.list,border:\"\"}},[a(\"el-table-column\",{attrs:{label:\"规格名称(例如:颜色)\",width:\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-input\",{staticClass:\"spec_name\",attrs:{placeholder:\"填写规格名称\"},on:{input:function(a){return t.nameChange(e.$index)}},model:{value:e.row.name,callback:function(a){t.$set(e.row,\"name\",a)},expression:\"scope.row.name\"}})]}}],null,!1,2254495177)}),a(\"el-table-column\",{attrs:{label:\"规格值(例如:白色,红色)\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return t._l(e.row.value,(function(i,s){return a(\"div\",{key:s,staticClass:\"value_item\"},[a(\"div\",{staticClass:\"item\"},[a(\"el-input\",{attrs:{placeholder:\"规格值\"},on:{input:function(a){return t.valueChange(e.$index,s)}},model:{value:e.row.value[s],callback:function(a){t.$set(e.row.value,s,a)},expression:\"scope.row.value[index]\"}}),!t.addEditData.id||t.editAddValItem.indexOf(e.$index+\",\"+s)>-1?a(\"el-button\",{attrs:{type:\"danger\",size:\"small\",icon:\"el-icon-delete\"},on:{click:function(a){return t.delListValuItemFn(e.$index,s)}}}):t._e()],1)])}))}}],null,!1,91030051)}),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\",align:\"center\",\"header-align\":\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:function(a){return t.addListValFn(e.$index)}}},[t._v(\"添加规格值\")]),t.addEditData.id?t._e():a(\"el-button\",{attrs:{size:\"small\",type:\"danger\"},on:{click:function(a){return t.delListFn(e.$index)}}},[t._v(\"删除\")])]}}],null,!1,3340257791)})],1),t.addEditData.id?t._e():a(\"el-button\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",icon:\"el-icon-plus\",type:\"primary\"},on:{click:t.addListItemFn}},[t._v(\"添加规格属性\")])],1):t._e(),1==t.addEditData.isExistManySpec?a(\"el-form-item\",{attrs:{label:\"商品规格\"}},[a(\"el-table\",{staticClass:\"list_table\",staticStyle:{width:\"100%\"},attrs:{data:t.addEditData.specList,border:\"\"}},[a(\"el-table-column\",{attrs:{label:\"规格组合\",width:\"440\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[t._l(e.row.skuIndex,(function(i,s){return[t.addEditData.list[s]?a(\"el-select\",{key:s,staticStyle:{width:\"120px\"},attrs:{placeholder:\"请选择\"+t.addEditData.list[s].name},model:{value:e.row.skuIndex[s],callback:function(a){t.$set(e.row.skuIndex,s,a)},expression:\"scope.row.skuIndex[index]\"}},t._l(t.addEditData.list[s].value,(function(t,e){return a(\"el-option\",{key:e,attrs:{label:t,value:e+\"\"}})})),1):t._e()]}))]}}],null,!1,2118982369)}),a(\"el-table-column\",{attrs:{label:\"规格图片\",width:\"100px\",align:\"center\",\"header-align\":\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"upload-img\",{attrs:{width:\"80px\",height:\"80px\",img:e.row.specImage},on:{uploadSuc:function(a){return t.upLoadSpceImgFn(a,e.$index)}}})]}}],null,!1,1087057536)}),a(\"el-table-column\",{attrs:{label:\"规格编码\",align:\"center\",\"header-align\":\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-input\",{attrs:{min:\"0\",type:\"text\"},model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,\"skuCode\",a)},expression:\"scope.row.skuCode\"}})]}}],null,!1,1962425162)}),1==t.addEditData.isExistManySpec?a(\"el-table-column\",{attrs:{label:\"参考价(销售价)\",align:\"center\",\"header-align\":\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-input\",{attrs:{min:\"0\",type:\"number\"},model:{value:e.row.price,callback:function(a){t.$set(e.row,\"price\",a)},expression:\"scope.row.price\"}})]}}],null,!1,3187305017)}):t._e(),a(\"el-table-column\",{attrs:{label:\"原价\",align:\"center\",\"header-align\":\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-input\",{attrs:{min:\"0\",type:\"number\"},model:{value:e.row.originalPrice,callback:function(a){t.$set(e.row,\"originalPrice\",a)},expression:\"scope.row.originalPrice\"}})]}}],null,!1,3215584e3)}),a(\"el-table-column\",{attrs:{label:\"库存\",align:\"center\",\"header-align\":\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-input\",{attrs:{min:\"0\",type:\"number\"},model:{value:e.row.inventory,callback:function(a){t.$set(e.row,\"inventory\",a)},expression:\"scope.row.inventory\"}})]}}],null,!1,3540574110)}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",\"header-align\":\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-button\",{attrs:{size:\"small\",type:\"danger\"},on:{click:function(a){return t.delSpecFn(e.$index)}}},[t._v(\"删除\")])]}}],null,!1,552930479)})],1),a(\"el-button\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",type:\"primary\",icon:\"el-icon-plus\"},on:{click:t.addSpecItemFn}},[t._v(\"添加商品规格\")]),t.addEditData.id?t._e():a(\"el-button\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",type:\"success\",icon:\"el-icon-plus\"},on:{click:t.showBatchDataFn}},[t._v(\"批量生成所有规格\")])],1):t._e(),a(\"el-form-item\",{staticStyle:{clear:\"both\"},attrs:{label:\"商品详情\"}},[a(\"tinymce\",{key:t.addEditData.id,ref:\"ppp\",attrs:{id:\"agreement_\"+t.addEditData.id,height:600},model:{value:t.addEditData.content,callback:function(e){t.$set(t.addEditData,\"content\",e)},expression:\"addEditData.content\"}})],1),a(\"el-form-item\",{attrs:{label:\"\"}},[t.productId?a(\"el-link\",{staticStyle:{\"margin-right\":\"10px\"},attrs:{href:\"#/product/product-list?pageNo=\"+t.pageNo+\"&pageSize=\"+t.pageSize}},[a(\"el-button\",{attrs:{type:\"primary\",plain:\"\",icon:\"el-icon-d-arrow-left\"}},[t._v(\"返回\")])],1):t._e(),a(\"el-button\",{attrs:{type:\"primary\",disabled:t.submitIng},on:{click:t.submitFn}},[t._v(t._s(t.submitIng?\"提交中...\":\"确认提交\"))]),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.submitIng,expression:\"submitIng\"}],staticStyle:{\"margin-left\":\"15px\",color:\"#f56c6c\"}},[t._v(\"提交中,请勿重复点击!\")])],1)],2)],1),a(\"el-dialog\",{attrs:{title:\"设置批量生成参数\",visible:t.dialogVisible,width:\"600px\"},on:{\"update:visible\":function(e){t.dialogVisible=e}}},[a(\"div\",[a(\"el-form\",{ref:\"form\",attrs:{model:t.batchData,\"label-width\":\"140px\"}},[a(\"el-form-item\",{attrs:{label:\"批量规格图片\"}},[a(\"upload-img\",{attrs:{width:\"80px\",height:\"80px\",img:t.batchData.specImage},on:{uploadSuc:t.batchImgSucFn}})],1),a(\"el-form-item\",{attrs:{label:\"批量参考价\"}},[a(\"el-input\",{attrs:{min:\"0\",type:\"number\"},model:{value:t.batchData.price,callback:function(e){t.$set(t.batchData,\"price\",e)},expression:\"batchData.price\"}})],1),a(\"el-form-item\",{attrs:{label:\"批量规格库存\"}},[a(\"el-input\",{attrs:{min:\"0\",type:\"number\"},model:{value:t.batchData.inventory,callback:function(e){t.$set(t.batchData,\"inventory\",e)},expression:\"batchData.inventory\"}})],1)],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.batchCreatFn}},[t._v(\"确 定\")])],1)])],1)},s=[],l=a(\"2909\"),n=a(\"1da1\"),d=(a(\"96cf\"),a(\"d81d\"),a(\"b0c0\"),a(\"a434\"),a(\"99af\"),a(\"ac1f\"),a(\"5319\"),a(\"159b\"),a(\"1276\"),a(\"a15b\"),a(\"a9e3\"),a(\"fb6a\"),a(\"cb29\"),a(\"1d6e\")),c=a(\"923e\"),o=a(\"8256\"),r=a(\"c4c8\"),u=a(\"8593\"),p={name:\"ProductList\",components:{Tinymce:o[\"a\"],uploadImg:d[\"a\"],uploadImgs:c[\"a\"]},data:function(){return{pageNo:0,pageSize:0,submitIng:!1,productId:\"\",dialogVisible:!1,editAddValItem:[],types:[{name:\"优选商品\",val:1},{name:\"拼团产品\",val:2},{name:\"配件\",val:3},{name:\"机件\",val:4}],isShelves:[{name:\"上架\",val:1},{name:\"下架\",val:0}],isExistManySpec:[{name:\"是\",val:1},{name:\"否\",val:0}],addEditData:{expId:\"\",categoryId:\"\",content:\"\",coverImage:\"\",backImage:\"\",id:\"\",images:[],inventory:\"\",isExistManySpec:\"\",isShelves:\"\",mode:\"\",price:0,simpleDesc:\"\",list:[],specList:[],title:\"\",type:\"\",supplierId:\"\",groupNum:1,activityTime:[],activityStartTime:\"\",activityEndTime:\"\",lastInventory:\"\",originalPrice:\"\"},supplierList:[],editLevelData:[],expList:[],batchData:{specImage:\"\",price:0,originalPrice:0,inventory:0},results:[],result:[],levelList:[],categoryList:{lazy:!0,checkStrictly:!0,lazyLoad:function(t,e){Object(r[\"l\"])({pid:t.value||0}).then((function(t){var a=t.data,i=a.map((function(t){return{value:t.id,label:t.name}}));e(i)}))}},categoryPartsList:[]}},mounted:function(){this.productId=this.$route.query.id,this.pageNo=this.$route.query.pageNo,this.pageSize=this.$route.query.pageSize,this.getInit()},created:function(){this.queryProductFittingCategoryFn()},activated:function(){this.addProductFn(),this.productId=this.$route.query.id,this.pageNo=this.$route.query.pageNo,this.pageSize=this.$route.query.pageSize,this.getInit()},watch:{productId:function(t){void 0===t&&this.$refs.ppp.setContent(\"\")}},methods:{getInit:function(){var t=this;return Object(n[\"a\"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u[\"s\"])({pageNo:1,pageSize:20,name:\"\"}).then((function(e){var a,i=t.resDataFn(e);(a=t.expList).splice.apply(a,[0,t.expList.length].concat(Object(l[\"a\"])(i.records)))}));case 2:t.getProductDetailFn(),t.getQuerySupplierList();case 4:case\"end\":return e.stop()}}),e)})))()},getQuerySupplierList:function(){var t=this;return Object(n[\"a\"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r[\"o\"])({pageNo:1,pageSize:1e3});case 2:a=e.sent,\"000\"===a.code&&(t.supplierList=a.data.records);case 4:case\"end\":return e.stop()}}),e)})))()},productTypeChange:function(t){this.addEditData.categoryId=\"\"},queryProductFittingCategoryFn:function(){var t=this;return Object(n[\"a\"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r[\"m\"])();case 2:a=e.sent,\"000\"===a.code&&(t.categoryPartsList=a.data);case 4:case\"end\":return e.stop()}}),e)})))()},cascaderChangeFn:function(t){},nameChange:function(t){this.addEditData.list[t].name=this.addEditData.list[t].name.replace(/\\s+/g,\"\")},valueChange:function(t,e){this.addEditData.list[t].value[e]=this.addEditData.list[t].value[e].replace(/\\s+/g,\"\")},levelValueChange:function(t,e){this.editLevelData[t][e]=this.editLevelData[t][e].replace(/\\s+/g,\"\")},batchCreatFn:function(){var t=this,e=[];this.result=[],this.results=[],this.addEditData.specList.splice(0,this.addEditData.specList.length),this.addEditData.list.forEach((function(t){var a=[];t.value.forEach((function(t,e){a.push(e+\"\")})),e.push(a)})),this.doExchange(e,0),this.results.forEach((function(e){t.addEditData.specList.push({specImage:t.batchData.specImage,inventory:t.batchData.inventory,skuName:\"\",skuCode:\"\",price:t.batchData.price,originalPrice:t.batchData.originalPrice,skuIndex:e.split(\",\")})})),this.dialogVisible=!1},doExchange:function(t,e){for(var a=0;a<t[e].length;a++)this.result[e]=t[e][a],e!=t.length-1?this.doExchange(t,e+1):this.results.push(this.result.join(\",\"))},showBatchDataFn:function(){0!=this.addEditData.list.length?this.dialogVisible=!0:this.$message({showClose:!0,message:\"请添加规格属性！\",type:\"warning\"})},batchImgSucFn:function(t){this.batchData.specImage=t},addProductFn:function(){this.addEditData={expId:\"\",categoryId:\"\",content:\"\",coverImage:\"\",backImage:\"\",id:\"\",images:[],inventory:\"\",isExistManySpec:\"\",isShelves:\"\",mode:\"\",originalPrice:\"\",price:\"\",lastInventory:\"\",simpleDesc:\"\",list:[],specList:[],title:\"\",supplierId:\"\",groupNum:1,activityTime:[],activityStartTime:\"\",activityEndTime:\"\"}},submitFn:function(){var t=this,e=JSON.parse(JSON.stringify(this.addEditData));e.originalPrice=Number(e.originalPrice),e.lastInventory=Number(e.lastInventory),console.log(e,\"000\");var a=!0,i=!0;if(1==this.addEditData.isExistManySpec){0==this.addEditData.list.length&&(a=!1,this.$message({showClose:!0,message:\"请添加规格属性！\",type:\"warning\"})),0==this.addEditData.specList.length&&(i=!1,this.$message({showClose:!0,message:\"请添加商品规格！\",type:\"warning\"}));for(var s=0,l=this.addEditData.list.length;s<l;s++){if(0==this.addEditData.list[s].value.length){a=!1,this.$message({showClose:!0,message:\"请添加“\".concat(this.addEditData.list[s].name,\"”规格属性值或者删除该规格属性！\"),type:\"warning\"});break}this.addEditData.list[s].value.forEach((function(e,i){console.log(i),\"\"==e&&(a=!1,t.$message({showClose:!0,message:\"“\".concat(t.addEditData.list[s].name,\"”规格属性第\").concat(i+1,\"个值为空，请删除或输入值！\"),type:\"warning\"}))}))}for(var n=0,d=this.addEditData.specList.length;n<d;n++)if(this.addEditData.specList[n].skuIndex.indexOf(\"\")>-1){i=!1,this.$message({showClose:!0,message:\"第\".concat(n-0+1,\"个商品规格有规格属性未选择，请选择后再提交！\"),type:\"warning\"});break}e.specList.forEach((function(t){var a=\"\";t.skuIndex.forEach((function(t,i){a+=e.list[i].value[Number(t)]+\",\"})),t.skuName=a,t.skuName=t.skuName.replace(/\\,$/,\"\"),t.skuIndex=t.skuIndex.join(\",\")})),e.list.forEach((function(t){t.value=t.value.join(\",\")})),e.inventory=void 0}a&&i&&(1===this.addEditData.isExistManySpec?(e.specInfoList=e.list.slice(),e.skuInfoList=e.specList.slice()):(e.specInfoList=[],e.skuInfoList=[]),delete e.list,delete e.specList,delete e.categoryName,delete e.createTime,e.categoryId&&0!==e.categoryId.length?this.addEditData.supplierId?(e.categoryId=e.categoryId.pop(),e.images=e.images.join(\",\"),e.id=this.productId?this.productId:void 0,e.activityStartTime=e.activityTime[0],e.activityEndTime=e.activityTime[1],console.log(e),this.submitIng=!0,Object(r[\"f\"])(e).then((function(e){setTimeout((function(){t.submitIng=!1}),1e3),\"000\"==e.code&&(t.$message({showClose:!0,message:\"操作成功！\",type:\"success\"}),t.editAddValItem.splice(0,t.editAddValItem.length),t.productId?t.getProductDetailFn():t.$router.go(-1))})).catch((function(){setTimeout((function(){t.submitIng=!1}),1e3)}))):this.$message({showClose:!0,message:\"请选择供应商！\",type:\"warning\"}):this.$message({showClose:!0,message:\"请选择商品分类！\",type:\"warning\"}))},upLoadSpceImgFn:function(t,e){this.addEditData.specList[e].specImage=t},addSpecItemFn:function(){var t=1;0!=this.addEditData.list.length?(this.addEditData.list.forEach((function(e){t*=e.value.length})),this.addEditData.specList.length>=t?this.$message({showClose:!0,message:\"您添加的商品规格已达到最大数量！\",type:\"warning\"}):this.addEditData.specList.push({specImage:\"\",skuName:\"\",inventory:0,skuCode:\"\",price:0,originalPrice:0,skuIndex:Array(this.addEditData.list.length).fill(\"\")})):this.$message({showClose:!0,message:\"请先添加规格属性和规格属性值！\",type:\"warning\"})},addListItemFn:function(){this.addEditData.list.push({name:\"\",value:[]}),this.addEditData.specList.forEach((function(t){t.skuIndex.push(\"\")}))},delListValuItemFn:function(t,e){for(var a=this.addEditData.specList.length;a--;)\"\"!=this.addEditData.specList[a].skuIndex[t]&&(this.addEditData.specList[a].skuIndex[t]==e&&this.addEditData.specList.splice(a,1),this.addEditData.specList[a]&&this.addEditData.specList[a].skuIndex[t]>e&&(this.addEditData.specList[a].skuIndex[t]-=1,this.addEditData.specList[a].skuIndex[t]+=\"\"));this.addEditData.list[t].value.splice(e,1);this.editAddValItem.indexOf(t+\",\"+e)},addListValFn:function(t){var e=this.editAddValItem.indexOf(t+\",\"+this.addEditData.list[t].value.length);-1==e&&this.editAddValItem.push(t+\",\"+this.addEditData.list[t].value.length),this.addEditData.list[t].value.push(\"\")},delListFn:function(t){for(var e=this.addEditData.specList.length;e--;)this.addEditData.specList[e].skuIndex.splice(t,1),this.addEditData.specList[e].skuIndex[t]&&this.addEditData.specList.splice(e,1);this.addEditData.list.splice(t,1)},delSpecFn:function(t){this.addEditData.specList.splice(t,1)},uploadSucFn:function(t){this.addEditData.coverImage=t},uploadSucFn2:function(t){this.addEditData.backImage=t},uploadImgsSucFn:function(t){this.addEditData.images.push(t)},deleteImgFn:function(t){this.addEditData.images.splice(t,1)},getProductDetailFn:function(){var t=this;this.productId&&(this.addEditData.images.splice(0,this.addEditData.images.length),this.addEditData.list.splice(0,this.addEditData.list.length),this.addEditData.specList.splice(0,this.addEditData.specList.length),Object(r[\"h\"])({id:this.productId}).then((function(e){var a=t.resDataFn(e);a.specInfoList||(a.specInfoList=[]),a.skuInfoList||(a.skuInfoList=[]),1==a.isExistManySpec&&a.specInfoList.length>0&&a.specInfoList.forEach((function(t){t.value=t.value.split(\",\")})),1==a.isExistManySpec&&a.skuInfoList.length>0&&a.skuInfoList.forEach((function(t){t.skuIndex?t.skuIndex=t.skuIndex.split(\",\"):(t.skuIndex=[],t.skuName&&t.skuName.split(\",\").forEach((function(e,i){var s=a.specInfoList[i].value.indexOf(e);s>-1&&t.skuIndex.push(String(s))})))})),t.addEditData.activityTime=a.activityStartTime&&a.activityEndTime?[a.activityStartTime,a.activityEndTime]:[],t.addEditData=Object.assign({},t.addEditData,a,{categoryId:a.categoryIds,images:a.images.split(\",\"),list:a.specInfoList&&a.specInfoList.length>0?a.specInfoList:[],specList:a.skuInfoList&&a.skuInfoList.length>0?a.skuInfoList:[]}),t.editLevelData=a.rewardInfoList,t.levelList.map((function(e,a){t.editLevelData[a].levelId===e.id&&(t.editLevelData[a].name=e.name)}))})))}}},m=p,h=(a(\"6a9d\"),a(\"2877\")),g=Object(h[\"a\"])(m,i,s,!1,null,null,null);e[\"default\"]=g.exports},\"6a9d\":function(t,e,a){\"use strict\";a(\"fc00\")},\"81d5\":function(t,e,a){\"use strict\";var i=a(\"7b0b\"),s=a(\"23cb\"),l=a(\"07fa\");t.exports=function(t){var e=i(this),a=l(e),n=arguments.length,d=s(n>1?arguments[1]:void 0,a),c=n>2?arguments[2]:void 0,o=void 0===c?a:s(c,a);while(o>d)e[d++]=t;return e}},cb29:function(t,e,a){var i=a(\"23e7\"),s=a(\"81d5\"),l=a(\"44d2\");i({target:\"Array\",proto:!0},{fill:s}),l(\"fill\")},fc00:function(t,e,a){}}]);","extractedComments":[]}