{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\upkeepDetailModule.vue?vue&type=style&index=0&id=373cc773&lang=less&scoped=true&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\upkeepDetailModule.vue","mtime":1694511651888},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnVwa2VlcERldGFpbE1vZHVsZUJveCB7DQogIHBhZGRpbmc6IDIwcHg7DQogIC8vIOmhtumDqOW3peWFt+agjw0KICAudG9wVG9vbCB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgIC50b29sSW5wdXQgew0KICAgICAgd2lkdGg6IDE3MHB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgIH0NCiAgICAudG9vbFNlbGVjdCB7DQogICAgICB3aWR0aDogMTMwcHg7DQogICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogICAgfQ0KICAgIC50b29sQnRuIHsNCiAgICAgIGNvbG9yOiAjMmU0YzllOw0KICAgIH0NCiAgfQ0KDQogIC8vIOihqOagvOWGheWuuemDqOWIhg0KICAudGFibGVDb250ZW50IHsNCiAgICAudGFibGVDb250ZW50X3RpdGxlIHsNCiAgICAgIGNvbG9yOiAjMGIyMDU5Ow0KICAgICAgZm9udC13ZWlnaHQ6IDcwMDsNCiAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgIHBhZGRpbmctbGVmdDogMzBweDsNCiAgICB9DQogICAgLnRhYmxlQ29udGVudF90YWJsZSB7DQogICAgICBtYXJnaW46IDMwcHggMDsNCiAgICB9DQogICAgLnRhYmxlQ29udGVudF9mb290ZXIgew0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIGhlaWdodDogNTBweDsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICB9DQogIH0NCg0KICAvLyDor6bmg4UNCiAgLm9yZGVyRGV0YWlscyB7DQogICAgY29sb3I6ICM3MDcwNzA7DQogICAgLmNvbnRlbnQgew0KICAgICAgcGFkZGluZzogMjBweCAyMHB4Ow0KICAgICAgLmxpbmUgew0KICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICAuaXRlbSB7DQogICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgcGFkZGluZy1yaWdodDogMjBweDsNCiAgICAgICAgICAudGl0bGUgew0KICAgICAgICAgICAgd2lkdGg6IDE1MHB4Ow0KICAgICAgICAgICAgY29sb3I6ICM3MDcwNzA7DQogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4Ow0KICAgICAgICAgIH0NCiAgICAgICAgICAuZGVzYyB7DQogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIC8vIOaMiemSruagt+W8jw0KICAuY2xvc2VCdG4gew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgY29sb3I6ICMwYjIwNTk7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzBiMjA1OTsNCiAgICB3aWR0aDogMTEwcHg7DQogICAgaGVpZ2h0OiA0MHB4Ow0KICB9DQp9DQo="},{"version":3,"sources":["upkeepDetailModule.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upkeepDetailModule.vue","sourceRoot":"src/views/maintenance","sourcesContent":["<template>\r\n  <!-- 保养明细模块 -->\r\n  <div class=\"upkeepDetailModuleBox\">\r\n    <div class=\"text\">\r\n      <el-input v-model=\"textVal\"></el-input>\r\n      <button @click=\"textVal++\">++</button>\r\n    </div>\r\n\r\n    <!-- 顶部工具栏 -->\r\n    <div class=\"topTool\">\r\n      <el-input\r\n        v-model=\"queryUpkeepListParameter.no\"\r\n        placeholder=\"输入设备编号\"\r\n        class=\"toolInput\"\r\n      >\r\n      </el-input>\r\n      <el-date-picker\r\n        v-model=\"date\"\r\n        type=\"daterange\"\r\n        range-separator=\"至\"\r\n        start-placeholder=\"开始日期\"\r\n        end-placeholder=\"结束日期\"\r\n        style=\"margin-right: 10px;\"\r\n        value-format=\"yyyy-MM-dd\"\r\n        @change=\"changeData\"\r\n      >\r\n      </el-date-picker>\r\n\r\n      <el-button class=\"toolBtn\" @click=\"queryUpkeepListFn(1)\">查询</el-button>\r\n      <el-button class=\"toolBtn\" @click=\"resetUpkeepListFn\">重置</el-button>\r\n      <el-button class=\"toolBtn\" @click=\"exportBtn\" style=\"margin-right: 10px;\"\r\n        >导入模板</el-button\r\n      >\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        action\r\n        multiple\r\n        :http-request=\"importUpkeepListFn\"\r\n        :show-file-list=\"false\"\r\n      >\r\n        <el-button class=\"toolBtn\">导入</el-button>\r\n      </el-upload>\r\n    </div>\r\n\r\n    <!-- 表格内容部分 -->\r\n    <div class=\"tableContent\" v-if=\"upkeepList\">\r\n      <el-card>\r\n        <div class=\"tableContent_table\">\r\n          <el-table\r\n            :cell-style=\"{ 'text-align': 'center' }\"\r\n            :data=\"upkeepList\"\r\n            style=\"width: 100%\"\r\n            :header-cell-style=\"{\r\n              background: '#f6f8fc',\r\n              color: '#707070',\r\n              'text-align': 'center',\r\n            }\"\r\n          >\r\n            <el-table-column width=\"150\" label=\"设备编号\" prop=\"no\">\r\n            </el-table-column>\r\n            <el-table-column label=\"保养日期\">\r\n              <template slot-scope=\"{ row }\">\r\n                {{ row.keepTime && row.keepTime.substr(0, 10) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              width=\"150\"\r\n              prop=\"type\"\r\n              label=\"保养类型\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"person\" label=\"保养人\"></el-table-column>\r\n            <el-table-column label=\"保养内容\" prop=\"content\"> </el-table-column>\r\n            <el-table-column prop=\"fault\" label=\"排除故障\"></el-table-column>\r\n            <el-table-column\r\n              prop=\"totalCostFee\"\r\n              label=\"总成本\"\r\n            ></el-table-column>\r\n            <el-table-column label=\"操作\">\r\n              <template slot-scope=\"{ row }\">\r\n                <a\r\n                  style=\"color: #0b2059;margin-right: 10px;\"\r\n                  @click.prevent=\"openUpkeepDetailsDialogFn(row)\"\r\n                  >详情</a\r\n                >\r\n                <a\r\n                  style=\"color: #0b2059;\"\r\n                  @click.prevent=\"delUpkeepDetails(row.id)\"\r\n                  >删除</a\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <div class=\"tableContent_footer\">\r\n          <div class=\"footer_pagination\">\r\n            <el-pagination\r\n              @current-change=\"currentChangeFn\"\r\n              :page-size=\"queryUpkeepListParameter.pageSize\"\r\n              layout=\"jumper, prev, pager, next,total \"\r\n              :total=\"total\"\r\n              :current-page=\"queryUpkeepListParameter.pageNo\"\r\n            >\r\n            </el-pagination>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!-- 详情 -->\r\n    <el-dialog\r\n      :visible=\"upkeepDetailsDialog\"\r\n      width=\"50%\"\r\n      :before-close=\"closeUpkeepDetailsDialogFn\"\r\n      :showClose=\"false\"\r\n    >\r\n      <div v-if=\"upkeepDetails\">\r\n        <div class=\"orderDetails\">\r\n          <h2 style=\"text-align:center;\">\r\n            保养详情\r\n          </h2>\r\n          <div class=\"content\">\r\n            <div class=\"line\">\r\n              <div class=\"item\">\r\n                <span class=\"title\">设备编号</span>\r\n                <span class=\"desc\">{{ upkeepDetails.no }}</span>\r\n              </div>\r\n              <div class=\"item\">\r\n                <span class=\"title\">保养日期</span>\r\n                <span class=\"desc\">{{\r\n                  upkeepDetails.keepTime && upkeepDetails.keepTime.substr(0, 10)\r\n                }}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"line\">\r\n              <div class=\"item\">\r\n                <span class=\"title\">保养类型</span>\r\n                <span class=\"desc\">{{ upkeepDetails.type }}</span>\r\n              </div>\r\n              <div class=\"item\">\r\n                <span class=\"title\">保养人</span>\r\n                <span class=\"desc\">{{ upkeepDetails.person }}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"line\">\r\n              <div class=\"item\">\r\n                <span class=\"title\">保养内容</span>\r\n                <span class=\"desc\">{{ upkeepDetails.content }}</span>\r\n              </div>\r\n              <div class=\"item\">\r\n                <span class=\"title\">排除故障</span>\r\n                <span class=\"desc\">{{ upkeepDetails.fault }}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"line\">\r\n              <div class=\"item\">\r\n                <span class=\"title\">配件名称</span>\r\n                <span class=\"desc\">{{ upkeepDetails.partsNames }}</span>\r\n              </div>\r\n              <div class=\"item\">\r\n                <span class=\"title\">配件费用</span>\r\n                <span class=\"desc\">{{ upkeepDetails.totalPartsFee }}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"line\">\r\n              <div class=\"item\">\r\n                <span class=\"title\">人工费用</span>\r\n                <span class=\"desc\">{{ upkeepDetails.totalArtificialFee }}</span>\r\n              </div>\r\n              <div class=\"item\">\r\n                <span class=\"title\">总成本</span>\r\n                <span class=\"desc\">{{ upkeepDetails.totalCostFee }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style=\"display: flex;justify-content: flex-end;\">\r\n          <el-button @click=\"closeUpkeepDetailsDialogFn\" class=\"closeBtn\"\r\n            >关闭</el-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  queryDeviceKeepOrder,\r\n  deleteDeviceKeepOrder,\r\n  uploadDeviceKeepOrder,\r\n} from \"../../api/upkeep.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      textVal: 0,\r\n\r\n      queryUpkeepListParameter: {\r\n        no: null,\r\n        pageSize: 10,\r\n        pageNo: 1,\r\n        startTime: null,\r\n        endTime: null,\r\n      },\r\n      date: null,\r\n      upkeepList: [\r\n        {\r\n          transCode: 200,\r\n        },\r\n      ],\r\n      total: null,\r\n      upkeepDetails: [],\r\n\r\n      upkeepDetailsDialog: false,\r\n    };\r\n  },\r\n  watch: {\r\n    textVal(val) {\r\n      console.log(val);\r\n    },\r\n  },\r\n  methods: {\r\n    // 改变时间格式\r\n    changeData() {\r\n      this.queryUpkeepListParameter.startTime = this.date[0] + \" 00:00:00\";\r\n      this.queryUpkeepListParameter.endTime = this.date[1] + \" 23:59:59\";\r\n    },\r\n\r\n    // 查询\r\n    async queryUpkeepListFn(id) {\r\n      console.log(218, \"查询了\");\r\n      if (id === 1) {\r\n        this.queryUpkeepListParameter.pageNo = 1;\r\n      }\r\n      const res = await queryDeviceKeepOrder(this.queryUpkeepListParameter);\r\n      const { records, total } = res.data;\r\n      this.upkeepList = records;\r\n      this.total = total;\r\n    },\r\n\r\n    // 重置\r\n    resetUpkeepListFn() {\r\n      this.queryUpkeepListParameter = {\r\n        no: null,\r\n        pageSize: 10,\r\n        pageNo: 1,\r\n        startTime: null,\r\n        endTime: null,\r\n      };\r\n      this.queryUpkeepListFn();\r\n    },\r\n\r\n    // 模板导出\r\n    exportBtn() {\r\n      window.location.replace(\r\n        \"https://snk-1305456087.cos.ap-guangzhou.myqcloud.com/user/20230225/IE75181320.xlsx\"\r\n      );\r\n    },\r\n\r\n    // 导入\r\n    async importUpkeepListFn(data) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", data.file);\r\n      const res = await uploadDeviceKeepOrder(formData);\r\n      if (res.message === \"操作成功\") {\r\n        this.$message({\r\n          message: \"保养记录导入成功\",\r\n          type: \"success\",\r\n        });\r\n        this.resetUpkeepListFn();\r\n      }\r\n    },\r\n\r\n    // 点击页码触发\r\n    currentChangeFn(page) {\r\n      this.queryUpkeepListParameter.pageNo = page;\r\n      this.queryUpkeepListFn();\r\n    },\r\n\r\n    // 关闭保养详情\r\n    closeUpkeepDetailsDialogFn() {\r\n      this.upkeepDetailsDialog = false;\r\n    },\r\n\r\n    // 打开保养详情\r\n    openUpkeepDetailsDialogFn(row) {\r\n      this.upkeepDetails = row;\r\n      this.upkeepDetailsDialog = true;\r\n    },\r\n\r\n    // 删除保养详情\r\n    async delUpkeepDetails(id) {\r\n      const confirm = await this.$confirm(\"您确定删除该保养记录?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      });\r\n      if (confirm == \"confirm\") {\r\n        const res = await deleteDeviceKeepOrder(id);\r\n        if (res.message === \"操作成功\") {\r\n          this.queryUpkeepListFn();\r\n        }\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.queryUpkeepListFn();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.upkeepDetailModuleBox {\r\n  padding: 20px;\r\n  // 顶部工具栏\r\n  .topTool {\r\n    display: flex;\r\n    margin-bottom: 20px;\r\n    .toolInput {\r\n      width: 170px;\r\n      margin-right: 10px;\r\n    }\r\n    .toolSelect {\r\n      width: 130px;\r\n      margin-right: 10px;\r\n    }\r\n    .toolBtn {\r\n      color: #2e4c9e;\r\n    }\r\n  }\r\n\r\n  // 表格内容部分\r\n  .tableContent {\r\n    .tableContent_title {\r\n      color: #0b2059;\r\n      font-weight: 700;\r\n      font-size: 20px;\r\n      padding-left: 30px;\r\n    }\r\n    .tableContent_table {\r\n      margin: 30px 0;\r\n    }\r\n    .tableContent_footer {\r\n      display: flex;\r\n      height: 50px;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n  }\r\n\r\n  // 详情\r\n  .orderDetails {\r\n    color: #707070;\r\n    .content {\r\n      padding: 20px 20px;\r\n      .line {\r\n        display: flex;\r\n        margin-bottom: 20px;\r\n        .item {\r\n          flex: 1;\r\n          display: flex;\r\n          align-items: center;\r\n          padding-right: 20px;\r\n          .title {\r\n            width: 150px;\r\n            color: #707070;\r\n            font-weight: 700;\r\n            font-size: 22px;\r\n          }\r\n          .desc {\r\n            font-size: 18px;\r\n            flex: 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 按钮样式\r\n  .closeBtn {\r\n    background-color: #fff;\r\n    color: #0b2059;\r\n    border: 1px solid #0b2059;\r\n    width: 110px;\r\n    height: 40px;\r\n  }\r\n}\r\n</style>\r\n"]}]}