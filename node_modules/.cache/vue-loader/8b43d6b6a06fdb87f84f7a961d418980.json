{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\activity\\partner\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\activity\\partner\\index.vue","mtime":1669258939293},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1cGxvYWRJbWcgZnJvbSAiQC9jb21wb25lbnRzL3VwbG9hZEltZy91cGxvYWQtaW1nLnZ1ZSI7CmltcG9ydCB7cXVlcnlQYXJ0bmVyLGVkaXRQYXJ0bmVyLGRlbGV0ZVBhcnRuZXJ9IGZyb20gIkAvYXBpL2FjdGl2aXR5IjsKZXhwb3J0IGRlZmF1bHQgewoJY29tcG9uZW50czogewoJCXVwbG9hZEltZywKCX0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCWRhdGFMaXN0OiBbXSwKCQkJZWRpdERhdGE6IHsKCQkJCW5hbWU6ICIiLAoJCQkJaWQ6ICIiLAoJCQkJaW1hZ2U6ICIiLAoJCQl9LAoJCQlkYXRhQ29uZmlnOiB7CgkJCQlsb2FkaW5nOiB0cnVlLAoJCQkJcGFnZU5vOjEsCgkJCQlwYWdlU2l6ZTozMAoJCQl9LAoJCX07Cgl9LAoJYmVmb3JlTW91bnQoKSB7CgkJdGhpcy5nZXREYXRhTGlzdEZuKCk7Cgl9LAoJbWV0aG9kczogewoJCWVkaXRCYW5rVHlwZUZuKHJvdykgewoJCQllZGl0UGFydG5lcih7CgkJCQluYW1lOnJvdy5uYW1lLAoJCQkJaW1hZ2U6cm93LmltYWdlLAoJCQkJaWQ6cm93LmlkIHx8IHVuZGVmaW5lZAoJCQl9KS50aGVuKChyZXMpID0+IHsKCQkJCWNvbnN0IHJlc0RhdGEgPSB0aGlzLnJlc0RhdGFGbihyZXMpOwoJCQkJaWYgKHJlc0RhdGEgPT0gIjAwMCIpIHsKCQkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCQkJc2hvd0Nsb3NlOiB0cnVlLAoJCQkJCQltZXNzYWdlOiAi5pON5L2c5oiQ5Yqf77yBIiwKCQkJCQkJdHlwZTogInN1Y2Nlc3MiLAoJCQkJCX0pOwoJCQkJCXRoaXMuZ2V0RGF0YUxpc3RGbigpOwoJCQkJfQoJCQl9KQoJCX0sCgkJYWRkRGF0YUZuKCkgewoJCQl0aGlzLmRhdGFMaXN0LnVuc2hpZnQoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0RGF0YSkpOwoJCX0sCgkJZGVsZXRlQWRkRm4oaW5kZXgpIHsKCQkJdGhpcy5kYXRhTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwoJCX0sCgkJZGVsSXRlbUZuKGlkKSB7CgkJCXRoaXMuZGVsZXRlQWxlcnQoKS50aGVuKCgpID0+IHsKCQkJCWNvbnN0IHJlcyA9IGRlbGV0ZVBhcnRuZXIoewoJCQkJCWlkCgkJCQl9KTsKCQkJCXJldHVybiByZXM7CgkJCX0pLnRoZW4oKHJlcykgPT4gewoJCQkJY29uc3QgcmVzRGF0YSA9IHRoaXMucmVzRGF0YUZuKHJlcyk7CgkJCQlpZiAocmVzRGF0YSA9PSAiMDAwIikgewoJCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCQlzaG93Q2xvc2U6IHRydWUsCgkJCQkJCW1lc3NhZ2U6ICLmk43kvZzmiJDlip/vvIEiLAoJCQkJCQl0eXBlOiAic3VjY2VzcyIsCgkJCQkJfSk7CgkJCQkJdGhpcy5nZXREYXRhTGlzdEZuKCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJdXBsb2FkU3VjRm4oaW1nLCBpbmRleCkgewoJCQl0aGlzLiRzZXQodGhpcy5kYXRhTGlzdCxpbmRleCwKCQkJCU9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGF0YUxpc3RbaW5kZXhdLCB7CgkJCQkJaW1hZ2U6IGltZwoJCQkJfSkKCQkJKTsKCQl9LAoJCS8qIHN0YXR1c0NoYW5nZUZuKHZhbCwgaW5kZXgpIHsKCQkJbGV0IGVkaXREYXRhID0gdGhpcy5kYXRhTGlzdFtpbmRleF07CgkJCWVkaXRPcGVyYXRpb24oCgkJCQlPYmplY3QuYXNzaWduKHt9LCBlZGl0RGF0YSwgewoJCQkJCXN0YXR1czogdmFsID8gMSA6IDAsCgkJCQkJY3JlYXRlVGltZTogdW5kZWZpbmVkLAoJCQkJfSkKCQkJKS50aGVuKChyZXMpID0+IHsKCQkJCWlmIChyZXMuY29kZSA9PSAiMDAwIikgewoJCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCQlzaG93Q2xvc2U6IHRydWUsCgkJCQkJCW1lc3NhZ2U6ICLmk43kvZzmiJDlip/vvIEiLAoJCQkJCQl0eXBlOiAic3VjY2VzcyIsCgkJCQkJfSk7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuZGF0YUxpc3RbaW5kZXhdLnN0YXR1cyA9ICF2YWw7CgkJCQl9CgkJCX0pCgkJCS5jYXRjaCgoKSA9PiB7CgkJCQl0aGlzLmRhdGFMaXN0W2luZGV4XS5zdGF0dXMgPSAhdmFsOwoJCQl9KTsKCQl9LCAqLwoJCWdldERhdGFMaXN0Rm4oKSB7CgkJCXF1ZXJ5UGFydG5lcih7CgkJCQlwYWdlTm86dGhpcy5kYXRhQ29uZmlnLnBhZ2VObywKCQkJCXBhZ2VTaXplOnRoaXMuZGF0YUNvbmZpZy5wYWdlU2l6ZQoJCQl9KS50aGVuKChyZXMpID0+IHsKCQkJCWNvbnN0IHJlc0RhdGEgPSB0aGlzLnJlc0RhdGFGbihyZXMpOwoJCQkJdGhpcy5kYXRhQ29uZmlnLnRvdGFsID0gcmVzRGF0YS50b3RhbDsKCQkJCXRoaXMuZGF0YUxpc3Quc3BsaWNlKDAsIHRoaXMuZGF0YUxpc3QubGVuZ3RoLCAuLi5yZXNEYXRhLnJlY29yZHMpOwoJCQl9KTsKCQl9LAoJCWhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CgkJCXRoaXMuZGF0YUNvbmZpZy5wYWdlU2l6ZSA9IHZhbAoJCQl0aGlzLmdldERhdGFMaXN0Rm4oKQoJCX0sCgkJY3VycmVudENoYW5nZUZuKHBhZ2VObykgewoJCQl0aGlzLmRhdGFDb25maWcucGFnZU5vID0gcGFnZU5vCgkJCXRoaXMuZ2V0RGF0YUxpc3RGbigpCgkJfSwKCX0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/activity/partner","sourcesContent":["<template>\n\t<div class=\"content_box\">\n\t\t<first-title title=\"合作伙伴\" />\n\t\t<div class=\"select_view\">\n\t\t\t<el-button type=\"primary\" @click=\"addDataFn\"><i class=\"el-icon-plus\" />添加合作伙伴</el-button>\n\t\t\t<span class=\"mg_l15\" style=\"color: #f56c6c\">注意：“修改”和“添加”合作伙伴后需要点击右侧“提交编辑”按钮才会生效哦！</span>\n\t\t</div>\n\t\t<el-table v-loading=\"dataConfig.loading\" border :data=\"dataList\" class=\"list\">\n\t\t\t<el-table-column label=\"ID\" width=\"60px\" align=\"center\" header-align=\"center\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<span>{{ scope.row.id }}</span>\n\t\t\t\t\t<span v-if=\"!scope.row.id\" class=\"delete_icon\" @click=\"deleteAddFn(scope.$index)\"><i class=\"el-icon-delete\" /></span>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"图片\" align=\"center\" width=\"220\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<upload-img width=\"200px\" height=\"100px\" :img=\"scope.row.image\" @uploadSuc=\"uploadSucFn($event, scope.$index)\" />\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t<el-table-column label=\"名称\" align=\"center\" header-align=\"center\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-input v-model=\"scope.row.name\" type=\"text\" placeholder=\"请输入名称\" />\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t\t\n\t\t\t<el-table-column label=\"操作\" fixed=\"right\" width=\"200\" align=\"center\" header-align=\"center\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"editBankTypeFn(scope.row)\">提交编辑</el-button>\n\t\t\t\t\t<el-button v-if=\"scope.row.id\" type=\"danger\" size=\"small\" @click=\"delItemFn(scope.row.id)\"><i class=\"el-icon-delete\" />删除</el-button>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t</el-table>\n\t\t<div style=\"height: 16px;\"></div>\n\t\t<div class=\"table-block\" v-show=\"dataList.length > 0\">\n\t\t\t<el-pagination background @size-change=\"handleSizeChange\" @current-change=\"currentChangeFn\" :current-page.sync=\"dataConfig.pageNo\" :page-size=\"dataConfig.pageSize\" :page-sizes=\"[20, 30, 50, 100]\" layout=\"total,sizes, prev, pager, next\" :total=\"dataConfig.total\">\n\t\t\t</el-pagination>\n\t\t</div>\n\t</div>\n</template>\n<script>\n\timport uploadImg from \"@/components/uploadImg/upload-img.vue\";\n\timport {queryPartner,editPartner,deletePartner} from \"@/api/activity\";\n\texport default {\n\t\tcomponents: {\n\t\t\tuploadImg,\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdataList: [],\n\t\t\t\teditData: {\n\t\t\t\t\tname: \"\",\n\t\t\t\t\tid: \"\",\n\t\t\t\t\timage: \"\",\n\t\t\t\t},\n\t\t\t\tdataConfig: {\n\t\t\t\t\tloading: true,\n\t\t\t\t\tpageNo:1,\n\t\t\t\t\tpageSize:30\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tbeforeMount() {\n\t\t\tthis.getDataListFn();\n\t\t},\n\t\tmethods: {\n\t\t\teditBankTypeFn(row) {\n\t\t\t\teditPartner({\n\t\t\t\t\tname:row.name,\n\t\t\t\t\timage:row.image,\n\t\t\t\t\tid:row.id || undefined\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tconst resData = this.resDataFn(res);\n\t\t\t\t\tif (resData == \"000\") {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"操作成功！\",\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.getDataListFn();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\taddDataFn() {\n\t\t\t\tthis.dataList.unshift(Object.assign({}, this.editData));\n\t\t\t},\n\t\t\tdeleteAddFn(index) {\n\t\t\t\tthis.dataList.splice(index, 1);\n\t\t\t},\n\t\t\tdelItemFn(id) {\n\t\t\t\tthis.deleteAlert().then(() => {\n\t\t\t\t\tconst res = deletePartner({\n\t\t\t\t\t\tid\n\t\t\t\t\t});\n\t\t\t\t\treturn res;\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tconst resData = this.resDataFn(res);\n\t\t\t\t\tif (resData == \"000\") {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"操作成功！\",\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.getDataListFn();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tuploadSucFn(img, index) {\n\t\t\t\tthis.$set(this.dataList,index,\n\t\t\t\t\tObject.assign({}, this.dataList[index], {\n\t\t\t\t\t\timage: img\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t},\n\t\t\t/* statusChangeFn(val, index) {\n\t\t\t\tlet editData = this.dataList[index];\n\t\t\t\teditOperation(\n\t\t\t\t\tObject.assign({}, editData, {\n\t\t\t\t\t\tstatus: val ? 1 : 0,\n\t\t\t\t\t\tcreateTime: undefined,\n\t\t\t\t\t})\n\t\t\t\t).then((res) => {\n\t\t\t\t\tif (res.code == \"000\") {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"操作成功！\",\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dataList[index].status = !val;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.dataList[index].status = !val;\n\t\t\t\t});\n\t\t\t}, */\n\t\t\tgetDataListFn() {\n\t\t\t\tqueryPartner({\n\t\t\t\t\tpageNo:this.dataConfig.pageNo,\n\t\t\t\t\tpageSize:this.dataConfig.pageSize\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tconst resData = this.resDataFn(res);\n\t\t\t\t\tthis.dataConfig.total = resData.total;\n\t\t\t\t\tthis.dataList.splice(0, this.dataList.length, ...resData.records);\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleSizeChange(val) {\n\t\t\t\tthis.dataConfig.pageSize = val\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\tcurrentChangeFn(pageNo) {\n\t\t\t\tthis.dataConfig.pageNo = pageNo\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style lang=\"scss\"></style>\n"]}]}