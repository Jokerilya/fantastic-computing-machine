{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\financialManagement\\incomeExpenditrue.vue?vue&type=style&index=0&id=5d37fb63&lang=less&scoped=true&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\financialManagement\\incomeExpenditrue.vue","mtime":1712798501976},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmluY29tZUV4cGVuZGl0cnVlIHsNCiAgcGFkZGluZzogMjBweDsNCiAgLnRvcFRvb2wgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICAudG9vbElucHV0IHsNCiAgICAgIHdpZHRoOiAxNzBweDsNCiAgICAgIG1hcmdpbi1yaWdodDogMTBweDsNCiAgICB9DQogICAgLnRvb2xTZWxlY3Qgew0KICAgICAgd2lkdGg6IDEzMHB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgIH0NCiAgICAudG9vbEJ0biB7DQogICAgICBjb2xvcjogIzJlNGM5ZTsNCiAgICB9DQogIH0NCg0KICAvLyDooajmoLzlhoXlrrnpg6jliIYNCiAgLnRhYmxlQ29udGVudCB7DQogICAgLnRhYmxlQ29udGVudF90aXRsZSB7DQogICAgICBjb2xvcjogIzBiMjA1OTsNCiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7DQogICAgICBmb250LXNpemU6IDIwcHg7DQogICAgICBwYWRkaW5nLWxlZnQ6IDMwcHg7DQogICAgfQ0KICAgIC50YWJsZUNvbnRlbnRfdGFibGUgew0KICAgICAgbWFyZ2luOiAzMHB4IDA7DQogICAgfQ0KICAgIC50YWJsZUNvbnRlbnRfZm9vdGVyIHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBoZWlnaHQ6IDUwcHg7DQogICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["incomeExpenditrue.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"incomeExpenditrue.vue","sourceRoot":"src/views/financialManagement","sourcesContent":["<template>\r\n  <!-- 收入明细 -->\r\n  <div class=\"incomeExpenditrue\">\r\n    <!-- 顶部工具栏 -->\r\n    <div class=\"topTool\">\r\n      <el-input\r\n        v-model=\"PaymentListData.orderSn\"\r\n        placeholder=\"输入订单号\"\r\n        class=\"toolInput\"\r\n      >\r\n      </el-input>\r\n\r\n      <el-input\r\n        v-model=\"PaymentListData.realName\"\r\n        placeholder=\"输入真实姓名\"\r\n        class=\"toolInput\"\r\n      >\r\n      </el-input>\r\n\r\n      <el-date-picker\r\n        v-model=\"dateValueArr\"\r\n        type=\"daterange\"\r\n        range-separator=\"至\"\r\n        start-placeholder=\"开始日期\"\r\n        end-placeholder=\"结束日期\"\r\n        style=\"margin-right: 10px\"\r\n        value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n      >\r\n      </el-date-picker>\r\n\r\n      <el-select\r\n        placeholder=\"业务类型\"\r\n        class=\"toolSelect\"\r\n        v-model=\"PaymentListData.serviceType\"\r\n      >\r\n        <el-option label=\"管家合同支付\" :value=\"1\"></el-option>\r\n        <el-option label=\"维保企业支付\" :value=\"2\"></el-option>\r\n        <el-option label=\"支付至维保师傅\" :value=\"3\"></el-option>\r\n      </el-select>\r\n\r\n      <el-select\r\n        placeholder=\"收支状态\"\r\n        class=\"toolSelect\"\r\n        v-model=\"PaymentListData.status\"\r\n      >\r\n        <el-option label=\"未支付\" :value=\"0\"> </el-option>\r\n        <el-option label=\"已支付\" :value=\"1\"> </el-option>\r\n      </el-select>\r\n      <el-button class=\"toolBtn\" @click=\"searchBtn\">查询</el-button>\r\n      <el-button class=\"toolBtn\" @click=\"resetBtn\">重置</el-button>\r\n      <el-button class=\"toolBtn\" @click=\"exportBtn\" style=\"margin-right: 10px\"\r\n        >导出</el-button\r\n      >\r\n\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        action\r\n        multiple\r\n        :http-request=\"importBtn\"\r\n        :show-file-list=\"false\"\r\n      >\r\n        <el-button class=\"toolBtn\">导入</el-button>\r\n      </el-upload>\r\n    </div>\r\n\r\n    <!-- 表格内容部分 -->\r\n    <div class=\"tableContent\" v-if=\"ordersList\">\r\n      <el-card>\r\n        <div class=\"tableContent_table\">\r\n          <el-table\r\n            :cell-style=\"{ 'text-align': 'center' }\"\r\n            :data=\"ordersList\"\r\n            style=\"width: 100%\"\r\n            :header-cell-style=\"{\r\n              background: '#f6f8fc',\r\n              color: '#707070',\r\n              'text-align': 'center',\r\n            }\"\r\n          >\r\n            <el-table-column width=\"150\" label=\"企业订单号\">\r\n              <template slot-scope=\"{ row }\">\r\n                <a\r\n                  @click.prevent=\"\r\n                    $router.push(\r\n                      '/maintenance/maintenance_order_desc?orderSn=' +\r\n                        row.relationOrderSn\r\n                    )\r\n                  \"\r\n                  style=\"color: #61afef\"\r\n                  >{{ row.relationOrderSn }}\r\n                </a>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"师傅订单号\" prop=\"orderSn\">\r\n            </el-table-column>\r\n            <el-table-column label=\"订单类型\">\r\n              <template slot-scope=\"{ row }\">\r\n                {{\r\n                  row.orderType === 1\r\n                    ? \"散单\"\r\n                    : row.orderType === 2\r\n                    ? \"年保\"\r\n                    : \"年卡\"\r\n                }}\r\n              </template>\r\n            </el-table-column>\r\n            <!-- <el-table-column\r\n              width=\"150\"\r\n              prop=\"payCode\"\r\n              label=\"支付流水号\"\r\n            ></el-table-column> -->\r\n            <!-- <el-table-column prop=\"payTime\" label=\"支付时间\"></el-table-column> -->\r\n            <el-table-column label=\"支付金额\">\r\n              <template slot-scope=\"{ row }\"> ￥{{ row.payAmount }} </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"targetName\"\r\n              label=\"收付款对象\"\r\n            ></el-table-column>\r\n            <!-- <el-table-column\r\n              prop=\"transCode\"\r\n              label=\"第三方交易账号\"\r\n            ></el-table-column> -->\r\n            <el-table-column label=\"业务类型名\">\r\n              <template slot-scope=\"{ row }\">\r\n                {{\r\n                  row.serviceTypeName === \"维保师傅支付\"\r\n                    ? \"支付至维保师傅\"\r\n                    : row.serviceTypeName\r\n                }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"收支状态\">\r\n              <template slot-scope=\"{ row }\">\r\n                <div v-if=\"row.status === 0\" style=\"color: red\">未支付</div>\r\n                <div v-if=\"row.status === 1\" style=\"color: green\">已支付</div>\r\n              </template>\r\n            </el-table-column>\r\n            <!-- <a\r\n                  href=\"#\"\r\n                  style=\"color: #0b2059;margin-right: 10px;\"\r\n                  v-if=\"\r\n                    row.status === 0 && row.serviceTypeName !== '维保企业支付'\r\n                  \"\r\n                  @click.prevent=\"detailsOpen(row, true)\"\r\n                  >支付</a\r\n                > -->\r\n            <!-- <el-table-column label=\"操作\">\r\n              <template slot-scope=\"{ row }\">\r\n                <a\r\n                  href=\"#\"\r\n                  style=\"color: #0b2059\"\r\n                  @click.prevent=\"detailsOpen(row, false)\"\r\n                  >详情</a\r\n                >\r\n              </template>\r\n            </el-table-column> -->\r\n          </el-table>\r\n        </div>\r\n        <div class=\"tableContent_footer\">\r\n          <div class=\"footer_pagination\">\r\n            <!--  @current-change=\"currentChangeFn\" -->\r\n            <!-- :current-page=\"current\" -->\r\n            <el-pagination\r\n              @current-change=\"currentChangeFn\"\r\n              :page-size=\"PaymentListData.pageSize\"\r\n              layout=\"jumper, prev, pager, next,total \"\r\n              :total=\"total\"\r\n              :current-page=\"PaymentListData.pageNo\"\r\n            >\r\n            </el-pagination>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!-- 详情 -->\r\n    <PayOrder-Details\r\n      @refreshpage=\"getIncomeExpenditrueList\"\r\n      ref=\"payOrderDetails\"\r\n      :payBtnShow=\"payBtnShow\"\r\n      @handleClose=\"detailsClose\"\r\n      :dialogVisible=\"detailsShow\"\r\n    ></PayOrder-Details>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n.incomeExpenditrue {\r\n  padding: 20px;\r\n  .topTool {\r\n    display: flex;\r\n    margin-bottom: 20px;\r\n    .toolInput {\r\n      width: 170px;\r\n      margin-right: 10px;\r\n    }\r\n    .toolSelect {\r\n      width: 130px;\r\n      margin-right: 10px;\r\n    }\r\n    .toolBtn {\r\n      color: #2e4c9e;\r\n    }\r\n  }\r\n\r\n  // 表格内容部分\r\n  .tableContent {\r\n    .tableContent_title {\r\n      color: #0b2059;\r\n      font-weight: 700;\r\n      font-size: 20px;\r\n      padding-left: 30px;\r\n    }\r\n    .tableContent_table {\r\n      margin: 30px 0;\r\n    }\r\n    .tableContent_footer {\r\n      display: flex;\r\n      height: 50px;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport {\r\n  queryPaymentList,\r\n  handlePaymentListExport,\r\n  handlePaymentListImport,\r\n} from \"@/api/financialController\";\r\nimport payOrderDetails from \"./components/payOrderDetails.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dateValueArr: null, //时间段\r\n      detailsShow: false, //详情\r\n      payBtnShow: false, //支付按钮显示\r\n      // 查询的数据\r\n      ordersList: null,\r\n      // 查询列表需要的参数\r\n      PaymentListData: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        orderSn: null,\r\n        serviceType: null,\r\n        status: null,\r\n        realName: null,\r\n      },\r\n      total: 0,\r\n    };\r\n  },\r\n  components: {\r\n    \"PayOrder-Details\": payOrderDetails,\r\n  },\r\n  methods: {\r\n    // 导入\r\n    async importBtn(data) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", data.file);\r\n      const res = await handlePaymentListImport(formData);\r\n      if (res.message === \"操作成功\") {\r\n        this.$message({\r\n          message: \"已导入成功\",\r\n          type: \"success\",\r\n        });\r\n        this.getIncomeExpenditrueList();\r\n      }\r\n    },\r\n    // 导出\r\n    async exportBtn() {\r\n      const loading = this.$loading({\r\n        lock: true,\r\n        text: \"数据传输中\",\r\n        spinner: \"el-icon-loading\",\r\n      });\r\n      const res = await handlePaymentListExport(this.PaymentListData);\r\n      if (res) {\r\n        const link = document.createElement(\"a\");\r\n        const blob = new Blob([res.data], {\r\n          type: \"application/vnd.ms-excel\",\r\n        });\r\n        link.style.display = \"none\";\r\n        link.href = URL.createObjectURL(blob);\r\n        link.download = \"收支明细\"; //下载的文件名\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        loading.close();\r\n      }\r\n    },\r\n    // 关闭详情弹窗的事件\r\n    detailsClose() {\r\n      this.detailsShow = false;\r\n    },\r\n    // 显示弹窗\r\n    async detailsOpen(row, Boolean) {\r\n      this.payBtnShow = Boolean;\r\n      this.$refs.payOrderDetails.rowList = row;\r\n      this.detailsShow = true;\r\n    },\r\n    // 点击重置触发的事件\r\n    resetBtn() {\r\n      this.PaymentListData = {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        orderSn: null,\r\n        serviceType: null,\r\n        status: null,\r\n        realName: null,\r\n      };\r\n      this.getIncomeExpenditrueList();\r\n    },\r\n    // 页码发生变化触发的事件\r\n    currentChangeFn(page) {\r\n      this.PaymentListData.pageNo = page;\r\n      this.getIncomeExpenditrueList();\r\n    },\r\n    // 点击查询触发的事件\r\n    searchBtn() {\r\n      if (this.dateValueArr) {\r\n        this.PaymentListData.startTime = this.dateValueArr[0];\r\n        this.PaymentListData.endTime = this.dateValueArr[1];\r\n      }\r\n      this.PaymentListData.pageNo = 1;\r\n      this.PaymentListData.pageSize = 10;\r\n      this.getIncomeExpenditrueList();\r\n    },\r\n    // 获取收支明细列表\r\n    async getIncomeExpenditrueList() {\r\n      const res = await queryPaymentList(this.PaymentListData);\r\n      this.total = res.data.total;\r\n      this.ordersList = res.data.records;\r\n    },\r\n  },\r\n  created() {\r\n    this.getIncomeExpenditrueList();\r\n  },\r\n};\r\n</script>\r\n"]}]}