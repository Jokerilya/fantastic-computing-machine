{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\product-detail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\product-detail\\index.vue","mtime":1669258939322},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1cGxvYWRJbWcgZnJvbSAiQC9jb21wb25lbnRzL3VwbG9hZEltZy91cGxvYWQtaW1nLnZ1ZSI7CmltcG9ydCB1cGxvYWRJbWdzIGZyb20gIkAvY29tcG9uZW50cy91cGxvYWRJbWdzL3VwbG9hZC1pbWdzLnZ1ZSI7CmltcG9ydCBUaW55bWNlIGZyb20gIkAvY29tcG9uZW50cy9UaW55bWNlIjsKaW1wb3J0IHsKICBnZXRQcm9kdWN0RGV0YWlsRm4sCiAgcXVlcnlQcm9kdWN0Q2F0ZWdvcnlGbiwKICBlZGl0UHJvZHVjdEZuLAogIHF1ZXJ5UHJvZHVjdEZpdHRpbmdDYXRlZ29yeUZuLAogIHF1ZXJ5U3VwcGxpZXJMaXN0LAp9IGZyb20gIkAvYXBpL3Byb2R1Y3QuanMiOwppbXBvcnQgeyBxdWVyeUV4cFJ1bGVGbiB9IGZyb20gIkAvYXBpL3N5c3RlbS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvZHVjdExpc3QiLAogIGNvbXBvbmVudHM6IHsKICAgIFRpbnltY2UsCiAgICB1cGxvYWRJbWcsCiAgICB1cGxvYWRJbWdzLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2VObzogMCwKICAgICAgcGFnZVNpemU6IDAsCiAgICAgIHN1Ym1pdEluZzogZmFsc2UsCiAgICAgIHByb2R1Y3RJZDogIiIsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBlZGl0QWRkVmFsSXRlbTogW10sCiAgICAgIHR5cGVzOiBbCiAgICAgICAgeyBuYW1lOiAi5LyY6YCJ5ZWG5ZOBIiwgdmFsOiAxIH0sCiAgICAgICAgeyBuYW1lOiAi5ou85Zui5Lqn5ZOBIiwgdmFsOiAyIH0sCiAgICAgICAgeyBuYW1lOiAi6YWN5Lu2IiwgdmFsOiAzIH0sCiAgICAgICAgeyBuYW1lOiAi5py65Lu2IiwgdmFsOiA0IH0sCiAgICAgIF0sCiAgICAgIGlzU2hlbHZlczogWwogICAgICAgIHsgbmFtZTogIuS4iuaetiIsIHZhbDogMSB9LAogICAgICAgIHsgbmFtZTogIuS4i+aetiIsIHZhbDogMCB9LAogICAgICBdLAogICAgICBpc0V4aXN0TWFueVNwZWM6IFsKICAgICAgICB7IG5hbWU6ICLmmK8iLCB2YWw6IDEgfSwKICAgICAgICB7IG5hbWU6ICLlkKYiLCB2YWw6IDAgfSwKICAgICAgXSwKICAgICAgYWRkRWRpdERhdGE6IHsKICAgICAgICBleHBJZDogIiIsCiAgICAgICAgY2F0ZWdvcnlJZDogIiIsCiAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgY292ZXJJbWFnZTogIiIsCiAgICAgICAgYmFja0ltYWdlOiAiIiwKICAgICAgICBpZDogIiIsCiAgICAgICAgaW1hZ2VzOiBbXSwKICAgICAgICBpbnZlbnRvcnk6ICIiLAogICAgICAgIGlzRXhpc3RNYW55U3BlYzogIiIsCiAgICAgICAgaXNTaGVsdmVzOiAiIiwKICAgICAgICBtb2RlOiAiIiwKICAgICAgICBwcmljZTogMCwKICAgICAgICBzaW1wbGVEZXNjOiAiIiwKICAgICAgICBsaXN0OiBbXSwKICAgICAgICBzcGVjTGlzdDogW10sCiAgICAgICAgdGl0bGU6ICIiLAogICAgICAgIHR5cGU6ICIiLAogICAgICAgIC8vIHBhcnRzSWQ6JycsCiAgICAgICAgc3VwcGxpZXJJZDogIiIsCiAgICAgICAgLy8gZ3JvdXBIb3VyczoxLAogICAgICAgIGdyb3VwTnVtOiAxLAogICAgICAgIGFjdGl2aXR5VGltZTogW10sCiAgICAgICAgYWN0aXZpdHlTdGFydFRpbWU6ICIiLAogICAgICAgIGFjdGl2aXR5RW5kVGltZTogIiIsCiAgICAgICAgbGFzdEludmVudG9yeTonJywKICAgICAgICBvcmlnaW5hbFByaWNlOicnCiAgICAgIH0sCiAgICAgIHN1cHBsaWVyTGlzdDogW10sIC8vIOS+m+W6lOWVhuWIl+ihqAogICAgICBlZGl0TGV2ZWxEYXRhOiBbXSwKICAgICAgZXhwTGlzdDogW10sCiAgICAgIGJhdGNoRGF0YTogewogICAgICAgIHNwZWNJbWFnZTogIiIsCiAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgb3JpZ2luYWxQcmljZTogMCwKICAgICAgICBpbnZlbnRvcnk6IDAsCiAgICAgIH0sCiAgICAgIHJlc3VsdHM6IFtdLAogICAgICByZXN1bHQ6IFtdLAogICAgICBsZXZlbExpc3Q6IFtdLAogICAgICBjYXRlZ29yeUxpc3Q6IHsKICAgICAgICBsYXp5OiB0cnVlLAogICAgICAgIGNoZWNrU3RyaWN0bHk6IHRydWUsCiAgICAgICAgbGF6eUxvYWQobm9kZSwgcmVzb2x2ZSkgewogICAgICAgICAgcXVlcnlQcm9kdWN0Q2F0ZWdvcnlGbih7IHBpZDogbm9kZS52YWx1ZSB8fCAwIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gcmVzRGF0YS5tYXAoKGl0ZW0pID0+ICh7CiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQsCiAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAvLyDpgJrov4fosIPnlKhyZXNvbHZl5bCG5a2Q6IqC54K55pWw5o2u6L+U5Zue77yM6YCa55+l57uE5Lu25pWw5o2u5Yqg6L295a6M5oiQCiAgICAgICAgICAgIHJlc29sdmUobm9kZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgY2F0ZWdvcnlQYXJ0c0xpc3Q6IFtdLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnByb2R1Y3RJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgdGhpcy5wYWdlTm8gPSB0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlTm87CiAgICB0aGlzLnBhZ2VTaXplID0gdGhpcy4kcm91dGUucXVlcnkucGFnZVNpemU7CiAgICB0aGlzLmdldEluaXQoKTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnF1ZXJ5UHJvZHVjdEZpdHRpbmdDYXRlZ29yeUZuKCk7CiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgICAvLyDop6PlhrPnu4Tku7booqtrZWVwLWFsaXZl5peg5rOV5pu05paw5pWw5o2uCiAgICB0aGlzLmFkZFByb2R1Y3RGbigpOwogICAgdGhpcy5wcm9kdWN0SWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIHRoaXMucGFnZU5vID0gdGhpcy4kcm91dGUucXVlcnkucGFnZU5vOwogICAgdGhpcy5wYWdlU2l6ZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2VTaXplOwogICAgdGhpcy5nZXRJbml0KCk7CiAgfSwKICB3YXRjaDogewogICAgcHJvZHVjdElkKG5ld3ZhbCkgewogICAgICBpZiAobmV3dmFsID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLiRyZWZzLnBwcC5zZXRDb250ZW50KCIiKTsKICAgICAgfQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPlgogICAgYXN5bmMgZ2V0SW5pdCgpIHsKICAgICAgYXdhaXQgcXVlcnlFeHBSdWxlRm4oewogICAgICAgIHBhZ2VObzogMSwKICAgICAgICBwYWdlU2l6ZTogMjAsCiAgICAgICAgbmFtZTogIiIsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IHJlc0RhdGEgPSB0aGlzLnJlc0RhdGFGbihyZXMpOwogICAgICAgIHRoaXMuZXhwTGlzdC5zcGxpY2UoMCwgdGhpcy5leHBMaXN0Lmxlbmd0aCwgLi4ucmVzRGF0YS5yZWNvcmRzKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZ2V0UHJvZHVjdERldGFpbEZuKCk7CiAgICAgIHRoaXMuZ2V0UXVlcnlTdXBwbGllckxpc3QoKTsKICAgIH0sCiAgICAvLyDojrflj5bkvpvlupTllYbliJfooagKICAgIGFzeW5jIGdldFF1ZXJ5U3VwcGxpZXJMaXN0KCkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeVN1cHBsaWVyTGlzdCh7CiAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMDAwLAogICAgICB9KTsKICAgICAgaWYgKHJlcy5jb2RlID09PSAiMDAwIikgewogICAgICAgIHRoaXMuc3VwcGxpZXJMaXN0ID0gcmVzLmRhdGEucmVjb3JkczsKICAgICAgfQogICAgfSwKICAgIC8vIOS6p+WTgeexu+Wei+mAieaLqQogICAgcHJvZHVjdFR5cGVDaGFuZ2UoZSkgewogICAgICB0aGlzLmFkZEVkaXREYXRhLmNhdGVnb3J5SWQgPSAiIjsKICAgIH0sCiAgICAvLyDojrflj5boo4XmnLrphY3ku7bllYblk4HliIbnsbsKICAgIGFzeW5jIHF1ZXJ5UHJvZHVjdEZpdHRpbmdDYXRlZ29yeUZuKCkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeVByb2R1Y3RGaXR0aW5nQ2F0ZWdvcnlGbigpOwogICAgICBpZiAocmVzLmNvZGUgPT09ICIwMDAiKSB7CiAgICAgICAgdGhpcy5jYXRlZ29yeVBhcnRzTGlzdCA9IHJlcy5kYXRhOwogICAgICB9CiAgICB9LAogICAgLy8KICAgIGNhc2NhZGVyQ2hhbmdlRm4odmFsKSB7CiAgICAgIC8vIGNvbnN0IGVuZEluZGV4ID0gdmFsLmxlbmd0aCAtIDEKICAgICAgLy8gdGhpcy5hZGRFZGl0RGF0YS5jYXRlZ29yeUlkID0gdmFsW2VuZEluZGV4XQogICAgfSwKICAgIG5hbWVDaGFuZ2UoaW5kZXgpIHsKICAgICAgdGhpcy5hZGRFZGl0RGF0YS5saXN0W2luZGV4XS5uYW1lID0gdGhpcy5hZGRFZGl0RGF0YS5saXN0WwogICAgICAgIGluZGV4CiAgICAgIF0ubmFtZS5yZXBsYWNlKC9ccysvZywgIiIpOwogICAgfSwKICAgIHZhbHVlQ2hhbmdlKGluZGV4LCBpbmRleDIpIHsKICAgICAgdGhpcy5hZGRFZGl0RGF0YS5saXN0W2luZGV4XS52YWx1ZVtpbmRleDJdID0gdGhpcy5hZGRFZGl0RGF0YS5saXN0WwogICAgICAgIGluZGV4CiAgICAgIF0udmFsdWVbaW5kZXgyXS5yZXBsYWNlKC9ccysvZywgIiIpOwogICAgfSwKICAgIGxldmVsVmFsdWVDaGFuZ2UoaW5kZXgsIGtleSkgewogICAgICB0aGlzLmVkaXRMZXZlbERhdGFbaW5kZXhdW2tleV0gPSB0aGlzLmVkaXRMZXZlbERhdGFbaW5kZXhdW2tleV0ucmVwbGFjZSgKICAgICAgICAvXHMrL2csCiAgICAgICAgIiIKICAgICAgKTsKICAgIH0sCiAgICBiYXRjaENyZWF0Rm4oKSB7CiAgICAgIGNvbnN0IGFyciA9IFtdOwogICAgICB0aGlzLnJlc3VsdCA9IFtdOwogICAgICB0aGlzLnJlc3VsdHMgPSBbXTsKICAgICAgdGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdC5zcGxpY2UoMCwgdGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdC5sZW5ndGgpOwogICAgICB0aGlzLmFkZEVkaXREYXRhLmxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGNvbnN0IHZhbEFyciA9IFtdOwogICAgICAgIGl0ZW0udmFsdWUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgIHZhbEFyci5wdXNoKGluZGV4ICsgIiIpOwogICAgICAgIH0pOwogICAgICAgIGFyci5wdXNoKHZhbEFycik7CiAgICAgIH0pOwogICAgICB0aGlzLmRvRXhjaGFuZ2UoYXJyLCAwKTsKICAgICAgdGhpcy5yZXN1bHRzLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICB0aGlzLmFkZEVkaXREYXRhLnNwZWNMaXN0LnB1c2goewogICAgICAgICAgc3BlY0ltYWdlOiB0aGlzLmJhdGNoRGF0YS5zcGVjSW1hZ2UsCiAgICAgICAgICBpbnZlbnRvcnk6IHRoaXMuYmF0Y2hEYXRhLmludmVudG9yeSwKICAgICAgICAgIHNrdU5hbWU6ICIiLAogICAgICAgICAgc2t1Q29kZTogIiIsCiAgICAgICAgICBwcmljZTogdGhpcy5iYXRjaERhdGEucHJpY2UsCiAgICAgICAgICBvcmlnaW5hbFByaWNlOiB0aGlzLmJhdGNoRGF0YS5vcmlnaW5hbFByaWNlLAogICAgICAgICAgc2t1SW5kZXg6IGl0ZW0uc3BsaXQoIiwiKSwKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGRvRXhjaGFuZ2UoYXJyLCBpbmRleCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycltpbmRleF0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLnJlc3VsdFtpbmRleF0gPSBhcnJbaW5kZXhdW2ldOwogICAgICAgIGlmIChpbmRleCAhPSBhcnIubGVuZ3RoIC0gMSkgewogICAgICAgICAgdGhpcy5kb0V4Y2hhbmdlKGFyciwgaW5kZXggKyAxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2godGhpcy5yZXN1bHQuam9pbigiLCIpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzaG93QmF0Y2hEYXRhRm4oKSB7CiAgICAgIGlmICh0aGlzLmFkZEVkaXREYXRhLmxpc3QubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IGDor7fmt7vliqDop4TmoLzlsZ7mgKfvvIFgLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGJhdGNoSW1nU3VjRm4oaW1nKSB7CiAgICAgIHRoaXMuYmF0Y2hEYXRhLnNwZWNJbWFnZSA9IGltZzsKICAgIH0sCiAgICBhZGRQcm9kdWN0Rm4oKSB7CiAgICAgIHRoaXMuYWRkRWRpdERhdGEgPSB7CiAgICAgICAgZXhwSWQ6ICIiLAogICAgICAgIGNhdGVnb3J5SWQ6ICIiLAogICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgIGNvdmVySW1hZ2U6ICIiLAogICAgICAgIGJhY2tJbWFnZTogIiIsCiAgICAgICAgaWQ6ICIiLAogICAgICAgIGltYWdlczogW10sCiAgICAgICAgaW52ZW50b3J5OiAiIiwKICAgICAgICBpc0V4aXN0TWFueVNwZWM6ICIiLAogICAgICAgIGlzU2hlbHZlczogIiIsCiAgICAgICAgbW9kZTogIiIsCiAgICAgICAgb3JpZ2luYWxQcmljZTogIiIsCiAgICAgICAgcHJpY2U6ICIiLAogICAgICAgIGxhc3RJbnZlbnRvcnk6IiIsCiAgICAgICAgc2ltcGxlRGVzYzogIiIsCiAgICAgICAgbGlzdDogW10sCiAgICAgICAgc3BlY0xpc3Q6IFtdLAogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAvLyBwYXJ0c0lkOicnLAogICAgICAgIHN1cHBsaWVySWQ6ICIiLAogICAgICAgIC8vIGdyb3VwSG91cnM6MSwKICAgICAgICBncm91cE51bTogMSwKICAgICAgICBhY3Rpdml0eVRpbWU6IFtdLAogICAgICAgIGFjdGl2aXR5U3RhcnRUaW1lOiAiIiwKICAgICAgICBhY3Rpdml0eUVuZFRpbWU6ICIiLAogICAgICB9OwogICAgfSwKICAgIHN1Ym1pdEZuKCkgewogICAgICBjb25zdCBwb3N0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5hZGRFZGl0RGF0YSkpOwogICAgICBwb3N0RGF0YS5vcmlnaW5hbFByaWNlID0gTnVtYmVyKHBvc3REYXRhLm9yaWdpbmFsUHJpY2UpOwogICAgICBwb3N0RGF0YS5sYXN0SW52ZW50b3J5ID0gTnVtYmVyKHBvc3REYXRhLmxhc3RJbnZlbnRvcnkpCiAgICAgIGNvbnNvbGUubG9nKHBvc3REYXRhLCAiMDAwIik7CiAgICAgIGxldCBsaXN0RmxhZyA9IHRydWU7CiAgICAgIGxldCBzcGVjTGlzdEZsYWcgPSB0cnVlOwoKICAgICAgLy8g6KeE5qC85pWw5o2u6aqM6K+BCiAgICAgIGlmICh0aGlzLmFkZEVkaXREYXRhLmlzRXhpc3RNYW55U3BlYyA9PSAxKSB7CiAgICAgICAgaWYgKHRoaXMuYWRkRWRpdERhdGEubGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgbGlzdEZsYWcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IGDor7fmt7vliqDop4TmoLzlsZ7mgKfvvIFgLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgIHNwZWNMaXN0RmxhZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogYOivt+a3u+WKoOWVhuWTgeinhOagvO+8gWAsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IHRoaXMuYWRkRWRpdERhdGEubGlzdC5sZW5ndGg7IGkgPCBqOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLmFkZEVkaXREYXRhLmxpc3RbaV0udmFsdWUubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgbGlzdEZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgIG1lc3NhZ2U6IGDor7fmt7vliqDigJwke3RoaXMuYWRkRWRpdERhdGEubGlzdFtpXS5uYW1lfeKAneinhOagvOWxnuaAp+WAvOaIluiAheWIoOmZpOivpeinhOagvOWxnuaAp++8gWAsCiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmFkZEVkaXREYXRhLmxpc3RbaV0udmFsdWUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICAgICAgICBpZiAoaXRlbSA9PSAiIikgewogICAgICAgICAgICAgIGxpc3RGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiBg4oCcJHt0aGlzLmFkZEVkaXREYXRhLmxpc3RbaV0ubmFtZX3igJ3op4TmoLzlsZ7mgKfnrKwkewogICAgICAgICAgICAgICAgICBpbmRleCArIDEKICAgICAgICAgICAgICAgIH3kuKrlgLzkuLrnqbrvvIzor7fliKDpmaTmiJbovpPlhaXlgLzvvIFgLAogICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgbSA9IDAsIG4gPSB0aGlzLmFkZEVkaXREYXRhLnNwZWNMaXN0Lmxlbmd0aDsgbSA8IG47IG0rKykgewogICAgICAgICAgaWYgKHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3RbbV0uc2t1SW5kZXguaW5kZXhPZigiIikgPiAtMSkgewogICAgICAgICAgICBzcGVjTGlzdEZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgIG1lc3NhZ2U6IGDnrKwkewogICAgICAgICAgICAgICAgbSAtIDAgKyAxCiAgICAgICAgICAgICAgfeS4quWVhuWTgeinhOagvOacieinhOagvOWxnuaAp+acqumAieaLqe+8jOivt+mAieaLqeWQjuWGjeaPkOS6pO+8gWAsCiAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwb3N0RGF0YS5zcGVjTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICBsZXQgbmFtZSA9ICIiOwogICAgICAgICAgaXRlbS5za3VJbmRleC5mb3JFYWNoKChpdGVtMiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgbmFtZSArPSBwb3N0RGF0YS5saXN0W2luZGV4XS52YWx1ZVtOdW1iZXIoaXRlbTIpXSArICIsIjsKICAgICAgICAgIH0pOwogICAgICAgICAgaXRlbS5za3VOYW1lID0gbmFtZTsKICAgICAgICAgIGl0ZW0uc2t1TmFtZSA9IGl0ZW0uc2t1TmFtZS5yZXBsYWNlKC9cLCQvLCAiIik7CiAgICAgICAgICBpdGVtLnNrdUluZGV4ID0gaXRlbS5za3VJbmRleC5qb2luKCIsIik7CiAgICAgICAgfSk7CiAgICAgICAgcG9zdERhdGEubGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS52YWx1ZS5qb2luKCIsIik7CiAgICAgICAgfSk7CiAgICAgICAgcG9zdERhdGEuaW52ZW50b3J5ID0gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGlmICghbGlzdEZsYWcgfHwgIXNwZWNMaXN0RmxhZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5hZGRFZGl0RGF0YS5pc0V4aXN0TWFueVNwZWMgPT09IDEpIHsKICAgICAgICBwb3N0RGF0YS5zcGVjSW5mb0xpc3QgPSBwb3N0RGF0YS5saXN0LnNsaWNlKCk7CiAgICAgICAgcG9zdERhdGEuc2t1SW5mb0xpc3QgPSBwb3N0RGF0YS5zcGVjTGlzdC5zbGljZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHBvc3REYXRhLnNwZWNJbmZvTGlzdCA9IFtdOwogICAgICAgIHBvc3REYXRhLnNrdUluZm9MaXN0ID0gW107CiAgICAgIH0KICAgICAgLy8gcG9zdERhdGEucmV3YXJkSW5mb0xpc3QgPSB0aGlzLmVkaXRMZXZlbERhdGE7CiAgICAgIC8vIHBvc3REYXRhLnJld2FyZEluZm9MaXN0Lm1hcCgoaXRlbSkgPT4gewogICAgICAvLyAgIGRlbGV0ZSBpdGVtLm5hbWU7CiAgICAgIC8vIH0pOwogICAgICBkZWxldGUgcG9zdERhdGEubGlzdDsKICAgICAgZGVsZXRlIHBvc3REYXRhLnNwZWNMaXN0OwogICAgICBkZWxldGUgcG9zdERhdGEuY2F0ZWdvcnlOYW1lOwogICAgICBkZWxldGUgcG9zdERhdGEuY3JlYXRlVGltZTsKCiAgICAgIGlmICghcG9zdERhdGEuY2F0ZWdvcnlJZCB8fCBwb3N0RGF0YS5jYXRlZ29yeUlkLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogYOivt+mAieaLqeWVhuWTgeWIhuexu++8gWAsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8qIGlmKHRoaXMuYWRkRWRpdERhdGEudHlwZSAhPT0gMyl7CgkJIGlmICghcG9zdERhdGEuY2F0ZWdvcnlJZCB8fCBwb3N0RGF0YS5jYXRlZ29yeUlkLmxlbmd0aCA9PT0gMCkgewoJCQl0aGlzLiRtZXNzYWdlKHsKCQkJICBzaG93Q2xvc2U6IHRydWUsCgkJCSAgbWVzc2FnZTogYOivt+mAieaLqeWVhuWTgeWIhuexu++8gWAsCgkJCSAgdHlwZTogIndhcm5pbmciLAoJCQl9KTsKCQkJcmV0dXJuOwoJCSAgfQoJICB9ZWxzZXsKCQkgIGlmICghcG9zdERhdGEucGFydHNJZCB8fCBwb3N0RGF0YS5wYXJ0c0lkLmxlbmd0aCA9PT0gMCkgewoJCQkJdGhpcy4kbWVzc2FnZSh7CgkJCQkgIHNob3dDbG9zZTogdHJ1ZSwKCQkJCSAgbWVzc2FnZTogYOivt+mAieaLqeWVhuWTgeWIhuexu++8gWAsCgkJCQkgIHR5cGU6ICJ3YXJuaW5nIiwKCQkJCX0pOwoJCQkJcmV0dXJuOwoJCSAgIH0KCSAgfSAqLwoKICAgICAgaWYgKCF0aGlzLmFkZEVkaXREYXRhLnN1cHBsaWVySWQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IGDor7fpgInmi6nkvpvlupTllYbvvIFgLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBwb3N0RGF0YS5jYXRlZ29yeUlkID0gcG9zdERhdGEuY2F0ZWdvcnlJZC5wb3AoKTsKICAgICAgcG9zdERhdGEuaW1hZ2VzID0gcG9zdERhdGEuaW1hZ2VzLmpvaW4oIiwiKTsKICAgICAgcG9zdERhdGEuaWQgPSB0aGlzLnByb2R1Y3RJZCA/IHRoaXMucHJvZHVjdElkIDogdW5kZWZpbmVkOwogICAgICBwb3N0RGF0YS5hY3Rpdml0eVN0YXJ0VGltZSA9IHBvc3REYXRhLmFjdGl2aXR5VGltZVswXTsKICAgICAgcG9zdERhdGEuYWN0aXZpdHlFbmRUaW1lID0gcG9zdERhdGEuYWN0aXZpdHlUaW1lWzFdOwogICAgICBjb25zb2xlLmxvZyhwb3N0RGF0YSk7CiAgICAgIC8vIHJldHVybgogICAgICB0aGlzLnN1Ym1pdEluZyA9IHRydWU7CiAgICAgIGVkaXRQcm9kdWN0Rm4ocG9zdERhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc3VibWl0SW5nID0gZmFsc2U7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAiMDAwIikgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nOaIkOWKn++8gSIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5lZGl0QWRkVmFsSXRlbS5zcGxpY2UoMCwgdGhpcy5lZGl0QWRkVmFsSXRlbS5sZW5ndGgpOwogICAgICAgICAgICBpZiAodGhpcy5wcm9kdWN0SWQpIHsKICAgICAgICAgICAgICB0aGlzLmdldFByb2R1Y3REZXRhaWxGbigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zdWJtaXRJbmcgPSBmYWxzZTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0pOwogICAgfSwKICAgIHVwTG9hZFNwY2VJbWdGbihpbWcsIGluZGV4KSB7CiAgICAgIHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3RbaW5kZXhdLnNwZWNJbWFnZSA9IGltZzsKICAgIH0sCiAgICBhZGRTcGVjSXRlbUZuKCkgewogICAgICBsZXQgc3BlY0xpc3RNb3JlTGVuZ3RoID0gMTsKICAgICAgaWYgKHRoaXMuYWRkRWRpdERhdGEubGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+WFiOa3u+WKoOinhOagvOWxnuaAp+WSjOinhOagvOWxnuaAp+WAvO+8gSIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuYWRkRWRpdERhdGEubGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgc3BlY0xpc3RNb3JlTGVuZ3RoID0gc3BlY0xpc3RNb3JlTGVuZ3RoICogaXRlbS52YWx1ZS5sZW5ndGg7CiAgICAgIH0pOwogICAgICBpZiAodGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdC5sZW5ndGggPj0gc3BlY0xpc3RNb3JlTGVuZ3RoKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5oKo5re75Yqg55qE5ZWG5ZOB6KeE5qC85bey6L6+5Yiw5pyA5aSn5pWw6YeP77yBIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdC5wdXNoKHsKICAgICAgICBzcGVjSW1hZ2U6ICIiLAogICAgICAgIHNrdU5hbWU6ICIiLAogICAgICAgIGludmVudG9yeTogMCwKICAgICAgICBza3VDb2RlOiAiIiwKICAgICAgICBwcmljZTogMCwKICAgICAgICBvcmlnaW5hbFByaWNlOiAwLAogICAgICAgIHNrdUluZGV4OiBBcnJheSh0aGlzLmFkZEVkaXREYXRhLmxpc3QubGVuZ3RoKS5maWxsKCIiKSwKICAgICAgfSk7CiAgICB9LAogICAgYWRkTGlzdEl0ZW1GbigpIHsKICAgICAgdGhpcy5hZGRFZGl0RGF0YS5saXN0LnB1c2goeyBuYW1lOiAiIiwgdmFsdWU6IFtdIH0pOwogICAgICB0aGlzLmFkZEVkaXREYXRhLnNwZWNMaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpdGVtLnNrdUluZGV4LnB1c2goIiIpOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxMaXN0VmFsdUl0ZW1GbihpbmRleCwgaW5kZXgyKSB7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmFkZEVkaXREYXRhLnNwZWNMaXN0Lmxlbmd0aDsgaS0tOyApIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygn5ZWG5ZOB6KeE5qC85YC877yaJyArIHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3RbaV0uc2t1SW5kZXhbaW5kZXhdLCAn6KeE5qC877yaJyArIGluZGV4LCAn6KeE5qC85YC877yaJyArIGluZGV4MikKICAgICAgICBpZiAodGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdFtpXS5za3VJbmRleFtpbmRleF0gIT0gIiIpIHsKICAgICAgICAgIGlmICh0aGlzLmFkZEVkaXREYXRhLnNwZWNMaXN0W2ldLnNrdUluZGV4W2luZGV4XSA9PSBpbmRleDIpIHsKICAgICAgICAgICAgdGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdFtpXSkgewogICAgICAgICAgICBpZiAodGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdFtpXS5za3VJbmRleFtpbmRleF0gPiBpbmRleDIpIHsKICAgICAgICAgICAgICB0aGlzLmFkZEVkaXREYXRhLnNwZWNMaXN0W2ldLnNrdUluZGV4W2luZGV4XSAtPSAxOwogICAgICAgICAgICAgIHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3RbaV0uc2t1SW5kZXhbaW5kZXhdICs9ICIiOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuYWRkRWRpdERhdGEubGlzdFtpbmRleF0udmFsdWUuc3BsaWNlKGluZGV4MiwgMSk7CiAgICAgIGNvbnN0IGRlbEluZGV4ID0gdGhpcy5lZGl0QWRkVmFsSXRlbS5pbmRleE9mKGluZGV4ICsgIiwiICsgaW5kZXgyKTsKICAgICAgLy8gdGhpcy5lZGl0QWRkVmFsSXRlbS5zcGxpY2UoZGVsSW5kZXgsIDEpCiAgICB9LAogICAgYWRkTGlzdFZhbEZuKGluZGV4KSB7CiAgICAgIGNvbnN0IGRlbEluZGV4ID0gdGhpcy5lZGl0QWRkVmFsSXRlbS5pbmRleE9mKAogICAgICAgIGluZGV4ICsgIiwiICsgdGhpcy5hZGRFZGl0RGF0YS5saXN0W2luZGV4XS52YWx1ZS5sZW5ndGgKICAgICAgKTsKICAgICAgaWYgKGRlbEluZGV4ID09IC0xKSB7CiAgICAgICAgdGhpcy5lZGl0QWRkVmFsSXRlbS5wdXNoKAogICAgICAgICAgaW5kZXggKyAiLCIgKyB0aGlzLmFkZEVkaXREYXRhLmxpc3RbaW5kZXhdLnZhbHVlLmxlbmd0aAogICAgICAgICk7CiAgICAgIH0KICAgICAgdGhpcy5hZGRFZGl0RGF0YS5saXN0W2luZGV4XS52YWx1ZS5wdXNoKCIiKTsKICAgIH0sCiAgICBkZWxMaXN0Rm4oaW5kZXgpIHsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3QubGVuZ3RoOyBpLS07ICkgewogICAgICAgIHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3RbaV0uc2t1SW5kZXguc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBpZiAodGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdFtpXS5za3VJbmRleFtpbmRleF0pIHsKICAgICAgICAgIHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3Quc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmFkZEVkaXREYXRhLmxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICBkZWxTcGVjRm4oaW5kZXgpIHsKICAgICAgdGhpcy5hZGRFZGl0RGF0YS5zcGVjTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIHVwbG9hZFN1Y0ZuKGltZykgewogICAgICB0aGlzLmFkZEVkaXREYXRhLmNvdmVySW1hZ2UgPSBpbWc7CiAgICB9LAogICAgdXBsb2FkU3VjRm4yKGltZykgewogICAgICB0aGlzLmFkZEVkaXREYXRhLmJhY2tJbWFnZSA9IGltZzsKICAgIH0sCiAgICB1cGxvYWRJbWdzU3VjRm4oaW1nKSB7CiAgICAgIHRoaXMuYWRkRWRpdERhdGEuaW1hZ2VzLnB1c2goaW1nKTsKICAgIH0sCiAgICBkZWxldGVJbWdGbihpbmRleCkgewogICAgICB0aGlzLmFkZEVkaXREYXRhLmltYWdlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmFkZEVkaXREYXRhLmltYWdlcyxpbmRleCkKICAgIH0sCiAgICBnZXRQcm9kdWN0RGV0YWlsRm4oKSB7CiAgICAgIGlmICghdGhpcy5wcm9kdWN0SWQpIHJldHVybjsKICAgICAgdGhpcy5hZGRFZGl0RGF0YS5pbWFnZXMuc3BsaWNlKDAsIHRoaXMuYWRkRWRpdERhdGEuaW1hZ2VzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWRkRWRpdERhdGEubGlzdC5zcGxpY2UoMCwgdGhpcy5hZGRFZGl0RGF0YS5saXN0Lmxlbmd0aCk7CiAgICAgIHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3Quc3BsaWNlKDAsIHRoaXMuYWRkRWRpdERhdGEuc3BlY0xpc3QubGVuZ3RoKTsKICAgICAgZ2V0UHJvZHVjdERldGFpbEZuKHsgaWQ6IHRoaXMucHJvZHVjdElkIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IHJlc0RhdGEgPSB0aGlzLnJlc0RhdGFGbihyZXMpOwogICAgICAgIGlmICghcmVzRGF0YS5zcGVjSW5mb0xpc3QpIHsKICAgICAgICAgIHJlc0RhdGEuc3BlY0luZm9MaXN0ID0gW107CiAgICAgICAgfQogICAgICAgIGlmICghcmVzRGF0YS5za3VJbmZvTGlzdCkgewogICAgICAgICAgcmVzRGF0YS5za3VJbmZvTGlzdCA9IFtdOwogICAgICAgIH0KICAgICAgICBpZiAocmVzRGF0YS5pc0V4aXN0TWFueVNwZWMgPT0gMSAmJiByZXNEYXRhLnNwZWNJbmZvTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICByZXNEYXRhLnNwZWNJbmZvTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgIGl0ZW0udmFsdWUgPSBpdGVtLnZhbHVlLnNwbGl0KCIsIik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc0RhdGEuaXNFeGlzdE1hbnlTcGVjID09IDEgJiYgcmVzRGF0YS5za3VJbmZvTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICByZXNEYXRhLnNrdUluZm9MaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0uc2t1SW5kZXgpIHsKICAgICAgICAgICAgICBpdGVtLnNrdUluZGV4ID0gaXRlbS5za3VJbmRleC5zcGxpdCgiLCIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGl0ZW0uc2t1SW5kZXggPSBbXTsKICAgICAgICAgICAgICBpZiAoaXRlbS5za3VOYW1lKSB7CiAgICAgICAgICAgICAgICBpdGVtLnNrdU5hbWUuc3BsaXQoIiwiKS5mb3JFYWNoKChpdGVtMiwgaW5kZXgyKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHBvc0luZGV4ID0KICAgICAgICAgICAgICAgICAgICByZXNEYXRhLnNwZWNJbmZvTGlzdFtpbmRleDJdLnZhbHVlLmluZGV4T2YoaXRlbTIpOwogICAgICAgICAgICAgICAgICBpZiAocG9zSW5kZXggPiAtMSkgewogICAgICAgICAgICAgICAgICAgIGl0ZW0uc2t1SW5kZXgucHVzaChTdHJpbmcocG9zSW5kZXgpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5hZGRFZGl0RGF0YS5hY3Rpdml0eVRpbWUgPQogICAgICAgICAgcmVzRGF0YS5hY3Rpdml0eVN0YXJ0VGltZSAmJiByZXNEYXRhLmFjdGl2aXR5RW5kVGltZQogICAgICAgICAgICA/IFtyZXNEYXRhLmFjdGl2aXR5U3RhcnRUaW1lLCByZXNEYXRhLmFjdGl2aXR5RW5kVGltZV0KICAgICAgICAgICAgOiBbXTsKICAgICAgICB0aGlzLmFkZEVkaXREYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5hZGRFZGl0RGF0YSwgcmVzRGF0YSwgewogICAgICAgICAgLy8gcHJvdmluY2VQcmljZToKICAgICAgICAgIC8vICAgcmVzRGF0YS50eXBlID09PSAzID8gcmVzRGF0YS5wcm9kdWN0QWdlbnQucHJvUHJpY2UgOiB1bmRlZmluZWQsCiAgICAgICAgICAvLyBjaXR5UHJpY2U6CiAgICAgICAgICAvLyAgIHJlc0RhdGEudHlwZSA9PT0gMyA/IHJlc0RhdGEucHJvZHVjdEFnZW50LmNpdHlQcmljZSA6IHVuZGVmaW5lZCwKICAgICAgICAgIC8vIGFyZWFQcmljZToKICAgICAgICAgIC8vICAgcmVzRGF0YS50eXBlID09PSAzID8gcmVzRGF0YS5wcm9kdWN0QWdlbnQuYXJlYVByaWNlIDogdW5kZWZpbmVkLAogICAgICAgICAgLy8gZGVhbGVyUHJpY2U6CiAgICAgICAgICAvLyAgIHJlc0RhdGEudHlwZSA9PT0gMyA/IHJlc0RhdGEucHJvZHVjdEFnZW50LmRlYWxlclByaWNlIDogdW5kZWZpbmVkLAogICAgICAgICAgLy8gcHJvdmluY2VUaGlnaDoKICAgICAgICAgIC8vICAgcmVzRGF0YS50eXBlID09PSAzID8gcmVzRGF0YS5wcm9kdWN0QWdlbnQucHJvVGhpZ2ggOiB1bmRlZmluZWQsCiAgICAgICAgICAvLyBjaXR5VGhpZ2g6CiAgICAgICAgICAvLyAgIHJlc0RhdGEudHlwZSA9PT0gMyA/IHJlc0RhdGEucHJvZHVjdEFnZW50LmNpdHlUaGlnaCA6IHVuZGVmaW5lZCwKICAgICAgICAgIC8vIGFyZWFUaGlnaDoKICAgICAgICAgIC8vICAgcmVzRGF0YS50eXBlID09PSAzID8gcmVzRGF0YS5wcm9kdWN0QWdlbnQuYXJlYVRoaWdoIDogdW5kZWZpbmVkLAogICAgICAgICAgLy8gZGVhbGVyVGhpZ2g6CiAgICAgICAgICAvLyAgIHJlc0RhdGEudHlwZSA9PT0gMyA/IHJlc0RhdGEucHJvZHVjdEFnZW50LmRlYWxlclRoaWdoIDogdW5kZWZpbmVkLAogICAgICAgICAgLy8gcHJvdmluY2VCZWdpbk51bToKICAgICAgICAgIC8vICAgcmVzRGF0YS50eXBlID09PSAzID8gcmVzRGF0YS5wcm9kdWN0QWdlbnQucHJvTnVtIDogdW5kZWZpbmVkLAogICAgICAgICAgLy8gY2l0eUJlZ2luTnVtOgogICAgICAgICAgLy8gICByZXNEYXRhLnR5cGUgPT09IDMgPyByZXNEYXRhLnByb2R1Y3RBZ2VudC5jaXR5TnVtIDogdW5kZWZpbmVkLAogICAgICAgICAgLy8gYXJlYUJlZ2luTnVtOgogICAgICAgICAgLy8gICByZXNEYXRhLnR5cGUgPT09IDMgPyByZXNEYXRhLnByb2R1Y3RBZ2VudC5hcmVhTnVtIDogdW5kZWZpbmVkLAogICAgICAgICAgLy8gZGVhbGVyQmVnaW5OdW06CiAgICAgICAgICAvLyAgIHJlc0RhdGEudHlwZSA9PT0gMyA/IHJlc0RhdGEucHJvZHVjdEFnZW50LmRlYWxlck51bSA6IHVuZGVmaW5lZCwKICAgICAgICAgIC8vIHByb2R1Y3RBZ2VudDogdW5kZWZpbmVkLAogICAgICAgICAgY2F0ZWdvcnlJZDogcmVzRGF0YS5jYXRlZ29yeUlkcywKICAgICAgICAgIGltYWdlczogcmVzRGF0YS5pbWFnZXMuc3BsaXQoIiwiKSwKICAgICAgICAgIGxpc3Q6CiAgICAgICAgICAgIHJlc0RhdGEuc3BlY0luZm9MaXN0ICYmIHJlc0RhdGEuc3BlY0luZm9MaXN0Lmxlbmd0aCA+IDAKICAgICAgICAgICAgICA/IHJlc0RhdGEuc3BlY0luZm9MaXN0CiAgICAgICAgICAgICAgOiBbXSwKICAgICAgICAgIHNwZWNMaXN0OgogICAgICAgICAgICByZXNEYXRhLnNrdUluZm9MaXN0ICYmIHJlc0RhdGEuc2t1SW5mb0xpc3QubGVuZ3RoID4gMAogICAgICAgICAgICAgID8gcmVzRGF0YS5za3VJbmZvTGlzdAogICAgICAgICAgICAgIDogW10sCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5lZGl0TGV2ZWxEYXRhID0gcmVzRGF0YS5yZXdhcmRJbmZvTGlzdDsKICAgICAgICB0aGlzLmxldmVsTGlzdC5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5lZGl0TGV2ZWxEYXRhW2luZGV4XS5sZXZlbElkID09PSBpdGVtLmlkKSB7CiAgICAgICAgICAgIHRoaXMuZWRpdExldmVsRGF0YVtpbmRleF0ubmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAvLyDlpoLmnpzmmK/oo4XmnLrllYblk4Eg6K6+5a6a5YiG57G7aWQg5Li66KOF5py65YiG57G755qEaWQKICAgICAgICAvLyBpZih0aGlzLmFkZEVkaXREYXRhLnR5cGUgPT09IDMpewogICAgICAgIC8vIAl0aGlzLmFkZEVkaXREYXRhLmNhdGVnb3J5SWQgPSB0aGlzLmFkZEVkaXREYXRhLnBhcnRzSWQKICAgICAgICAvLyB9CiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAweA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product/product-detail","sourcesContent":["<template>\n  <div class=\"content_box\">\n    <first-title title=\"新增/编辑商品\" />\n    <div class=\"edit_view\">\n      <el-form ref=\"form\" :model=\"addEditData\" label-width=\"110px\">\n        <el-form-item class=\"float_item\" label=\"是否多规格\">\n          <el-select\n            :disabled=\"addEditData.id != ''\"\n            v-model=\"addEditData.isExistManySpec\"\n            style=\"width: 300px\"\n            placeholder=\"请选择是否多规格\"\n          >\n            <el-option\n              v-for=\"item in isExistManySpec\"\n              :key=\"item.val\"\n              :label=\"item.name\"\n              :value=\"item.val\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item class=\"float_item\" label=\"商品型号\">\n          <el-input\n            v-model=\"addEditData.mode\"\n            placeholder=\"请输入商品型号\"\n            style=\"width: 300px\"\n          />\n        </el-form-item>\n        <el-form-item class=\"float_item\" style=\"height: auto\" label=\"商品名称\">\n          <el-input\n            v-model=\"addEditData.title\"\n            rows=\"3\"\n            type=\"textarea\"\n            style=\"width: 300px\"\n            resize=\"none\"\n          />\n        </el-form-item>\n        <el-form-item class=\"float_item\" style=\"height: auto\" label=\"商品简述\">\n          <el-input\n            v-model=\"addEditData.simpleDesc\"\n            rows=\"3\"\n            type=\"textarea\"\n            style=\"width: 300px\"\n            resize=\"none\"\n          />\n        </el-form-item>\n        <div style=\"width: 100%; height: auto; overflow: hidden; float: left\">\n          <el-form-item\n            class=\"float_item\"\n            style=\"height: auto\"\n            label=\"商品封面图\"\n          >\n            <upload-img\n              width=\"80px\"\n              height=\"80px\"\n              :img=\"addEditData.coverImage\"\n              @uploadSuc=\"uploadSucFn\"\n            />\n          </el-form-item>\n          <el-form-item\n            class=\"float_item\"\n            style=\"height: auto\"\n            label=\"商品多图\"\n          >\n            <upload-imgs\n              :imgs=\"addEditData.images\"\n              @uploadSuc=\"uploadImgsSucFn\"\n              @deleteImg=\"deleteImgFn\"\n            />\n          </el-form-item>\n        </div>\n        <div style=\"width: 100%; height: auto; overflow: hidden; float: left\">\n          <el-form-item\n            class=\"float_item\"\n            style=\"height: auto\"\n            label=\"商品背景图\"\n          >\n            <upload-img\n              width=\"80px\"\n              height=\"80px\"\n              :img=\"addEditData.backImage\"\n              @uploadSuc=\"uploadSucFn2\"\n            />\n            <span style=\"font-size: 12px; color: #999\"\n              >注：鼠标移入显示的图片</span\n            >\n          </el-form-item>\n          <el-form-item class=\"float_item\" label=\"商品类型\">\n            <el-select\n              v-model=\"addEditData.type\"\n              style=\"width: 300px\"\n              placeholder=\"请选择商品类型\"\n              @change=\"productTypeChange\"\n            >\n              <el-option\n                v-for=\"item in types\"\n                :key=\"item.val\"\n                :label=\"item.name\"\n                :value=\"item.val\"\n              />\n            </el-select>\n          </el-form-item>\n        </div>\n\n        <el-form-item class=\"float_item\" label=\"商品分类\">\n          <el-cascader\n            style=\"width: 300px\"\n            v-model=\"addEditData.categoryId\"\n            :class=\"{ el_cascader: addEditData.categoryId != '' }\"\n            :placeholder=\"\n              addEditData.categoryId\n                ? addEditData.categoryName\n                : '请选择商品分类'\n            \"\n            expand-trigger=\"hover\"\n            :props=\"categoryList\"\n            :show-all-levels=\"false\"\n            clearable\n            :disabled=\"!addEditData.type\"\n          />\n        </el-form-item>\n        <!-- <el-form-item class=\"float_item\" label=\"商品分类\" v-if=\"addEditData.type === 3\">\n\t\t\t<el-select v-model=\"addEditData.partsId\" filterable placeholder=\"请选择配件分类\" style=\"width: 300px;\" :disabled=\"!addEditData.type\">\n\t\t\t\t<el-option v-for=\"item in categoryPartsList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t</el-select>\n\t\t\t<el-cascader style=\"width: 300px\" v-model=\"addEditData.partsId\" :class=\"{ el_cascader: addEditData.partsId != '' }\" placeholder=\"请选择配件分类\" expand-trigger=\"hover\" :props=\"categoryList\" :show-all-levels=\"false\" clearable :disabled=\"!addEditData.type\" />\n        </el-form-item> -->\n\n        <el-form-item class=\"float_item\" label=\"上/下架\">\n          <el-select\n            v-model=\"addEditData.isShelves\"\n            style=\"width: 300px\"\n            placeholder=\"请选择上/下架\"\n          >\n            <el-option\n              v-for=\"item in isShelves\"\n              :key=\"item.val\"\n              :label=\"item.name\"\n              :value=\"item.val\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item class=\"float_item\" label=\"参考价(销售价)\" v-if=\"addEditData.isExistManySpec == 0\">\n          <el-input\n            v-model=\"addEditData.price\"\n            style=\"width: 300px\"\n            min=\"0\"\n            type=\"number\"\n          />\n        </el-form-item>\n        <el-form-item class=\"float_item\" label=\"运费\">\n          <el-select\n            v-model=\"addEditData.expId\"\n            style=\"width: 300px\"\n            clearable\n            placeholder=\"请选择运费模板\"\n          >\n            <el-option\n              v-for=\"item in expList\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item class=\"float_item\" label=\"供应商\">\n          <el-select\n            v-model=\"addEditData.supplierId\"\n            style=\"width: 300px\"\n            filterable\n            clearable\n            placeholder=\"请选择供应商\"\n          >\n            <el-option\n              v-for=\"item in supplierList\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n\n        <el-form-item class=\"float_item\" label=\"库存\" v-if=\"addEditData.isExistManySpec == 0\">\n          <el-input\n            v-model=\"addEditData.lastInventory\"\n            style=\"width: 300px\"\n            min=\"0\"\n            type=\"number\"\n            placeholder=\"请输入库存\"\n          />\n        </el-form-item>\n\n        <el-form-item class=\"float_item\" label=\"原价\" v-if=\"addEditData.isExistManySpec == 0\">\n          <el-input\n            v-model=\"addEditData.originalPrice\"\n            style=\"width: 300px\"\n            min=\"0\"\n            type=\"number\"\n            placeholder=\"请输入原价\"\n          />\n        </el-form-item>\n\n        <template v-if=\"addEditData.type === 2\">\n          <el-form-item\n            class=\"float_item\"\n            style=\"height: auto\"\n            label=\"拼团库存\"\n          >\n            <el-input-number\n              v-model=\"addEditData.groupNum\"\n              style=\"width: 300px\"\n            />\n          </el-form-item>\n\n          <!-- <el-form-item class=\"float_item\" style=\"height: auto\" label=\"拼团时长(H)\">\n\t\t  <el-input-number\n\t\t    v-model=\"addEditData.groupHours\"\n\t\t    style=\"width: 300px\"\n\t\t  />\n\t\t</el-form-item> -->\n\n          <el-form-item\n            class=\"float_item\"\n            style=\"height: auto\"\n            label=\"活动截止时间\"\n          >\n            <el-date-picker\n              v-model=\"addEditData.activityTime\"\n              class=\"mg_r15 mg_t10\"\n              type=\"datetimerange\"\n              value-format=\"yyyy-MM-dd HH:mm:ss\"\n              range-separator=\"至\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n            >\n            </el-date-picker>\n          </el-form-item>\n        </template>\n\n        <el-form-item\n          v-if=\"addEditData.isExistManySpec == 1\"\n          style=\"clear: both\"\n          label=\"商品规格属性\"\n        >\n          <el-table\n            class=\"list_table\"\n            :data=\"addEditData.list\"\n            border\n            style=\"width: 100%\"\n          >\n            <el-table-column label=\"规格名称(例如:颜色)\" width=\"150\">\n              <template slot-scope=\"scope\">\n                <el-input\n                  v-model=\"scope.row.name\"\n                  class=\"spec_name\"\n                  placeholder=\"填写规格名称\"\n                  @input=\"nameChange(scope.$index)\"\n                />\n              </template>\n            </el-table-column>\n            <el-table-column label=\"规格值(例如:白色,红色)\">\n              <template slot-scope=\"scope\">\n                <div\n                  v-for=\"(item, index) in scope.row.value\"\n                  :key=\"index\"\n                  class=\"value_item\"\n                >\n                  <div class=\"item\">\n                    <el-input\n                      v-model=\"scope.row.value[index]\"\n                      placeholder=\"规格值\"\n                      @input=\"valueChange(scope.$index, index)\"\n                    />\n                    <el-button\n                      v-if=\"\n                        !addEditData.id ||\n                        editAddValItem.indexOf(scope.$index + ',' + index) > -1\n                      \"\n                      type=\"danger\"\n                      size=\"small\"\n                      icon=\"el-icon-delete\"\n                      @click=\"delListValuItemFn(scope.$index, index)\"\n                    />\n                  </div>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"操作\"\n              width=\"180\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  @click=\"addListValFn(scope.$index)\"\n                  >添加规格值</el-button\n                >\n                <el-button\n                  v-if=\"!addEditData.id\"\n                  size=\"small\"\n                  type=\"danger\"\n                  @click=\"delListFn(scope.$index)\"\n                  >删除</el-button\n                >\n              </template>\n            </el-table-column>\n          </el-table>\n          <el-button\n            v-if=\"!addEditData.id\"\n            size=\"small\"\n            icon=\"el-icon-plus\"\n            style=\"margin-top: 15px\"\n            type=\"primary\"\n            @click=\"addListItemFn\"\n            >添加规格属性</el-button\n          >\n        </el-form-item>\n        <el-form-item v-if=\"addEditData.isExistManySpec == 1\" label=\"商品规格\">\n          <el-table\n            class=\"list_table\"\n            :data=\"addEditData.specList\"\n            border\n            style=\"width: 100%\"\n          >\n            <el-table-column label=\"规格组合\" width=\"440\">\n              <template slot-scope=\"scope\">\n                <template v-for=\"(item, index) in scope.row.skuIndex\">\n                  <el-select\n                    v-if=\"addEditData.list[index]\"\n                    :key=\"index\"\n                    v-model=\"scope.row.skuIndex[index]\"\n                    style=\"width: 120px\"\n                    :placeholder=\"`请选择${addEditData.list[index].name}`\"\n                  >\n                    <el-option\n                      v-for=\"(item2, index2) in addEditData.list[index].value\"\n                      :key=\"index2\"\n                      :label=\"item2\"\n                      :value=\"index2 + ''\"\n                    />\n                  </el-select>\n                </template>\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"规格图片\"\n              width=\"100px\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <upload-img\n                  width=\"80px\"\n                  height=\"80px\"\n                  :img=\"scope.row.specImage\"\n                  @uploadSuc=\"upLoadSpceImgFn($event, scope.$index)\"\n                />\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"规格编码\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <el-input v-model=\"scope.row.skuCode\" min=\"0\" type=\"text\" />\n              </template>\n            </el-table-column>\n\n            <el-table-column\n              v-if=\"addEditData.isExistManySpec == 1\"\n              label=\"参考价(销售价)\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <el-input v-model=\"scope.row.price\" min=\"0\" type=\"number\" />\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"原价\" align=\"center\" header-align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-input\n                  v-model=\"scope.row.originalPrice\"\n                  min=\"0\"\n                  type=\"number\"\n                />\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"库存\" align=\"center\" header-align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-input v-model=\"scope.row.inventory\" min=\"0\" type=\"number\" />\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"操作\" align=\"center\" header-align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"small\"\n                  type=\"danger\"\n                  @click=\"delSpecFn(scope.$index)\"\n                  >删除</el-button\n                >\n              </template>\n            </el-table-column>\n          </el-table>\n          <el-button\n            size=\"small\"\n            style=\"margin-top: 15px\"\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            @click=\"addSpecItemFn\"\n            >添加商品规格</el-button\n          >\n          <el-button\n            v-if=\"!addEditData.id\"\n            size=\"small\"\n            style=\"margin-top: 15px\"\n            type=\"success\"\n            icon=\"el-icon-plus\"\n            @click=\"showBatchDataFn\"\n            >批量生成所有规格</el-button\n          >\n        </el-form-item>\n        <el-form-item style=\"clear: both\" label=\"商品详情\">\n          <tinymce :key=\"addEditData.id\"\n            ref=\"ppp\"\n            :id=\"'agreement_' + addEditData.id\"\n            v-model=\"addEditData.content\"\n            :height=\"600\"\n          />\n        </el-form-item>\n        <el-form-item label=\"\">\n          <el-link\n            v-if=\"productId\"\n            style=\"margin-right: 10px\"\n            :href=\"`#/product/product-list?pageNo=${pageNo}&pageSize=${pageSize}`\"\n          >\n            <el-button type=\"primary\" plain icon=\"el-icon-d-arrow-left\"\n              >返回</el-button\n            >\n          </el-link>\n          <el-button type=\"primary\" :disabled=\"submitIng\" @click=\"submitFn\">{{\n            submitIng ? \"提交中...\" : \"确认提交\"\n          }}</el-button>\n          <span v-show=\"submitIng\" style=\"margin-left: 15px; color: #f56c6c\"\n            >提交中,请勿重复点击!</span\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <el-dialog\n      title=\"设置批量生成参数\"\n      :visible.sync=\"dialogVisible\"\n      width=\"600px\"\n    >\n      <div>\n        <el-form ref=\"form\" :model=\"batchData\" label-width=\"140px\">\n          <el-form-item label=\"批量规格图片\">\n            <upload-img\n              width=\"80px\"\n              height=\"80px\"\n              :img=\"batchData.specImage\"\n              @uploadSuc=\"batchImgSucFn\"\n            />\n          </el-form-item>\n          <el-form-item label=\"批量参考价\">\n            <el-input v-model=\"batchData.price\" min=\"0\" type=\"number\" />\n          </el-form-item>\n          <el-form-item label=\"批量规格库存\">\n            <el-input v-model=\"batchData.inventory\" min=\"0\" type=\"number\" />\n          </el-form-item>\n        </el-form>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"batchCreatFn\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport uploadImg from \"@/components/uploadImg/upload-img.vue\";\nimport uploadImgs from \"@/components/uploadImgs/upload-imgs.vue\";\nimport Tinymce from \"@/components/Tinymce\";\nimport {\n  getProductDetailFn,\n  queryProductCategoryFn,\n  editProductFn,\n  queryProductFittingCategoryFn,\n  querySupplierList,\n} from \"@/api/product.js\";\nimport { queryExpRuleFn } from \"@/api/system.js\";\nexport default {\n  name: \"ProductList\",\n  components: {\n    Tinymce,\n    uploadImg,\n    uploadImgs,\n  },\n  data() {\n    return {\n      pageNo: 0,\n      pageSize: 0,\n      submitIng: false,\n      productId: \"\",\n      dialogVisible: false,\n      editAddValItem: [],\n      types: [\n        { name: \"优选商品\", val: 1 },\n        { name: \"拼团产品\", val: 2 },\n        { name: \"配件\", val: 3 },\n        { name: \"机件\", val: 4 },\n      ],\n      isShelves: [\n        { name: \"上架\", val: 1 },\n        { name: \"下架\", val: 0 },\n      ],\n      isExistManySpec: [\n        { name: \"是\", val: 1 },\n        { name: \"否\", val: 0 },\n      ],\n      addEditData: {\n        expId: \"\",\n        categoryId: \"\",\n        content: \"\",\n        coverImage: \"\",\n        backImage: \"\",\n        id: \"\",\n        images: [],\n        inventory: \"\",\n        isExistManySpec: \"\",\n        isShelves: \"\",\n        mode: \"\",\n        price: 0,\n        simpleDesc: \"\",\n        list: [],\n        specList: [],\n        title: \"\",\n        type: \"\",\n        // partsId:'',\n        supplierId: \"\",\n        // groupHours:1,\n        groupNum: 1,\n        activityTime: [],\n        activityStartTime: \"\",\n        activityEndTime: \"\",\n        lastInventory:'',\n        originalPrice:''\n      },\n      supplierList: [], // 供应商列表\n      editLevelData: [],\n      expList: [],\n      batchData: {\n        specImage: \"\",\n        price: 0,\n        originalPrice: 0,\n        inventory: 0,\n      },\n      results: [],\n      result: [],\n      levelList: [],\n      categoryList: {\n        lazy: true,\n        checkStrictly: true,\n        lazyLoad(node, resolve) {\n          queryProductCategoryFn({ pid: node.value || 0 }).then((res) => {\n            const resData = res.data;\n            const nodes = resData.map((item) => ({\n              value: item.id,\n              label: item.name,\n            }));\n            // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n            resolve(nodes);\n          });\n        },\n      },\n      categoryPartsList: [],\n    };\n  },\n  mounted() {\n    this.productId = this.$route.query.id;\n    this.pageNo = this.$route.query.pageNo;\n    this.pageSize = this.$route.query.pageSize;\n    this.getInit();\n  },\n  created() {\n    this.queryProductFittingCategoryFn();\n  },\n  activated() {\n    // 解决组件被keep-alive无法更新数据\n    this.addProductFn();\n    this.productId = this.$route.query.id;\n    this.pageNo = this.$route.query.pageNo;\n    this.pageSize = this.$route.query.pageSize;\n    this.getInit();\n  },\n  watch: {\n    productId(newval) {\n      if (newval === undefined) {\n        this.$refs.ppp.setContent(\"\");\n      }\n    },\n  },\n  methods: {\n    // 获取\n    async getInit() {\n      await queryExpRuleFn({\n        pageNo: 1,\n        pageSize: 20,\n        name: \"\",\n      }).then((res) => {\n        const resData = this.resDataFn(res);\n        this.expList.splice(0, this.expList.length, ...resData.records);\n      });\n      this.getProductDetailFn();\n      this.getQuerySupplierList();\n    },\n    // 获取供应商列表\n    async getQuerySupplierList() {\n      const res = await querySupplierList({\n        pageNo: 1,\n        pageSize: 1000,\n      });\n      if (res.code === \"000\") {\n        this.supplierList = res.data.records;\n      }\n    },\n    // 产品类型选择\n    productTypeChange(e) {\n      this.addEditData.categoryId = \"\";\n    },\n    // 获取装机配件商品分类\n    async queryProductFittingCategoryFn() {\n      const res = await queryProductFittingCategoryFn();\n      if (res.code === \"000\") {\n        this.categoryPartsList = res.data;\n      }\n    },\n    //\n    cascaderChangeFn(val) {\n      // const endIndex = val.length - 1\n      // this.addEditData.categoryId = val[endIndex]\n    },\n    nameChange(index) {\n      this.addEditData.list[index].name = this.addEditData.list[\n        index\n      ].name.replace(/\\s+/g, \"\");\n    },\n    valueChange(index, index2) {\n      this.addEditData.list[index].value[index2] = this.addEditData.list[\n        index\n      ].value[index2].replace(/\\s+/g, \"\");\n    },\n    levelValueChange(index, key) {\n      this.editLevelData[index][key] = this.editLevelData[index][key].replace(\n        /\\s+/g,\n        \"\"\n      );\n    },\n    batchCreatFn() {\n      const arr = [];\n      this.result = [];\n      this.results = [];\n      this.addEditData.specList.splice(0, this.addEditData.specList.length);\n      this.addEditData.list.forEach((item) => {\n        const valArr = [];\n        item.value.forEach((item, index) => {\n          valArr.push(index + \"\");\n        });\n        arr.push(valArr);\n      });\n      this.doExchange(arr, 0);\n      this.results.forEach((item) => {\n        this.addEditData.specList.push({\n          specImage: this.batchData.specImage,\n          inventory: this.batchData.inventory,\n          skuName: \"\",\n          skuCode: \"\",\n          price: this.batchData.price,\n          originalPrice: this.batchData.originalPrice,\n          skuIndex: item.split(\",\"),\n        });\n      });\n      this.dialogVisible = false;\n    },\n    doExchange(arr, index) {\n      for (var i = 0; i < arr[index].length; i++) {\n        this.result[index] = arr[index][i];\n        if (index != arr.length - 1) {\n          this.doExchange(arr, index + 1);\n        } else {\n          this.results.push(this.result.join(\",\"));\n        }\n      }\n    },\n    showBatchDataFn() {\n      if (this.addEditData.list.length == 0) {\n        this.$message({\n          showClose: true,\n          message: `请添加规格属性！`,\n          type: \"warning\",\n        });\n        return;\n      }\n      this.dialogVisible = true;\n    },\n    batchImgSucFn(img) {\n      this.batchData.specImage = img;\n    },\n    addProductFn() {\n      this.addEditData = {\n        expId: \"\",\n        categoryId: \"\",\n        content: \"\",\n        coverImage: \"\",\n        backImage: \"\",\n        id: \"\",\n        images: [],\n        inventory: \"\",\n        isExistManySpec: \"\",\n        isShelves: \"\",\n        mode: \"\",\n        originalPrice: \"\",\n        price: \"\",\n        lastInventory:\"\",\n        simpleDesc: \"\",\n        list: [],\n        specList: [],\n        title: \"\",\n        // partsId:'',\n        supplierId: \"\",\n        // groupHours:1,\n        groupNum: 1,\n        activityTime: [],\n        activityStartTime: \"\",\n        activityEndTime: \"\",\n      };\n    },\n    submitFn() {\n      const postData = JSON.parse(JSON.stringify(this.addEditData));\n      postData.originalPrice = Number(postData.originalPrice);\n      postData.lastInventory = Number(postData.lastInventory)\n      console.log(postData, \"000\");\n      let listFlag = true;\n      let specListFlag = true;\n\n      // 规格数据验证\n      if (this.addEditData.isExistManySpec == 1) {\n        if (this.addEditData.list.length == 0) {\n          listFlag = false;\n          this.$message({\n            showClose: true,\n            message: `请添加规格属性！`,\n            type: \"warning\",\n          });\n        }\n        if (this.addEditData.specList.length == 0) {\n          specListFlag = false;\n          this.$message({\n            showClose: true,\n            message: `请添加商品规格！`,\n            type: \"warning\",\n          });\n        }\n        for (var i = 0, j = this.addEditData.list.length; i < j; i++) {\n          if (this.addEditData.list[i].value.length == 0) {\n            listFlag = false;\n            this.$message({\n              showClose: true,\n              message: `请添加“${this.addEditData.list[i].name}”规格属性值或者删除该规格属性！`,\n              type: \"warning\",\n            });\n            break;\n          }\n          this.addEditData.list[i].value.forEach((item, index) => {\n            console.log(index);\n            if (item == \"\") {\n              listFlag = false;\n              this.$message({\n                showClose: true,\n                message: `“${this.addEditData.list[i].name}”规格属性第${\n                  index + 1\n                }个值为空，请删除或输入值！`,\n                type: \"warning\",\n              });\n            }\n          });\n        }\n        for (var m = 0, n = this.addEditData.specList.length; m < n; m++) {\n          if (this.addEditData.specList[m].skuIndex.indexOf(\"\") > -1) {\n            specListFlag = false;\n            this.$message({\n              showClose: true,\n              message: `第${\n                m - 0 + 1\n              }个商品规格有规格属性未选择，请选择后再提交！`,\n              type: \"warning\",\n            });\n            break;\n          }\n        }\n\n        postData.specList.forEach((item) => {\n          let name = \"\";\n          item.skuIndex.forEach((item2, index) => {\n            name += postData.list[index].value[Number(item2)] + \",\";\n          });\n          item.skuName = name;\n          item.skuName = item.skuName.replace(/\\,$/, \"\");\n          item.skuIndex = item.skuIndex.join(\",\");\n        });\n        postData.list.forEach((item) => {\n          item.value = item.value.join(\",\");\n        });\n        postData.inventory = undefined;\n      }\n      if (!listFlag || !specListFlag) {\n        return;\n      }\n      if (this.addEditData.isExistManySpec === 1) {\n        postData.specInfoList = postData.list.slice();\n        postData.skuInfoList = postData.specList.slice();\n      } else {\n        postData.specInfoList = [];\n        postData.skuInfoList = [];\n      }\n      // postData.rewardInfoList = this.editLevelData;\n      // postData.rewardInfoList.map((item) => {\n      //   delete item.name;\n      // });\n      delete postData.list;\n      delete postData.specList;\n      delete postData.categoryName;\n      delete postData.createTime;\n\n      if (!postData.categoryId || postData.categoryId.length === 0) {\n        this.$message({\n          showClose: true,\n          message: `请选择商品分类！`,\n          type: \"warning\",\n        });\n        return;\n      }\n      /* if(this.addEditData.type !== 3){\n\t\t if (!postData.categoryId || postData.categoryId.length === 0) {\n\t\t\tthis.$message({\n\t\t\t  showClose: true,\n\t\t\t  message: `请选择商品分类！`,\n\t\t\t  type: \"warning\",\n\t\t\t});\n\t\t\treturn;\n\t\t  }\n\t  }else{\n\t\t  if (!postData.partsId || postData.partsId.length === 0) {\n\t\t\t\tthis.$message({\n\t\t\t\t  showClose: true,\n\t\t\t\t  message: `请选择商品分类！`,\n\t\t\t\t  type: \"warning\",\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t   }\n\t  } */\n\n      if (!this.addEditData.supplierId) {\n        this.$message({\n          showClose: true,\n          message: `请选择供应商！`,\n          type: \"warning\",\n        });\n        return;\n      }\n      postData.categoryId = postData.categoryId.pop();\n      postData.images = postData.images.join(\",\");\n      postData.id = this.productId ? this.productId : undefined;\n      postData.activityStartTime = postData.activityTime[0];\n      postData.activityEndTime = postData.activityTime[1];\n      console.log(postData);\n      // return\n      this.submitIng = true;\n      editProductFn(postData)\n        .then((res) => {\n          setTimeout(() => {\n            this.submitIng = false;\n          }, 1000);\n          if (res.code == \"000\") {\n            this.$message({\n              showClose: true,\n              message: \"操作成功！\",\n              type: \"success\",\n            });\n            this.editAddValItem.splice(0, this.editAddValItem.length);\n            if (this.productId) {\n              this.getProductDetailFn();\n            } else {\n              this.$router.go(-1);\n            }\n          }\n        })\n        .catch(() => {\n          setTimeout(() => {\n            this.submitIng = false;\n          }, 1000);\n        });\n    },\n    upLoadSpceImgFn(img, index) {\n      this.addEditData.specList[index].specImage = img;\n    },\n    addSpecItemFn() {\n      let specListMoreLength = 1;\n      if (this.addEditData.list.length == 0) {\n        this.$message({\n          showClose: true,\n          message: \"请先添加规格属性和规格属性值！\",\n          type: \"warning\",\n        });\n        return;\n      }\n      this.addEditData.list.forEach((item) => {\n        specListMoreLength = specListMoreLength * item.value.length;\n      });\n      if (this.addEditData.specList.length >= specListMoreLength) {\n        this.$message({\n          showClose: true,\n          message: \"您添加的商品规格已达到最大数量！\",\n          type: \"warning\",\n        });\n        return;\n      }\n      this.addEditData.specList.push({\n        specImage: \"\",\n        skuName: \"\",\n        inventory: 0,\n        skuCode: \"\",\n        price: 0,\n        originalPrice: 0,\n        skuIndex: Array(this.addEditData.list.length).fill(\"\"),\n      });\n    },\n    addListItemFn() {\n      this.addEditData.list.push({ name: \"\", value: [] });\n      this.addEditData.specList.forEach((item) => {\n        item.skuIndex.push(\"\");\n      });\n    },\n    delListValuItemFn(index, index2) {\n      for (var i = this.addEditData.specList.length; i--; ) {\n        // console.log('商品规格值：' + this.addEditData.specList[i].skuIndex[index], '规格：' + index, '规格值：' + index2)\n        if (this.addEditData.specList[i].skuIndex[index] != \"\") {\n          if (this.addEditData.specList[i].skuIndex[index] == index2) {\n            this.addEditData.specList.splice(i, 1);\n          }\n          if (this.addEditData.specList[i]) {\n            if (this.addEditData.specList[i].skuIndex[index] > index2) {\n              this.addEditData.specList[i].skuIndex[index] -= 1;\n              this.addEditData.specList[i].skuIndex[index] += \"\";\n            }\n          }\n        }\n      }\n      this.addEditData.list[index].value.splice(index2, 1);\n      const delIndex = this.editAddValItem.indexOf(index + \",\" + index2);\n      // this.editAddValItem.splice(delIndex, 1)\n    },\n    addListValFn(index) {\n      const delIndex = this.editAddValItem.indexOf(\n        index + \",\" + this.addEditData.list[index].value.length\n      );\n      if (delIndex == -1) {\n        this.editAddValItem.push(\n          index + \",\" + this.addEditData.list[index].value.length\n        );\n      }\n      this.addEditData.list[index].value.push(\"\");\n    },\n    delListFn(index) {\n      for (var i = this.addEditData.specList.length; i--; ) {\n        this.addEditData.specList[i].skuIndex.splice(index, 1);\n        if (this.addEditData.specList[i].skuIndex[index]) {\n          this.addEditData.specList.splice(i, 1);\n        }\n      }\n      this.addEditData.list.splice(index, 1);\n    },\n    delSpecFn(index) {\n      this.addEditData.specList.splice(index, 1);\n    },\n    uploadSucFn(img) {\n      this.addEditData.coverImage = img;\n    },\n    uploadSucFn2(img) {\n      this.addEditData.backImage = img;\n    },\n    uploadImgsSucFn(img) {\n      this.addEditData.images.push(img);\n    },\n    deleteImgFn(index) {\n      this.addEditData.images.splice(index, 1);\n      // console.log(this.addEditData.images,index)\n    },\n    getProductDetailFn() {\n      if (!this.productId) return;\n      this.addEditData.images.splice(0, this.addEditData.images.length);\n      this.addEditData.list.splice(0, this.addEditData.list.length);\n      this.addEditData.specList.splice(0, this.addEditData.specList.length);\n      getProductDetailFn({ id: this.productId }).then((res) => {\n        const resData = this.resDataFn(res);\n        if (!resData.specInfoList) {\n          resData.specInfoList = [];\n        }\n        if (!resData.skuInfoList) {\n          resData.skuInfoList = [];\n        }\n        if (resData.isExistManySpec == 1 && resData.specInfoList.length > 0) {\n          resData.specInfoList.forEach((item) => {\n            item.value = item.value.split(\",\");\n          });\n        }\n        if (resData.isExistManySpec == 1 && resData.skuInfoList.length > 0) {\n          resData.skuInfoList.forEach((item) => {\n            if (item.skuIndex) {\n              item.skuIndex = item.skuIndex.split(\",\");\n            } else {\n              item.skuIndex = [];\n              if (item.skuName) {\n                item.skuName.split(\",\").forEach((item2, index2) => {\n                  const posIndex =\n                    resData.specInfoList[index2].value.indexOf(item2);\n                  if (posIndex > -1) {\n                    item.skuIndex.push(String(posIndex));\n                  }\n                });\n              }\n            }\n          });\n        }\n        this.addEditData.activityTime =\n          resData.activityStartTime && resData.activityEndTime\n            ? [resData.activityStartTime, resData.activityEndTime]\n            : [];\n        this.addEditData = Object.assign({}, this.addEditData, resData, {\n          // provincePrice:\n          //   resData.type === 3 ? resData.productAgent.proPrice : undefined,\n          // cityPrice:\n          //   resData.type === 3 ? resData.productAgent.cityPrice : undefined,\n          // areaPrice:\n          //   resData.type === 3 ? resData.productAgent.areaPrice : undefined,\n          // dealerPrice:\n          //   resData.type === 3 ? resData.productAgent.dealerPrice : undefined,\n          // provinceThigh:\n          //   resData.type === 3 ? resData.productAgent.proThigh : undefined,\n          // cityThigh:\n          //   resData.type === 3 ? resData.productAgent.cityThigh : undefined,\n          // areaThigh:\n          //   resData.type === 3 ? resData.productAgent.areaThigh : undefined,\n          // dealerThigh:\n          //   resData.type === 3 ? resData.productAgent.dealerThigh : undefined,\n          // provinceBeginNum:\n          //   resData.type === 3 ? resData.productAgent.proNum : undefined,\n          // cityBeginNum:\n          //   resData.type === 3 ? resData.productAgent.cityNum : undefined,\n          // areaBeginNum:\n          //   resData.type === 3 ? resData.productAgent.areaNum : undefined,\n          // dealerBeginNum:\n          //   resData.type === 3 ? resData.productAgent.dealerNum : undefined,\n          // productAgent: undefined,\n          categoryId: resData.categoryIds,\n          images: resData.images.split(\",\"),\n          list:\n            resData.specInfoList && resData.specInfoList.length > 0\n              ? resData.specInfoList\n              : [],\n          specList:\n            resData.skuInfoList && resData.skuInfoList.length > 0\n              ? resData.skuInfoList\n              : [],\n        });\n        this.editLevelData = resData.rewardInfoList;\n        this.levelList.map((item, index) => {\n          if (this.editLevelData[index].levelId === item.id) {\n            this.editLevelData[index].name = item.name;\n          }\n        });\n        // 如果是装机商品 设定分类id 为装机分类的id\n        // if(this.addEditData.type === 3){\n        // \tthis.addEditData.categoryId = this.addEditData.partsId\n        // }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.edit_view {\n  overflow: hidden;\n  padding: 50px 20px;\n  background: #ffffff;\n  .el-form {\n    overflow: hidden;\n    padding: 10px;\n    .el_cascader input {\n      &::placeholder {\n        color: #333;\n      }\n    }\n    .spec_name {\n      input {\n        // background: #303133;\n        // font-weight: bold;\n        // border-color: #303133;\n        // color: #ffffff;\n      }\n    }\n  }\n  .float_item {\n    height: auto;\n    width: 50%;\n    float: left;\n  }\n  .list_table {\n    .el-input__inner {\n      height: 33px;\n    }\n    .el-input__icon {\n      line-height: 33px;\n    }\n    .el-select {\n      margin-right: 10px;\n      margin-bottom: 5px;\n    }\n  }\n  .value_item {\n    float: left;\n    margin-right: 5px;\n    .item {\n      width: 150px;\n      padding: 5px 0;\n      overflow: hidden;\n      .el-input {\n        float: left;\n        width: 100px;\n      }\n    }\n  }\n}\n</style>\n"]}]}