{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\financialManagement\\components\\payOrderDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\financialManagement\\components\\payOrderDetails.vue","mtime":1684373282156},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBnZXRSZXBhaXJPcmRlckNvbGxlY3Rpb25JbmZvLA0KICBoYW5kbGVDb25maXJtUGF5bWVudFRvTWFzdGVyLA0KfSBmcm9tICJAL2FwaS9maW5hbmNpYWxDb250cm9sbGVyIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIGRpYWxvZ1Zpc2libGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICB9LA0KICAgIHBheUJ0blNob3c6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByb3dMaXN0OiBudWxsLA0KICAgICAgb3JkZXJEZXRhaWxzOiBudWxsLA0KICAgICAgcGFydHNEZXRhaWxzU2hvdzogdHJ1ZSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkge30sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDlvLnnqpdjbG9zZeinpuWPkeeahOS6i+S7tg0KICAgIGNsb3NlRm4oKSB7DQogICAgICB0aGlzLnJvd0xpc3QgPSBudWxsOw0KICAgICAgdGhpcy5vcmRlckRldGFpbHMgPSBudWxsOw0KICAgICAgdGhpcy5wYXJ0c0RldGFpbHNTaG93ID0gdHJ1ZTsNCiAgICAgIHRoaXMuJGVtaXQoImhhbmRsZUNsb3NlIik7DQogICAgfSwNCiAgICAvLyDlvLnnqpdvcGVu6Kem5Y+R55qE5LqL5Lu2DQogICAgYXN5bmMgb3BlbkZuKCkgew0KICAgICAgY29uc3QgbG9hZGluZyA9IHRoaXMuJGxvYWRpbmcoKTsNCiAgICAgIGlmICh0aGlzLnJvd0xpc3Quc2VydmljZVR5cGVOYW1lID09PSAi57u05L+d5biI5YKF5pSv5LuYIikgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRSZXBhaXJPcmRlckNvbGxlY3Rpb25JbmZvKHRoaXMucm93TGlzdC5vcmRlclNuLCAzKTsNCiAgICAgICAgdGhpcy5vcmRlckRldGFpbHMgPSByZXMuZGF0YTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldFJlcGFpck9yZGVyQ29sbGVjdGlvbkluZm8odGhpcy5yb3dMaXN0Lm9yZGVyU24sIDIpOw0KICAgICAgICB0aGlzLm9yZGVyRGV0YWlscyA9IHJlcy5kYXRhOw0KICAgICAgfQ0KICAgICAgY29uc29sZS5sb2codGhpcy5vcmRlckRldGFpbHMpOw0KICAgICAgbG9hZGluZy5jbG9zZSgpOw0KICAgIH0sDQogICAgLy8g56Gu5a6a5oyJ6ZKuDQogICAgYXN5bmMgY29tZmlybUZuKCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgaGFuZGxlQ29uZmlybVBheW1lbnRUb01hc3Rlcih0aGlzLnJvd0xpc3Qub3JkZXJTbik7DQogICAgICBpZiAocmVzLm1lc3NhZ2UgPT09ICLmk43kvZzmiJDlip8iKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIG1lc3NhZ2U6ICLmlK/ku5jmiJDlip8hIiwNCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgIH0pOw0KICAgICAgICBhd2FpdCB0aGlzLiRlbWl0KCJyZWZyZXNocGFnZSIpOw0KICAgICAgICBhd2FpdCB0aGlzLmNsb3NlRm4oKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["payOrderDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"payOrderDetails.vue","sourceRoot":"src/views/financialManagement/components","sourcesContent":["<template>\r\n  <el-dialog\r\n    @close=\"closeFn\"\r\n    @open=\"openFn\"\r\n    :visible=\"dialogVisible\"\r\n    width=\"50%\"\r\n    :before-close=\"closeFn\"\r\n    :showClose=\"false\"\r\n  >\r\n    <div v-if=\"orderDetails\">\r\n      <div class=\"orderDetails\">\r\n        <h2 style=\"text-align:center;\">\r\n          {{\r\n            rowList.serviceTypeName === \"维保师傅支付\" ? \"支付详情\" : \"收款详情\"\r\n          }}\r\n        </h2>\r\n        <div class=\"content\">\r\n          <div class=\"line\">\r\n            <div class=\"item\">\r\n              <span class=\"title\"\r\n                >{{ orderDetails.masterRealName ? \"师傅\" : \"普通\" }}订单</span\r\n              >\r\n              <span class=\"desc\">{{ rowList.orderSn }}</span>\r\n            </div>\r\n            <div class=\"item\" v-if=\"orderDetails.masterRealName\">\r\n              <span class=\"title\">师傅名称</span>\r\n              <span class=\"desc\">{{ orderDetails.masterRealName }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"line\">\r\n            <div class=\"item\">\r\n              <span class=\"title\">客户名称</span>\r\n              <span class=\"desc\">{{ orderDetails.contactsPeople }}</span>\r\n            </div>\r\n            <div class=\"item\">\r\n              <span class=\"title\">联系电话</span>\r\n              <span class=\"desc\">{{ orderDetails.contactsPhone }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"line\">\r\n            <div class=\"item\">\r\n              <span class=\"title\">支付日期</span>\r\n              <span class=\"desc\">{{\r\n                rowList.payTime ? rowList.payTime : \"未支付\"\r\n              }}</span>\r\n            </div>\r\n            <div class=\"item\">\r\n              <span class=\"title\">订单金额</span>\r\n              <span class=\"desc\">{{ rowList.payMoney }}元</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"line\">\r\n            <div class=\"item\">\r\n              <span class=\"title\">收款人员</span>\r\n              <span class=\"desc\">{{ orderDetails.realName }}</span>\r\n            </div>\r\n            <div class=\"item\">\r\n              <span class=\"title\">所属银行</span>\r\n              <span class=\"desc\">{{ orderDetails.bankName }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"line\">\r\n            <div class=\"item\">\r\n              <span class=\"title\">银行卡号</span>\r\n              <span class=\"desc\">{{ orderDetails.realBankCode }}</span>\r\n            </div>\r\n            <div class=\"item\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"moneyDetails\">\r\n        <h2 style=\"padding-left: 20px;\">金额明细</h2>\r\n        <div class=\"content\">\r\n          <div class=\"line\">\r\n            <span class=\"title\">上门费用</span>\r\n            <span class=\"desc\">{{ orderDetails.doorAmount }}元</span>\r\n          </div>\r\n          <div class=\"line\">\r\n            <span class=\"title\">技术服务费</span>\r\n            <span class=\"desc\">{{ orderDetails.technologyAmount }}元</span>\r\n          </div>\r\n          <div class=\"line\">\r\n            <span class=\"title\"\r\n              >配件费<i\r\n                v-if=\"\r\n                  orderDetails.partsList && orderDetails.partsList.length !== 0\r\n                \"\r\n                v-show=\"!partsDetailsShow\"\r\n                class=\"el-icon-caret-bottom\"\r\n                @click=\"partsDetailsShow = true\"\r\n              ></i\r\n              ><i\r\n                v-if=\"\r\n                  orderDetails.partsList && orderDetails.partsList.length !== 0\r\n                \"\r\n                v-show=\"partsDetailsShow\"\r\n                class=\"el-icon-caret-top\"\r\n                @click=\"partsDetailsShow = false\"\r\n              ></i\r\n            ></span>\r\n            <span class=\"desc\">{{ orderDetails.partsAmount }}元</span>\r\n          </div>\r\n          <div class=\"partsLine\" v-if=\"partsDetailsShow\">\r\n            <div class=\"item\" v-for=\"item in orderDetails.partsList\">\r\n              <div class=\"loginPurchase\">\r\n                <img\r\n                  src=\"@/assets/logo/masterPurchase.png\"\r\n                  width=\"28px\"\r\n                  v-if=\"item.type !== 2\"\r\n                />\r\n                <img\r\n                  src=\"@/assets/logo/platformPurchase.png\"\r\n                  width=\"28px\"\r\n                  v-if=\"item.type === 2\"\r\n                />\r\n              </div>\r\n              <div class=\"name\">{{ item.name }}</div>\r\n              <div class=\"price\">{{ item.price }}元</div>\r\n              <div class=\"num\">{{ item.num }}个</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"line\">\r\n            <span class=\"title\">其他</span>\r\n            <span class=\"desc\">{{ orderDetails.otherAmount }}元</span>\r\n          </div>\r\n          <div class=\"line\">\r\n            <span class=\"title\">总金额</span>\r\n            <span class=\"desc\">{{ orderDetails.totalAmount }}元</span>\r\n          </div>\r\n          <div class=\"line\">\r\n            <span class=\"title\" style=\"color: red;\">支付金额</span>\r\n            <span class=\"desc\" style=\"color: red;\"\r\n              >{{ orderDetails.payAmount ? orderDetails.payAmount : 0 }}元</span\r\n            >\r\n            <span\r\n              style=\"margin-left: 20px;\"\r\n              v-if=\"rowList.serviceTypeName !== '维保企业支付'\"\r\n              >(不包含平台采购配件费)</span\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div style=\"display: flex;justify-content: flex-end;\">\r\n        <el-button @click=\"closeFn\" class=\"closeBtn\">关闭</el-button>\r\n        <el-button class=\"comfirmBtn\" v-if=\"payBtnShow\" @click=\"comfirmFn\"\r\n          >确定付款</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getRepairOrderCollectionInfo,\r\n  handleConfirmPaymentToMaster,\r\n} from \"@/api/financialController\";\r\n\r\nexport default {\r\n  props: {\r\n    dialogVisible: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    payBtnShow: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      rowList: null,\r\n      orderDetails: null,\r\n      partsDetailsShow: true,\r\n    };\r\n  },\r\n  created() {},\r\n  methods: {\r\n    // 弹窗close触发的事件\r\n    closeFn() {\r\n      this.rowList = null;\r\n      this.orderDetails = null;\r\n      this.partsDetailsShow = true;\r\n      this.$emit(\"handleClose\");\r\n    },\r\n    // 弹窗open触发的事件\r\n    async openFn() {\r\n      const loading = this.$loading();\r\n      if (this.rowList.serviceTypeName === \"维保师傅支付\") {\r\n        const res = await getRepairOrderCollectionInfo(this.rowList.orderSn, 3);\r\n        this.orderDetails = res.data;\r\n      } else {\r\n        const res = await getRepairOrderCollectionInfo(this.rowList.orderSn, 2);\r\n        this.orderDetails = res.data;\r\n      }\r\n      console.log(this.orderDetails);\r\n      loading.close();\r\n    },\r\n    // 确定按钮\r\n    async comfirmFn() {\r\n      const res = await handleConfirmPaymentToMaster(this.rowList.orderSn);\r\n      if (res.message === \"操作成功\") {\r\n        this.$message({\r\n          message: \"支付成功!\",\r\n          type: \"success\",\r\n        });\r\n        await this.$emit(\"refreshpage\");\r\n        await this.closeFn();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// 按钮样式\r\n.closeBtn {\r\n  background-color: #fff;\r\n  color: #0b2059;\r\n  border: 1px solid #0b2059;\r\n  width: 110px;\r\n  height: 40px;\r\n}\r\n.comfirmBtn {\r\n  background-color: #2e4c9e;\r\n  color: #fff;\r\n  width: 110px;\r\n  height: 40px;\r\n}\r\n\r\n// 收款详情\r\n.orderDetails {\r\n  color: #707070;\r\n  .content {\r\n    padding: 20px 20px;\r\n    .line {\r\n      display: flex;\r\n      margin-bottom: 20px;\r\n      .item {\r\n        flex: 1;\r\n        display: flex;\r\n        align-items: center;\r\n        padding-right: 20px;\r\n        .title {\r\n          color: #707070;\r\n          font-weight: 700;\r\n          font-size: 22px;\r\n          margin-right: 20px;\r\n        }\r\n        .desc {\r\n          font-size: 18px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.moneyDetails {\r\n  color: #707070;\r\n\r\n  .content {\r\n    padding: 20px 20px 20px 60px;\r\n    .partsLine {\r\n      width: 70%;\r\n      .item {\r\n        font-size: 18px;\r\n        margin-bottom: 20px;\r\n        display: flex;\r\n        padding-left: 50px;\r\n        width: 70%;\r\n        position: relative;\r\n        .loginPurchase {\r\n          position: absolute;\r\n          left: 5px;\r\n          top: -5px;\r\n        }\r\n        .name {\r\n          flex: 1;\r\n        }\r\n        .price {\r\n          flex: 1;\r\n        }\r\n        .num {\r\n          flex: 1;\r\n        }\r\n      }\r\n    }\r\n    .line {\r\n      margin-bottom: 20px;\r\n      .title {\r\n        display: inline-block;\r\n        width: 150px;\r\n        color: #707070;\r\n        font-weight: 700;\r\n        font-size: 22px;\r\n        margin-right: 20px;\r\n      }\r\n      .desc {\r\n        font-size: 18px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}