{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\system.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\system.vue","mtime":1670564969926},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB0YWJsZU1peGluIGZyb20gIkAvbWl4aW4vdGFibGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNhcm91c2VsIiwKICBtaXhpbnM6IFt0YWJsZU1peGluXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXF1aXBtZW50U3lzdGVtTnVtOiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICB0aXRsZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeagh+mimCIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBzZXF1ZW5jZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaOkuW6jyIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgdXJsOiB7CiAgICAgICAgcXVlcnk6ICIvYWRtaW4vbWFpbnRlbmFuY2UvcXVlcnlEZXZpY2VTeXN0ZW1MaXN0IiwKICAgICAgICBhZGQ6ICIvYWRtaW4vL21haW50ZW5hbmNlL2VkaXREZXZpY2VTeXN0ZW0iLAogICAgICAgIGVkaXQ6ICIvYWRtaW4vL21haW50ZW5hbmNlL2VkaXREZXZpY2VTeXN0ZW0iLAogICAgICAgIGRlbGV0ZTogIi9hZG1pbi9tYWludGVuYW5jZS9kZWxldGVEZXZpY2VTeXN0ZW0iLAogICAgICAgIC8vICAgdXBkYXRlU3RhdHVzOicvYWRtaW4vZWRpdF9jYXJvdXNlbF9pbmZvX3N0YXR1cycsCiAgICAgICAgLy8gICB1cGRhdGVUb3BTdGF0dXM6Jy9hZG1pbi9lZGl0X2Nhcm91c2VsX2luZm9fdG9wJwogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHF1ZXJ5KCkgewogICAgICB0aGlzLiRheGlvcwogICAgICAgIC5wb3N0KHRoaXMudXJsLnF1ZXJ5LCB7CiAgICAgICAgICBwYWdlTm86IHRoaXMucGFnZS5wYWdlTm8sCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlLmRhdGFOdW0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBkYXRhOwogICAgICAgICAgdGhpcy5lcXVpcG1lbnRTeXN0ZW1OdW0gPSBkYXRhLmxlbmd0aCArIDE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwKICAgIHVwbG9hZFN1Y0ZuKGltZykgewogICAgICBjb25zb2xlLmluZm8oaW1nKTsKICAgIH0sCiAgICBncmFudEluaXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkTW9kZWwub3BlbigpOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdEZvcm0oZm4pIHsKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuJHJlZnMuaW1nLmlzTnVsbCgpKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+S4iuS8oOWbvuagh+aWh+S7tiIpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgaW1nID0gKGF3YWl0IHRoaXMuJHJlZnMuaW1nLnVwbG9hZEZpbGUoKSlbMF07CiAgICAgICAgICB0aGlzLnN1Ym1pdEZvcm0oZm4sIHsKICAgICAgICAgICAgaW1nVXJsOiBpbWcsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJHJlZnMuaW1nLnJlc2V0KFtdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoZm4pIHsKICAgICAgdGhpcy5hZGRGb3JtID0ge307CiAgICAgIGlmIChmbikgZm4oZmFsc2UpOwogICAgfSwKICAgIGVkaXRJbml0KHJvdykgewogICAgICB0aGlzLmVkaXRGb3JtID0geyAuLi5yb3cgfTsKICAgICAgZGVsZXRlIHRoaXMuZWRpdEZvcm0ubGlzdDsKICAgICAgdGhpcy4kcmVmcy5lZGl0TW9kZWwub3BlbigpOwogICAgICBjb25zb2xlLmluZm8ocm93LmltZ1VybCk7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLmVkaXRJbWcucmVzZXQoCiAgICAgICAgICByb3cuaW1nVXJsCiAgICAgICAgICAgID8gWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB1cmw6IHJvdy5pbWdVcmwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF0KICAgICAgICAgICAgOiBbXQogICAgICAgICk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUVkaXQoZm4pIHsKICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmVkaXRJbWcuaXNOdWxsKCkpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35LiK5Lyg6K6+5aSH57O757uf5Zu+54mHIik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBpbWcgPSAoYXdhaXQgdGhpcy4kcmVmcy5lZGl0SW1nLnVwbG9hZEZpbGUoKSlbMF07CiAgICAgICAgICB0aGlzLmVkaXQoZm4sIHsKICAgICAgICAgICAgaW1nVXJsOiBpbWcsCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRFZGl0Rm9ybShmbikgewogICAgICBpZiAoZm4pIGZuKGZhbHNlKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["system.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"system.vue","sourceRoot":"src/views/maintenance","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"select_view\">\n      <!-- <el-button icon=\"el-icon-zoom-in\" type=\"primary\" @click=\"query()\"\n        >查询</el-button\n      > -->\n      <el-button icon=\"el-icon-plus\" type=\"primary\" @click=\"grantInit()\"\n        >新增</el-button\n      >\n      <model\n        ref=\"addModel\"\n        title=\"新增设备系统\"\n        @ok=\"handleSubmitForm\"\n        @close=\"handleClose\"\n      >\n        <el-form\n          :model=\"addForm\"\n          :rules=\"rules\"\n          ref=\"addForm\"\n          status-icon\n          label-width=\"120px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item\n            label=\"设备系统名称\"\n            prop=\"name\"\n            style=\"width:calc(100% - 120px)\"\n          >\n            <el-input\n              type=\"text\"\n              v-model=\"addForm.name\"\n              autocomplete=\"off\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item\n            label=\"父级id\"\n            prop=\"pid\"\n            style=\"width:calc(100% - 120px)\"\n          >\n            <el-select v-model.number=\"addForm.pid\" placeholder=\"请选择\">\n              <el-option\n                :label=\"item - 1\"\n                :value=\"item - 1\"\n                :key=\"item - 1\"\n                v-for=\"item in equipmentSystemNum\"\n              ></el-option>\n            </el-select>\n            <!-- <el-input\n              type=\"number\"\n              v-model=\"addForm.pid\"\n              autocomplete=\"off\"\n            ></el-input> -->\n          </el-form-item>\n          <el-form-item\n            label=\"排序\"\n            prop=\"sort\"\n            style=\"width:calc(100% - 120px)\"\n          >\n            <el-input\n              type=\"number\"\n              v-model=\"addForm.sort\"\n              autocomplete=\"off\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item\n            label=\"设备系统图片\"\n            prop=\"icon\"\n            style=\"width:calc(100% - 120px)\"\n          >\n            <upload ref=\"img\" type=\"image/*\" limit=\"1\" :size=\"1024 ** 2 * 2\" />\n          </el-form-item>\n        </el-form>\n      </model>\n    </div>\n\n    <div style=\"height: 16px;\"></div>\n    <el-table\n      highlight-current-row\n      v-loading.fullscreen.lock=\"loading\"\n      element-loading-text=\"拼命加载中\"\n      element-loading-spinner=\"el-icon-loading\"\n      :data=\"dataList\"\n      row-key=\"id\"\n      default-expand-all\n      :tree-props=\"{ children: 'list', hasChildren: 'hasChildren' }\"\n      style=\"width: 100%;\"\n    >\n      <!-- <el-table-column type=\"selection\" width=\"45\" show-overflow-tooltip></el-table-column> -->\n      <el-table-column\n        prop=\"id\"\n        label=\"id\"\n        show-overflow-tooltip\n      ></el-table-column>\n      <el-table-column\n        prop=\"name\"\n        label=\"名称\"\n        show-overflow-tooltip\n      ></el-table-column>\n      <el-table-column\n        prop=\"sort\"\n        label=\"排序\"\n        show-overflow-tooltip\n      ></el-table-column>\n\n      <el-table-column prop=\"imgUrl\" label=\"图片\">\n        <template slot-scope=\"{ row }\">\n          <y-image :src=\"row.imgUrl\" />\n        </template>\n      </el-table-column>\n      <!-- <el-table-column prop=\"isTop\" label=\"是否置顶\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <span :class=\"util.global.whetherEnum[row.isTop].class\">\n            {{util.global.whetherEnum[row.isTop].label}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          <span :class=\"util.global.StatusEnum[row.status].class\">\n            {{util.global.StatusEnum[row.status].label}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          {{new Date(row.createTime).format('yyyy-MM-dd hh:mm:ss')}}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"updateTime\" label=\"更新时间\" show-overflow-tooltip>\n        <template slot-scope=\"{row}\">\n          {{new Date(row.updateTime).format('yyyy-MM-dd hh:mm:ss')}}\n        </template>\n      </el-table-column> -->\n      <el-table-column label=\"操作\" width=\"300px\">\n        <template slot-scope=\"{ row }\">\n          <div class=\"settings\">\n            <el-button type=\"warning\" size=\"mini\" plain @click=\"editInit(row)\"\n              >编辑</el-button\n            >\n            <el-button type=\"danger\" size=\"mini\" plain @click=\"remove([row.id])\"\n              >删除</el-button\n            >\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"updatePageNo\"\n      :current-page=\"page.pageNo\" :page-sizes=\"[10, 20, 50, 100]\" :page-size=\"page.dataNum\"\n      layout=\"total, sizes, prev, pager, next, jumper\" :total=\"page.dataSumNum\">\n    </el-pagination> -->\n\n    <model\n      ref=\"editModel\"\n      title=\"编辑设备系统\"\n      @ok=\"handleEdit\"\n      @close=\"resetEditForm\"\n    >\n      <el-form\n        :model=\"editForm\"\n        :rules=\"rules\"\n        ref=\"editForm\"\n        status-icon\n        label-width=\"120px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item\n          label=\"设备系统名称\"\n          prop=\"name\"\n          style=\"width:calc(100% - 120px)\"\n        >\n          <el-input\n            type=\"text\"\n            v-model=\"editForm.name\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"父级id\"\n          prop=\"pid\"\n          style=\"width:calc(100% - 120px)\"\n        >\n          <el-input\n            type=\"number\"\n            v-model=\"editForm.pid\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"排序\" prop=\"sort\" style=\"width:calc(100% - 120px)\">\n          <el-input\n            type=\"number\"\n            v-model=\"editForm.sort\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"设备系统图片\"\n          prop=\"icon\"\n          style=\"width:calc(100% - 120px)\"\n        >\n          <upload\n            ref=\"editImg\"\n            type=\"image/*\"\n            limit=\"1\"\n            :size=\"1024 ** 2 * 2\"\n          />\n        </el-form-item>\n      </el-form>\n    </model>\n  </div>\n</template>\n<style lang=\"less\" scoped></style>\n<script>\nimport tableMixin from \"@/mixin/table\";\nexport default {\n  name: \"Carousel\",\n  mixins: [tableMixin],\n  data() {\n    return {\n      equipmentSystemNum: null,\n      loading: false,\n      rules: {\n        title: [\n          {\n            required: true,\n            message: \"请输入标题\",\n            trigger: \"blur\",\n          },\n        ],\n        sequence: [\n          {\n            required: true,\n            message: \"请输入排序\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      url: {\n        query: \"/admin/maintenance/queryDeviceSystemList\",\n        add: \"/admin//maintenance/editDeviceSystem\",\n        edit: \"/admin//maintenance/editDeviceSystem\",\n        delete: \"/admin/maintenance/deleteDeviceSystem\",\n        //   updateStatus:'/admin/edit_carousel_info_status',\n        //   updateTopStatus:'/admin/edit_carousel_info_top'\n      },\n    };\n  },\n  methods: {\n    query() {\n      this.$axios\n        .post(this.url.query, {\n          pageNo: this.page.pageNo,\n          pageSize: this.page.dataNum,\n        })\n        .then(({ data }) => {\n          this.dataList = data;\n          this.equipmentSystemNum = data.length + 1;\n        })\n        .catch(function(error) {\n          console.info(error);\n        });\n      this.loading = false;\n    },\n    uploadSucFn(img) {\n      console.info(img);\n    },\n    grantInit() {\n      this.$refs.addModel.open();\n    },\n    handleSubmitForm(fn) {\n      this.$refs.addForm.validate(async (valid) => {\n        if (valid) {\n          if (this.$refs.img.isNull()) {\n            this.$message.error(\"请上传图标文件\");\n            return false;\n          }\n          let img = (await this.$refs.img.uploadFile())[0];\n          this.submitForm(fn, {\n            imgUrl: img,\n          });\n          this.$refs.img.reset([]);\n        } else {\n          return false;\n        }\n      });\n    },\n    handleClose(fn) {\n      this.addForm = {};\n      if (fn) fn(false);\n    },\n    editInit(row) {\n      this.editForm = { ...row };\n      delete this.editForm.list;\n      this.$refs.editModel.open();\n      console.info(row.imgUrl);\n      this.$nextTick(() => {\n        this.$refs.editImg.reset(\n          row.imgUrl\n            ? [\n                {\n                  url: row.imgUrl,\n                },\n              ]\n            : []\n        );\n      });\n    },\n    handleEdit(fn) {\n      this.$refs.editForm.validate(async (valid) => {\n        if (valid) {\n          if (this.$refs.editImg.isNull()) {\n            this.$message.error(\"请上传设备系统图片\");\n            return false;\n          }\n          let img = (await this.$refs.editImg.uploadFile())[0];\n          this.edit(fn, {\n            imgUrl: img,\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetEditForm(fn) {\n      if (fn) fn(false);\n    },\n  },\n};\n</script>\n"]}]}