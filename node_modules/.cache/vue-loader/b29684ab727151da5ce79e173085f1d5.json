{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\programme_order.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\programme_order.vue","mtime":1669707459427},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB0YWJsZU1peGluIGZyb20gIkAvbWl4aW4vdGFibGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgdGl0bGU6ICJjb3Vyc2UiLAogIG1peGluczogW3RhYmxlTWl4aW5dLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdHlwZURhdGE6IFtdLAogICAgICBzeXN0ZW1EYXRhOiBbXSwKICAgICAgY291cnNlTGlzdDogW10sCiAgICAgIGNvdXJzZURpc3RyaUxpc3Q6IFtdLAogICAgICB1cmw6IHsKICAgICAgICBxdWVyeTogIi9hZG1pbi9tYWludGVuYW5jZS9xdWVyeVByb2dyYW1tT3JkZXJMaXN0IiwKICAgICAgICBxdWVyeVR5cGU6ICIvYWRtaW4vbWFpbnRlbmFuY2UvcXVlcnlEZXZpY2VUeXBlTGlzdCIsCiAgICAgICAgcXVlcnlTeXN0ZW06ICIvYWRtaW4vbWFpbnRlbmFuY2UvcXVlcnlEZXZpY2VTeXN0ZW1MaXN0IiwKICAgICAgICBlZGl0OiAiL2FkbWluL21haW50ZW5hbmNlL29yZGVyVGFraW5nIiwKICAgICAgICBkaXNwYXRjaDogIi9hZG1pbi9tYWludGVuYW5jZS9oYW5kbGVIYXZpbmdPcmRlciIsCiAgICAgICAgZmluaXNoOiAiL2FkbWluL21haW50ZW5hbmNlL2hhbmRsZUNvbXBsZXRlT3JkZXIiLAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHdvcmtlcjogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaOpeWNleS6uiIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICB3b3JrZXJQaG9uZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaOpeWNleS6uuaJi+acuiIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgZmluaXNoRm9ybTogewogICAgICAgIHBheUFtb3VudDogMCwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBxdWVyeVNlbGVjdERhdGEoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgLnBvc3QodGhpcy51cmwucXVlcnlTeXN0ZW0pCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICB0aGlzLnN5c3RlbURhdGEgPSBkYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oZXJyb3IpOwogICAgICAgIH0pOwogICAgICB0aGlzLiRheGlvcwogICAgICAgIC5wb3N0KHRoaXMudXJsLnF1ZXJ5VHlwZSkKICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgIHRoaXMudHlwZURhdGEgPSBkYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oZXJyb3IpOwogICAgICAgIH0pOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBzZWxlbGN0U3lzdGVtKHZhbHVlKSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5kZXZpY2VTeXN0ZW1JZCA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdOwogICAgfSwKICAgIGRpc3BhdGNoKHJvdykgewogICAgICB0aGlzLiRheGlvcwogICAgICAgIC5wb3N0KHRoaXMudXJsLmRpc3BhdGNoLCB7CiAgICAgICAgICBvcmRlclNuOiByb3cub3JkZXJTbiwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGNvZGUsIG1lc3NhZ2UgfSkgPT4gewogICAgICAgICAgdGhpcy51dGlsLm1lc3NhZ2UodGhpcywgY29kZSwgbWVzc2FnZSk7CiAgICAgICAgICB0aGlzLnJlc2V0RWRpdEZvcm0oKTsKICAgICAgICAgIHRoaXMucXVlcnkoKTsKICAgICAgICAgIGZuKGZhbHNlKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgY29uc29sZS5pbmZvKGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBmaW5pc2hJbml0KHJvdykgewogICAgICB0aGlzLmZpbmlzaEZvcm0ub3JkZXJTbiA9IHJvdy5vcmRlclNuOwogICAgICB0aGlzLiRyZWZzLmZpbmlzaE1vZGVsLm9wZW4oKTsKICAgIH0sCiAgICBmaW5pc2goZm4pIHsKICAgICAgdGhpcy4kcmVmcy5maW5pc2hGb3JtLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuJHJlZnMuY29tcGxldGVJbWFnZXMuaXNOdWxsKCkpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35LiK5Lyg5Zu+54mHIik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBjb21wbGV0ZUltYWdlcyA9ICgKICAgICAgICAgICAgYXdhaXQgdGhpcy4kcmVmcy5jb21wbGV0ZUltYWdlcy51cGxvYWRGaWxlKCkKICAgICAgICAgICkuam9pbigiLCIpOwogICAgICAgICAgdGhpcy4kcmVmcy5jb21wbGV0ZUltYWdlcy5yZXNldChbXSk7CiAgICAgICAgICB0aGlzLiRheGlvcwogICAgICAgICAgICAucG9zdCh0aGlzLnVybC5maW5pc2gsIHsKICAgICAgICAgICAgICAuLi50aGlzLmZpbmlzaEZvcm0sCiAgICAgICAgICAgICAgY29tcGxldGVJbWFnZXM6IGNvbXBsZXRlSW1hZ2VzLAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gewogICAgICAgICAgICAgIHRoaXMudXRpbC5tZXNzYWdlKHRoaXMsIGRhdGEuY29kZSwgZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICB0aGlzLnJlc2V0RmluaXNoRm9ybSgpOwogICAgICAgICAgICAgIHRoaXMucXVlcnkoKTsKICAgICAgICAgICAgICBmbihmYWxzZSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhlcnJvcik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldEZpbmlzaEZvcm0oZm4pIHsKICAgICAgaWYgKGZuKSBmbihmYWxzZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["programme_order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"programme_order.vue","sourceRoot":"src/views/maintenance","sourcesContent":["<!--编程订单-->\n<template>\n  <div class=\"app-container\">\n    <div class=\"manage-top\">\n      <el-form\n        :model=\"searchForm\"\n        ref=\"ruleForm\"\n        label-width=\"88px\"\n        class=\"rule-form\"\n        label-position=\"right\"\n      >\n        <el-row :gutter=\"20\">\n          <el-col :span=\"5\">\n            <el-form-item label=\"设备系统\">\n              <el-cascader\n                placeholder=\"请选择\"\n                :options=\"systemData\"\n                :props=\"{\n                  children: 'list',\n                  label: 'name',\n                  value: 'id',\n                  checkStrictly: true,\n                }\"\n                :show-all-levels=\"false\"\n                @change=\"selelctSystem\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"设备类型\">\n              <el-select v-model=\"searchForm.deviceTypeId\" placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in typeData\"\n                  :key=\"item.id\"\n                  :label=\"item.name\"\n                  :value=\"item.id\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-form-item label=\"订单状态\">\n              <el-select v-model=\"searchForm.status\" placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in util.global.maintenanceStatus\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\">\n            <el-button icon=\"el-icon-zoom-in\" type=\"primary\" @click=\"query()\"\n              >查询</el-button\n            >\n            <el-button icon=\"el-icon-refresh\" type=\"info\" @click=\"reset()\"\n              >重置</el-button\n            >\n          </el-col>\n        </el-row>\n      </el-form>\n    </div>\n    <div style=\"height: 16px;\"></div>\n    <el-table\n      highlight-current-row\n      v-loading.fullscreen.lock=\"loading\"\n      element-loading-text=\"拼命加载中\"\n      element-loading-spinner=\"el-icon-loading\"\n      :data=\"dataList\"\n      style=\"width: 100%;\"\n    >\n      <el-table-column\n        prop=\"orderSn\"\n        label=\"订单编号\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"title\"\n        label=\"需求标题\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"simpleDesc\"\n        label=\"需求描述\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"images\"\n        label=\"故障图片\"\n        show-overflow-tooltip\n        align=\"center\"\n      >\n        <template slot-scope=\"{ row }\">\n          <y-image\n            :src=\"row.images ? row.images.split(',')[0] : ''\"\n            :srcList=\"row.images ? row.images.split(',') : ''\"\n          />\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        prop=\"deviceKnife\"\n        label=\"设备刀组\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"deviceSystemName\"\n        label=\"设备系统\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"deviceTypeName\"\n        label=\"设备类型\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"serviceTime\"\n        label=\"服务时间\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"status\"\n        label=\"状态\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      >\n        <template slot-scope=\"{ row }\">\n          <span :class=\"util.global.mainStatus2[row.status].class\">\n            {{ util.global.mainStatus2[row.status].label }}\n          </span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        prop=\"enterpriseName\"\n        label=\"企业名称\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"contactsPeople\"\n        label=\"联系人\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"contactsPhone\"\n        label=\"联系电话\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"serviceArea\"\n        label=\"服务区域\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"address\"\n        label=\"详细地址\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n\n      <el-table-column\n        prop=\"worker\"\n        label=\"接单师傅\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"workerPhone\"\n        label=\"师傅电话\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"receiveTime\"\n        label=\"接单时间\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n\n      <el-table-column\n        prop=\"cancelReason\"\n        label=\"取消原因\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"cancelTime\"\n        label=\"取消时间\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n\n      <el-table-column\n        prop=\"payAmount\"\n        label=\"订单金额\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"completeTime\"\n        label=\"完成时间\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n      ></el-table-column>\n      <el-table-column\n        prop=\"completeImages\"\n        label=\"完结图片\"\n        show-overflow-tooltip\n        align=\"center\"\n      >\n        <template slot-scope=\"{ row }\">\n          <y-image\n            :src=\"row.completeImages ? row.completeImages.split(',')[0] : ''\"\n            :srcList=\"row.completeImages ? row.completeImages.split(',') : ''\"\n          />\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        prop=\"createTime\"\n        label=\"下单时间\"\n        show-overflow-tooltip\n        width=\"150\"\n        align=\"center\"\n        fixed=\"right\"\n      ></el-table-column>\n      <el-table-column label=\"操作\" width=\"300px\" fixed=\"right\">\n        <template slot-scope=\"{ row }\">\n          <div class=\"settings\">\n            <el-button\n              type=\"warning\"\n              size=\"mini\"\n              plain\n              @click=\"editInit(row, ['orderSn'])\"\n              :disabled=\"row.status != 1\"\n              >分配师傅</el-button\n            >\n            <el-button\n              type=\"warning\"\n              size=\"mini\"\n              plain\n              @click=\"dispatch(row)\"\n              :disabled=\"row.status != 2\"\n              >派遣师傅</el-button\n            >\n            <el-button\n              type=\"warning\"\n              size=\"mini\"\n              plain\n              @click=\"finishInit(row)\"\n              :disabled=\"row.status != 3\"\n              >完结此单</el-button\n            >\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      @size-change=\"handleSizeChange\"\n      @current-change=\"updatePageNo\"\n      :current-page=\"page.pageNo\"\n      :page-sizes=\"[10, 20, 50, 100]\"\n      :page-size=\"page.dataNum\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"page.dataSumNum\"\n    >\n    </el-pagination>\n\n    <model ref=\"editModel\" title=\"师傅接单\" @ok=\"edit\" @close=\"resetEditForm\">\n      <el-form\n        :model=\"editForm\"\n        :rules=\"rules\"\n        ref=\"editForm\"\n        status-icon\n        label-width=\"120px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item\n          label=\"接单人\"\n          prop=\"worker\"\n          style=\"width:calc(100% - 120px)\"\n        >\n          <el-input\n            type=\"text\"\n            v-model=\"editForm.worker\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"接单人手机\"\n          prop=\"workerPhone\"\n          style=\"width:calc(100% - 120px)\"\n        >\n          <el-input\n            type=\"number\"\n            v-model=\"editForm.workerPhone\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n    </model>\n\n    <model\n      ref=\"finishModel\"\n      title=\"完结此单\"\n      @ok=\"finish\"\n      @close=\"resetFinishForm\"\n    >\n      <el-form\n        :model=\"finishForm\"\n        :rules=\"rules\"\n        ref=\"finishForm\"\n        status-icon\n        label-width=\"120px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item\n          label=\"订单金额\"\n          prop=\"payAmount\"\n          style=\"width:calc(100% - 120px)\"\n        >\n          <el-input-number\n            v-model=\"finishForm.payAmount\"\n            :precision=\"2\"\n          ></el-input-number>\n        </el-form-item>\n        <el-form-item\n          label=\"图片\"\n          prop=\"completeImages\"\n          style=\"width:calc(100% - 120px)\"\n        >\n          <upload\n            ref=\"completeImages\"\n            type=\"image/*\"\n            limit=\"9\"\n            :size=\"1024 ** 2 * 2\"\n          />\n        </el-form-item>\n      </el-form>\n    </model>\n  </div>\n</template>\n<style lang=\"less\" scoped></style>\n<script>\nimport tableMixin from \"@/mixin/table\";\nexport default {\n  title: \"course\",\n  mixins: [tableMixin],\n  data() {\n    return {\n      loading: false,\n      typeData: [],\n      systemData: [],\n      courseList: [],\n      courseDistriList: [],\n      url: {\n        query: \"/admin/maintenance/queryProgrammOrderList\",\n        queryType: \"/admin/maintenance/queryDeviceTypeList\",\n        querySystem: \"/admin/maintenance/queryDeviceSystemList\",\n        edit: \"/admin/maintenance/orderTaking\",\n        dispatch: \"/admin/maintenance/handleHavingOrder\",\n        finish: \"/admin/maintenance/handleCompleteOrder\",\n      },\n      rules: {\n        worker: [\n          {\n            required: true,\n            message: \"请输入接单人\",\n            trigger: \"blur\",\n          },\n        ],\n        workerPhone: [\n          {\n            required: true,\n            message: \"请输入接单人手机\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      finishForm: {\n        payAmount: 0,\n      },\n    };\n  },\n  methods: {\n    querySelectData() {\n      this.loading = true;\n      this.$axios\n        .post(this.url.querySystem)\n        .then(({ data }) => {\n          this.systemData = data;\n        })\n        .catch(function(error) {\n          console.info(error);\n        });\n      this.$axios\n        .post(this.url.queryType)\n        .then(({ data }) => {\n          this.typeData = data;\n        })\n        .catch(function(error) {\n          console.info(error);\n        });\n      this.loading = false;\n    },\n    selelctSystem(value) {\n      this.searchForm.deviceSystemId = value[value.length - 1];\n    },\n    dispatch(row) {\n      this.$axios\n        .post(this.url.dispatch, {\n          orderSn: row.orderSn,\n        })\n        .then(({ code, message }) => {\n          this.util.message(this, code, message);\n          this.resetEditForm();\n          this.query();\n          fn(false);\n        })\n        .catch(function(error) {\n          console.info(error);\n        });\n    },\n    finishInit(row) {\n      this.finishForm.orderSn = row.orderSn;\n      this.$refs.finishModel.open();\n    },\n    finish(fn) {\n      this.$refs.finishForm.validate(async (valid) => {\n        if (valid) {\n          if (this.$refs.completeImages.isNull()) {\n            this.$message.error(\"请上传图片\");\n            return false;\n          }\n          let completeImages = (\n            await this.$refs.completeImages.uploadFile()\n          ).join(\",\");\n          this.$refs.completeImages.reset([]);\n          this.$axios\n            .post(this.url.finish, {\n              ...this.finishForm,\n              completeImages: completeImages,\n            })\n            .then((data) => {\n              this.util.message(this, data.code, data.message);\n              this.resetFinishForm();\n              this.query();\n              fn(false);\n            })\n            .catch(function(error) {\n              console.info(error);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetFinishForm(fn) {\n      if (fn) fn(false);\n    },\n  },\n};\n</script>\n"]}]}