{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\weixinindex-producttuijian\\update.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\weixinindex-producttuijian\\update.vue","mtime":1669258939325},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbnRlbnQtdmlldyB7CiAgcGFkZGluZzogMjBweDsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9Cg=="},{"version":3,"sources":["update.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwQA;AACA;AACA;AACA","file":"update.vue","sourceRoot":"src/views/product/weixinindex-producttuijian","sourcesContent":["<template>\n  <div class=\"content_box\">\n    <first-title title=\"更换商品\" />\n    <div class=\"select_view\">\n      <el-cascader\n        v-if=\"typeID !== 1\"\n        style=\"width: 300px\"\n        v-model=\"querydata.categoryId\"\n        class=\"mg_r15 mg_t10\"\n        placeholder=\"请选择商品分类\"\n        expand-trigger=\"hover\"\n        :props=\"categoryList\"\n        :show-all-levels=\"false\"\n      />\n      <el-button\n        v-if=\"typeID !== 1\"\n        class=\"mg_r15 mg_t10\"\n        type=\"primary\"\n        @click=\"queryDataListFn\"\n        >查询</el-button\n      >\n      <span class=\"mg_t10\"\n        >已选择商品ID:{{ selectarr.length === 0 ? \"\" : selectarr }}</span\n      >\n    </div>\n    <div class=\"select_view\">\n      <el-table\n        ref=\"table\"\n        border\n        :data=\"dataList\"\n        @select=\"selectionRow\"\n        @select-all=\"handleselectAll\"\n      >\n        <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n        <el-table-column\n          label=\"ID\"\n          width=\"60px\"\n          align=\"center\"\n          header-align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.id }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"名称\"\n          align=\"center\"\n          min-width=\"350px\"\n          header-align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            <span>{{ typeID == 1 ? scope.row.name : scope.row.title }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          v-if=\"typeID!==1\"\n          label=\"商品图\"\n          width=\"110\"\n          align=\"center\"\n          header-align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            <el-image\n              style=\"width: 80px; height: 80px\"\n              :src=\"scope.row.coverImage\"\n              fit=\"cover\"\n              :preview-src-list=\"[scope.row.coverImage]\"\n            />\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"商品原价\"\n          align=\"center\"\n          width=\"350px\"\n          header-align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.originalPrice || \"-\" }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"商品价格\"\n          align=\"center\"\n          width=\"350px\"\n          header-align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            <span>{{ scope.row.price }}</span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"el_pagination\">\n        <el-pagination\n          v-if=\"typeID!==1\"\n          background\n          layout=\"prev, pager, next,total,sizes\"\n          :current-page=\"dataConfig.pageNo\"\n          :total=\"dataConfig.total\"\n          :page-sizes=\"[10, 20, 30, 40, 50]\"\n          :page-size=\"dataConfig.pageSize\"\n          @current-change=\"currentChangeFn\"\n          @size-change=\"handleSizeChange\"\n        />\n      </div>\n      <el-button class=\"\" type=\"primary\" @click=\"submitFn\">确定</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { queryInstallListFn } from \"@/api/install\";\nimport {\n  queryProductFn,\n  queryProductCategoryFn,\n  updateRecommendProduct,\n} from \"@/api/product\";\nexport default {\n  name: \"\",\n  data() {\n    return {\n      typeID: -1,\n      realselectarr: [],\n      selectarr: [],\n      productIds: [],\n      dataList: [],\n      dataConfig: {\n        pageNo: 1,\n        pageSize: 10,\n        total: 0,\n        loading: true,\n      },\n      querydata: {\n        categoryId: \"\", //商品分类id\n      },\n      categoryList: {\n        lazy: true,\n        checkStrictly: true,\n        lazyLoad(node, resolve) {\n          queryProductCategoryFn({\n            pid: node.value || 0,\n          }).then((res) => {\n            const resData = res.data;\n            const nodes = resData.map((item) => ({\n              value: item.id,\n              label: item.name,\n            }));\n            // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n            resolve(nodes);\n          });\n        },\n      },\n    };\n  },\n  beforeMount() {},\n  mounted() {\n    this.typeID = Number(this.$route.query.typeID);\n    if (this.typeID === 1) {\n      this.getinstallproductList();\n    }\n  },\n  computed: {\n    realcategoryId() {\n      if (!this.querydata.categoryId) return false;\n      return this.querydata.categoryId.pop();\n    },\n  },\n  watch: {},\n  methods: {\n    //获取商品\n    getDataListFn() {\n      if (!this.querydata.categoryId && this.typeID === 1)\n        return this.$message.error(\"请选择商品分类\");\n      queryProductFn({\n        pageNo: this.dataConfig.pageNo,\n        pageSize: this.dataConfig.pageSize,\n        categoryId: this.realcategoryId,\n        isShelves: \"\",\n        title: \"\",\n      }).then((res) => {\n        const resData = this.resDataFn(res);\n        this.dataConfig.total = resData.total;\n        resData.records.forEach((item) => {\n          item.isShelves = item.isShelves == 1;\n          let isselect = this.selectarr.indexOf(item.id) !== -1;\n          if (isselect) {\n            this.openselction(item);\n          }\n        });\n        this.dataList.splice(0, this.dataList.length, ...resData.records);\n      });\n    },\n    //获取装机商品\n    getinstallproductList() {\n      queryInstallListFn({\n        name: \"\",\n        pageNo: 1,\n        pageSize: 9999,\n        queryTime: \"\",\n      }).then((ele) => {\n        this.dataList = ele.data.records;\n      });\n    },\n    //查询商品\n    queryDataListFn() {\n      this.dataConfig = {\n        pageNo: 1,\n        pageSize: 10,\n        total: 0,\n        loading: true,\n      };\n      this.getDataListFn();\n    },\n    handleSizeChange(val) {\n      this.dataConfig.pageSize = val;\n      this.getDataListFn();\n    },\n    currentChangeFn(pageNo) {\n      this.dataConfig.pageNo = pageNo;\n      this.getDataListFn();\n    },\n    //判断是否选中\n    openselction(row) {\n      this.$refs.table.toggleRowSelection(row);\n    },\n    //表格单行点击\n    selectionRow(selection, row) {\n      if (this.selectarr.length === 2)\n        return this.$message.error(\"最多选择两个\");\n      let selected = selection.length && selection.indexOf(row) !== -1; //为true时选中，为 0 时（false）未选中\n      if (selected) {\n        this.selectarr.push(row.id);\n      } else {\n        let ind = this.selectarr.indexOf(row.id);\n        if (ind > -1) {\n          this.selectarr.splice(ind, 1);\n        }\n      }\n    },\n    handleselectAll() {\n      this.$message.error(\"最多选择两个\");\n      this.$refs.table.clearSelection();\n    },\n    //提交\n    submitFn() {\n      if (this.selectarr.length === 0) return this.$message.error(\"请选择商品\");\n      if (this.selectarr.length === 1)\n        return this.$message.error(\"至少选择两个商品\");\n      updateRecommendProduct({\n        id: Number(this.$route.query.typeID),\n        productIds: this.selectarr.join(\",\"),\n      }).then((res) => {\n        if (res.code === \"000\") {\n          this.$message.success(\"提交成功\");\n          setTimeout(() => {\n            this.$router.push({ name: \"weixinindexproducttuijianList\" });\n          }, 750);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.content-view {\n  padding: 20px;\n  background: #fff;\n}\n</style>\n"]}]}