{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\system\\exp\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\system\\exp\\index.vue","mtime":1669258939333},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFkZHJlc3NGbiwgcXVlcnlFeHBSdWxlRm4sIGVkaXRFeHBSdWxlRm4sIGdldEV4cFJ1bGVEZXRhaWxGbiwgZGVsRXhwUnVsZURldGFpbEZuLCBkZWxFeHBEZXRhaWxGbiB9IGZyb20gJ0AvYXBpL3N5c3RlbS5qcycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFeHAnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhTGlzdDogW10sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkZWZEYXRhOiB7CiAgICAgICAgJ2FkZE1vbmV5JzogMCwKICAgICAgICAnYWRkVmFsdWUnOiAwLAogICAgICAgICdkZWZhdWx0TW9uZXknOiAwLAogICAgICAgICdkZWZhdWx0VmFsdWUnOiAwLAogICAgICAgICdleHBSdWxlJzogJycsCiAgICAgICAgJ2lkJzogJycsCiAgICAgICAgJ2xpc3QnOiBbXSwKICAgICAgICAnbmFtZSc6ICcnCiAgICAgIH0sCiAgICAgIHF1ZXJ5VGl0bGU6ICcnLAogICAgICBkYXRhQ29uZmlnOiB7CiAgICAgICAgJ3BhZ2VObyc6IDEsCiAgICAgICAgJ3BhZ2VTaXplJzogMjAsCiAgICAgICAgJ3RvdGFsJzogMCwKICAgICAgICAnbG9hZGluZyc6IHRydWUKICAgICAgfSwKICAgICAgcHJvdmluY2U6IHt9LAogICAgICBhbGxDaXR5czogewoKICAgICAgfQogICAgfQogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmdldERhdGFMaXN0Rm4oKQogICAgdGhpcy5hZGRyZXNzRm4oMCkudGhlbigocmVzKSA9PiB7CiAgICAgIHJlcy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgdGhpcy5wcm92aW5jZVtpdGVtLmlkXSA9IGl0ZW0KICAgICAgfSkKICAgIH0pCiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWxldGVBZGRGbihpbmRleCwgaWQpIHsKICAgICAgaWYgKGlkKSB7CiAgICAgICAgZGVsRXhwRGV0YWlsRm4oeyBpZDogaWQgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKQogICAgICAgICAgaWYgKHJlc0RhdGEgPT0gJzAwMCcpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip/vvIEnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmRlZkRhdGEubGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRlZkRhdGEubGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIH0KICAgIH0sCiAgICBwcm9JZENoYW5nZUZuKHZhbCkgewogICAgICB2YWwuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmICghdGhpcy5hbGxDaXR5c1tpdGVtXSkgewogICAgICAgICAgdGhpcy5hZGRyZXNzRm4oaXRlbSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmFsbENpdHlzLCBpdGVtLCB7CiAgICAgICAgICAgICAgbmFtZTogdGhpcy5wcm92aW5jZVtpdGVtXS5uYW1lLAogICAgICAgICAgICAgIHBpZDogaXRlbSwKICAgICAgICAgICAgICBsaXN0OiByZXMKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGFkZExpc3RJdGVtRm4oKSB7CiAgICAgIHRoaXMuZGVmRGF0YS5saXN0LnB1c2goewogICAgICAgICdhZGRNb25leSc6IDAsCiAgICAgICAgJ2FkZFZhbHVlJzogMCwKICAgICAgICAncHJvSWQnOiAnJywKICAgICAgICAnY2l0eUlkJzogJycsCiAgICAgICAgJ2RlZmF1bHRNb25leSc6IDAsCiAgICAgICAgJ2RlZmF1bHRWYWx1ZSc6IDAKICAgICAgfSkKICAgIH0sCiAgICB1cGxvYWRDb3ZlclVybChpbWcpIHsKICAgICAgdGhpcy5kZWZEYXRhLnVybCA9IGltZwogICAgfSwKICAgIGVkaXREYXRhRm4oaWQpIHsKICAgICAgZ2V0RXhwUnVsZURldGFpbEZuKHsgaWQ6IGlkIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IHJlc0RhdGEgPSB0aGlzLnJlc0RhdGFGbihyZXMpCiAgICAgICAgaWYgKHJlcy5jb2RlID09ICcwMDAnKSB7CiAgICAgICAgICByZXNEYXRhLmxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICBpdGVtLnByb0lkID0gaXRlbS5wcm9JZCA/IGl0ZW0ucHJvSWQuc3BsaXQoJywnKSA6IFtdCiAgICAgICAgICAgIGl0ZW0uY2l0eUlkID0gaXRlbS5jaXR5SWQgPyBpdGVtLmNpdHlJZC5zcGxpdCgnLCcpIDogW10sCiAgICAgICAgICAgIGl0ZW0ucHJvSWQuZm9yRWFjaCgoaXRlbTIpID0+IHsKICAgICAgICAgICAgICBpZiAoIXRoaXMuYWxsQ2l0eXNbaXRlbTJdKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkZHJlc3NGbihpdGVtMikudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmFsbENpdHlzLCBpdGVtMiwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucHJvdmluY2VbaXRlbTJdLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgcGlkOiBpdGVtMiwKICAgICAgICAgICAgICAgICAgICBsaXN0OiByZXMKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZGVmRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmRGF0YSwgcmVzRGF0YSkKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgcXVlcnlEYXRhTGlzdEZuKCkgewogICAgICBpZiAoIXRoaXMucXVlcnlUaXRsZSkgcmV0dXJuCiAgICAgIHRoaXMuZGF0YUNvbmZpZyA9IHsKICAgICAgICAncGFnZU5vJzogMSwKICAgICAgICAncGFnZVNpemUnOiAyMCwKICAgICAgICAndG90YWwnOiAwLAogICAgICAgICdsb2FkaW5nJzogdHJ1ZQogICAgICB9CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3RGbigpCiAgICB9LAogICAgcmVzU2V0UXVlcnlGbigpIHsKICAgICAgdGhpcy5kYXRhQ29uZmlnID0gewogICAgICAgICdwYWdlTm8nOiAxLAogICAgICAgICdwYWdlU2l6ZSc6IDIwLAogICAgICAgICd0b3RhbCc6IDAsCiAgICAgICAgJ2xvYWRpbmcnOiB0cnVlCiAgICAgIH0KICAgICAgdGhpcy5xdWVyeVRpdGxlID0gJycKICAgICAgdGhpcy5nZXREYXRhTGlzdEZuKCkKICAgIH0sCiAgICBzdWJtaXREYXRhRm4oKSB7CiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGVmRGF0YSkpCiAgICAgIGxldCBjYW5TdWJtaW50ID0gdHJ1ZQogICAgICBkZWxldGUgZGF0YS5jcmVhdGVUaW1lCiAgICAgIGRhdGEuaWQgPSBkYXRhLmlkID8gZGF0YS5pZCA6IHVuZGVmaW5lZAogICAgICBkYXRhLmxpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBpZiAoaXRlbS5wcm9JZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBpdGVtLnByb0lkID0gaXRlbS5wcm9JZC5qb2luKCcsJykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FuU3VibWludCA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBg6K+36YCJ5oup4oCc5Zyw5Yy65Y2V54us6YWN572u4oCd56ysJHtpbmRleCArIDF96KGM55qE55yB77yBYCwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBpZiAoaXRlbS5jaXR5SWQubGVuZ3RoID4gMCkgewogICAgICAgICAgaXRlbS5jaXR5SWQgPSBpdGVtLmNpdHlJZC5qb2luKCcsJykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FuU3VibWludCA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBg6K+36YCJ5oup4oCc5Zyw5Yy65Y2V54us6YWN572u4oCd56ysJHtpbmRleCArIDF96KGM55qE5biC77yBYCwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgICAgaWYgKCFjYW5TdWJtaW50KSByZXR1cm4KICAgICAgY29uc29sZS5sb2coZGF0YSkKICAgICAgZWRpdEV4cFJ1bGVGbihkYXRhKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKQogICAgICAgIGlmIChyZXNEYXRhID09ICcwMDAnKSB7CiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+aTjeS9nOaIkOWKn++8gScsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3RGbigpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGFkZEl0ZW1GbigpIHsKICAgICAgdGhpcy5kZWZEYXRhID0gewogICAgICAgICdhZGRNb25leSc6IDAsCiAgICAgICAgJ2FkZFZhbHVlJzogMCwKICAgICAgICAnZGVmYXVsdE1vbmV5JzogMCwKICAgICAgICAnZGVmYXVsdFZhbHVlJzogMCwKICAgICAgICAnZXhwUnVsZSc6ICcnLAogICAgICAgICdpZCc6ICcnLAogICAgICAgICdsaXN0JzogW10sCiAgICAgICAgJ25hbWUnOiAnJwogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICBhZGRyZXNzRm4ocGlkKSB7CiAgICAgIHJldHVybiBhZGRyZXNzRm4oeyBwaWQ6IHBpZCB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKQogICAgICAgIHJldHVybiByZXNEYXRhCiAgICAgIH0pCiAgICB9LAogICAgZGVsZXRlSXRlbUZuKHNjb3BlKSB7CiAgICAgIHRoaXMuZGVsZXRlQWxlcnQoKS50aGVuKCgpID0+IHsKICAgICAgICBjb25zdCByZXMgPSBkZWxFeHBSdWxlRGV0YWlsRm4oeyBpZDogc2NvcGUucm93LmlkIH0pCiAgICAgICAgcmV0dXJuIHJlcwogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKQogICAgICAgIGlmIChyZXNEYXRhID09ICcwMDAnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5Yqf77yBJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5kYXRhTGlzdC5zcGxpY2Uoc2NvcGUuJGluZGV4LCAxKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXREYXRhTGlzdEZuKCkgewogICAgICBxdWVyeUV4cFJ1bGVGbih7CiAgICAgICAgJ3BhZ2VObyc6IHRoaXMuZGF0YUNvbmZpZy5wYWdlTm8sCiAgICAgICAgJ3BhZ2VTaXplJzogdGhpcy5kYXRhQ29uZmlnLnBhZ2VTaXplLAogICAgICAgICduYW1lJzogdGhpcy5xdWVyeVRpdGxlCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IHJlc0RhdGEgPSB0aGlzLnJlc0RhdGFGbihyZXMpCiAgICAgICAgdGhpcy5kYXRhQ29uZmlnLnRvdGFsID0gcmVzRGF0YS50b3RhbAogICAgICAgIHRoaXMuZGF0YUxpc3Quc3BsaWNlKDAsIHRoaXMuZGF0YUxpc3QubGVuZ3RoLCAuLi5yZXNEYXRhLnJlY29yZHMpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5kYXRhQ29uZmlnLnBhZ2VTaXplID0gdmFsCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3RGbigpCiAgICB9LAogICAgY3VycmVudENoYW5nZUZuKHBhZ2VObykgewogICAgICB0aGlzLmRhdGFDb25maWcucGFnZU5vID0gcGFnZU5vCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3RGbigpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/exp","sourcesContent":["<template>\n  <div class=\"content_box\">\n    <first-title title=\"运费模板\" />\n    <div class=\"select_view\">\n      筛选：\n      <el-input v-model=\"queryTitle\" style=\"width:260px\" class=\"mg_r15 mg_t10\" placeholder=\"请输入运费模板名称\" />\n      <el-button class=\"mg_t10\" type=\"primary\" @click=\"queryDataListFn\">查询</el-button>\n      <el-button class=\"mg_t10\" type=\"danger\" @click=\"resSetQueryFn\">重置查询</el-button>\n      <el-button type=\"primary\" @click=\"addItemFn\"><i class=\"el-icon-plus\" />添加运费模板</el-button>\n    </div>\n    <el-table\n      v-loading=\"dataConfig.loading\"\n      border\n      :data=\"dataList\"\n      class=\"list\"\n    >\n      <el-table-column label=\"ID\" fixed width=\"60\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.id }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"运费模板名称\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"包邮规则满足多少包邮\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.expRule }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.createTime }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" width=\"200\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" size=\"small\" @click=\"editDataFn(scope.row.id)\">编辑</el-button>\n          <el-button v-if=\"scope.row.id\" type=\"danger\" size=\"small\" @click=\"deleteItemFn(scope)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog\n      title=\"添加/编辑\"\n      :visible.sync=\"dialogVisible\"\n      width=\"1200px\"\n    >\n      <div>\n        <el-form ref=\"form\" :model=\"defData\" label-width=\"160px\">\n          <el-form-item label=\"信息ID\">\n            <el-input v-model=\"defData.id\" disabled=\"disabled\" />\n          </el-form-item>\n          <el-form-item label=\"运费模板名称\">\n            <el-input v-model=\"defData.name\" placeholder=\"请输入运费模板名称\" />\n          </el-form-item>\n          <el-form-item label=\"每增加多少（件数）\">\n            <el-input v-model=\"defData.addValue\" type=\"number\" placeholder=\"请输入数量\" />\n          </el-form-item>\n          <el-form-item :label=\"`每增加${defData.addValue}件加多少钱`\">\n            <el-input v-model=\"defData.addMoney\" type=\"number\" placeholder=\"请输入金额\" />\n          </el-form-item>\n          <el-form-item label=\"默认金额\">\n            <el-input v-model=\"defData.defaultMoney\" type=\"number\" placeholder=\"请输入默认金额\" />\n          </el-form-item>\n          <el-form-item label=\"默认值\">\n            <el-input v-model=\"defData.defaultValue\" type=\"number\" placeholder=\"请输入默认值\" />\n          </el-form-item>\n          <el-form-item label=\"包邮规则满足多少包邮\">\n            <el-input v-model=\"defData.expRule\" type=\"number\" placeholder=\"请输入金额\" />\n          </el-form-item>\n          <el-form-item label=\"部分地区单独配置\">\n            <el-table :data=\"defData.list\" style=\"width: 100%\" stripe>\n              <el-table-column label=\"ID\" align=\"center\" width=\"40px\">\n                <template slot-scope=\"scope\">\n                  <!-- <span v-if=\"scope.row.id\">{{ scope.row.id }}</span> -->\n                  <span class=\"delete_icon\" @click=\"deleteAddFn(scope.$index,scope.row.id)\"><i class=\"el-icon-delete\" /></span>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"省份（可多选）\" align=\"center\" width=\"270\">\n                <template slot-scope=\"scope\">\n                  <el-select v-model=\"scope.row.proId\" style=\"width: 260px;\" multiple placeholder=\"请选择省\" @change=\"proIdChangeFn\">\n                    <el-option\n                      v-for=\"item in province\"\n                      :key=\"item.id\"\n                      :label=\"item.name\"\n                      :value=\"item.id\"\n                    />\n                  </el-select>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"城市（可多选）\" align=\"center\" width=\"270\">\n                <template slot-scope=\"scope\">\n                  <el-select v-model=\"scope.row.cityId\" style=\"width: 260px;\" multiple placeholder=\"请选择市\">\n                    <el-option-group\n                      v-for=\"proId in scope.row.proId\"\n                      v-if=\"allCitys[proId]\"\n                      :key=\"allCitys[proId].pid\"\n                      :label=\"allCitys[proId].name\"\n                    >\n                      <el-option\n                        v-for=\"item in allCitys[proId].list\"\n                        :key=\"item.id\"\n                        :label=\"item.name\"\n                        :value=\"item.id\"\n                      />\n                    </el-option-group>\n                  </el-select>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"默认金额\" width=\"100\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.defaultMoney\" type=\"number\" placeholder=\"请输入默认金额\" />\n                </template>\n              </el-table-column>\n              <el-table-column label=\"默认值\" width=\"100\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.defaultValue\" type=\"number\" placeholder=\"请输入默认值\" />\n                </template>\n              </el-table-column>\n              <el-table-column label=\"每增加多少（件数）\" width=\"100\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.addValue\" type=\"number\" placeholder=\"请输入数量\" />\n                </template>\n              </el-table-column>\n              <el-table-column label=\"每增加多少件加多少钱\" width=\"100\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.addMoney\" type=\"number\" placeholder=\"请输入金额\" />\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"small\" @click=\"addListItemFn\">新增地区单独配置项</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitDataFn\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <div class=\"el_pagination\">\n      <el-pagination\n        background\n        layout=\"prev, pager, next,total,sizes\"\n        :current-page=\"dataConfig.pageNo\"\n        :total=\"dataConfig.total\"\n        :page-sizes=\"[20, 30, 40, 50]\"\n        @current-change=\"currentChangeFn\"\n        @size-change=\"handleSizeChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { addressFn, queryExpRuleFn, editExpRuleFn, getExpRuleDetailFn, delExpRuleDetailFn, delExpDetailFn } from '@/api/system.js'\nexport default {\n  name: 'Exp',\n  data() {\n    return {\n      dataList: [],\n      dialogVisible: false,\n      defData: {\n        'addMoney': 0,\n        'addValue': 0,\n        'defaultMoney': 0,\n        'defaultValue': 0,\n        'expRule': '',\n        'id': '',\n        'list': [],\n        'name': ''\n      },\n      queryTitle: '',\n      dataConfig: {\n        'pageNo': 1,\n        'pageSize': 20,\n        'total': 0,\n        'loading': true\n      },\n      province: {},\n      allCitys: {\n\n      }\n    }\n  },\n  beforeMount() {\n    this.getDataListFn()\n    this.addressFn(0).then((res) => {\n      res.forEach((item) => {\n        this.province[item.id] = item\n      })\n    })\n  },\n  methods: {\n    deleteAddFn(index, id) {\n      if (id) {\n        delExpDetailFn({ id: id }).then((res) => {\n          const resData = this.resDataFn(res)\n          if (resData == '000') {\n            this.$message({\n              showClose: true,\n              message: '操作成功！',\n              type: 'success'\n            })\n            this.defData.list.splice(index, 1)\n          }\n        })\n      } else {\n        this.defData.list.splice(index, 1)\n      }\n    },\n    proIdChangeFn(val) {\n      val.forEach((item) => {\n        if (!this.allCitys[item]) {\n          this.addressFn(item).then((res) => {\n            this.$set(this.allCitys, item, {\n              name: this.province[item].name,\n              pid: item,\n              list: res\n            })\n          })\n        }\n      })\n    },\n    addListItemFn() {\n      this.defData.list.push({\n        'addMoney': 0,\n        'addValue': 0,\n        'proId': '',\n        'cityId': '',\n        'defaultMoney': 0,\n        'defaultValue': 0\n      })\n    },\n    uploadCoverUrl(img) {\n      this.defData.url = img\n    },\n    editDataFn(id) {\n      getExpRuleDetailFn({ id: id }).then((res) => {\n        const resData = this.resDataFn(res)\n        if (res.code == '000') {\n          resData.list.forEach((item) => {\n            item.proId = item.proId ? item.proId.split(',') : []\n            item.cityId = item.cityId ? item.cityId.split(',') : [],\n            item.proId.forEach((item2) => {\n              if (!this.allCitys[item2]) {\n                this.addressFn(item2).then((res) => {\n                  this.$set(this.allCitys, item2, {\n                    name: this.province[item2].name,\n                    pid: item2,\n                    list: res\n                  })\n                })\n              }\n            })\n          })\n          this.defData = Object.assign({}, this.defData, resData)\n          this.dialogVisible = true\n        }\n      })\n    },\n    queryDataListFn() {\n      if (!this.queryTitle) return\n      this.dataConfig = {\n        'pageNo': 1,\n        'pageSize': 20,\n        'total': 0,\n        'loading': true\n      }\n      this.getDataListFn()\n    },\n    resSetQueryFn() {\n      this.dataConfig = {\n        'pageNo': 1,\n        'pageSize': 20,\n        'total': 0,\n        'loading': true\n      }\n      this.queryTitle = ''\n      this.getDataListFn()\n    },\n    submitDataFn() {\n      const data = JSON.parse(JSON.stringify(this.defData))\n      let canSubmint = true\n      delete data.createTime\n      data.id = data.id ? data.id : undefined\n      data.list.forEach((item, index) => {\n        if (item.proId.length > 0) {\n          item.proId = item.proId.join(',')\n        } else {\n          canSubmint = false\n          this.$message({\n            showClose: true,\n            message: `请选择“地区单独配置”第${index + 1}行的省！`,\n            type: 'success'\n          })\n        }\n        if (item.cityId.length > 0) {\n          item.cityId = item.cityId.join(',')\n        } else {\n          canSubmint = false\n          this.$message({\n            showClose: true,\n            message: `请选择“地区单独配置”第${index + 1}行的市！`,\n            type: 'success'\n          })\n        }\n      })\n      if (!canSubmint) return\n      console.log(data)\n      editExpRuleFn(data).then((res) => {\n        const resData = this.resDataFn(res)\n        if (resData == '000') {\n          this.dialogVisible = false\n          this.$message({\n            showClose: true,\n            message: '操作成功！',\n            type: 'success'\n          })\n          this.getDataListFn()\n        }\n      })\n    },\n    addItemFn() {\n      this.defData = {\n        'addMoney': 0,\n        'addValue': 0,\n        'defaultMoney': 0,\n        'defaultValue': 0,\n        'expRule': '',\n        'id': '',\n        'list': [],\n        'name': ''\n      }\n      this.dialogVisible = true\n    },\n    addressFn(pid) {\n      return addressFn({ pid: pid }).then((res) => {\n        const resData = this.resDataFn(res)\n        return resData\n      })\n    },\n    deleteItemFn(scope) {\n      this.deleteAlert().then(() => {\n        const res = delExpRuleDetailFn({ id: scope.row.id })\n        return res\n      }).then((res) => {\n        const resData = this.resDataFn(res)\n        if (resData == '000') {\n          this.$message({\n            showClose: true,\n            message: '删除成功！',\n            type: 'success'\n          })\n          this.dataList.splice(scope.$index, 1)\n        }\n      })\n    },\n    getDataListFn() {\n      queryExpRuleFn({\n        'pageNo': this.dataConfig.pageNo,\n        'pageSize': this.dataConfig.pageSize,\n        'name': this.queryTitle\n      }).then((res) => {\n        const resData = this.resDataFn(res)\n        this.dataConfig.total = resData.total\n        this.dataList.splice(0, this.dataList.length, ...resData.records)\n      })\n    },\n    handleSizeChange(val) {\n      this.dataConfig.pageSize = val\n      this.getDataListFn()\n    },\n    currentChangeFn(pageNo) {\n      this.dataConfig.pageNo = pageNo\n      this.getDataListFn()\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}