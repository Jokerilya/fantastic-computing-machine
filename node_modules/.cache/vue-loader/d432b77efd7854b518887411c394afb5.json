{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\data-collect\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\data-collect\\index.vue","mtime":1669258939321},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgcXVlcnlQcm9kdWN0Q2F0ZWdvcnlGbiwKICBxdWVyeVN1cHBsaWVyTGlzdCwKICBkYXRhQWNxdWlzaXRpb24sCn0gZnJvbSAiQC9hcGkvcHJvZHVjdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiIiwKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1kYXRhOiB7CiAgICAgICAgdXJsTGlzdDogIiIsCiAgICAgICAgY2F0ZWdvcnlJZDogIiIsCiAgICAgICAgc3VwcGxpZXJJZDogIiIsCiAgICAgICAgZnJlaWdodE1vbmV5OiAiIiwKICAgICAgfSwKICAgICAgcnVsZXM6IHt9LAogICAgICBzdWJtaXRJbmc6IGZhbHNlLAogICAgICBzdXBwbGllckxpc3Q6IFtdLCAvLyDkvpvlupTllYbliJfooagKICAgICAgY2F0ZWdvcnlMaXN0OiB7CiAgICAgICAgbGF6eTogdHJ1ZSwKICAgICAgICBjaGVja1N0cmljdGx5OiB0cnVlLAogICAgICAgIGxhenlMb2FkKG5vZGUsIHJlc29sdmUpIHsKICAgICAgICAgIHF1ZXJ5UHJvZHVjdENhdGVnb3J5Rm4oewogICAgICAgICAgICBwaWQ6IG5vZGUudmFsdWUgfHwgMCwKICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gcmVzRGF0YS5tYXAoKGl0ZW0pID0+ICh7CiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQsCiAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAvLyDpgJrov4fosIPnlKhyZXNvbHZl5bCG5a2Q6IqC54K55pWw5o2u6L+U5Zue77yM6YCa55+l57uE5Lu25pWw5o2u5Yqg6L295a6M5oiQCiAgICAgICAgICAgIHJlc29sdmUobm9kZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgfSwKICAgIH07CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgbW91bnRlZCgpIHt9LAogIGNyZWF0ZWQoKSB7fSwKICBhY3RpdmF0ZWQoKSB7fSwKICB3YXRjaDoge30sCiAgY29tcHV0ZWQ6IHsKICAgIHJlYWxjYXRlZ29yeUlkKCkgewogICAgICBpZiAoIXRoaXMuZm9ybWRhdGEuY2F0ZWdvcnlJZCkgcmV0dXJuIDA7CiAgICAgIHJldHVybiB0aGlzLmZvcm1kYXRhLmNhdGVnb3J5SWQucG9wKCk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgLy/liJ3lp4vljJYKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuZ2V0UXVlcnlTdXBwbGllckxpc3QoKTsKICAgIH0sCiAgICAvLyDojrflj5bkvpvlupTllYbliJfooagKICAgIGFzeW5jIGdldFF1ZXJ5U3VwcGxpZXJMaXN0KCkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeVN1cHBsaWVyTGlzdCh7CiAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMDAwLAogICAgICB9KTsKICAgICAgaWYgKHJlcy5jb2RlID09PSAiMDAwIikgewogICAgICAgIHRoaXMuc3VwcGxpZXJMaXN0ID0gcmVzLmRhdGEucmVjb3JkczsKICAgICAgfQogICAgfSwKICAgIC8v5o+Q5LqkCiAgICBzdWJtaXQoKSB7CiAgICAgIGxldCBvYmogPSB7fTsKICAgICAgY29uc3QgcG9zdERhdGEgPSB7IC4uLnRoaXMuZm9ybWRhdGEgfTsKICAgICAgb2JqLmNhdGVnb3J5SWQgPSB0aGlzLnJlYWxjYXRlZ29yeUlkOwogICAgICBvYmouc3VwcGxpZXJJZCA9IHBvc3REYXRhLnN1cHBsaWVySWQ7CiAgICAgIG9iai5mcmVpZ2h0TW9uZXkgPSBOdW1iZXIocG9zdERhdGEuZnJlaWdodE1vbmV5KTsKICAgICAgb2JqLmxpc3QgPSBwb3N0RGF0YS51cmxMaXN0LnNwbGl0KC9bKFxyXG4pXHJcbl0rLyk7CiAgICAgIHRoaXMuc3VibWl0SW5nID0gdHJ1ZTsKICAgICAgZGF0YUFjcXVpc2l0aW9uKG9iaikKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zdWJtaXRJbmcgPSBmYWxzZTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgaWYgKHJlcy5jb2RlID09ICIwMDAiKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5o+Q5Lqk5oiQ5YqfIiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnN1Ym1pdEluZyA9IGZhbHNlOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product/data-collect","sourcesContent":["<template>\n  <div class=\"content_box\">\n    <first-title :title=\"'数据采集'\" />\n    <div class=\"bg-white\" style=\"padding: 50px 20px; min-height: 800px\">\n      <el-form ref=\"form\" :rules=\"rules\" label-width=\"130px\" :model=\"formdata\">\n        <el-form-item label=\"商品分类：\" prop=\"title\">\n          <el-cascader\n            style=\"width: 300px\"\n            v-model=\"formdata.categoryId\"\n            class=\"\"\n            placeholder=\"请选择商品分类\"\n            expand-trigger=\"hover\"\n            :props=\"categoryList\"\n            :show-all-levels=\"false\"\n          />\n        </el-form-item>\n        <el-form-item label=\"供应商：\">\n          <el-select\n            v-model=\"formdata.supplierId\"\n            style=\"width: 300px\"\n            filterable\n            clearable\n            placeholder=\"请选择供应商\"\n          >\n            <el-option\n              v-for=\"item in supplierList\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"运费：\">\n          <el-input\n            placeholder=\"请输入运费\"\n            style=\"width: 300px\"\n            v-model=\"formdata.freightMoney\"\n            type=\"number\"\n          />\n        </el-form-item>\n        <el-form-item label=\"网址：\">\n          <el-input\n            style=\"width: 600px\"\n            type=\"textarea\"\n            :rows=\"8\"\n            placeholder=\"请输入网址（多个按回车隔开）\"\n            v-model=\"formdata.urlList\"\n          >\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"\">\n          <el-button type=\"primary\" :disabled=\"submitIng\" @click=\"submit\">{{\n            submitIng ? \"提交中...\" : \"确认提交\"\n          }}</el-button>\n          <span v-show=\"submitIng\" style=\"margin-left: 15px; color: #f56c6c\"\n            >提交中,请勿重复点击!</span\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  queryProductCategoryFn,\n  querySupplierList,\n  dataAcquisition,\n} from \"@/api/product\";\nexport default {\n  name: \"\",\n  components: {},\n  props: {},\n  data() {\n    return {\n      formdata: {\n        urlList: \"\",\n        categoryId: \"\",\n        supplierId: \"\",\n        freightMoney: \"\",\n      },\n      rules: {},\n      submitIng: false,\n      supplierList: [], // 供应商列表\n      categoryList: {\n        lazy: true,\n        checkStrictly: true,\n        lazyLoad(node, resolve) {\n          queryProductCategoryFn({\n            pid: node.value || 0,\n          }).then((res) => {\n            const resData = res.data;\n            const nodes = resData.map((item) => ({\n              value: item.id,\n              label: item.name,\n            }));\n            // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n            resolve(nodes);\n          });\n        },\n      },\n    };\n  },\n  beforeMount() {\n    this.init();\n  },\n  mounted() {},\n  created() {},\n  activated() {},\n  watch: {},\n  computed: {\n    realcategoryId() {\n      if (!this.formdata.categoryId) return 0;\n      return this.formdata.categoryId.pop();\n    },\n  },\n  methods: {\n    //初始化\n    init() {\n      this.getQuerySupplierList();\n    },\n    // 获取供应商列表\n    async getQuerySupplierList() {\n      const res = await querySupplierList({\n        pageNo: 1,\n        pageSize: 1000,\n      });\n      if (res.code === \"000\") {\n        this.supplierList = res.data.records;\n      }\n    },\n    //提交\n    submit() {\n      let obj = {};\n      const postData = { ...this.formdata };\n      obj.categoryId = this.realcategoryId;\n      obj.supplierId = postData.supplierId;\n      obj.freightMoney = Number(postData.freightMoney);\n      obj.list = postData.urlList.split(/[(\\r\\n)\\r\\n]+/);\n      this.submitIng = true;\n      dataAcquisition(obj)\n        .then((res) => {\n          setTimeout(() => {\n            this.submitIng = false;\n          }, 1000);\n          if (res.code == \"000\") {\n            this.$message({\n              showClose: true,\n              message: \"提交成功\",\n              type: \"success\",\n            });\n          }\n        })\n        .catch(() => {\n          setTimeout(() => {\n            this.submitIng = false;\n          }, 1000);\n        });\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n"]}]}