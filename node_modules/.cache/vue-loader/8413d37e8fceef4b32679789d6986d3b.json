{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\product-list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\product\\product-list\\index.vue","mtime":1669258939323},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgcXVlcnlQcm9kdWN0Q2F0ZWdvcnlGbiwKICBxdWVyeVByb2R1Y3RGbiwKICBoYW5kbGVQcm9kdWN0U3RhdHVzLAogIGRlbFByb2R1Y3RGbiwKfSBmcm9tICJAL2FwaS9wcm9kdWN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcm9kdWN0TGlzdCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFMaXN0OiBbXSwKICAgICAgZGF0YUNvbmZpZzogewogICAgICAgIHBhZ2VObzogMSwKICAgICAgICBwYWdlU2l6ZTogMjAsCiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgfSwKICAgICAgaXNTaGVsdmVzOiBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogIuS4iuaetiIsCiAgICAgICAgICB2YWw6IDEsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAi5LiL5p62IiwKICAgICAgICAgIHZhbDogMCwKICAgICAgICB9LAogICAgICBdLAogICAgICBpc0V4aXN0TWFueVNwZWM6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAi5pivIiwKICAgICAgICAgIHZhbDogMSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICLlkKYiLAogICAgICAgICAgdmFsOiAwLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHF1ZXJ5RGF0YTogewogICAgICAgIGNhdGVnb3J5SWQ6ICIiLAogICAgICAgIGlzU2hlbHZlczogIiIsCiAgICAgICAgdGl0bGU6ICIiLAogICAgICB9LAogICAgICBwcm9kdWN0QnJhbmRMaXN0OiBbXSwKICAgICAgY2F0ZWdvcnlMaXN0OiB7CiAgICAgICAgbGF6eTogdHJ1ZSwKICAgICAgICBjaGVja1N0cmljdGx5OiB0cnVlLAogICAgICAgIGxhenlMb2FkKG5vZGUsIHJlc29sdmUpIHsKICAgICAgICAgIHF1ZXJ5UHJvZHVjdENhdGVnb3J5Rm4oewogICAgICAgICAgICBwaWQ6IG5vZGUudmFsdWUgfHwgMCwKICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBjb25zdCByZXNEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gcmVzRGF0YS5tYXAoKGl0ZW0pID0+ICh7CiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQsCiAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAvLyDpgJrov4fosIPnlKhyZXNvbHZl5bCG5a2Q6IqC54K55pWw5o2u6L+U5Zue77yM6YCa55+l57uE5Lu25pWw5o2u5Yqg6L295a6M5oiQCiAgICAgICAgICAgIHJlc29sdmUobm9kZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgfSwKICAgIH07CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlTm8pIHsKICAgICAgdGhpcy5kYXRhQ29uZmlnLnBhZ2VObyA9IE51bWJlcih0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlTm8pOwogICAgfQogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2VTaXplKSB7CiAgICAgIHRoaXMuZGF0YUNvbmZpZy5wYWdlU2l6ZSA9IE51bWJlcih0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlU2l6ZSk7CiAgICB9CiAgICB0aGlzLmdldERhdGFMaXN0Rm4oKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICByZWFsY2F0ZWdvcnlJZCgpIHsKICAgICAgaWYoIXRoaXMucXVlcnlEYXRhLmNhdGVnb3J5SWQpIHJldHVybiAwCgkgIHJldHVybiB0aGlzLnF1ZXJ5RGF0YS5jYXRlZ29yeUlkLnBvcCgpCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZGVsUHJvZHVjdEZuKHNjb3BlKSB7CiAgICAgIHRoaXMuZGVsZXRlQWxlcnQoKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGNvbnN0IHJlcyA9IGRlbFByb2R1Y3RGbih7CiAgICAgICAgICAgIGlkOiBzY29wZS5yb3cuaWQsCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKTsKICAgICAgICAgIGlmIChyZXNEYXRhID09ICIwMDAiKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YUxpc3Quc3BsaWNlKHNjb3BlLiRpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgc3RhdHVzQ2hhbmdlRm4odmFsLCBpbmRleCkgewogICAgICBoYW5kbGVQcm9kdWN0U3RhdHVzKHsKICAgICAgICBpZDogdGhpcy5kYXRhTGlzdFtpbmRleF0uaWQsCiAgICAgICAgc3RhdHVzOiB2YWwgPyAxIDogMCwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gIjAwMCIpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmk43kvZzmiJDlip/vvIEiLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmRhdGFMaXN0W2luZGV4XS5pc1NoZWx2ZXMgPSAhdmFsOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuZGF0YUxpc3RbaW5kZXhdLmlzU2hlbHZlcyA9ICF2YWw7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGF0YUxpc3RGbigpIHsKICAgICAgcXVlcnlQcm9kdWN0Rm4oewogICAgICAgIHBhZ2VObzogdGhpcy5kYXRhQ29uZmlnLnBhZ2VObywKICAgICAgICBwYWdlU2l6ZTogdGhpcy5kYXRhQ29uZmlnLnBhZ2VTaXplLAogICAgICAgIGNhdGVnb3J5SWQ6IHRoaXMucmVhbGNhdGVnb3J5SWQsCiAgICAgICAgaXNTaGVsdmVzOiB0aGlzLnF1ZXJ5RGF0YS5pc1NoZWx2ZXMsCiAgICAgICAgdGl0bGU6IHRoaXMucXVlcnlEYXRhLnRpdGxlLAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKTsKICAgICAgICB0aGlzLmRhdGFDb25maWcudG90YWwgPSByZXNEYXRhLnRvdGFsOwogICAgICAgIHJlc0RhdGEucmVjb3Jkcy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICBpdGVtLmlzU2hlbHZlcyA9IGl0ZW0uaXNTaGVsdmVzID09IDE7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kYXRhTGlzdC5zcGxpY2UoMCwgdGhpcy5kYXRhTGlzdC5sZW5ndGgsIC4uLnJlc0RhdGEucmVjb3Jkcyk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc1NldFF1ZXJ5Rm4oKSB7CiAgICAgIHRoaXMuZGF0YUNvbmZpZyA9IHsKICAgICAgICBwYWdlTm86IDEsCiAgICAgICAgcGFnZVNpemU6IDIwLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIH07CiAgICAgIHRoaXMucXVlcnlEYXRhID0gewogICAgICAgIGNhdGVnb3J5SWQ6IDAsCiAgICAgICAgaXNTaGVsdmVzOiAiIiwKICAgICAgICB0aXRsZTogIiIsCiAgICAgIH07CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3RGbigpOwogICAgfSwKICAgIHF1ZXJ5RGF0YUxpc3RGbigpIHsKICAgICAgdGhpcy5kYXRhQ29uZmlnID0gewogICAgICAgIHBhZ2VObzogMSwKICAgICAgICBwYWdlU2l6ZTogMjAsCiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgfTsKICAgICAgdGhpcy5nZXREYXRhTGlzdEZuKCk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5kYXRhQ29uZmlnLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLmdldERhdGFMaXN0Rm4oKTsKICAgIH0sCiAgICBjdXJyZW50Q2hhbmdlRm4ocGFnZU5vKSB7CiAgICAgIHRoaXMuZGF0YUNvbmZpZy5wYWdlTm8gPSBwYWdlTm87CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3RGbigpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product/product-list","sourcesContent":["<template>\n  <div class=\"content_box\">\n    <first-title title=\"商品管理\" />\n    <div class=\"select_view\">\n      筛选：\n      <el-input\n        v-model=\"queryData.title\"\n        style=\"width: 200px\"\n        class=\"mg_r15 mg_t10\"\n        placeholder=\"请输入商品名称\"\n      />\n      <el-select\n        v-model=\"queryData.isShelves\"\n        style=\"width: 200px\"\n        class=\"mg_r15 mg_t10\"\n        placeholder=\"请选择商品状态\"\n      >\n        <el-option\n          v-for=\"item in isShelves\"\n          :key=\"item.val\"\n          :label=\"item.name\"\n          :value=\"item.val\"\n        />\n      </el-select>\n      <el-cascader\n        style=\"width: 300px\"\n        v-model=\"queryData.categoryId\"\n        class=\"mg_r15 mg_t10\"\n        :class=\"{ el_cascader: queryData.categoryId != '' }\"\n        placeholder=\"请选择商品分类\"\n        expand-trigger=\"hover\"\n        :props=\"categoryList\"\n        :show-all-levels=\"false\"\n      />\n      <el-button class=\"mg_t10\" type=\"primary\" @click=\"queryDataListFn\"\n        >查询</el-button\n      >\n      <el-button class=\"mg_t10 mg_r15\" type=\"danger\" @click=\"resSetQueryFn\"\n        >重置查询</el-button\n      >\n      <el-link href=\"#/product/product-detail\">\n        <el-button type=\"primary\"><i class=\"el-icon-plus\" />添加商品</el-button>\n      </el-link>\n    </div>\n    <el-table\n      v-loading=\"dataConfig.loading\"\n      border\n      :data=\"dataList\"\n      class=\"list\"\n      :header-cell-style=\"{ color: '#666' }\"\n    >\n      <el-table-column\n        label=\"ID\"\n        fixed\n        width=\"60\"\n        align=\"center\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.id }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"商品标题\"\n        fixed\n        width=\"160\"\n        align=\"left\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.title }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"供应商\"\n        fixed\n        width=\"160\"\n        align=\"left\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.supplierName }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品分类\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.categoryName }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"简述\"\n        align=\"center\"\n        header-align=\"center\"\n        :show-overflow-tooltip=\"true\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.simpleDesc }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"商品型号\"\n        align=\"center\"\n        header-align=\"center\"\n        width=\"110px\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.mode }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"封面图片\"\n        width=\"110\"\n        align=\"center\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <el-image\n            style=\"width: 80px; height: 80px\"\n            :src=\"scope.row.coverImage\"\n            fit=\"cover\"\n            :preview-src-list=\"[scope.row.coverImage]\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"参考价\"\n        align=\"center\"\n        header-align=\"center\"\n        width=\"100px\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.price }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"总库存\"\n        align=\"center\"\n        header-align=\"center\"\n        width=\"84px\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.inventory }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"剩余库存\"\n        align=\"center\"\n        header-align=\"center\"\n        width=\"84px\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.lastInventory }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"是否多规格\"\n        align=\"center\"\n        header-align=\"center\"\n        width=\"98px\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.isExistManySpec == 1 ? \"是\" : \"否\" }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.createTime }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"上/下架\"\n        fixed=\"right\"\n        align=\"center\"\n        header-align=\"center\"\n        width=\"100\"\n      >\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.isShelves\"\n            @change=\"statusChangeFn($event, scope.$index)\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"操作\"\n        fixed=\"right\"\n        width=\"180\"\n        align=\"center\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <!-- <el-link style=\"margin-right: 10px\" :href=\"`#/product/product-detail?id=${scope.row.id}&pageNo=${dataConfig.pageNo}&pageSize=${dataConfig.pageSize}`\" >\n\t\t\t\t<el-button type=\"primary\" size=\"small\">编辑</el-button>\n          </el-link> -->\n          <router-link\n            style=\"margin-right: 10px\"\n            :to=\"{\n              name: 'ProductDetail',\n              query: {\n                id: scope.row.id,\n                pageNo: dataConfig.pageNo,\n                pageSize: dataConfig.pageSize,\n              },\n            }\"\n          >\n            <el-button type=\"primary\" size=\"small\">编辑</el-button>\n          </router-link>\n          <el-button size=\"small\" type=\"danger\" @click=\"delProductFn(scope)\"\n            >删除</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"el_pagination\">\n      <el-pagination\n        background\n        layout=\"prev, pager, next,total,sizes\"\n        :current-page=\"dataConfig.pageNo\"\n        :total=\"dataConfig.total\"\n        :page-sizes=\"[20, 30, 40, 50]\"\n        :page-size=\"dataConfig.pageSize\"\n        @current-change=\"currentChangeFn\"\n        @size-change=\"handleSizeChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  queryProductCategoryFn,\n  queryProductFn,\n  handleProductStatus,\n  delProductFn,\n} from \"@/api/product\";\nexport default {\n  name: \"ProductList\",\n  data() {\n    return {\n      dataList: [],\n      dataConfig: {\n        pageNo: 1,\n        pageSize: 20,\n        total: 0,\n        loading: true,\n      },\n      isShelves: [\n        {\n          name: \"上架\",\n          val: 1,\n        },\n        {\n          name: \"下架\",\n          val: 0,\n        },\n      ],\n      isExistManySpec: [\n        {\n          name: \"是\",\n          val: 1,\n        },\n        {\n          name: \"否\",\n          val: 0,\n        },\n      ],\n      queryData: {\n        categoryId: \"\",\n        isShelves: \"\",\n        title: \"\",\n      },\n      productBrandList: [],\n      categoryList: {\n        lazy: true,\n        checkStrictly: true,\n        lazyLoad(node, resolve) {\n          queryProductCategoryFn({\n            pid: node.value || 0,\n          }).then((res) => {\n            const resData = res.data;\n            const nodes = resData.map((item) => ({\n              value: item.id,\n              label: item.name,\n            }));\n            // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n            resolve(nodes);\n          });\n        },\n      },\n    };\n  },\n  beforeMount() {\n    if (this.$route.query.pageNo) {\n      this.dataConfig.pageNo = Number(this.$route.query.pageNo);\n    }\n    if (this.$route.query.pageSize) {\n      this.dataConfig.pageSize = Number(this.$route.query.pageSize);\n    }\n    this.getDataListFn();\n  },\n  computed: {\n    realcategoryId() {\n      if(!this.queryData.categoryId) return 0\n\t  return this.queryData.categoryId.pop()\n    },\n  },\n  methods: {\n    delProductFn(scope) {\n      this.deleteAlert()\n        .then(() => {\n          const res = delProductFn({\n            id: scope.row.id,\n          });\n          return res;\n        })\n        .then((res) => {\n          const resData = this.resDataFn(res);\n          if (resData == \"000\") {\n            this.dataList.splice(scope.$index, 1);\n          }\n        });\n    },\n    statusChangeFn(val, index) {\n      handleProductStatus({\n        id: this.dataList[index].id,\n        status: val ? 1 : 0,\n      })\n        .then((res) => {\n          if (res.code == \"000\") {\n            this.$message({\n              showClose: true,\n              message: \"操作成功！\",\n              type: \"success\",\n            });\n          } else {\n            this.dataList[index].isShelves = !val;\n          }\n        })\n        .catch(() => {\n          this.dataList[index].isShelves = !val;\n        });\n    },\n    getDataListFn() {\n      queryProductFn({\n        pageNo: this.dataConfig.pageNo,\n        pageSize: this.dataConfig.pageSize,\n        categoryId: this.realcategoryId,\n        isShelves: this.queryData.isShelves,\n        title: this.queryData.title,\n      }).then((res) => {\n        const resData = this.resDataFn(res);\n        this.dataConfig.total = resData.total;\n        resData.records.forEach((item) => {\n          item.isShelves = item.isShelves == 1;\n        });\n        this.dataList.splice(0, this.dataList.length, ...resData.records);\n      });\n    },\n    resSetQueryFn() {\n      this.dataConfig = {\n        pageNo: 1,\n        pageSize: 20,\n        total: 0,\n        loading: true,\n      };\n      this.queryData = {\n        categoryId: 0,\n        isShelves: \"\",\n        title: \"\",\n      };\n      this.getDataListFn();\n    },\n    queryDataListFn() {\n      this.dataConfig = {\n        pageNo: 1,\n        pageSize: 20,\n        total: 0,\n        loading: true,\n      };\n      this.getDataListFn();\n    },\n    handleSizeChange(val) {\n      this.dataConfig.pageSize = val;\n      this.getDataListFn();\n    },\n    currentChangeFn(pageNo) {\n      this.dataConfig.pageNo = pageNo;\n      this.getDataListFn();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n</style>\n"]}]}