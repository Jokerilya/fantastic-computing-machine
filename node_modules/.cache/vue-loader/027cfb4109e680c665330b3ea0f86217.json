{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\activity\\ad\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\activity\\ad\\index.vue","mtime":1669258939290},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1cGxvYWRJbWcgZnJvbSAiQC9jb21wb25lbnRzL3VwbG9hZEltZy91cGxvYWQtaW1nLnZ1ZSI7CmltcG9ydCB7IHF1ZXJ5T3BlcmF0aW9uLCBlZGl0T3BlcmF0aW9uLCBkZWxCYW5uZXJGbiB9IGZyb20gIkAvYXBpL2FjdGl2aXR5IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCYW5uZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIHVwbG9hZEltZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhTGlzdDogW10sCiAgICAgIHBvc2l0aW9uVHlwZTogWwogICAgICAgIC8vIDHpppbpobUgMuWVhuWtpumZogogICAgICAgIHsgbmFtZTogIummlumhtSIsIHZhbDogMSB9LAogICAgICAgIC8vIHsgbmFtZTogIuWVhuWtpumZoiIsIHZhbDogMiB9LAogICAgICBdLAogICAgICBlZGl0RGF0YTogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGlkOiAiIiwKICAgICAgICBzb3J0OiAiIiwKICAgICAgICBpbWdVcmw6ICIiLAogICAgICAgIHN0YXR1czogMSwKICAgICAgICBldmVudFBhcmFtOiAiIiwKICAgICAgICBldmVudFR5cGU6ICIiLAogICAgICAgIHBvc2l0aW9uVHlwZTogIiIsCiAgICAgIH0sCiAgICAgIGRhdGFDb25maWc6IHsKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICB9LAogICAgICBwb3NpdGlvblR5cGVzOiBbICAgLy8yIFBD5a6Y572R6aaW6aG1IDMgUEPllYbln47pppbpobUgNCBQQ+WVhuWfjuijheacuuWMuiA1IFBD5ZWG5Z+O5pif6YCJ5Yy6IDYgUEPllYbln47mi7zlm6LljLogNyBQQ+WVhuWfjuacuuS7tuWMugogICAgICAgIHsKICAgICAgICAgIGV2ZW50OiAyLAogICAgICAgICAgbmFtZTogIlBD5a6Y572R6aaW6aG1IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGV2ZW50OiAzLAogICAgICAgICAgbmFtZTogIlBD5ZWG5Z+O6aaW6aG1IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGV2ZW50OiA0LAogICAgICAgICAgbmFtZTogIlBD5ZWG5Z+OLeaZuuaOqOijheacuuWMuiIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBldmVudDogNSwKICAgICAgICAgIG5hbWU6ICJQQ+WVhuWfji3mnLrlsIbmmJ/pgInljLoiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgZXZlbnQ6IDYsCiAgICAgICAgICBuYW1lOiAiUEPllYbln44t5py65bCG5ou85Zui5Yy6IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGV2ZW50OiA3LAogICAgICAgICAgbmFtZTogIlBD5ZWG5Z+OLeacuuWwhuacuuS7tuWMuiIsCiAgICAgICAgfQogICAgICBdLAogICAgICBldmVudFR5cGVzOiBbCiAgICAgICAgewogICAgICAgICAgZXZlbnQ6IDEsCiAgICAgICAgICBuYW1lOiAi5pmu6YCa5ZWG5ZOBIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGV2ZW50OiAyLAogICAgICAgICAgbmFtZTogIuijheacuuS6p+WTgSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBldmVudDogMywKICAgICAgICAgIG5hbWU6ICLpobXpnaLlpJbpk74iLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmdldERhdGFMaXN0Rm4oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGVkaXRCYW5rVHlwZUZuKHJvdykgewogICAgICBlZGl0T3BlcmF0aW9uKAogICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHJvdywgewogICAgICAgICAgc3RhdHVzOiByb3cuc3RhdHVzID8gMSA6IDAsCiAgICAgICAgICBjcmVhdGVUaW1lOiB1bmRlZmluZWQsCiAgICAgICAgfSkKICAgICAgKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKTsKICAgICAgICBpZiAocmVzRGF0YSA9PSAiMDAwIikgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nOaIkOWKn++8gSIsCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5nZXREYXRhTGlzdEZuKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhZGREYXRhRm4oKSB7CiAgICAgIHRoaXMuZGF0YUxpc3QudW5zaGlmdChPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXREYXRhKSk7CiAgICB9LAogICAgZGVsZXRlQWRkRm4oaW5kZXgpIHsKICAgICAgdGhpcy5kYXRhTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIGRlbEl0ZW1GbihpZCkgewogICAgICB0aGlzLmRlbGV0ZUFsZXJ0KCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBjb25zdCByZXMgPSBkZWxCYW5uZXJGbih7IGlkOiBpZCB9KTsKICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5yZXNEYXRhRm4ocmVzKTsKICAgICAgICAgIGlmIChyZXNEYXRhID09ICIwMDAiKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5Yqf77yBIiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmdldERhdGFMaXN0Rm4oKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICB1cGxvYWRTdWNGbihpbWcsIGluZGV4KSB7CiAgICAgIHRoaXMuJHNldCgKICAgICAgICB0aGlzLmRhdGFMaXN0LAogICAgICAgIGluZGV4LAogICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGF0YUxpc3RbaW5kZXhdLCB7IGltZ1VybDogaW1nIH0pCiAgICAgICk7CiAgICB9LAogICAgc3RhdHVzQ2hhbmdlRm4odmFsLCBpbmRleCkgewogICAgICBsZXQgZWRpdERhdGEgPSB0aGlzLmRhdGFMaXN0W2luZGV4XTsKICAgICAgZWRpdE9wZXJhdGlvbigKICAgICAgICBPYmplY3QuYXNzaWduKHt9LCBlZGl0RGF0YSwgewogICAgICAgICAgc3RhdHVzOiB2YWwgPyAxIDogMCwKICAgICAgICAgIGNyZWF0ZVRpbWU6IHVuZGVmaW5lZCwKICAgICAgICB9KQogICAgICApCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5jb2RlID09ICIwMDAiKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5Yqf77yBIiwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5kYXRhTGlzdFtpbmRleF0uc3RhdHVzID0gIXZhbDsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmRhdGFMaXN0W2luZGV4XS5zdGF0dXMgPSAhdmFsOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldERhdGFMaXN0Rm4oKSB7CiAgICAgIHF1ZXJ5T3BlcmF0aW9uKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgY29uc3QgcmVzRGF0YSA9IHRoaXMucmVzRGF0YUZuKHJlcyk7CiAgICAgICAgdGhpcy5kYXRhTGlzdCA9IHJlc0RhdGE7CiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/activity/ad","sourcesContent":["<template>\n  <div class=\"content_box\">\n    <first-title title=\"Ad广告图\" />\n    <div class=\"select_view\">\n      <el-button type=\"primary\" @click=\"addDataFn\"\n        ><i class=\"el-icon-plus\" />添加Ad广告图</el-button\n      >\n      <span class=\"mg_l15\" style=\"color: #f56c6c\"\n        >注意：“修改”和“添加”广告图后需要点击右侧“提交编辑”按钮才会生效哦！</span\n      >\n    </div>\n    <el-table\n      v-loading=\"dataConfig.loading\"\n      border\n      :data=\"dataList\"\n      class=\"list\"\n    >\n      <el-table-column\n        label=\"ID\"\n        width=\"60px\"\n        align=\"center\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.id }}</span>\n          <span\n            v-if=\"!scope.row.id\"\n            class=\"delete_icon\"\n            @click=\"deleteAddFn(scope.$index)\"\n            ><i class=\"el-icon-delete\"\n          /></span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"名称\" align=\"center\" header-align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-input\n            v-model=\"scope.row.name\"\n            type=\"text\"\n            placeholder=\"请输入名称\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column label=\"图片\" align=\"center\" width=\"220\">\n        <template slot-scope=\"scope\">\n          <upload-img\n            width=\"200px\"\n            height=\"100px\"\n            :img=\"scope.row.imgUrl\"\n            @uploadSuc=\"uploadSucFn($event, scope.$index)\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column label=\"事件类型\" align=\"center\" header-align=\"center\" width=\"150\">\n        <template slot-scope=\"scope\">\n          <el-select v-model=\"scope.row.eventType\" placeholder=\"请选择\">\n            <el-option\n              v-for=\"item in eventTypes\"\n              :key=\"item.event\"\n              :label=\"item.name\"\n              :value=\"item.event\"\n            />\n          </el-select>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"事件类型值(id或网址)\"\n        align=\"center\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <el-input v-model=\"scope.row.eventParam\" />\n        </template>\n      </el-table-column>\n      <el-table-column label=\"广告位置\" align=\"center\" header-align=\"center\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-select\n            v-model=\"scope.row.positionType\"\n            placeholder=\"请选择广告位置\"\n          >\n            <el-option\n              v-for=\"item in positionTypes\"\n              :key=\"item.event\"\n              :label=\"item.name\"\n              :value=\"item.event\"\n            />\n          </el-select>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"排序(越小越前)\"\n        align=\"center\"\n        header-align=\"center\" width=\"160\"\n      >\n        <template slot-scope=\"scope\">\n          <el-input\n            v-model=\"scope.row.sort\"\n            type=\"number\"\n            placeholder=\"请输入排序\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"状态(开启/关闭)\"\n        align=\"center\"\n        header-align=\"center\" width=\"120\"\n      >\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.status\"\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n            :disabled=\"scope.row.id == undefined\"\n            @change=\"statusChangeFn($event, scope.$index)\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"操作\"\n        fixed=\"right\"\n        width=\"200\"\n        align=\"center\"\n        header-align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"editBankTypeFn(scope.row)\"\n            >提交编辑</el-button\n          >\n          <el-button\n            v-if=\"scope.row.id\"\n            type=\"danger\"\n            size=\"small\"\n            @click=\"delItemFn(scope.row.id)\"\n            ><i class=\"el-icon-delete\" />删除</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n<script>\nimport uploadImg from \"@/components/uploadImg/upload-img.vue\";\nimport { queryOperation, editOperation, delBannerFn } from \"@/api/activity\";\nexport default {\n  name: \"Banner\",\n  components: {\n    uploadImg,\n  },\n  data() {\n    return {\n      dataList: [],\n      positionType: [\n        // 1首页 2商学院\n        { name: \"首页\", val: 1 },\n        // { name: \"商学院\", val: 2 },\n      ],\n      editData: {\n        name: \"\",\n        id: \"\",\n        sort: \"\",\n        imgUrl: \"\",\n        status: 1,\n        eventParam: \"\",\n        eventType: \"\",\n        positionType: \"\",\n      },\n      dataConfig: {\n        loading: true,\n      },\n      positionTypes: [   //2 PC官网首页 3 PC商城首页 4 PC商城装机区 5 PC商城星选区 6 PC商城拼团区 7 PC商城机件区\n        {\n          event: 2,\n          name: \"PC官网首页\",\n        },\n        {\n          event: 3,\n          name: \"PC商城首页\",\n        },\n        {\n          event: 4,\n          name: \"PC商城-智推装机区\",\n        },\n        {\n          event: 5,\n          name: \"PC商城-机将星选区\",\n        },\n        {\n          event: 6,\n          name: \"PC商城-机将拼团区\",\n        },\n        {\n          event: 7,\n          name: \"PC商城-机将机件区\",\n        }\n      ],\n      eventTypes: [\n        {\n          event: 1,\n          name: \"普通商品\",\n        },\n        {\n          event: 2,\n          name: \"装机产品\",\n        },\n        {\n          event: 3,\n          name: \"页面外链\",\n        },\n      ],\n    };\n  },\n  beforeMount() {\n    this.getDataListFn();\n  },\n  methods: {\n    editBankTypeFn(row) {\n      editOperation(\n        Object.assign({}, row, {\n          status: row.status ? 1 : 0,\n          createTime: undefined,\n        })\n      ).then((res) => {\n        const resData = this.resDataFn(res);\n        if (resData == \"000\") {\n          this.$message({\n            showClose: true,\n            message: \"操作成功！\",\n            type: \"success\",\n          });\n          this.getDataListFn();\n        }\n      });\n    },\n    addDataFn() {\n      this.dataList.unshift(Object.assign({}, this.editData));\n    },\n    deleteAddFn(index) {\n      this.dataList.splice(index, 1);\n    },\n    delItemFn(id) {\n      this.deleteAlert()\n        .then(() => {\n          const res = delBannerFn({ id: id });\n          return res;\n        })\n        .then((res) => {\n          const resData = this.resDataFn(res);\n          if (resData == \"000\") {\n            this.$message({\n              showClose: true,\n              message: \"操作成功！\",\n              type: \"success\",\n            });\n            this.getDataListFn();\n          }\n        });\n    },\n    uploadSucFn(img, index) {\n      this.$set(\n        this.dataList,\n        index,\n        Object.assign({}, this.dataList[index], { imgUrl: img })\n      );\n    },\n    statusChangeFn(val, index) {\n      let editData = this.dataList[index];\n      editOperation(\n        Object.assign({}, editData, {\n          status: val ? 1 : 0,\n          createTime: undefined,\n        })\n      )\n        .then((res) => {\n          if (res.code == \"000\") {\n            this.$message({\n              showClose: true,\n              message: \"操作成功！\",\n              type: \"success\",\n            });\n          } else {\n            this.dataList[index].status = !val;\n          }\n        })\n        .catch(() => {\n          this.dataList[index].status = !val;\n        });\n    },\n    getDataListFn() {\n      queryOperation().then((res) => {\n        const resData = this.resDataFn(res);\n        this.dataList = resData;\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\"></style>\n"]}]}