{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\system\\setup-menu\\index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\system\\setup-menu\\index.vue","mtime":1669258939334},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250ZW50X2JveHsKICAuZWxfdHJlZXsKICAgIGhlaWdodDogODAwcHg7CiAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGOwogICAgb3ZlcmZsb3c6IGF1dG87CiAgICBwYWRkaW5nOiAyMHB4IDE1cHg7CiAgfQogIC5lbC10cmVlLW5vZGV7CiAgICBtYXJnaW46IDE1cHggMDsKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/setup-menu","sourcesContent":["<template>\n  <div class=\"content_box\">\n    <first-title title=\"菜单管理\" />\n    <el-row style=\"margin-top: 10px;\" :gutter=\"10\">\n      <el-col :xs=\"6\" :sm=\"4\" :md=\"4\" :lg=\"4\" :xl=\"4\">\n        <div class=\"el_tree\">\n          <el-button style=\"width: 100%;margin-bottom: 15px;\" type=\"primary\" size=\"medium\" @click=\"addDataFn\"><i class=\"el-icon-plus\" />添加菜单</el-button>\n          <el-button style=\"width: 100%;margin-bottom: 15px;margin-left: 0;\" type=\"primary\" size=\"medium\" @click=\"backRootFn\"><i class=\"el-icon-d-arrow-left\" />返回根菜单</el-button>\n          <el-tree accordion :data=\"menuTreeList\" :props=\"defaultProps\" @node-click=\"handleNodeClick\">\n            <span slot-scope=\"{ node, data }\">{{ data.name }}(ID:{{ data.id }})</span>\n          </el-tree>\n        </div>\n      </el-col>\n      <el-col :xs=\"18\" :sm=\"20\" :md=\"20\" :lg=\"20\" :xl=\"20\">\n        <el-table\n          v-loading=\"dataConfig.loading\"\n          border\n          :data=\"dataList\"\n          class=\"list\"\n          style=\"margin-top: 0px;min-height: 800px;padding: 15px;\"\n        >\n          <el-table-column label=\"菜单ID\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.id }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"父级ID\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.parentId }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"菜单名称\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.name }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"授权标识\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.authValue }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"菜单类型\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.type == 0 ? '菜单' : '按钮' }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"URL\" width=\"240\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.url }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"描述\" width=\"240\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.description }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"120px\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" size=\"small\" @click=\"editDataFn(scope.row)\">编辑</el-button>\n              <!-- <el-button v-if=\"scope.row.id\" type=\"danger\" size=\"small\" @click=\"deleteFn(scope)\"><i class=\"el-icon-delete\" />删除</el-button> -->\n            </template>\n          </el-table-column>\n        </el-table>\n        <div class=\"el_pagination\">\n          <el-pagination\n            background\n            layout=\"prev, pager, next,total,sizes\"\n            :current-page=\"dataConfig.pageNo\"\n            :total=\"dataConfig.total\"\n            :page-sizes=\"[20, 30, 40, 50]\"\n            @current-change=\"currentChangeFn\"\n            @size-change=\"handleSizeChange\"\n          />\n        </div>\n      </el-col>\n    </el-row>\n\n    <el-dialog\n      title=\"添加/编辑菜单\"\n      :visible.sync=\"dialogVisible\"\n      width=\"800px\"\n    >\n      <div>\n        <el-form ref=\"form\" :model=\"editData\" label-width=\"80px\">\n          <el-form-item label=\"菜单名称\">\n            <el-input v-model=\"editData.name\" />\n          </el-form-item>\n          <el-form-item label=\"菜单类型\">\n            <el-select v-model=\"editData.type\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in menuType\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </el-form-item>\n          <!-- <el-form-item label=\"排序\">\n            <el-input v-model=\"editData.sort\" />\n          </el-form-item> -->\n          <el-form-item label=\"菜单URL\">\n            <el-input v-model=\"editData.url\" />\n          </el-form-item>\n          <el-form-item label=\"描述\">\n            <el-input v-model=\"editData.description\" />\n          </el-form-item>\n          <el-form-item label=\"授权标识\">\n            <el-input v-model=\"editData.authValue\" />\n          </el-form-item>\n          <el-form-item label=\"菜单ID\">\n            <el-input v-model=\"editData.id\" disabled=\"disabled\" />\n          </el-form-item>\n          <el-form-item label=\"父级ID\">\n            <el-input v-model=\"editData.parentId\" />\n          </el-form-item>\n        </el-form>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitFn\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n<script>\nimport { menuAddOrUpdateFn, menuListFn, menuRemoveFn, menuTreeListFn } from '@/api/system.js'\nimport { mapActions, mapGetters } from 'vuex'\nexport default {\n  name: 'SetupMenu',\n  data() {\n    return {\n      dataList: [],\n      dialogVisible: false,\n      pid: 0,\n      editData: {\n        'authValue': '',\n        'description': '',\n        'icon': '',\n        'id': '',\n        'name': '',\n        'parentId': '',\n        // 'sort': 0,\n        'type': '',\n        'url': ''\n      },\n      menuType: [\n        {\n          value: 0,\n          label: '菜单'\n        },\n        {\n          value: 1,\n          label: '按钮'\n        }\n      ],\n      dataConfig: {\n        'pageNo': 1,\n        'pageSize': 50,\n        'total': 0,\n        'loading': true\n      },\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      }\n    }\n  },\n  beforeMount() {\n    this['user/actionMenulist']({ menuType: 0 })\n    this.menuListFn()\n  },\n  computed: {\n    ...mapGetters(['menuTreeList'])\n  },\n  methods: {\n    ...mapActions(['user/actionMenulist']),\n    submitFn() {\n      menuAddOrUpdateFn(Object.assign({}, this.editData)).then((res) => {\n        const resData = this.resDataFn(res)\n        if (resData == '000') {\n          this.$message({\n            showClose: true,\n            message: '操作成功！',\n            type: 'success'\n          })\n          this.dialogVisible = false\n          this.menuListFn()\n          this['user/actionMenulist']({ menuType: 0 })\n        }\n      })\n    },\n    editDataFn(row) {\n      this.dialogVisible = true\n      this.editData = Object.assign({}, this.editData, row)\n    },\n    addDataFn() {\n      this.dialogVisible = true\n      this.editData = {\n        'authValue': '',\n        'description': '',\n        'icon': '',\n        'id': '',\n        'name': '',\n        'parentId': '',\n        // 'sort': 0,\n        'type': '',\n        'url': ''\n      }\n    },\n    handleNodeClick(data) {\n      console.log(data)\n      this.dataConfig = {\n        'pageNo': 1,\n        'pageSize': 50,\n        'total': 0,\n        'loading': true\n      }\n      this.pid = data.id\n      this.menuListFn()\n    },\n    menuTreeListFn() {\n      menuTreeListFn({ id: 0 }).then((res) => {\n        const resData = this.resDataFn(res)\n        this.menuTreeList.splice(0, this.menuTreeList.length, ...resData)\n      })\n    },\n    deleteFn(scope) {\n      this.deleteAlert().then(() => {\n        const res = menuRemoveFn({ menuId: scope.row.id })\n        return res\n      }).then((res) => {\n        const resData = this.resDataFn(res)\n        if (resData == '000') {\n          this.$message({\n            showClose: true,\n            message: '操作成功！',\n            type: 'success'\n          })\n          this.dataList.splice(scope.$index, 1)\n        }\n      })\n    },\n    handleSizeChange(val) {\n      this.dataConfig.pageSize = val\n      this.menuListFn()\n    },\n    currentChangeFn(pageNo) {\n      this.dataConfig.pageNo = pageNo\n      this.menuListFn()\n    },\n    backRootFn() {\n      this.dataConfig.pageNo = 1\n      this.dataConfig.pageSize = 20\n      this.pid = 0\n      this.menuListFn()\n    },\n    menuListFn() {\n      menuListFn({\n        name: '',\n        pageNo: this.dataConfig.pageNo,\n        pageSize: this.dataConfig.pageSize,\n        parentId: this.pid\n      }).then((res) => {\n        const resData = this.resDataFn(res)\n        this.dataList.splice(0, this.dataList.length, ...resData.records)\n        this.dataConfig.total = resData.total\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.content_box{\n  .el_tree{\n    height: 800px;\n    background: #FFFFFF;\n    overflow: auto;\n    padding: 20px 15px;\n  }\n  .el-tree-node{\n    margin: 15px 0;\n  }\n}\n</style>\n"]}]}