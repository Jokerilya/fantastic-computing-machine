{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\enterpriseList.vue?vue&type=style&index=0&id=691b0235&lang=less&scoped=true&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\maintenance\\enterpriseList.vue","mtime":1695177112612},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRhYmxlLXdyYXBwZXIgewogIGhlaWdodDogY2FsYygxMDAlLTIwMHB4KTsKfQouY29udGVudCB7CiAgLm9uZUxpbmUgewogICAgZGlzcGxheTogZmxleDsKICAgIG1hcmdpbi1ib3R0b206IDI1cHg7CiAgICAuaXRlbSB7CiAgICAgIGZsZXg6IDE7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgcGFkZGluZzogMCA1cHg7CiAgICAgIC50aXRsZSB7CiAgICAgICAgY29sb3I6ICMxZjFmMWY7CiAgICAgICAgZm9udC1zaXplOiAxNXB4OwogICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgIH0KICAgICAgLmlucCB7CiAgICAgICAgd2lkdGg6IDIwMHB4OwogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["enterpriseList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"enterpriseList.vue","sourceRoot":"src/views/maintenance","sourcesContent":["<!--企业列表-->\n<template>\n  <div class=\"app-container\">\n    <!-- 顶部工具栏部分 -->\n    <div class=\"manage-top\">\n      <el-form label-width=\"88px\" class=\"rule-form\" label-position=\"right\">\n        <el-row :gutter=\"25\">\n          <el-col :span=\"5\" style=\"padding: 0;\">\n            <el-form-item label=\"公司名称\">\n              <el-input\n                placeholder=\"请输入公司名称\"\n                v-model=\"enterpriseName\"\n              ></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\" style=\"padding: 0;\">\n            <el-form-item label=\"联系电话\">\n              <el-input\n                placeholder=\"请输入联系电话\"\n                v-model=\"enterprisePhone\"\n              ></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"5\" style=\"padding: 0;\">\n            <el-form-item label=\"推荐人\">\n              <el-select\n                filterable\n                :remote-method=\"remoteMethod\"\n                remote\n                v-model=\"referencePerson\"\n                placeholder=\"请输入推荐人\"\n              >\n                <el-option\n                  v-for=\"item in masterOptions\"\n                  :key=\"item.value\"\n                  :label=\"item.realName\"\n                  :value=\"item.realName\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-button\n              icon=\"el-icon-zoom-in\"\n              plain\n              type=\"primary\"\n              @click=\"_getEnterpriseList(1)\"\n              >查询</el-button\n            >\n            <el-button icon=\"el-icon-refresh\" plain type=\"info\" @click=\"resetFn\"\n              >重置</el-button\n            >\n            <el-button\n              icon=\"el-icon-refresh\"\n              plain\n              type=\"primary\"\n              @click=\"_handleEnterpriseInfoExport()\"\n              >导出</el-button\n            >\n          </el-col>\n        </el-row>\n      </el-form>\n    </div>\n\n    <!-- 空行 -->\n    <div style=\"height: 16px;\"></div>\n\n    <el-card>\n      <!-- 企业列表表格部分 -->\n      <el-table\n        highlight-current-row\n        v-loading.fullscreen.lock=\"loading\"\n        element-loading-text=\"拼命加载中\"\n        element-loading-spinner=\"el-icon-loading\"\n        :data=\"enterpriseList\"\n        height=\"65vh\"\n      >\n        <el-table-column\n          prop=\"enterpriseName\"\n          label=\"企业名称\"\n          show-overflow-tooltip\n          width=\"250\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"maintenancePhone\"\n          label=\"联系电话\"\n          show-overflow-tooltip\n          width=\"120\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"maintenancePeople\"\n          label=\"联系人\"\n          show-overflow-tooltip\n          width=\"70\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"salesman\"\n          label=\"业务员\"\n          show-overflow-tooltip\n          width=\"70\"\n          align=\"center\"\n        ></el-table-column>\n        <!-- <el-table-column\n        prop=\"salesmanId\"\n        label=\"业务员\"\n        show-overflow-tooltip\n        width=\"100\"\n        align=\"center\"\n      ></el-table-column> -->\n        <el-table-column\n          prop=\"frname\"\n          label=\"法人代表\"\n          show-overflow-tooltip\n          width=\"100\"\n          align=\"center\"\n        ></el-table-column>\n        <!-- <el-table-column\n          prop=\"superiorEnterpriseName\"\n          label=\"团队长\"\n          show-overflow-tooltip\n          width=\"100\"\n          align=\"center\"\n        ></el-table-column> -->\n        <!-- <el-table-column\n          prop=\"realName\"\n          label=\"真实姓名\"\n          show-overflow-tooltip\n          width=\"100\"\n          align=\"center\"\n        ></el-table-column> -->\n        <!-- <el-table-column\n        prop=\"enterpriseTypeId\"\n        label=\"企业类型\"\n        show-overflow-tooltip\n        width=\"100\"\n        align=\"center\"\n      ></el-table-column>-->\n        <el-table-column\n          label=\"营业执照\"\n          show-overflow-tooltip\n          width=\"150\"\n          align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            <a\n              :href=\"scope.row.businessLicense\"\n              target=\"_blank\"\n              title=\"营业执照\"\n              v-if=\"scope.row.businessLicense\"\n            >\n              <el-image\n                style=\"width:50px;height:50px\"\n                :src=\"scope.row.businessLicense\"\n              ></el-image>\n            </a>\n            <div v-else style=\"font-size: 25px;\">\n              /\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"enterpriseAddress\"\n          label=\"企业地址\"\n          show-overflow-tooltip\n          width=\"350\"\n          align=\"center\"\n        ></el-table-column>\n\n        <!-- <el-table-column\n          prop=\"phone\"\n          label=\"联系电话\"\n          show-overflow-tooltip\n          width=\"120\"\n          align=\"center\"\n        ></el-table-column> -->\n        <el-table-column\n          label=\"认证状态\"\n          show-overflow-tooltip\n          width=\"150\"\n          align=\"center\"\n        >\n          <template slot-scope=\"{ row }\">\n            <div v-if=\"row.enterpriseFlag === 0\" style=\"color: #ccc;\">\n              未认证\n            </div>\n            <div v-if=\"row.enterpriseFlag === 1\" style=\"color: blue;\">\n              审核中\n            </div>\n            <div v-if=\"row.enterpriseFlag === 2\" style=\"color: green;\">\n              审核成功\n            </div>\n            <div v-if=\"row.enterpriseFlag === 3\" style=\"color: red;\">\n              审核失败\n            </div>\n          </template>\n        </el-table-column>\n\n        <!-- <el-table-column\n          prop=\"settledTime\"\n          label=\"入驻时间\"\n          show-overflow-tooltip\n          width=\"200\"\n          align=\"center\"\n        ></el-table-column> -->\n        <!-- <el-table-column\n          prop=\"portrait\"\n          label=\"微信头像\"\n          show-overflow-tooltip\n          width=\"150\"\n          align=\"center\"\n        >\n          <template slot-scope=\"scope\">\n            <a\n              v-if=\"scope.row.portrait\"\n              :href=\"scope.row.portrait\"\n              target=\"_blank\"\n              title=\"微信头像\"\n            >\n              <el-image\n                style=\"width:50px;height:50px\"\n                :src=\"scope.row.portrait\"\n              ></el-image>\n            </a>\n            <div v-else style=\"font-size: 25px;\">\n              /\n            </div>\n          </template>\n        </el-table-column> -->\n        <el-table-column\n          prop=\"deviceScale\"\n          label=\"公司规模\"\n          show-overflow-tooltip\n          width=\"100\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"deviceTypeIdsName\"\n          label=\"设备类型\"\n          show-overflow-tooltip\n          width=\"200\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          label=\"操作\"\n          width=\"220px\"\n          fixed=\"right\"\n          align=\"center\"\n        >\n          <template slot-scope=\"{ row }\">\n            <div class=\"settings\">\n              <el-button\n                type=\"warning\"\n                size=\"mini\"\n                plain\n                @click=\"auditFn(row)\"\n                v-if=\"row.enterpriseFlag !== 2 && row.enterpriseFlag !== 3\"\n                >审核</el-button\n              >\n              <el-button\n                type=\"warning\"\n                size=\"mini\"\n                plain\n                @click=\"openInvitationCode(row.id)\"\n                >邀请码</el-button\n              >\n              <el-button type=\"warning\" size=\"mini\" plain @click=\"openTeam(row)\"\n                >成员</el-button\n              >\n              <el-button type=\"warning\" size=\"mini\" plain @click=\"editTeam(row)\"\n                >编辑</el-button\n              >\n            </div>\n          </template>\n\n          <!-- <model\n          ref=\"enterpriseList\"\n          title=\"企业审核\"\n          @ok=\"handleEnterpriseExamine\"\n          @close=\"resetEditForm\"\n        >\n          <el-form\n            :model=\"editForm\"\n            ref=\"editForm\"\n            status-icon\n            label-width=\"120px\"\n            class=\"demo-ruleForm\"\n          >\n            <el-form-item\n              label=\"审核状态\"\n              prop=\"name\"\n              style=\"width:calc(100% - 120px)\"\n            >\n              <el-switch v-model=\"editForm.status\"></el-switch>\n            </el-form-item>\n          </el-form>\n        </model> -->\n\n          <model\n            :isSubmit=\"false\"\n            ref=\"enterpriseTeamList\"\n            title=\"企业团队列表\"\n            @ok=\"handleEnterpriseExamine\"\n            @close=\"resetTeamList\"\n            :column=\"2\"\n            width=\"45%\"\n            center\n          >\n            <el-table\n              highlight-current-row\n              v-loading.fullscreen.lock=\"loading\"\n              element-loading-text=\"拼命加载中\"\n              element-loading-spinner=\"el-icon-loading\"\n              :data=\"enpTeamList\"\n              max-height=\"700\"\n              style=\"width: 1500px;\"\n            >\n              <el-table-column\n                prop=\"realName\"\n                label=\"真实姓名\"\n                show-overflow-tooltip\n                width=\"200\"\n                align=\"center\"\n              ></el-table-column>\n              <el-table-column\n                prop=\"phone\"\n                label=\"联系电话\"\n                show-overflow-tooltip\n                width=\"100\"\n                align=\"center\"\n              ></el-table-column>\n              <el-table-column\n                prop=\"postName\"\n                label=\"岗位\"\n                show-overflow-tooltip\n                width=\"100\"\n                align=\"center\"\n              ></el-table-column>\n              <el-table-column\n                prop=\"workStatus\"\n                label=\"状态\"\n                show-overflow-tooltip\n                width=\"100\"\n                align=\"center\"\n              >\n                <template slot-scope=\"{ row }\">\n                  {{\n                    row.workStatus === 1\n                      ? \"工作中\"\n                      : row.workStatus === 2\n                      ? \"外出中\"\n                      : \"休息中\"\n                  }}\n                </template>\n              </el-table-column>\n              <el-table-column\n                label=\"权限\"\n                show-overflow-tooltip\n                width=\"100\"\n                align=\"center\"\n              >\n                <template slot-scope=\"{ row }\">\n                  {{\n                    row.enterpriseRoleId === 1\n                      ? \"超管\"\n                      : row.enterpriseRoleId === 2\n                      ? \"管理\"\n                      : \"成员\"\n                  }}\n                </template>\n              </el-table-column>\n            </el-table>\n            <div style=\"height: 40px;\"></div>\n          </model>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页部分 -->\n      <div style=\"margin-top: 20px;display: flex;justify-content: center;\">\n        <el-pagination\n          background\n          @size-change=\"handleSizeChange\"\n          @current-change=\"updatePageNo\"\n          :current-page=\"currentPage\"\n          :page-size=\"20\"\n          layout=\"total,  prev, pager, next, jumper\"\n          :total=\"total\"\n        ></el-pagination>\n      </div>\n    </el-card>\n\n    <!-- 放大邀请码图片 -->\n    <div class=\"demo-image__preview\">\n      <el-image\n        style=\"width: 0px; height: 0px\"\n        :src=\"enlargeInvitationCodeUrl\"\n        :preview-src-list=\"enlargeInvitationCodeUrlList\"\n        ref=\"enlargeInvitationCode\"\n      >\n      </el-image>\n    </div>\n\n    <!-- 编辑企业弹窗 -->\n    <div v-if=\"editForm\">\n      <el-dialog\n        title=\"编辑企业\"\n        width=\"60%\"\n        :visible=\"editEnterprise\"\n        :before-close=\"closeEditEnterprise\"\n      >\n        <div class=\"content\">\n          <div class=\"oneLine\">\n            <div class=\"item\">\n              <div class=\"title\">\n                联系人\n              </div>\n              <el-input class=\"inp\" v-model=\"editForm.maintenancePeople\">\n              </el-input>\n            </div>\n            <div class=\"item\">\n              <div class=\"title\">\n                联系电话\n              </div>\n              <el-input class=\"inp\" v-model=\"editForm.maintenancePhone\">\n              </el-input>\n            </div>\n            <div class=\"item\">\n              <div class=\"title\">\n                法人代表\n              </div>\n              <el-input class=\"inp\" v-model=\"editForm.frname\"> </el-input>\n            </div>\n          </div>\n          <div class=\"oneLine\">\n            <div class=\"item\">\n              <div class=\"title\">\n                企业名称\n              </div>\n              <el-input class=\"inp\" v-model=\"editForm.enterpriseName\">\n              </el-input>\n            </div>\n            <div class=\"item\">\n              <div class=\"title\">\n                企业地址\n              </div>\n              <el-input class=\"inp\" v-model=\"editForm.enterpriseAddress\">\n              </el-input>\n            </div>\n            <div class=\"item\">\n              <div class=\"title\">\n                纳税人识别号\n              </div>\n              <el-input\n                class=\"inp\"\n                v-model=\"editForm.taxpayerNo\"\n                :disabled=\"true\"\n              >\n              </el-input>\n            </div>\n          </div>\n          <div class=\"oneLine\">\n            <div class=\"item\">\n              <div class=\"title\">\n                设备类型\n              </div>\n              <el-cascader\n                class=\"inp\"\n                :show-all-levels=\"false\"\n                :options=\"typeList\"\n                v-model=\"editForm.deviceTypeIds\"\n                :props=\"{\n                  checkStrictly: true,\n                  emitPath: false,\n                  value: 'id',\n                  label: 'name',\n                  multiple: true,\n                  children: 'list',\n                }\"\n                collapse-tags\n                clearable\n              ></el-cascader>\n            </div>\n            <!-- <div class=\"item\">\n              <div class=\"title\">\n                成立日期\n              </div>\n              <el-date-picker\n                class=\"inp\"\n                v-model=\"editForm.opfrom\"\n                type=\"date\"\n                placeholder=\"选择日期\"\n                value-format=\"yyyy-MM-dd\"\n              >\n              </el-date-picker>\n            </div> -->\n            <!-- <div class=\"item\">\n              <div class=\"title\">\n                注册资本\n              </div>\n              <el-input class=\"inp\" v-model=\"editForm.regCapital\"> </el-input>\n            </div> -->\n            <div class=\"item\">\n              <div class=\"title\">\n                直推师傅\n              </div>\n              <el-select\n                filterable\n                :remote-method=\"remoteMethod\"\n                disabled\n                remote\n                v-model=\"recommendMaster\"\n                placeholder=\"请选择\"\n              >\n                <el-option\n                  v-for=\"item in masterOptions\"\n                  :key=\"item.value\"\n                  :label=\"item.realName\"\n                  :value=\"item.realName\"\n                >\n                </el-option>\n              </el-select>\n            </div>\n\n            <div class=\"item\" style=\"position: relative;\">\n              <!-- <div class=\"title\" style=\"flex:3\">\n                是否禁用\n              </div>\n              <div style=\"flex:6\">\n                <el-switch\n                  v-model=\"editForm.status\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  :active-value=\"0\"\n                  :inactive-value=\"1\"\n                >\n                </el-switch>\n              </div> -->\n              <!-- <div\n                style=\"position: absolute;bottom: 9px;right: 23px;color: red;\"\n              >\n                (注意:绿色状态是禁用)\n              </div> -->\n            </div>\n          </div>\n          <!-- <div class=\"oneLine\">\n            <div class=\"item\">\n              <div class=\"title\" style=\"flex:3\">\n                年保客户\n              </div>\n              <div style=\"flex:6\">\n                <el-switch\n                  disabled\n                  v-model=\"editForm.vipFlag\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  :active-value=\"1\"\n                  :inactive-value=\"0\"\n                >\n                </el-switch>\n              </div>\n            </div>\n          </div> -->\n        </div>\n        <div slot=\"footer\" class=\"dialog-footer\" style=\"text-align: center;\">\n          <el-button @click=\"closeEditEnterprise\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"confirmFn\">确 定</el-button>\n        </div>\n      </el-dialog>\n    </div>\n\n    <!-- 企业审核弹窗 -->\n    <el-dialog\n      title=\"企业审核\"\n      :visible=\"auditDialog\"\n      width=\"30%\"\n      :before-close=\"auditDialogClose\"\n    >\n      <div\n        style=\"text-align: center;display: flex;justify-content: center;align-items: center;\"\n      >\n        <div style=\"margin-right: 20px;font-size: 18px;font-weight: 700;\">\n          审核状态:\n        </div>\n        <el-select v-model=\"auditSelect\" placeholder=\"请选择审核状态\">\n          <el-option label=\"已通过\" :value=\"2\"></el-option>\n          <el-option label=\"已驳回\" :value=\"3\"></el-option>\n        </el-select>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"auditDialogClose\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"auditDialogConfirm\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<style lang=\"less\" scoped>\n.table-wrapper {\n  height: calc(100%-200px);\n}\n.content {\n  .oneLine {\n    display: flex;\n    margin-bottom: 25px;\n    .item {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 0 5px;\n      .title {\n        color: #1f1f1f;\n        font-size: 15px;\n        font-weight: 700;\n      }\n      .inp {\n        width: 200px;\n      }\n    }\n  }\n}\n</style>\n\n<script>\nimport tableMixin from \"@/mixin/table\";\nimport { getEnterpriseList } from \"@/api/user.js\";\nimport {\n  handleEnterpriseInfoExport,\n  queryDeviceTypeList,\n  queryEnterpriseMemberList,\n  queryMasterName,\n} from \"@/api/order.js\";\nimport {\n  handleEnterpriseExamine,\n  getEnterpriseInfo,\n  editEnterpriseInfo,\n  queryEnterpriseName,\n  getEnterpriseInvitationCode,\n} from \"@/api/boss\";\nexport default {\n  title: \"course\",\n  mixins: [tableMixin],\n  data() {\n    return {\n      enlargeInvitationCodeUrl: null,\n      enlargeInvitationCodeUrlList: null,\n\n      editId: \"\",\n      auditDialog: false, //审核弹窗默认\n      auditSelect: \"\", //审核状态\n      auditUid: \"\", //审核需要的uid\n      referencePerson: null, //查询推荐人框\n\n      typeList: null,\n      masterOptions: [],\n      VALE: \"\",\n      recommendMaster: \"\",\n\n      editEnterprise: false,\n      dialogVisible: false,\n      editForm: null,\n\n      total: 0,\n      currentPage: 1,\n      enpTeamList: null,\n      dataSumNum: \"\",\n      enterpriseList: \"\",\n      enterpriseName: \"\",\n      enterprisePhone: \"\",\n      loading: false,\n      typeData: [],\n      courseList: [],\n      snatchList: [],\n      courseDistriList: [],\n      url: {\n        query: \"/admin/maintenance/queryRepairOrderList\",\n        queryType: \"/admin/maintenance/queryDeviceTypeList\",\n        querySnatch: \"/admin/maintenance/queryMasterGrabOrderList\",\n        assign: \"/admin/maintenance/handleAssignMaster\",\n        handleMasterQuotation: \"/admin/maintenance/handleMasterQuotation\",\n        handleEnterpriseExamine: \"/admin/maintenance/handleEnterpriseExamine\",\n      },\n\n      finishForm: {\n        payAmount: 0,\n      },\n      param: {},\n    };\n  },\n  async created() {\n    this._getEnterpriseList();\n    const res = await queryDeviceTypeList();\n    this.typeList = res.data;\n  },\n  methods: {\n    // 点击邀请码\n    async openInvitationCode(id) {\n      const res = await getEnterpriseInvitationCode(id);\n      this.enlargeInvitationCodeUrl = res.data;\n      this.enlargeInvitationCodeUrlList = [res.data];\n      setTimeout(() => {\n        this.$refs.enlargeInvitationCode.clickHandler();\n      }, 1000);\n    },\n    // 确定审核\n    async auditDialogConfirm() {\n      const data = {\n        status: this.auditSelect,\n        id: this.auditUid,\n      };\n      const res = await handleEnterpriseExamine(data);\n      if (res.message === \"操作成功\") {\n        this.$message({\n          message: res.message,\n          type: \"success\",\n        });\n        this.auditDialogClose();\n        this._getEnterpriseList();\n      }\n    },\n    // 关闭审核弹窗的事件\n    auditDialogClose() {\n      this.auditDialog = false;\n    },\n    // 点击审核触发的事件\n    async auditFn(row) {\n      if (row.enterpriseFlag === 1) {\n        this.auditSelect = \"\";\n      } else if (row.enterpriseFlag === 3) {\n        this.auditSelect = 3;\n      }\n      this.auditUid = row.id;\n      this.auditDialog = true;\n    },\n    // 重置事件\n    resetFn() {\n      this.enterpriseName = \"\";\n      this.enterprisePhone = \"\";\n      this._getEnterpriseList();\n    },\n    // 推荐人搜索\n    async remoteMethod(query) {\n      const res = await queryMasterName(query);\n      this.masterOptions = res.data;\n    },\n    // 编辑确定按钮触发的事件\n    async confirmFn() {\n      // 修改设备类型格式\n      let str = \"\";\n      console.log(Array.isArray(this.editForm.deviceTypeIds));\n      if (Array.isArray(this.editForm.deviceTypeIds)) {\n        this.editForm.deviceTypeIds.forEach((el, index) => {\n          if (index === 0) {\n            str = \"\" + el;\n          } else {\n            str = str + \",\" + el;\n          }\n        });\n        this.editForm.deviceTypeIds = str;\n      }\n      if (this.recommendMaster) {\n        const res = await queryMasterName(this.recommendMaster);\n        const uid = res.data && res.data[0].uid;\n        this.editForm.recommendMasterUid = uid;\n      }\n      this.editForm.id = this.editId;\n      this.editForm.address = this.editForm.enterpriseAddress;\n      const res1 = await editEnterpriseInfo(this.editForm);\n      if (res1.message === \"操作成功\") {\n        this.$message({\n          message: \"编辑成功!\",\n          type: \"success\",\n        });\n        await this._getEnterpriseList();\n        this.closeEditEnterprise();\n      }\n    },\n    // 关闭编辑企业弹窗\n    closeEditEnterprise() {\n      this.editForm = null;\n      this.editEnterprise = false;\n    },\n    // 点击编辑触发的事件\n    async editTeam(row) {\n      this.editId = row.id;\n      const res = await getEnterpriseInfo(row);\n      this.editForm = res.data;\n      this.recommendMaster = res.data.recommendMasterRealName;\n      console.log(this.editForm);\n      if (\n        this.editForm.deviceTypeIds &&\n        this.editForm.deviceTypeIds.indexOf(\",\") !== -1\n      ) {\n        this.editForm.deviceTypeIds = this.editForm.deviceTypeIds.split(\",\");\n      }\n      const { data } = await queryEnterpriseName(res.data.enterpriseName);\n      this.editForm.uid = data[0] && data[0].uid;\n      this.editEnterprise = true;\n    },\n    // 页码发生变化触发的事件\n    updatePageNo(val) {\n      this.currentPage = val;\n      this._getEnterpriseList();\n    },\n    // 关闭查看团队弹窗\n    resetTeamList() {\n      this.$refs.enterpriseTeamList.close();\n    },\n    // 获取企业团队列表\n    _queryEnterpriseMemberList(row) {\n      let data = {\n        name: row.enterpriseName,\n        pageNo: 1,\n        pageSize: 99,\n        query: \"\",\n        id: row.id,\n      };\n      queryEnterpriseMemberList(data).then((res) => {\n        if (res) {\n          this.enpTeamList = res.data.records;\n          console.log(\"企业团队列表\", res);\n        }\n      });\n    },\n    // 点击导出触发的事件\n    _handleEnterpriseInfoExport() {\n      const loading = this.$loading({\n        lock: true,\n        text: \"数据传输中\",\n        spinner: \"el-icon-loading\",\n      });\n      let data = {\n        name: this.enterpriseName,\n        pageNo: 1,\n        pageSize: 20,\n        query: \"\",\n        phone: this.enterprisePhone,\n      };\n      handleEnterpriseInfoExport(data).then((res) => {\n        if (res) {\n          console.log(\"导出\", res);\n          const link = document.createElement(\"a\");\n          const blob = new Blob([res.data], {\n            type: \"application/vnd.ms-excel\",\n          });\n          link.style.display = \"none\";\n          link.href = URL.createObjectURL(blob);\n          link.download = \"企业列表\"; //下载的文件名\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n          loading.close();\n        }\n      });\n    },\n    // 点击查看团队的事件\n    openTeam(row) {\n      console.log(\"团队参数\", row);\n      this._queryEnterpriseMemberList(row);\n      this.$refs.enterpriseTeamList.open();\n    },\n    // 不清楚!!!!\n    handleEnterpriseExamine() {\n      this.$axios\n        .post(this.url.handleEnterpriseExamine, {\n          uid: this.editForm.uid,\n          status: 2,\n        })\n        .then((data) => {\n          this.util.message(this, data.enterpriseFlag, data.message);\n          this._getEnterpriseList();\n          this.resetEditForm(false);\n        })\n        .catch(function(error) {\n          console.info(error);\n        });\n    },\n    // 关闭查看团队弹窗\n    resetEditForm(fn) {\n      fn(false);\n      this._getEnterpriseList();\n    },\n    // 点击审核触发的事件\n    open(row) {\n      return;\n      console.log(row);\n      this.$refs.enterpriseList.open();\n      this.editForm = {\n        uid: row.uid,\n        status: false,\n      };\n    },\n    //获取企业列表\n    async _getEnterpriseList(id) {\n      if (id === 1) {\n        this.currentPage = 1;\n      }\n      let params = {\n        pageNo: this.currentPage,\n        pageSize: 20,\n        name: this.enterpriseName,\n        phone: this.enterprisePhone,\n      };\n      if (this.referencePerson) {\n        const res = await queryMasterName(this.referencePerson);\n        params.uid = res.data[0] && res.data[0].uid;\n      }\n      getEnterpriseList(params).then((res) => {\n        if (res) {\n          console.log(res);\n          const { records, total, current } = res.data;\n          this.enterpriseList = records;\n          this.total = total;\n          this.currentPage = current;\n        }\n      });\n    },\n  },\n};\n</script>\n"]}]}