{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\install\\installList\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\install\\installList\\index.vue","mtime":1669258939303},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cXVlcnlJbnN0YWxsTGlzdEZuLGRlbFByb2R1Y3RJbnN0YWxsLGhhbmRsZVByb2R1Y3REcm9wT2ZmfSBmcm9tICdAL2FwaS9pbnN0YWxsLmpzJwpleHBvcnQgZGVmYXVsdHsKCWRhdGEoKXsKCQlyZXR1cm57CgkJCWRhdGFMaXN0OltdLAoJCQloYW5kbGVTZWxlY3Rpb25MaXN0OltdLAoJCQlkYXRhQ29uZmlnOiB7CgkJCQlwYWdlTm86IDEsCgkJCQlwYWdlU2l6ZTogMjAsCgkJCQl0b3RhbDogMCwKCQkJCWxvYWRpbmc6IHRydWUsCgkJCX0sCgkJCXF1ZXJ5RGF0YTp7CgkJCQluYW1lOicnLAoJCQkJcXVlcnlUaW1lOicnLAoJCQl9LAoJCQlpc1NoZWx2ZXNUeXBlOlsn5LiL5p62Jywn5LiK5p62J10sCgkJfQoJfSwKCWNyZWF0ZWQoKSB7CgkJdGhpcy5nZXREYXRhTGlzdEZuKCkKCX0sCgltZXRob2RzOnsKCQkvLyDpgInkuK3nmoTliJfooajmlbDmja4KCQloYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKXsKCQkJdGhpcy5oYW5kbGVTZWxlY3Rpb25MaXN0ID0gdmFsCgkJfSwKCQlhc3luYyBnZXREYXRhTGlzdEZuKCkgewoJCQl0aGlzLmRhdGFDb25maWcubG9hZGluZyA9IHRydWUKCQkJY29uc3QgcmVzID0gYXdhaXQgcXVlcnlJbnN0YWxsTGlzdEZuKHsKCQkJCXBhZ2VObzogdGhpcy5kYXRhQ29uZmlnLnBhZ2VObywKCQkJCXBhZ2VTaXplOiB0aGlzLmRhdGFDb25maWcucGFnZVNpemUsCgkJCQluYW1lOiB0aGlzLnF1ZXJ5RGF0YS5uYW1lIHx8IHVuZGVmaW5lZCwKCQkJCXF1ZXJ5VGltZTp0aGlzLnF1ZXJ5RGF0YS5xdWVyeVRpbWUgPyB0aGlzLnF1ZXJ5RGF0YS5xdWVyeVRpbWVbMF0gKyAiLyIgKyB0aGlzLnF1ZXJ5RGF0YS5xdWVyeVRpbWVbMV0gOiB1bmRlZmluZWQsCgkJCX0pCgkJCWNvbnN0IHJlc0RhdGEgPSB0aGlzLnJlc0RhdGFGbihyZXMpOwoJCQl0aGlzLmRhdGFDb25maWcudG90YWwgPSByZXNEYXRhLnRvdGFsOwoJCQl0aGlzLmRhdGFMaXN0LnNwbGljZSgwLCB0aGlzLmRhdGFMaXN0Lmxlbmd0aCwgLi4ucmVzRGF0YS5yZWNvcmRzKTsKCQl9LAoJCWhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CgkJCXRoaXMuZGF0YUNvbmZpZy5wYWdlU2l6ZSA9IHZhbAoJCQl0aGlzLmdldERhdGFMaXN0Rm4oKQoJCX0sCgkJY3VycmVudENoYW5nZUZuKHBhZ2VObykgewoJCQl0aGlzLmRhdGFDb25maWcucGFnZU5vID0gcGFnZU5vCgkJCXRoaXMuZ2V0RGF0YUxpc3RGbigpCgkJfSwKCQlxdWVyeURhdGFGbigpIHsKCQkJdGhpcy5kYXRhQ29uZmlnLnBhZ2VObyA9IDEKCQkJdGhpcy5kYXRhQ29uZmlnLnBhZ2VTaXplID0gMjAKCQkJdGhpcy5nZXREYXRhTGlzdEZuKCkKCQl9LAoJCXJlc1NldFF1ZXJ5Rm4oKSB7CgkJCXRoaXMuZGF0YUNvbmZpZy5wYWdlTm8gPSAxCgkJCXRoaXMuZGF0YUNvbmZpZy5wYWdlU2l6ZSA9IDIwCgkJCXRoaXMucXVlcnlEYXRhID0gewoJCQkJZGVsaXZlcnlUeXBlOicnLAoJCQkJc3RhdHVzOicnICwKCQkJCXF1ZXJ5VGltZTonJywKCQkJCW9yZGVyU246JycsCgkJCQlwaG9uZTonJywKCQkJCXVzZXJOYW1lOicnCgkJCX0KCQkJdGhpcy5nZXREYXRhTGlzdEZuKCkKCQl9LAoJCS8vIOa3u+WKoC/nvJbovpHoo4XmnLoKCQlpbnN0YWxsZWRpdCgpewoJCQl0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTonSW5zdGFsbEVkaXQnfSkKCQl9LAoJCS8vIOaTjeS9nOihqOagvAoJCWFzeW5jIGxpc3RIYW5kbGUoZSxkYXRhKXsKCQkJaWYoZSA9PT0gMCl7CgkJCQl0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTonSW5zdGFsbEVkaXQnLHF1ZXJ5OntpZDpkYXRhLmlkfX0pCgkJCX1lbHNlIGlmKGUgPT09IDEpewoJCQkJbGV0IHRleHQgPSAn5LiK5p62JwoJCQkJaWYoZGF0YS5pc1NoZWx2ZXMpewoJCQkJCXRleHQgPSAn5LiL5p62JwoJCQkJfQoJCQkJdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCGJyt0ZXh0Kyfor6XllYblk4EsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQl0eXBlOiAnd2FybmluZycKCQkJCX0pLnRoZW4oYXN5bmMgKCkgPT4gewoJCQkJCWNvbnN0IHJlcyA9IGF3YWl0IGhhbmRsZVByb2R1Y3REcm9wT2ZmKHsKCQkJCQkJaWQ6ZGF0YS5pZAoJCQkJCX0pCgkJCQkJaWYocmVzLmNvZGUgPT09ICcwMDAnKXsKCQkJCQkJdGhpcy4kbWVzc2FnZSh7CgkJCQkJCQl0eXBlOiAnc3VjY2VzcycsCgkJCQkJCQltZXNzYWdlOiAn5pON5L2c5oiQ5YqfIScKCQkJCQkJfSk7CgkJCQkJCXRoaXMuZGF0YUxpc3QgPSB0aGlzLmRhdGFMaXN0LmZpbHRlcihpdGVtPT5pdGVtLmlkICE9PSBkYXRhLmlkKQoJCQkJCX0KCQkJCX0pLmNhdGNoKCgpID0+IHsKCQkJCQkKCQkJCX0pOwoJCQl9ZWxzZSBpZihlID09PSAyKXsKCQkJCXRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeWVhuWTgSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CgkJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQkJfSkudGhlbihhc3luYyAoKSA9PiB7CgkJCQkJY29uc3QgcmVzID0gYXdhaXQgZGVsUHJvZHVjdEluc3RhbGwoewoJCQkJCQlpZDpkYXRhLmlkCgkJCQkJfSkKCQkJCQlpZihyZXMuY29kZSA9PT0gJzAwMCcpewoJCQkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCQkJCXR5cGU6ICdzdWNjZXNzJywKCQkJCQkJCW1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwoJCQkJCQl9KTsKCQkJCQkJdGhpcy5kYXRhTGlzdCA9IHRoaXMuZGF0YUxpc3QuZmlsdGVyKGl0ZW09Pml0ZW0uaWQgIT09IGRhdGEuaWQpCgkJCQkJfQoJCQkJfSkuY2F0Y2goKCkgPT4gewoJCQkJCQoJCQkJfSk7CgkJCX0KCQl9LAoJCQoJfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/views/install/installList","sourcesContent":["<template>\n\t<div class=\"app-container\">\n\t\t<div class=\"manage-top\">\n\t\t\t<el-form :model=\"queryData\" ref=\"ruleForm\" label-width=\"88px\" class=\"rule-form\" label-position=\"right\">\n\t\t\t\t<el-row :gutter=\"20\">\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-form-item label=\"装机名称\">\n\t\t\t\t\t\t\t<el-input v-model=\"queryData.name\" placeholder=\"请输入装机名称\"></el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col style=\"width: 458px;\">\n\t\t\t\t\t\t<el-form-item label=\"上传时间\">\n\t\t\t\t\t\t\t<el-date-picker v-model=\"queryData.queryTime\" value-format=\"yyyy-MM-dd\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"></el-date-picker style=\"width:100%\">\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-search\" @click=\"getDataListFn\">查询</el-button>\n\t\t\t\t\t\t<el-button type=\"infor\" icon=\"el-icon-refresh\" @click=\"resSetQueryFn\">重置</el-button>\n\t\t\t\t\t\t<el-button type=\"success\" icon=\"el-icon-circle-plus-outline\" @click=\"installedit\">添加装机</el-button>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\t\t\t</el-form>\n\t\t</div>\n\t\t<!--  -->\n\t\t<div style=\"height: 16px;\"></div>\n\t\t<div class=\"manage-table\">\n\t\t\t<el-table ref=\"multipleTable\" :data=\"dataList\" v-loading=\"dataConfig.loading\" @selection-change=\"handleSelectionChange\" :default-sort=\"{prop:'sort',order:'descending'}\">\n\t\t\t\t<!-- <el-table-column type=\"selection\" width=\"60\"></el-table-column> -->\n\t\t\t\t<el-table-column prop=\"id\" label=\"编号\" width=\"100\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column label=\"类型\" width=\"120\" align=\"center\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<span>装机</span>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"name\" label=\"装机名称\" width=\"200\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"modelName\" label=\"装机型号\" width=\"200\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"price\" label=\"价格\" width=\"170\" align=\"center\" sortable></el-table-column>\n\t\t\t\t<el-table-column prop=\"sales\" label=\"销量\" width=\"170\" align=\"center\" sortable></el-table-column>\n\t\t\t\t<el-table-column prop=\"sort\" label=\"序号\" width=\"170\" align=\"center\" sortable></el-table-column>\n\t\t\t\t<el-table-column label=\"产品状态\" width=\"200\" align=\"center\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-tag :type=\"scope.row.isShelves?'success':'danger'\">{{isShelvesType[scope.row.isShelves]}}</el-tag>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"上传时间\" align=\"center\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<span>{{scope.row.createTime}}</span>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"操作\" width=\"200\" align=\"center\" fixed=\"right\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button type=\"text\" @click=\"listHandle(0,scope.row)\">编辑</el-button>\n\t\t\t\t\t\t<el-button type=\"text\" @click=\"listHandle(1,scope.row)\">{{scope.row.isShelves?'下架':'上架'}}</el-button>\n\t\t\t\t\t\t<el-button type=\"text\" @click=\"listHandle(2,scope.row)\" style=\"color: orangered;\">删除</el-button>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t</div>\n\t\t<!--  -->\n\t\t<div style=\"height: 16px;\"></div>\n\t\t<div class=\"table-block\" v-show=\"dataList.length > 0\">\n\t\t\t<el-pagination background @size-change=\"handleSizeChange\" @current-change=\"currentChangeFn\" :current-page.sync=\"dataConfig.pageNo\" :page-size=\"dataConfig.pageSize\" :page-sizes=\"[20, 30, 50, 100]\" layout=\"total,sizes, prev, pager, next\" :total=\"dataConfig.total\">\n\t\t\t</el-pagination>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport {queryInstallListFn,delProductInstall,handleProductDropOff} from '@/api/install.js'\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tdataList:[],\n\t\t\t\thandleSelectionList:[],\n\t\t\t\tdataConfig: {\n\t\t\t\t\tpageNo: 1,\n\t\t\t\t\tpageSize: 20,\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tloading: true,\n\t\t\t\t},\n\t\t\t\tqueryData:{\n\t\t\t\t\tname:'',\n\t\t\t\t\tqueryTime:'',\n\t\t\t\t},\n\t\t\t\tisShelvesType:['下架','上架'],\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getDataListFn()\n\t\t},\n\t\tmethods:{\n\t\t\t// 选中的列表数据\n\t\t\thandleSelectionChange(val){\n\t\t\t\tthis.handleSelectionList = val\n\t\t\t},\n\t\t\tasync getDataListFn() {\n\t\t\t\tthis.dataConfig.loading = true\n\t\t\t\tconst res = await queryInstallListFn({\n\t\t\t\t\tpageNo: this.dataConfig.pageNo,\n\t\t\t\t\tpageSize: this.dataConfig.pageSize,\n\t\t\t\t\tname: this.queryData.name || undefined,\n\t\t\t\t\tqueryTime:this.queryData.queryTime ? this.queryData.queryTime[0] + \"/\" + this.queryData.queryTime[1] : undefined,\n\t\t\t\t})\n\t\t\t\tconst resData = this.resDataFn(res);\n\t\t\t\tthis.dataConfig.total = resData.total;\n\t\t\t\tthis.dataList.splice(0, this.dataList.length, ...resData.records);\n\t\t\t},\n\t\t\thandleSizeChange(val) {\n\t\t\t\tthis.dataConfig.pageSize = val\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\tcurrentChangeFn(pageNo) {\n\t\t\t\tthis.dataConfig.pageNo = pageNo\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\tqueryDataFn() {\n\t\t\t\tthis.dataConfig.pageNo = 1\n\t\t\t\tthis.dataConfig.pageSize = 20\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\tresSetQueryFn() {\n\t\t\t\tthis.dataConfig.pageNo = 1\n\t\t\t\tthis.dataConfig.pageSize = 20\n\t\t\t\tthis.queryData = {\n\t\t\t\t\tdeliveryType:'',\n\t\t\t\t\tstatus:'' ,\n\t\t\t\t\tqueryTime:'',\n\t\t\t\t\torderSn:'',\n\t\t\t\t\tphone:'',\n\t\t\t\t\tuserName:''\n\t\t\t\t}\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\t// 添加/编辑装机\n\t\t\tinstalledit(){\n\t\t\t\tthis.$router.push({name:'InstallEdit'})\n\t\t\t},\n\t\t\t// 操作表格\n\t\t\tasync listHandle(e,data){\n\t\t\t\tif(e === 0){\n\t\t\t\t\tthis.$router.push({name:'InstallEdit',query:{id:data.id}})\n\t\t\t\t}else if(e === 1){\n\t\t\t\t\tlet text = '上架'\n\t\t\t\t\tif(data.isShelves){\n\t\t\t\t\t\ttext = '下架'\n\t\t\t\t\t}\n\t\t\t\t\tthis.$confirm('此操作将'+text+'该商品, 是否继续?', '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(async () => {\n\t\t\t\t\t\tconst res = await handleProductDropOff({\n\t\t\t\t\t\t\tid:data.id\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(res.code === '000'){\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\tmessage: '操作成功!'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.dataList = this.dataList.filter(item=>item.id !== data.id)\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}else if(e === 2){\n\t\t\t\t\tthis.$confirm('此操作将永久删除该商品, 是否继续?', '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(async () => {\n\t\t\t\t\t\tconst res = await delProductInstall({\n\t\t\t\t\t\t\tid:data.id\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(res.code === '000'){\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\tmessage: '删除成功!'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.dataList = this.dataList.filter(item=>item.id !== data.id)\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t}\n\t}\n</script>\n\n<style>\n</style>\n"]}]}