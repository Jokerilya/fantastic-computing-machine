{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\order\\orderList\\index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\views\\order\\orderList\\index.vue","mtime":1669258939315},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8qICAqLwoub3JkZXItc3RhdHVze2Rpc3BsYXk6IGZsZXg7YWxpZ24taXRlbXM6IGNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47cGFkZGluZzogMTBweCAwO2JvcmRlci10b3A6IDFweCBzb2xpZCAjZjVmNWY1O2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRjVGNUY1O30KLm9yZGVyLXN0YXR1cy1sZWZ0e30KLm9yZGVyLXN0YXR1cy1sZWZ0IHNwYW57Y29sb3I6IHJlZDt9Ci5vcmRlci1zdGF0dXMtcmlnaHR7fQoub3JkZXItaW5mb3t9Ci5vcmRlci1pbmZvLXRpdGxle21hcmdpbjogMTZweCAwO30KLm9yZGVyLWluZm8tdGl0bGUgc3Bhbntmb250LXNpemU6IDE0cHg7Zm9udC13ZWlnaHQ6IGJvbGQ7Y29sb3I6ICM0MDlFRkY7fQouZXhwLXRpdGxlewoJcGFkZGluZy1ib3R0b206IDE2cHg7CglwewoJCXNwYW57Y29sb3I6ICM0MDlFRkY7bWFyZ2luLWxlZnQ6IDEwcHg7fQoJfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAikBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/order/orderList","sourcesContent":["<template>\n\t<div class=\"app-container\">\n\t\t<div class=\"manage-top\">\n\t\t\t<el-form :model=\"queryData\" ref=\"ruleForm\" label-width=\"88px\" class=\"rule-form\" label-position=\"right\">\n\t\t\t\t<el-row :gutter=\"20\">\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-form-item label=\"订单类型\">\n\t\t\t\t\t\t\t<el-select v-model=\"queryData.orderType\" placeholder=\"请选择\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in orderTypeOptions\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-form-item label=\"订单状态\">\n\t\t\t\t\t\t\t<el-select v-model=\"queryData.status\" placeholder=\"请选择\" style=\"width: 100%;\">\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in statusOptions\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"8\">\n\t\t\t\t\t\t<el-form-item label=\"提交时间\">\n\t\t\t\t\t\t\t<el-date-picker v-model=\"queryData.queryTime\" value-format=\"yyyy-MM-dd\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"></el-date-picker style=\"width:100%\">\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\t\t\t\t<el-row :gutter=\"20\">\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-form-item label=\"订单编号\">\n\t\t\t\t\t\t\t<el-input v-model=\"queryData.orderSn\" placeholder=\"请输入\"></el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-form-item label=\"用户手机号\">\n\t\t\t\t\t\t\t<el-input v-model=\"queryData.phone\" placeholder=\"请输入\"></el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-form-item label=\"用户昵称\">\n\t\t\t\t\t\t\t<el-input v-model=\"queryData.userName\" placeholder=\"请输入\"></el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"5\">\n\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-search\" @click=\"getDataListFn\">查询</el-button>\n\t\t\t\t\t\t<el-button type=\"danger\" icon=\"el-icon-refresh\" @click=\"resSetQueryFn\">重置</el-button>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\t\t\t</el-form>\n\t\t</div>\n\t\t<!--  -->\n\t\t<div style=\"height: 16px;\"></div>\n\t\t<div class=\"manage-table\">\n\t\t\t<el-table ref=\"multipleTable\" :data=\"dataList\" v-loading=\"dataConfig.loading\" @selection-change=\"handleSelectionChange\"  style=\"width: 100%\">\n\t\t\t\t<!-- <el-table-column type=\"selection\" width=\"60\"></el-table-column> -->\n\t\t\t\t<el-table-column prop=\"orderSn\" label=\"订单编号\" width=\"200\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"userName\" label=\"昵称\" width=\"220\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column prop=\"phone\" label=\"手机号\" width=\"120\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column label=\"订单类型\" width=\"150\" align=\"center\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<span style=\"color: #409EFF;\" v-if=\"scope.row.orderType === 1\">星选</span>\n\t\t\t\t\t\t<span style=\"color: #67C23A;\" v-if=\"scope.row.orderType === 2\">拼团</span>\n\t\t\t\t\t\t<span style=\"color: chocolate;\" v-if=\"scope.row.orderType === 3\">装机</span>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"商品数量\" width=\"150\" align=\"center\" show-overflow-tooltip>\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<span>{{scope.row.totalQty}}</span>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"payAmount\" label=\"订单金额\" width=\"140\" align=\"center\"></el-table-column>\n\t\t\t\t<el-table-column label=\"订单状态\" width=\"100\" align=\"center\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-tag type=\"info\" v-if=\"scope.row.status === -1\">已取消</el-tag>\n\t\t\t\t\t\t<el-tag type=\"info\" v-if=\"scope.row.status === -10\">已退款</el-tag>\n\t\t\t\t\t\t<el-tag type=\"warning\" v-if=\"scope.row.status === 0\">待支付</el-tag>\n\t\t\t\t\t\t<el-tag type=\"danger\" v-if=\"scope.row.status === 5\">待发货</el-tag>\n\t\t\t\t\t\t<el-tag v-if=\"scope.row.status === 10\">已发货</el-tag>\n\t\t\t\t\t\t<el-tag type=\"success\" v-if=\"scope.row.status === 15\">已完成</el-tag>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"下单时间\" width=\"180\" align=\"center\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<span>{{scope.row.createTime}}</span>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"支付时间\" width=\"180\" align=\"center\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<span>{{scope.row.payTime}}</span>\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"primary\" @click=\"detailFn(scope.row.id)\">查看详情</el-button>\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"success\" v-if=\"scope.row.orderType === 3 && scope.row.status === 0\">汇款信息</el-button>\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"success\" v-if=\"scope.row.orderType !== 3 && scope.row.status === 5\" style=\"min-width: 80px;\" @click=\"detailFn(scope.row.id)\">去发货</el-button>\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"infor\" v-if=\"scope.row.status > 5\" @click=\"orderHandle(3,scope.row.id)\">物流信息</el-button>\n\t\t\t\t\t\t<el-button size=\"mini\" type=\"infor\" v-if=\"scope.row.orderType !== 3 && scope.row.status === 0\">关闭订单</el-button>\n\t\t\t\t\t\t<!-- <el-button size=\"mini\" type=\"danger\" v-if=\"scope.row.status === -1\">删除订单</el-button> -->\n\t\t\t\t\t </template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t\t<el-pagination background @size-change=\"handleSizeChange\" @current-change=\"currentChangeFn\" :current-page.sync=\"dataConfig.pageNo\" :page-size=\"dataConfig.pageSize\" :page-sizes=\"[20, 30, 50, 100]\" layout=\"total,sizes, prev, pager, next\" :total=\"dataConfig.total\">\n\t\t\t</el-pagination>\n\t\t</div>\n\t\t<!--  -->\n\t\t<div style=\"height: 16px;\"></div>\n\t\t<!-- <div class=\"table-block\" v-show=\"dataList.length > 0\">\n\t\t</div> -->\n\t\t<!--  -->\n\t\t<el-dialog title=\"订单详情\" :visible.sync=\"dialogVisible\" width=\"1050px\" :close-on-click-modal=\"false\">\n\t\t\t<div class=\"order-detail-step\">\n\t\t\t\t<el-steps :active=\"step\" process-status=\"finish\" align-center>\n\t\t\t\t\t<el-step title=\"提交订单\" :description=\"details.createTime\"></el-step>\n\t\t\t\t\t<el-step title=\"支付订单\" :description=\"details.payTime\"></el-step>\n\t\t\t\t\t<el-step title=\"平台发货\" :description=\"details.shipTime\"></el-step>\n\t\t\t\t\t<el-step title=\"确认收货\" :description=\"details.confirmTime\"></el-step>\n\t\t\t\t</el-steps>\n\t\t\t</div>\n\t\t\t<div style=\"height:20px\"></div>\n\t\t\t<div class=\"order-status\">\n\t\t\t\t<div class=\"order-status-left\">\n\t\t\t\t\t订单状态：\n\t\t\t\t\t<span v-if=\"details.status === -1\">已取消</span>\n\t\t\t\t\t<span v-if=\"details.status === -10\">已退款</span>\n\t\t\t\t\t<span v-if=\"details.status === 0\">待支付</span>\n\t\t\t\t\t<span v-if=\"details.status === 5\">待发货</span>\n\t\t\t\t\t<span v-if=\"details.status === 10\">已发货</span>\n\t\t\t\t\t<span v-if=\"details.status === 15\">已完成</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"order-status-right\">\n\t\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"orderHandle(0)\" v-if=\"details.status >= 0 && details.status <=5\">修改收货人信息</el-button>\n\t\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"orderHandle(1)\" v-if=\"details.orderType === 3\">汇款信息</el-button>\n\t\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"orderHandle(2)\" v-if=\"details.status > 0 && details.status <=5\">发货</el-button>\n\t\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"orderHandle(3)\" v-if=\"details.status > 5\">物流信息</el-button>\n\t\t\t\t\t<!-- <el-button type=\"primary\" size=\"medium\">修改收费信息</el-button> -->\n\t\t\t\t\t<!-- <el-button type=\"danger\" size=\"medium\">关闭订单</el-button> -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"order-info\">\n\t\t\t\t<div class=\"order-info-title\"><span>基本信息</span></div>\n\t\t\t\t<el-table :data=\"orderInfo\" style=\"width: 100%\" border size=\"mini\" :header-cell-style=\"{background:'#eee',color:'#454545'}\">\n\t\t\t\t    <el-table-column prop=\"orderSn\" label=\"订单编号\" width=\"180\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"phone\" label=\"手机号\" width=\"180\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column label=\"订单类型\" width=\"120\" align=\"center\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<span v-if=\"scope.row.orderType === 1\">星选</span>\n\t\t\t\t\t\t\t<span v-if=\"scope.row.orderType === 2\">拼团</span>\n\t\t\t\t\t\t\t<span v-if=\"scope.row.orderType === 3\">装机</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t    <el-table-column label=\"订单状态\" width=\"120\" align=\"center\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<span v-if=\"scope.row.status === -1\">已取消</span>\n\t\t\t\t\t\t\t<span v-if=\"scope.row.status === -10\">已退款</span>\n\t\t\t\t\t\t\t<span v-if=\"scope.row.status === 0\">待支付</span>\n\t\t\t\t\t\t\t<span v-if=\"scope.row.status === 5\">待发货</span>\n\t\t\t\t\t\t\t<span v-if=\"scope.row.status === 10\">已发货</span>\n\t\t\t\t\t\t\t<span v-if=\"scope.row.status === 15\">已完成</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t    <el-table-column label=\"配送方式\" width=\"120\" align=\"center\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<span v-if=\"details.expDetail.expNo\">物流配送</span>\n\t\t\t\t\t\t\t<span v-else>无</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t    <el-table-column prop=\"date\" label=\"物流单号\" align=\"center\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<span v-if=\"details.expDetail.expNo\">{{details.expDetail.expNo}}</span>\n\t\t\t\t\t\t\t<span v-else>无</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t</el-table>\n\t\t\t\t<!--  -->\n\t\t\t\t<div class=\"order-info-title\"><span>收货人信息</span></div>\n\t\t\t\t<el-table :data=\"expDetail\" style=\"width: 100%\" border size=\"mini\" :header-cell-style=\"{background:'#eee',color:'#454545'}\">\n\t\t\t\t    <el-table-column prop=\"receiver\" label=\"收货人\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"phone\" label=\"手机号\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"addressDetail\" label=\"收货地址\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"remark\" label=\"备注\" align=\"center\"></el-table-column>\n\t\t\t\t</el-table>\n\t\t\t\t<!--  -->\n\t\t\t\t<div class=\"order-info-title\"><span>商品信息</span></div>\n\t\t\t\t<el-table :data=\"details.list\" style=\"width: 100%\" border size=\"mini\" :header-cell-style=\"{background:'#eee',color:'#454545'}\">\n\t\t\t\t    <el-table-column prop=\"productName\" label=\"商品\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"skuName\" label=\"规格\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"quantity\" label=\"数量\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"price\" label=\"小计\" align=\"center\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<span>￥{{scope.row.price}}</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t</el-table>\n\t\t\t\t<div style=\"display: flex;justify-content: flex-end;padding: 8px 0;\">\n\t\t\t\t\t<span style=\"flex: 0 0 25%;text-align: center;\">合计：<span style=\"color: red;\">￥{{priceSum.toFixed(2) || 0}}</span></span>\n\t\t\t\t</div>\n\t\t\t\t<!--  -->\n\t\t\t\t<div class=\"order-info-title\"><span>费用信息</span></div>\n\t\t\t\t<el-table :data=\"costInfo\" style=\"width: 100%\" border size=\"mini\" :header-cell-style=\"{background:'#eee',color:'#454545'}\">\n\t\t\t\t    <el-table-column prop=\"priceSum\" label=\"商品合计\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"expMoney\" label=\"运费\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"coupon\" label=\"优惠券\" align=\"center\"></el-table-column>\n\t\t\t\t    <el-table-column prop=\"totalAmount\" label=\"应付金额\" align=\"center\"></el-table-column>\n\t\t\t\t</el-table>\n\t\t\t</div>\n\t\t</el-dialog>\n\t\t<!--  -->\n\t\t<el-dialog title=\"修改收货信息\" :visible.sync=\"dialogEditVisible\" width=\"500px\">\n\t\t\t<el-form :model=\"addressForm\" label-width=\"80px\" :rules=\"addressFormRule\" ref=\"addressForm\">\n\t\t\t\t<el-form-item label=\"收货人\" prop=\"receiver\">\n\t\t\t\t\t<el-input v-model=\"addressForm.receiver\" type=\"text\" placeholder=\"请输入收货人姓名\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机号\" prop=\"phone\">\n\t\t\t\t\t<el-input v-model=\"addressForm.phone\" type=\"text\" maxlength=\"11\" placeholder=\"请输入收货人手机号\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"收货地区\" prop=\"pca\">\n\t\t\t\t\t<el-cascader v-if=\"dialogEditVisible\" v-model=\"addressForm.pca\" :props=\"props\" style=\"width: 100%;\"></el-cascader>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"详细地址\" prop=\"addressDetail\">\n\t\t\t\t\t<el-input v-model=\"addressForm.addressDetail\" type=\"textarea\" placeholder=\"请输入详细地址\" rows=\"3\" resize=\"none\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"dialogEditVisible = false\">取 消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"addressEditTap('addressForm')\">确 定</el-button>\n\t\t\t</span>\n\t\t</el-dialog>\n\t\t<!--  -->\n\t\t<el-dialog title=\"线下打款信息\" :visible.sync=\"dialogPayVisible\" width=\"500px\">\n\t\t\t<el-form label-width=\"100px\" >\n\t\t\t\t<el-form-item label=\"打款人姓名\" prop=\"receiver\">\n\t\t\t\t\t<span>{{details.payName || '无'}}</span>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"打款人账号\" prop=\"phone\">\n\t\t\t\t\t<span>{{details.payBankCode || '无'}}</span>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</el-dialog>\n\t\t<!--  -->\n\t\t<el-dialog title=\"订单发货\" :visible.sync=\"dialogSendVisible\" width=\"500px\">\n\t\t\t<el-form :model=\"sendForm\" label-width=\"80px\" :rules=\"sendFormRule\" ref=\"sendForm\">\n\t\t\t\t<el-form-item label=\"物流公司\" prop=\"expId\">\n\t\t\t\t\t<el-select v-model=\"sendForm.expId\" filterable placeholder=\"请选择\" style=\"width: 100%;\">\n\t\t\t\t\t    <el-option v-for=\"item in sendOptions\" :key=\"item.id\" :label=\"item.expName\" :value=\"item.id\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"物流单号\" prop=\"expNo\">\n\t\t\t\t\t<el-input v-model=\"sendForm.expNo\" type=\"text\" placeholder=\"请输入物流单号\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"dialogSendVisible = false\">取 消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"sendHandle('sendForm')\">确 定</el-button>\n\t\t\t</span>\n\t\t</el-dialog>\n\t\t<!--  -->\n\t\t<el-dialog title=\"物流信息\" :visible.sync=\"dialogExpVisible\" width=\"700px\">\n\t\t\t<div class=\"exp-title\">\n\t\t\t\t<p>{{expInfo.expName}}<span>{{expInfo.expNo}}</span></p>\n\t\t\t</div>\n\t\t\t<el-timeline v-if=\"expInfo.list.length > 0\">\n\t\t\t    <el-timeline-item v-for=\"(item, index) in expInfo.list\" :key=\"index\" :timestamp=\"item.time\">\n\t\t\t\t\t{{item.remark}}\n\t\t\t    </el-timeline-item>\n\t\t\t</el-timeline>\n\t\t\t<div v-else style=\"text-align: center;padding: 30px 0;\">\n\t\t\t\t<span>暂无物流信息</span>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</div>\n</template>\n\n<script>\n\timport {queryOrderFn,getOrderDetailFn,updateOrderReceiptInfo,queryOrderBasicFn,handleOrderSendFn,getOrderExp} from \"@/api/order.js\";\n\timport {addressFn} from \"@/api/system.js\";\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tdataList: [],\n\t\t\t\thandleSelectionList:[], \n\t\t\t\tdataConfig: {\n\t\t\t\t\tpageNo: 1,\n\t\t\t\t\tpageSize: 20,\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\tloading: true,\n\t\t\t\t},\n\t\t\t\tqueryData:{\n\t\t\t\t\torderType:'',  // 订单类型\n\t\t\t\t\tstatus:'' , // 订单状态：-1-已取消 -10已退款 0-待支付 5-已审核 待发货 10-已发货 15交易完成\n\t\t\t\t\tqueryTime:'',\n\t\t\t\t\torderSn:'',\n\t\t\t\t\tphone:'',\n\t\t\t\t\tuserName:''\n\t\t\t\t},\n\t\t\t\torderTypeOptions:[\n\t\t\t\t\t{id:1,name:'星选'},\n\t\t\t\t\t{id:2,name:'拼团'},\n\t\t\t\t\t{id:3,name:'装机'}\n\t\t\t\t],\n\t\t\t\tstatusOptions:[\n\t\t\t\t\t{id:-1,name:'已取消'},\n\t\t\t\t\t{id:-10,name:'已退款'},\n\t\t\t\t\t{id:0,name:'待支付'},\n\t\t\t\t\t{id:5,name:'待发货'},\n\t\t\t\t\t{id:10,name:'已发货'},\n\t\t\t\t\t{id:15,name:'交易完成'}\n\t\t\t\t],\n\t\t\t\t// 订单详情信息\n\t\t\t\tid:'',\n\t\t\t\tdialogVisible:false,\n\t\t\t\tstep:0,\n\t\t\t\tdetails:{\n\t\t\t\t\texpDetail:{}\n\t\t\t\t},\n\t\t\t\torderInfo:[],\n\t\t\t\texpDetail:[],\n\t\t\t\tcostInfo:[],\n\t\t\t\tpriceSum:0,\n\t\t\t\t// 修改收货信息\n\t\t\t\tdialogEditVisible:false,\n\t\t\t\taddressForm:{\n\t\t\t\t\treceiver:'',\n\t\t\t\t\tphone:'',\n\t\t\t\t\tpca:[],\n\t\t\t\t\taddressDetail:'',\n\t\t\t\t},\n\t\t\t\taddressFormRule:{\n\t\t\t\t\treceiver:[\n\t\t\t\t\t\t{ required: true, message: '请输入收货人信息', trigger: 'blur' }\n\t\t\t\t\t],\n\t\t\t\t\tphone:[\n\t\t\t\t\t\t{ required: true, message: '请输入收货人手机号', trigger: 'blur' }\n\t\t\t\t\t],\n\t\t\t\t\tpca:[\n\t\t\t\t\t\t{ required: true, message: '请选择收货地址', trigger: 'blur' }\n\t\t\t\t\t],\n\t\t\t\t\taddressDetail:[\n\t\t\t\t\t\t{ required: true, message: '请输入详细地址', trigger: 'blur' }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\tlazy: true,\n\t\t\t\t\tlazyLoad: async (node, resolve)=> {\n\t\t\t\t\t\tconst { level } = node;\n\t\t\t\t\t\t// 处理回显\n\t\t\t\t\t\tif (!this.addressForm.pca.length) {\n\t\t\t\t\t\t\tthis.addressForm.pca = await this.getAddressInfo()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet pid = node.data ? node.data.value : undefined\n\t\t\t\t\t\taddressFn({pid}).then(res=>{\n\t\t\t\t\t\t\tconst nodes = res.data.map(item => ({\n\t\t\t\t\t\t\t\tvalue: item.id,\n\t\t\t\t\t\t\t\tlabel: item.name,\n\t\t\t\t\t\t\t\tleaf: level >= 2\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t// 通过调用resolve将子节点数据返回，通知组件数据加载完成\n\t\t\t\t\t\t\tresolve(nodes);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// 打款信息\n\t\t\t\tdialogPayVisible:false,\n\t\t\t\t// 发货\n\t\t\t\tdialogSendVisible:false,\n\t\t\t\tsendForm:{\n\t\t\t\t\texpId:'',\n\t\t\t\t\texpNo:'',\n\t\t\t\t},\n\t\t\t\tsendFormRule:{\n\t\t\t\t\texpId:[\n\t\t\t\t\t\t{ required: true, message: '请选择物流公司', trigger: 'blur' }\n\t\t\t\t\t],\n\t\t\t\t\texpNo:[\n\t\t\t\t\t\t{ required: true, message: '请输入物流单号', trigger: 'blur' }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tsendOptions:[],\n\t\t\t\t/*  */\n\t\t\t\tdialogExpVisible:false,\n\t\t\t\texpInfo:{\n\t\t\t\t\tlist:[]\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getDataListFn()\n\t\t},\n\t\tmethods:{\n\t\t\t// 处理地址数据回显\n\t\t\tgetAddressInfo(){\n\t\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tresolve([this.details.expDetail.proId+'',this.details.expDetail.cityId+'',this.details.expDetail.areaId+'']);\n\t\t\t\t\t}, 0);\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 快递公司列表查询\n\t\t\tasync queryOrderBasicFn(){\n\t\t\t\tconst res = await queryOrderBasicFn()\n\t\t\t\tif(res.code === '000'){\n\t\t\t\t\tthis.sendOptions = res.data\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 选中的列表数据\n\t\t\thandleSelectionChange(val){\n\t\t\t\tthis.handleSelectionList = val\n\t\t\t},\n\t\t\tasync getDataListFn() {\n\t\t\t\tthis.dataConfig.loading = true\n\t\t\t\tconst res = await queryOrderFn({\n\t\t\t\t\tpageNo: this.dataConfig.pageNo,\n\t\t\t\t\tpageSize: this.dataConfig.pageSize,\n\t\t\t\t\tphone: this.queryData.phone || undefined,\n\t\t\t\t\tstatus: this.queryData.status,\n\t\t\t\t\torderSn: this.queryData.orderSn || undefined,\n\t\t\t\t\torderType:this.queryData.orderType || undefined ,\n\t\t\t\t\tqueryTime:this.queryData.queryTime.length === 0 ? \"\" : this.queryData.queryTime[0] + \"/\" + this.queryData.queryTime[1],\n\t\t\t\t})\n\t\t\t\tconst resData = this.resDataFn(res);\n\t\t\t\tthis.dataConfig.total = resData.total;\n\t\t\t\tthis.dataList.splice(0, this.dataList.length, ...resData.records);\n\t\t\t},\n\t\t\thandleSizeChange(val) {\n\t\t\t\tthis.dataConfig.pageSize = val\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\tcurrentChangeFn(pageNo) {\n\t\t\t\tthis.dataConfig.pageNo = pageNo\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\tqueryDataFn() {\n\t\t\t\tthis.dataConfig.pageNo = 1\n\t\t\t\tthis.dataConfig.pageSize = 20\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\tresSetQueryFn() {\n\t\t\t\tthis.dataConfig.pageNo = 1\n\t\t\t\tthis.dataConfig.pageSize = 20\n\t\t\t\tthis.queryData = {\n\t\t\t\t\tdeliveryType:'',\n\t\t\t\t\tstatus:'' ,\n\t\t\t\t\tqueryTime:'',\n\t\t\t\t\torderSn:'',\n\t\t\t\t\tphone:'',\n\t\t\t\t\tuserName:''\n\t\t\t\t}\n\t\t\t\tthis.getDataListFn()\n\t\t\t},\n\t\t\t// 查看订单详情\n\t\t\tasync detailFn(id){\n\t\t\t\tthis.id = id\n\t\t\t\tthis.step = 0\n\t\t\t\tthis.orderInfo = []\n\t\t\t\tthis.expDetail = []\n\t\t\t\tthis.priceSum = 0\n\t\t\t\tthis.costInfo = []\n\t\t\t\t// this.$router.push({name:'OrderDetail'})\n\t\t\t\tconst res = await getOrderDetailFn({\n\t\t\t\t\torderId: id,\n\t\t\t\t\treturnOrderId: 0,\n\t\t\t\t})\n\t\t\t\tif(res.code === '000'){\n\t\t\t\t\tthis.dialogVisible = true\n\t\t\t\t\tthis.details = res.data\n\t\t\t\t\tif(this.details.payTime) this.step = 1\n\t\t\t\t\tif(this.details.shipTime) this.step = 2\n\t\t\t\t\tif(this.details.confirmTime) this.step = 3\n\t\t\t\t\tthis.orderInfo.push({\n\t\t\t\t\t\torderSn:this.details.orderSn,\n\t\t\t\t\t\tphone:this.details.phone,\n\t\t\t\t\t\torderType:this.details.orderType,\n\t\t\t\t\t\tstatus:this.details.status,\n\t\t\t\t\t\texpNo:this.details.expNo\n\t\t\t\t\t})\n\t\t\t\t\tthis.expDetail.push({\n\t\t\t\t\t\treceiver:this.details.expDetail.receiver,\n\t\t\t\t\t\tphone:this.details.expDetail.phone,\n\t\t\t\t\t\tremark:this.details.remark,\n\t\t\t\t\t\taddressDetail:this.details.expDetail.addrPrefix + this.details.expDetail.addressDetail\n\t\t\t\t\t})\n\t\t\t\t\tlet priceSum = 0,numSum=0\n\t\t\t\t\tthis.details.list.forEach(item=>{\n\t\t\t\t\t\tthis.priceSum += item.price*item.quantity\n\t\t\t\t\t})\n\t\t\t\t\tthis.costInfo.push({\n\t\t\t\t\t\tpriceSum:this.priceSum,\n\t\t\t\t\t\texpMoney:0,  // 运费\n\t\t\t\t\t\tcoupon:0,\n\t\t\t\t\t\ttotalAmount:this.details.totalAmount\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 订单操作\n\t\t\tasync orderHandle(e,id){\n\t\t\t\t// e: 0修改收货人信息 1汇款信息 2发货 3物流信息\n\t\t\t\tif(e === 0){\n\t\t\t\t\tthis.dialogEditVisible = true\n\t\t\t\t\tthis.addressForm.receiver = this.details.expDetail.receiver,\n\t\t\t\t\tthis.addressForm.phone = this.details.expDetail.phone,\n\t\t\t\t\tthis.addressForm.addressDetail= this.details.expDetail.addressDetail\n\t\t\t\t}else if(e === 1){\n\t\t\t\t\tthis.dialogPayVisible = true\n\t\t\t\t}else if(e === 2){\n\t\t\t\t\tawait this.queryOrderBasicFn()\n\t\t\t\t\tthis.dialogSendVisible = true\n\t\t\t\t}else{\n\t\t\t\t\t// this.$message({\n\t\t\t\t\t// \tmessage:'物流信息'\n\t\t\t\t\t// })\n\t\t\t\t\tthis.getOrderExp(id || this.id)\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 提交收货人信息修改\n\t\t\tasync addressEditTap(formName){\n\t\t\t\tthis.$refs[formName].validate(async (valid) => {\n\t\t\t\t\tif(!valid){\n\t\t\t\t\t\treturn\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconst loading = this.$loading()\n\t\t\t\t\t\tconst res = await updateOrderReceiptInfo({\n\t\t\t\t\t\t\treceiver:this.addressForm.receiver,\n\t\t\t\t\t\t\tphone:this.addressForm.phone,\n\t\t\t\t\t\t\tproId:this.addressForm.pca[0],\n\t\t\t\t\t\t\tcityId:this.addressForm.pca[1],\n\t\t\t\t\t\t\tareaId:this.addressForm.pca[2],\n\t\t\t\t\t\t\taddressDetail:this.addressForm.addressDetail,\n\t\t\t\t\t\t\torderCode:this.details.orderSn\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(res.code === '000'){\n\t\t\t\t\t\t\tthis.dialogEditVisible = false\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '操作成功！',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.detailFn(this.id)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tloading.close()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 发货操作\n\t\t\tasync sendHandle(formName){\n\t\t\t\tthis.$refs[formName].validate(async (valid) => {\n\t\t\t\t\tif(!valid){\n\t\t\t\t\t\treturn\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconst res  = await handleOrderSendFn({\n\t\t\t\t\t\t\texpId:this.sendForm.expId,\n\t\t\t\t\t\t\texpNo:this.sendForm.expNo,\n\t\t\t\t\t\t\tid:this.id\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(res.code === '000'){\n\t\t\t\t\t\t\tthis.dialogSendVisible = false\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\tmessage: '操作成功！',\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.detailFn(this.id)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 查看物流详情\n\t\t\tasync getOrderExp(orderId){\n\t\t\t\tconst res = await getOrderExp({\n\t\t\t\t\torderId\n\t\t\t\t})\n\t\t\t\tif(res.code === '000'){\n\t\t\t\t\tif(!res.data.list) res.data.list = []\n\t\t\t\t\tthis.expInfo = res.data\n\t\t\t\t\tthis.dialogExpVisible = true\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n/*  */\n.order-status{display: flex;align-items: center;justify-content: space-between;padding: 10px 0;border-top: 1px solid #f5f5f5;border-bottom: 1px solid #F5F5F5;}\n.order-status-left{}\n.order-status-left span{color: red;}\n.order-status-right{}\n.order-info{}\n.order-info-title{margin: 16px 0;}\n.order-info-title span{font-size: 14px;font-weight: bold;color: #409EFF;}\n.exp-title{\n\tpadding-bottom: 16px;\n\tp{\n\t\tspan{color: #409EFF;margin-left: 10px;}\n\t}\n}\n</style>\n"]}]}