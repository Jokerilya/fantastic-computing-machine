{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\gdMap\\index.vue?vue&type=style&index=0&id=04b80f22&scoped=true&lang=css&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\gdMap\\index.vue","mtime":1669276636823},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnNlYXJjaC1ib3ggewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDI1cHg7CiAgbGVmdDogMjBweDsKfQouYW1hcC1wYWdlLWNvbnRhaW5lciB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHotaW5kZXg6IDk5OTk5Owp9Ci5lbC1kaWFsb2dfX3dyYXBwZXIgL2RlZXAvIC5lbC1kaWFsb2cgLmVsLWRpYWxvZ19faGVhZGVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOwp9Ci5lbC1kaWFsb2dfX3dyYXBwZXIgL2RlZXAvIC5lbC1kaWFsb2cgLmVsLWRpYWxvZ19faGVhZGVyIC5lbC1kaWFsb2dfX3RpdGxlIHsKICBjb2xvcjogIzMzMzsKICBmb250LXNpemU6IDE0cHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/gdMap","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      title=\"搜索或在地图上点击均可获取地理位置，记得点击确定哦！\"\n      :visible.sync=\"dialogVisible\"\n      width=\"600px\"\n      @close=\"$emit('close')\"\n    >\n      <div class=\"amap-page-container\" style=\"width: 100%; height: 500px\">\n        <el-amap-search-box\n          class=\"search-box\"\n          :search-option=\"searchOption\"\n          :on-search-result=\"onSearchResult\"\n        ></el-amap-search-box>\n        <el-amap\n          ref=\"map\"\n          vid=\"amapDemo\"\n          :amap-manager=\"amapManager\"\n          :center=\"center\"\n          :zoom=\"zoom\"\n          :plugin=\"plugin\"\n          :events=\"events\"\n          class=\"amap-demo\"\n        >\n        </el-amap>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"$emit('close')\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"returnaddress\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { AMapManager } from \"vue-amap\";\nlet amapManager = new AMapManager();\nexport default {\n  props: {\n    openmapdialog: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    const self = this;\n    return {\n      dialogVisible: false,\n      searchOption: {\n        city: \"\", //搜索范围\n        citylimit: false, //限制搜索范围\n        //city: \"\", citylimit: false, // 不限制搜索范围搜索，比如想全国搜索\n      },\n      lng: \"\",\n      lat: \"\",\n      address: \"\",\n      marker: \"\",\n      amapManager,\n      zoom: 12,\n      center: [113.751884, 23.021016],\n      events: {\n        init: (o) => {\n          o.getCity((result) => {\n            // console.log(result);\n            // this.searchOption.city=result.city\n          });\n          let par = document.getElementsByClassName(\"search-box-wrapper\")[0];\n          par.firstChild.setAttribute(\n            \"placeholder\",\n            \"在这里输入要搜索的地址哦\"\n          );\n        },\n        moveend: () => {},\n        zoomchange: () => {},\n        click: (e) => {\n          //   console.log(e.lnglat);\n          self.lng = e.lnglat.lng;\n          self.lat = e.lnglat.lat;\n          self.center = [self.lng, self.lat];\n          //   console.log(e.lnglat, 1999);\n\n          let o = amapManager.getMap();\n          if (!self.marker) {\n            self.marker = new AMap.Marker({\n              position: e.lnglat,\n            });\n            self.marker.setMap(o);\n          }\n          self.marker.setPosition(e.lnglat);\n          let geocoder = new AMap.Geocoder({});\n\n          geocoder.getAddress(e.lnglat, function(status, result) {\n            if (status === \"complete\" && result.regeocode) {\n              self.address = result.regeocode.formattedAddress;\n              //   console.log(self.address, \"999地址\");\n            } else {\n              log.error(\"根据经纬度查询地址失败\");\n            }\n          });\n        },\n      },\n      plugin: [\n        \"ToolBar\",\n        {\n          pName: \"MapType\",\n          defaultType: 0,\n          events: {\n            init(o) {\n              //   console.log(o);\n            },\n          },\n        },\n      ],\n      plugin: [\n        {\n          pName: \"Geolocation\",\n          events: {\n            init(o) {\n              // o 是高德地图定位插件实例\n              o.getCurrentPosition((status, result) => {\n                // console.log(JSON.stringify(result));\n                if (result && result.position) {\n                  self.lng = result.position.lng;\n                  self.lat = result.position.lat;\n                  self.address = result.formattedAddress;\n                  self.center = [self.lng, self.lat];\n                  //   console.log(self.center, 99666);\n                  let o = amapManager.getMap();\n                  if (!self.marker) {\n                    self.marker = new AMap.Marker({\n                      position: self.center,\n                    });\n                    self.marker.setMap(o);\n                  }\n                  self.marker.setPosition(self.center);\n                }\n              });\n            },\n          },\n        },\n      ],\n    };\n  },\n  methods: {\n    onSearchResult(pois) {\n      if (pois.length > 0) {\n        let { lng, lat, name, location } = pois[0];\n        let center = [lng, lat];\n        this.lng = lng;\n        this.lat = lat;\n        this.center = [lng, lat];\n        let o = amapManager.getMap();\n        if (!this.marker) {\n          this.marker = new AMap.Marker({\n            position: center,\n          });\n          this.marker.setMap(o);\n        }\n        this.marker.setPosition(center);\n        // 近来补充  根据经纬度查询地址\n        let geocoder = new AMap.Geocoder({});\n        let that = this;\n        geocoder.getAddress(location, function(status, result) {\n          console.log(status, result);\n          if (status === \"complete\" && result.regeocode) {\n            that.address = result.regeocode.formattedAddress;\n          } else {\n            console.log(\"根据经纬度查询地址失败\");\n          }\n        });\n      }\n    },\n    //向父组件返回地址\n    returnaddress() {\n      let that = this;\n      that.$emit(\"getaddress\", {\n        address: that.address,\n        lat: that.lat,\n        lng: that.lng,\n      });\n      setTimeout(() => {\n        that.$emit(\"close\");\n      }, 200);\n    },\n  },\n  watch: {\n    openmapdialog(newval) {\n      this.dialogVisible = newval;\n    },\n  },\n};\n</script>\n<style scoped>\n.search-box {\n  position: absolute;\n  top: 25px;\n  left: 20px;\n}\n.amap-page-container {\n  position: relative;\n  z-index: 99999;\n}\n.el-dialog__wrapper /deep/ .el-dialog .el-dialog__header {\n  background-color: #f2f2f2;\n}\n.el-dialog__wrapper /deep/ .el-dialog .el-dialog__header .el-dialog__title {\n  color: #333;\n  font-size: 14px;\n}\n</style>\n"]}]}