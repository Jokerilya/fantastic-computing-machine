{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\uploadImgs\\upload-imgs.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\uploadImgs\\upload-imgs.vue","mtime":1669258939258},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucHJvZF9pbWdzIHsKCW92ZXJmbG93OiBoaWRkZW47CgoJLmltZyB7CgkJbWFyZ2luOiAwIDVweCA1cHggMDsKCQlib3JkZXI6IDFweCAjY2NjIHNvbGlkOwoJCWZsb2F0OiBsZWZ0OwoJCXBvc2l0aW9uOiByZWxhdGl2ZTsKCgkJLmVsX3VwbG9hZCB7CgkJCWRpc3BsYXk6IGZsZXg7CgkJCWp1c3RpZnktY29udGVudDogY2VudGVyOwoJCQlhbGlnbi1pdGVtczogY2VudGVyOwoJCQljdXJzb3I6IHBvaW50ZXI7CgkJCWZvbnQtc2l6ZTogMzBweDsKCQkJY29sb3I6ICNjY2M7CgkJfQoKCQkuZGVsZXRlIHsKCQkJcG9zaXRpb246IGFic29sdXRlOwoJCQl0b3A6IDA7CgkJCXJpZ2h0OiAwOwoJCQl3aWR0aDogMzBweDsKCQkJaGVpZ2h0OiAzMHB4OwoJCQliYWNrZ3JvdW5kOiAjMDAwOwoJCQlkaXNwbGF5OiBub25lOwoJCQlqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKCQkJYWxpZ24taXRlbXM6IGNlbnRlcjsKCQkJY3Vyc29yOiBwb2ludGVyOwoJCQl6LWluZGV4OiA5OTsKCgkJCWkgewoJCQkJZm9udC1zaXplOiAxOHB4OwoJCQl9CgkJfQoKCQkuZWwtaWNvbi1kZWxldGUgewoJCQljb2xvcjogI2ZmZmZmZjsKCQkJZm9udC1zaXplOiAyNHB4OwoJCX0KCgkJJjpob3ZlciB7CgkJCS5kZWxldGUgewoJCQkJZGlzcGxheTogZmxleDsKCQkJfQoJCX0KCX0KfQoKLmJvcmRlcl9yYWRpdXMgewoJYm9yZGVyLXJhZGl1czogNTAlOwp9Cg=="},{"version":3,"sources":["upload-imgs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"upload-imgs.vue","sourceRoot":"src/components/uploadImgs","sourcesContent":["<template>\n\t<div class=\"prod_imgs\">\n\t\t<div v-for=\"(img, index) in imgs\" :key=\"index\" class=\"img\" :class=\"{ border_radius: radius }\"\n\t\t\t:style=\"{ width: width, height: height }\">\n\t\t\t<div class=\"delete\" @click=\"deleteImg(index)\">\n\t\t\t\t<i class=\"el-icon-delete\" />\n\t\t\t</div>\n\t\t\t<el-image v-if=\"img\" :style=\"{ width: '100%', height: '100%' }\" :src=\"img\" fit=\"cover\"\n\t\t\t\t:preview-src-list=\"imgs\" />\n\t\t</div>\n\t\t<el-upload style=\"float: left\" :class=\"{ border_radius: radius }\" :style=\"{ width: width, height: height }\"\n\t\t\tclass=\"img\" action=\"\" :show-file-list=\"false\" :http-request=\"httpRequestFn\" :limit=\"max\" :file-list=\"imgList\"\n\t\t\t:on-exceed=\"exceedFn\">\n\t\t\t<div slot=\"trigger\" :style=\"{ width: width, height: height }\" class=\"el_upload\">\n\t\t\t\t<i class=\"el-icon-plus\" />\n\t\t\t</div>\n\t\t</el-upload>\n\t</div>\n</template>\n\n<script>\n\timport {UploadImg} from \"@/api/system.js\";\n\texport default {\n\t\tprops: {\n\t\t\tmax: {\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 9,\n\t\t\t},\n\t\t\timgs: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: () => {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t},\n\t\t\twidth: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"80px\",\n\t\t\t},\n\t\t\theight: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"80px\",\n\t\t\t},\n\t\t\tradius: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false,\n\t\t\t},\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tchoseLength: 0,\n\t\t\t\timgList: []\n\t\t\t};\n\t\t},\n\t\t// computed: {\n\t\t//   maxLimit() {\n\t\t//     return this.max - this.imgs.length;\n\t\t//   },\n\t\t// },\n\t\twatch:{\n\t\t\timgs(val){\n\t\t\t\tthis.imgList = val.map(item=>{\n\t\t\t\t\treturn {'name':'','url':item}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\texceedFn() {\n\t\t\t\tthis.$message({\n\t\t\t\t\tshowClose: true,\n\t\t\t\t\tmessage: `最多只能上传${this.max}张图片哦！`,\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t});\n\t\t\t},\n\t\t\thttpRequestFn(data) {\n\t\t\t\tconsole.log(this.imgs)\n\t\t\t\tif (this.imgs.length + 1 > this.max) {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\tmessage: `最多只能上传${this.max}张图片哦！`,\n\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst loading = this.$loading({\n\t\t\t\t\ttext: '上传中..'\n\t\t\t\t})\n\t\t\t\tconst formData = new FormData()\n\t\t\t\tformData.append('file', data.file)\n\t\t\t\tUploadImg(formData).then((res) => {\n\t\t\t\t\t\tthis.$emit(\"uploadSuc\", res.data);\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"图片上传成功！\",\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloading.close()\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"文件上传失败！\",\n\t\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloading.close()\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tdeleteImg(index) {\n\t\t\t\tconsole.log(index);\n\t\t\t\tthis.choseLength -= 1;\n\t\t\t\tthis.$emit(\"deleteImg\", index);\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style lang=\"scss\">\n\t.prod_imgs {\n\t\toverflow: hidden;\n\n\t\t.img {\n\t\t\tmargin: 0 5px 5px 0;\n\t\t\tborder: 1px #ccc solid;\n\t\t\tfloat: left;\n\t\t\tposition: relative;\n\n\t\t\t.el_upload {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 30px;\n\t\t\t\tcolor: #ccc;\n\t\t\t}\n\n\t\t\t.delete {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 30px;\n\t\t\t\theight: 30px;\n\t\t\t\tbackground: #000;\n\t\t\t\tdisplay: none;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tz-index: 99;\n\n\t\t\t\ti {\n\t\t\t\t\tfont-size: 18px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.el-icon-delete {\n\t\t\t\tcolor: #ffffff;\n\t\t\t\tfont-size: 24px;\n\t\t\t}\n\n\t\t\t&:hover {\n\t\t\t\t.delete {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.border_radius {\n\t\tborder-radius: 50%;\n\t}\n</style>\n</style>\n"]}]}