{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\uploadImgs\\upload-imgs.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\uploadImgs\\upload-imgs.vue","mtime":1669258939258},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7VXBsb2FkSW1nfSBmcm9tICJAL2FwaS9zeXN0ZW0uanMiOwpleHBvcnQgZGVmYXVsdCB7Cglwcm9wczogewoJCW1heDogewoJCQl0eXBlOiBOdW1iZXIsCgkJCWRlZmF1bHQ6IDksCgkJfSwKCQlpbWdzOiB7CgkJCXR5cGU6IEFycmF5LAoJCQlkZWZhdWx0OiAoKSA9PiB7CgkJCQlyZXR1cm4gW107CgkJCX0sCgkJfSwKCQl3aWR0aDogewoJCQl0eXBlOiBTdHJpbmcsCgkJCWRlZmF1bHQ6ICI4MHB4IiwKCQl9LAoJCWhlaWdodDogewoJCQl0eXBlOiBTdHJpbmcsCgkJCWRlZmF1bHQ6ICI4MHB4IiwKCQl9LAoJCXJhZGl1czogewoJCQl0eXBlOiBCb29sZWFuLAoJCQlkZWZhdWx0OiBmYWxzZSwKCQl9LAoJfSwKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJY2hvc2VMZW5ndGg6IDAsCgkJCWltZ0xpc3Q6IFtdCgkJfTsKCX0sCgkvLyBjb21wdXRlZDogewoJLy8gICBtYXhMaW1pdCgpIHsKCS8vICAgICByZXR1cm4gdGhpcy5tYXggLSB0aGlzLmltZ3MubGVuZ3RoOwoJLy8gICB9LAoJLy8gfSwKCXdhdGNoOnsKCQlpbWdzKHZhbCl7CgkJCXRoaXMuaW1nTGlzdCA9IHZhbC5tYXAoaXRlbT0+ewoJCQkJcmV0dXJuIHsnbmFtZSc6JycsJ3VybCc6aXRlbX0KCQkJfSkKCQl9Cgl9LAoJbWV0aG9kczogewoJCWV4Y2VlZEZuKCkgewoJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCXNob3dDbG9zZTogdHJ1ZSwKCQkJCW1lc3NhZ2U6IGDmnIDlpJrlj6rog73kuIrkvKAke3RoaXMubWF4feW8oOWbvueJh+WTpu+8gWAsCgkJCQl0eXBlOiAid2FybmluZyIsCgkJCX0pOwoJCX0sCgkJaHR0cFJlcXVlc3RGbihkYXRhKSB7CgkJCWNvbnNvbGUubG9nKHRoaXMuaW1ncykKCQkJaWYgKHRoaXMuaW1ncy5sZW5ndGggKyAxID4gdGhpcy5tYXgpIHsKCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCXNob3dDbG9zZTogdHJ1ZSwKCQkJCQltZXNzYWdlOiBg5pyA5aSa5Y+q6IO95LiK5LygJHt0aGlzLm1heH3lvKDlm77niYflk6bvvIFgLAoJCQkJCXR5cGU6ICJ3YXJuaW5nIiwKCQkJCX0pOwoJCQkJcmV0dXJuOwoJCQl9CgkJCWNvbnN0IGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKCQkJCXRleHQ6ICfkuIrkvKDkuK0uLicKCQkJfSkKCQkJY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQoJCQlmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBkYXRhLmZpbGUpCgkJCVVwbG9hZEltZyhmb3JtRGF0YSkudGhlbigocmVzKSA9PiB7CgkJCQkJdGhpcy4kZW1pdCgidXBsb2FkU3VjIiwgcmVzLmRhdGEpOwoJCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCQlzaG93Q2xvc2U6IHRydWUsCgkJCQkJCW1lc3NhZ2U6ICLlm77niYfkuIrkvKDmiJDlip/vvIEiLAoJCQkJCQl0eXBlOiAic3VjY2VzcyIsCgkJCQkJfSk7CgkJCQkJbG9hZGluZy5jbG9zZSgpCgkJCQl9KQoJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCQkJc2hvd0Nsb3NlOiB0cnVlLAoJCQkJCQltZXNzYWdlOiAi5paH5Lu25LiK5Lyg5aSx6LSl77yBIiwKCQkJCQkJdHlwZTogIndhcm5pbmciLAoJCQkJCX0pOwoJCQkJCWxvYWRpbmcuY2xvc2UoKQoJCQkJfSk7CgkJfSwKCQlkZWxldGVJbWcoaW5kZXgpIHsKCQkJY29uc29sZS5sb2coaW5kZXgpOwoJCQl0aGlzLmNob3NlTGVuZ3RoIC09IDE7CgkJCXRoaXMuJGVtaXQoImRlbGV0ZUltZyIsIGluZGV4KTsKCQl9LAoJfSwKfTsK"},{"version":3,"sources":["upload-imgs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upload-imgs.vue","sourceRoot":"src/components/uploadImgs","sourcesContent":["<template>\n\t<div class=\"prod_imgs\">\n\t\t<div v-for=\"(img, index) in imgs\" :key=\"index\" class=\"img\" :class=\"{ border_radius: radius }\"\n\t\t\t:style=\"{ width: width, height: height }\">\n\t\t\t<div class=\"delete\" @click=\"deleteImg(index)\">\n\t\t\t\t<i class=\"el-icon-delete\" />\n\t\t\t</div>\n\t\t\t<el-image v-if=\"img\" :style=\"{ width: '100%', height: '100%' }\" :src=\"img\" fit=\"cover\"\n\t\t\t\t:preview-src-list=\"imgs\" />\n\t\t</div>\n\t\t<el-upload style=\"float: left\" :class=\"{ border_radius: radius }\" :style=\"{ width: width, height: height }\"\n\t\t\tclass=\"img\" action=\"\" :show-file-list=\"false\" :http-request=\"httpRequestFn\" :limit=\"max\" :file-list=\"imgList\"\n\t\t\t:on-exceed=\"exceedFn\">\n\t\t\t<div slot=\"trigger\" :style=\"{ width: width, height: height }\" class=\"el_upload\">\n\t\t\t\t<i class=\"el-icon-plus\" />\n\t\t\t</div>\n\t\t</el-upload>\n\t</div>\n</template>\n\n<script>\n\timport {UploadImg} from \"@/api/system.js\";\n\texport default {\n\t\tprops: {\n\t\t\tmax: {\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 9,\n\t\t\t},\n\t\t\timgs: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: () => {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t},\n\t\t\twidth: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"80px\",\n\t\t\t},\n\t\t\theight: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"80px\",\n\t\t\t},\n\t\t\tradius: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false,\n\t\t\t},\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tchoseLength: 0,\n\t\t\t\timgList: []\n\t\t\t};\n\t\t},\n\t\t// computed: {\n\t\t//   maxLimit() {\n\t\t//     return this.max - this.imgs.length;\n\t\t//   },\n\t\t// },\n\t\twatch:{\n\t\t\timgs(val){\n\t\t\t\tthis.imgList = val.map(item=>{\n\t\t\t\t\treturn {'name':'','url':item}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\texceedFn() {\n\t\t\t\tthis.$message({\n\t\t\t\t\tshowClose: true,\n\t\t\t\t\tmessage: `最多只能上传${this.max}张图片哦！`,\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t});\n\t\t\t},\n\t\t\thttpRequestFn(data) {\n\t\t\t\tconsole.log(this.imgs)\n\t\t\t\tif (this.imgs.length + 1 > this.max) {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\tmessage: `最多只能上传${this.max}张图片哦！`,\n\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst loading = this.$loading({\n\t\t\t\t\ttext: '上传中..'\n\t\t\t\t})\n\t\t\t\tconst formData = new FormData()\n\t\t\t\tformData.append('file', data.file)\n\t\t\t\tUploadImg(formData).then((res) => {\n\t\t\t\t\t\tthis.$emit(\"uploadSuc\", res.data);\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"图片上传成功！\",\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloading.close()\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"文件上传失败！\",\n\t\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloading.close()\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tdeleteImg(index) {\n\t\t\t\tconsole.log(index);\n\t\t\t\tthis.choseLength -= 1;\n\t\t\t\tthis.$emit(\"deleteImg\", index);\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style lang=\"scss\">\n\t.prod_imgs {\n\t\toverflow: hidden;\n\n\t\t.img {\n\t\t\tmargin: 0 5px 5px 0;\n\t\t\tborder: 1px #ccc solid;\n\t\t\tfloat: left;\n\t\t\tposition: relative;\n\n\t\t\t.el_upload {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 30px;\n\t\t\t\tcolor: #ccc;\n\t\t\t}\n\n\t\t\t.delete {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 30px;\n\t\t\t\theight: 30px;\n\t\t\t\tbackground: #000;\n\t\t\t\tdisplay: none;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tz-index: 99;\n\n\t\t\t\ti {\n\t\t\t\t\tfont-size: 18px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.el-icon-delete {\n\t\t\t\tcolor: #ffffff;\n\t\t\t\tfont-size: 24px;\n\t\t\t}\n\n\t\t\t&:hover {\n\t\t\t\t.delete {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.border_radius {\n\t\tborder-radius: 50%;\n\t}\n</style>\n</style>\n"]}]}