{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request.js","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request.js","mtime":1710055323648},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2VCb3gsIE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIHRpbWVvdXQ6IDMwMDAwMDAKfSk7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBpZiAoc3RvcmUuZ2V0dGVycy50b2tlbikgewogICAgY29uZmlnLmhlYWRlcnNbJ2FkbWluLXRva2VuJ10gPSBnZXRUb2tlbigpOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBjb25zb2xlLmxvZygyNiwgcmVzcG9uc2UuZGF0YSk7CgogIGlmIChyZXNwb25zZS5jb25maWcucmVzcG9uc2VUeXBlID09ICdibG9iJykgewogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0gZWxzZSB7CiAgICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgICBpZiAocmVzLmNvZGUgPT0gJzAwMCcpIHsKICAgICAgcmV0dXJuIHJlczsKICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gJzAwMicgfHwgcmVzLmNvZGUgPT0gJzAwNCcgfHwgcmVzLmNvZGUgPT0gJzAwNycpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvbG9nb3V0JykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChyZXMuY29kZSA9PSAnMDA5JykgewogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAn5oKo5pqC5peg5pON5L2c5p2D6ZmQ77yBJywKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIE1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IHJlcy5lcnJvck1lc3NhZ2UgfHwgcmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJywKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMuZXJyb3JNZXNzYWdlIHx8IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicpKTsKICAgIH0KICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgTWVzc2FnZSh7CiAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiA1ICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["D:/机将公司/机将后台端/background-management-system/src/utils/request.js"],"names":["axios","MessageBox","Message","store","getToken","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject","response","data","responseType","res","code","dispatch","then","location","reload","message","type","duration","errorMessage","Error"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADO;AAE5BC,EAAAA,OAAO,EAAE;AAFmB,CAAb,CAAhB;AAKAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACC,UAAAC,MAAM,EAAI;AACT,MAAIZ,KAAK,CAACa,OAAN,CAAcC,KAAlB,EAAyB;AACxBF,IAAAA,MAAM,CAACG,OAAP,CAAe,aAAf,IAAgCd,QAAQ,EAAxC;AACA;;AACD,SAAOW,MAAP;AACA,CANF,EAOC,UAAAI,KAAK,EAAI;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EADQ,CACY;;AACpB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACA,CAVF;AAaAd,OAAO,CAACO,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CACC,UAAAU,QAAQ,EAAI;AACXJ,EAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ,EAAeG,QAAQ,CAACC,IAAxB;;AACA,MAAID,QAAQ,CAACT,MAAT,CAAgBW,YAAhB,IAAgC,MAApC,EAA4C;AAC3C,WAAOF,QAAP;AACA,GAFD,MAEO;AACN,QAAMG,GAAG,GAAGH,QAAQ,CAACC,IAArB;;AACA,QAAIE,GAAG,CAACC,IAAJ,IAAY,KAAhB,EAAuB;AACtB,aAAOD,GAAP;AACA,KAFD,MAEO,IAAIA,GAAG,CAACC,IAAJ,IAAY,KAAZ,IAAqBD,GAAG,CAACC,IAAJ,IAAY,KAAjC,IAA0CD,GAAG,CAACC,IAAJ,IAAY,KAA1D,EAAiE;AACvEzB,MAAAA,KAAK,CAAC0B,QAAN,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,YAAM;AACxCC,QAAAA,QAAQ,CAACC,MAAT;AACA,OAFD;AAGA,KAJM,MAIA,IAAIL,GAAG,CAACC,IAAJ,IAAY,KAAhB,EAAuB;AAC7B1B,MAAAA,OAAO,CAAC;AACP+B,QAAAA,OAAO,EAAE,UADF;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,KANM,MAMA;AACNjC,MAAAA,OAAO,CAAC;AACP+B,QAAAA,OAAO,EAAEN,GAAG,CAACS,YAAJ,IAAoBT,GAAG,CAACM,OAAxB,IAAmC,OADrC;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,aAAOb,OAAO,CAACC,MAAR,CAAe,IAAIc,KAAJ,CAAUV,GAAG,CAACS,YAAJ,IAAoBT,GAAG,CAACM,OAAxB,IAAmC,OAA7C,CAAf,CAAP;AACA;AACD;AACD,CA5BF,EA6BC,UAAAd,KAAK,EAAI;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADQ,CACoB;;AAC5BjB,EAAAA,OAAO,CAAC;AACP+B,IAAAA,OAAO,EAAEd,KAAK,CAACc,OADR;AAEPC,IAAAA,IAAI,EAAE,OAFC;AAGPC,IAAAA,QAAQ,EAAE,IAAI;AAHP,GAAD,CAAP;AAKA,SAAOb,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACA,CArCF;AAwCA,eAAed,OAAf","sourcesContent":["import axios from 'axios';\nimport { MessageBox, Message } from 'element-ui';\nimport store from '@/store';\nimport { getToken } from '@/utils/auth';\n\nconst service = axios.create({\n\tbaseURL: process.env.VUE_APP_BASE_API,\n\ttimeout: 3000000,\n});\n\nservice.interceptors.request.use(\n\tconfig => {\n\t\tif (store.getters.token) {\n\t\t\tconfig.headers['admin-token'] = getToken();\n\t\t}\n\t\treturn config;\n\t},\n\terror => {\n\t\tconsole.log(error); // for debug\n\t\treturn Promise.reject(error);\n\t}\n);\n\nservice.interceptors.response.use(\n\tresponse => {\n\t\tconsole.log(26,response.data);\n\t\tif (response.config.responseType == 'blob') {\n\t\t\treturn response;\n\t\t} else {\n\t\t\tconst res = response.data;\n\t\t\tif (res.code == '000') {\n\t\t\t\treturn res;\n\t\t\t} else if (res.code == '002' || res.code == '004' || res.code == '007') {\n\t\t\t\tstore.dispatch('user/logout').then(() => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t});\n\t\t\t} else if (res.code == '009') {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: '您暂无操作权限！',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: res.errorMessage || res.message || 'Error',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(new Error(res.errorMessage || res.message || 'Error'));\n\t\t\t}\n\t\t}\n\t},\n\terror => {\n\t\tconsole.log('err' + error); // for debug\n\t\tMessage({\n\t\t\tmessage: error.message,\n\t\t\ttype: 'error',\n\t\t\tduration: 5 * 1000,\n\t\t});\n\t\treturn Promise.reject(error);\n\t}\n);\n\nexport default service;\n"]}]}