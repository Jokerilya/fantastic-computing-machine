{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request.js","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request.js","mtime":1715155542956},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlQm94LCBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgQ3J5cHRvSlMgZnJvbSAnY3J5cHRvLWpzJzsgLy8g5a+G6ZKlCgp2YXIga2V5ID0gQ3J5cHRvSlMuZW5jLkhleC5wYXJzZSgiZDg2ZDdiYWIzZDZhYzAxYWQ5ZGM2YTg5NzY1MmYyZDIiKTsgLy8g5Yqg5a+GCgpmdW5jdGlvbiBFbmNyeXB0KHdvcmQpIHsKICB2YXIgc3JjcyA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHdvcmQpOwogIHZhciBlbmNyeXB0ZWQgPSBDcnlwdG9KUy5BRVMuZW5jcnlwdChzcmNzLCBrZXksIHsKICAgIG1vZGU6IENyeXB0b0pTLm1vZGUuRUNCLAogICAgcGFkZGluZzogQ3J5cHRvSlMucGFkLlBrY3M3CiAgfSk7CiAgcmV0dXJuIGVuY3J5cHRlZC50b1N0cmluZygpOwp9IC8vIOino+WvhgoKCmZ1bmN0aW9uIERlY3J5cHQod29yZCkgewogIHZhciBkZWNyeXB0ID0gQ3J5cHRvSlMuQUVTLmRlY3J5cHQod29yZCwga2V5LCB7CiAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwKICAgIHBhZGRpbmc6IENyeXB0b0pTLnBhZC5Qa2NzNwogIH0pOwogIHJldHVybiBDcnlwdG9KUy5lbmMuVXRmOC5zdHJpbmdpZnkoZGVjcnlwdCkudG9TdHJpbmcoKTsKfQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgdGltZW91dDogMzAwMDAwMAp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChzdG9yZS5nZXR0ZXJzLnRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1snYWRtaW4tdG9rZW4nXSA9IGdldFRva2VuKCk7CiAgfSAvLyBwb3N0IOeahOaVsOaNruWKoOWvhgoKCiAgaWYgKGNvbmZpZy5tZXRob2QgPT0gInBvc3QiKSB7CiAgICBjb25maWcuZGF0YSA9IEVuY3J5cHQoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmRhdGEpKTsKICAgIGNvbmZpZy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICJhcHBsaWNhdGlvbi9qc29uIjsKICAgIGNvbmZpZy5kYXRhVHlwZSA9ICd0ZXh0JzsKICB9CgogIGNvbnNvbGUubG9nKDQ0LCBjb25maWcpOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgaWYgKHJlc3BvbnNlLmNvbmZpZy5yZXNwb25zZVR5cGUgPT0gJ2Jsb2InKSB7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSBlbHNlIHsKICAgIHJlc3BvbnNlLmRhdGEgPSBKU09OLnBhcnNlKERlY3J5cHQocmVzcG9uc2UuZGF0YSkpOwogICAgY29uc29sZS5sb2coNjIsIHJlc3BvbnNlLmRhdGEpOwogICAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogICAgaWYgKHJlcy5jb2RlID09ICcwMDAnKSB7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09ICcwMDInIHx8IHJlcy5jb2RlID09ICcwMDQnIHx8IHJlcy5jb2RlID09ICcwMDcnKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gJzAwOScpIHsKICAgICAgTWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+aCqOaaguaXoOaTjeS9nOadg+mZkO+8gScsCiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiByZXMuZXJyb3JNZXNzYWdlIHx8IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgICAgfSk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLmVycm9yTWVzc2FnZSB8fCByZXMubWVzc2FnZSB8fCAnRXJyb3InKSk7CiAgICB9CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZygnZXJyJyArIGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["D:/机将公司/机将后台端/background-management-system/src/utils/request.js"],"names":["axios","MessageBox","Message","store","getToken","CryptoJS","key","enc","Hex","parse","Encrypt","word","srcs","Utf8","encrypted","AES","encrypt","mode","ECB","padding","pad","Pkcs7","toString","Decrypt","decrypt","stringify","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","method","data","JSON","dataType","console","log","error","Promise","reject","response","responseType","res","code","dispatch","then","location","reload","message","type","duration","errorMessage","Error"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,OAAOC,QAAP,MAAqB,WAArB,C,CAEA;;AACA,IAAIC,GAAG,GAAGD,QAAQ,CAACE,GAAT,CAAaC,GAAb,CAAiBC,KAAjB,CAAuB,kCAAvB,CAAV,C,CAEA;;AACA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACtB,MAAIC,IAAI,GAAGP,QAAQ,CAACE,GAAT,CAAaM,IAAb,CAAkBJ,KAAlB,CAAwBE,IAAxB,CAAX;AACA,MAAIG,SAAS,GAAGT,QAAQ,CAACU,GAAT,CAAaC,OAAb,CAAqBJ,IAArB,EAA2BN,GAA3B,EAAgC;AAC/CW,IAAAA,IAAI,EAAEZ,QAAQ,CAACY,IAAT,CAAcC,GAD2B;AAE/CC,IAAAA,OAAO,EAAEd,QAAQ,CAACe,GAAT,CAAaC;AAFyB,GAAhC,CAAhB;AAIA,SAAOP,SAAS,CAACQ,QAAV,EAAP;AACA,C,CAED;;;AACA,SAASC,OAAT,CAAiBZ,IAAjB,EAAuB;AACtB,MAAIa,OAAO,GAAGnB,QAAQ,CAACU,GAAT,CAAaS,OAAb,CAAqBb,IAArB,EAA2BL,GAA3B,EAAgC;AAC7CW,IAAAA,IAAI,EAAEZ,QAAQ,CAACY,IAAT,CAAcC,GADyB;AAE7CC,IAAAA,OAAO,EAAEd,QAAQ,CAACe,GAAT,CAAaC;AAFuB,GAAhC,CAAd;AAIA,SAAOhB,QAAQ,CAACE,GAAT,CAAaM,IAAb,CAAkBY,SAAlB,CAA4BD,OAA5B,EAAqCF,QAArC,EAAP;AACA;;AAGD,IAAMI,OAAO,GAAG1B,KAAK,CAAC2B,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADO;AAE5BC,EAAAA,OAAO,EAAE;AAFmB,CAAb,CAAhB;AAKAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACC,UAAAC,MAAM,EAAI;AACT,MAAIjC,KAAK,CAACkC,OAAN,CAAcC,KAAlB,EAAyB;AACxBF,IAAAA,MAAM,CAACG,OAAP,CAAe,aAAf,IAAgCnC,QAAQ,EAAxC;AACA,GAHQ,CAIT;;;AACA,MAAGgC,MAAM,CAACI,MAAP,IAAe,MAAlB,EAAyB;AACxBJ,IAAAA,MAAM,CAACK,IAAP,GAAc/B,OAAO,CAACgC,IAAI,CAACjB,SAAL,CAAeW,MAAM,CAACK,IAAtB,CAAD,CAArB;AACAL,IAAAA,MAAM,CAACG,OAAP,CAAe,cAAf,IAAiC,kBAAjC;AACAH,IAAAA,MAAM,CAACO,QAAP,GAAkB,MAAlB;AACA;;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ,EAAeT,MAAf;AACA,SAAOA,MAAP;AACA,CAbF,EAcC,UAAAU,KAAK,EAAI;AACRF,EAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ,EADQ,CACY;;AACpB,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAjBF;AAoBApB,OAAO,CAACO,YAAR,CAAqBgB,QAArB,CAA8Bd,GAA9B,CACC,UAAAc,QAAQ,EAAI;AACX,MAAIA,QAAQ,CAACb,MAAT,CAAgBc,YAAhB,IAAgC,MAApC,EAA4C;AAC3C,WAAOD,QAAP;AACA,GAFD,MAEO;AACNA,IAAAA,QAAQ,CAACR,IAAT,GAAgBC,IAAI,CAACjC,KAAL,CAAWc,OAAO,CAAC0B,QAAQ,CAACR,IAAV,CAAlB,CAAhB;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ,EAAeI,QAAQ,CAACR,IAAxB;AACA,QAAMU,GAAG,GAAGF,QAAQ,CAACR,IAArB;;AACA,QAAIU,GAAG,CAACC,IAAJ,IAAY,KAAhB,EAAuB;AACtB,aAAOD,GAAP;AACA,KAFD,MAEO,IAAIA,GAAG,CAACC,IAAJ,IAAY,KAAZ,IAAqBD,GAAG,CAACC,IAAJ,IAAY,KAAjC,IAA0CD,GAAG,CAACC,IAAJ,IAAY,KAA1D,EAAiE;AACvEjD,MAAAA,KAAK,CAACkD,QAAN,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,YAAM;AACxCC,QAAAA,QAAQ,CAACC,MAAT;AACA,OAFD;AAGA,KAJM,MAIA,IAAIL,GAAG,CAACC,IAAJ,IAAY,KAAhB,EAAuB;AAC7BlD,MAAAA,OAAO,CAAC;AACPuD,QAAAA,OAAO,EAAE,UADF;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,KANM,MAMA;AACNzD,MAAAA,OAAO,CAAC;AACPuD,QAAAA,OAAO,EAAEN,GAAG,CAACS,YAAJ,IAAoBT,GAAG,CAACM,OAAxB,IAAmC,OADrC;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,aAAOZ,OAAO,CAACC,MAAR,CAAe,IAAIa,KAAJ,CAAUV,GAAG,CAACS,YAAJ,IAAoBT,GAAG,CAACM,OAAxB,IAAmC,OAA7C,CAAf,CAAP;AACA;AACD;AACD,CA7BF,EA8BC,UAAAX,KAAK,EAAI;AACRF,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQC,KAApB,EADQ,CACoB;;AAC5B5C,EAAAA,OAAO,CAAC;AACPuD,IAAAA,OAAO,EAAEX,KAAK,CAACW,OADR;AAEPC,IAAAA,IAAI,EAAE,OAFC;AAGPC,IAAAA,QAAQ,EAAE,IAAI;AAHP,GAAD,CAAP;AAKA,SAAOZ,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAtCF;AAyCA,eAAepB,OAAf","sourcesContent":["import axios from 'axios';\nimport { MessageBox, Message } from 'element-ui';\nimport store from '@/store';\nimport { getToken } from '@/utils/auth';\n\nimport CryptoJS from 'crypto-js'\n\n// 密钥\nvar key = CryptoJS.enc.Hex.parse(\"d86d7bab3d6ac01ad9dc6a897652f2d2\");\n\n// 加密\nfunction Encrypt(word) {\n\tvar srcs = CryptoJS.enc.Utf8.parse(word);\n\tvar encrypted = CryptoJS.AES.encrypt(srcs, key, {\n\t\tmode: CryptoJS.mode.ECB,\n\t\tpadding: CryptoJS.pad.Pkcs7\n\t});\n\treturn encrypted.toString();\n}\n\n// 解密\nfunction Decrypt(word) {\n\tvar decrypt = CryptoJS.AES.decrypt(word, key, {\n\t\tmode: CryptoJS.mode.ECB,\n\t\tpadding: CryptoJS.pad.Pkcs7\n\t});\n\treturn CryptoJS.enc.Utf8.stringify(decrypt).toString();\n}\n\n\nconst service = axios.create({\n\tbaseURL: process.env.VUE_APP_BASE_API,\n\ttimeout: 3000000,\n});\n\nservice.interceptors.request.use(\n\tconfig => {\n\t\tif (store.getters.token) {\n\t\t\tconfig.headers['admin-token'] = getToken();\n\t\t}\n\t\t// post 的数据加密\n\t\tif(config.method==\"post\"){\n\t\t\tconfig.data = Encrypt(JSON.stringify(config.data))\n\t\t\tconfig.headers['Content-Type'] = \"application/json\"\n\t\t\tconfig.dataType = 'text'\n\t\t}\n\t\tconsole.log(44,config);\n\t\treturn config;\n\t},\n\terror => {\n\t\tconsole.log(error); // for debug\n\t\treturn Promise.reject(error);\n\t}\n);\n\nservice.interceptors.response.use(\n\tresponse => {\n\t\tif (response.config.responseType == 'blob') {\n\t\t\treturn response;\n\t\t} else {\n\t\t\tresponse.data = JSON.parse(Decrypt(response.data))\n\t\t\tconsole.log(62,response.data);\n\t\t\tconst res = response.data;\n\t\t\tif (res.code == '000') {\n\t\t\t\treturn res;\n\t\t\t} else if (res.code == '002' || res.code == '004' || res.code == '007') {\n\t\t\t\tstore.dispatch('user/logout').then(() => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t});\n\t\t\t} else if (res.code == '009') {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: '您暂无操作权限！',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: res.errorMessage || res.message || 'Error',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(new Error(res.errorMessage || res.message || 'Error'));\n\t\t\t}\n\t\t}\n\t},\n\terror => {\n\t\tconsole.log('err' + error); // for debug\n\t\tMessage({\n\t\t\tmessage: error.message,\n\t\t\ttype: 'error',\n\t\t\tduration: 5 * 1000,\n\t\t});\n\t\treturn Promise.reject(error);\n\t}\n);\n\nexport default service;\n"]}]}