{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request.js","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request.js","mtime":1703754082308},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2VCb3gsIE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIHRpbWVvdXQ6IDUwMDAwCn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydhZG1pbi10b2tlbiddID0gZ2V0VG9rZW4oKTsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgY29uc29sZS5sb2coMjYsIHJlc3BvbnNlLmRhdGEpOwoKICBpZiAocmVzcG9uc2UuY29uZmlnLnJlc3BvbnNlVHlwZSA9PSAnYmxvYicpIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9IGVsc2UgewogICAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogICAgaWYgKHJlcy5jb2RlID09ICcwMDAnKSB7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09ICcwMDInIHx8IHJlcy5jb2RlID09ICcwMDQnIHx8IHJlcy5jb2RlID09ICcwMDcnKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gJzAwOScpIHsKICAgICAgTWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+aCqOaaguaXoOaTjeS9nOadg+mZkO+8gScsCiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiByZXMuZXJyb3JNZXNzYWdlIHx8IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgICAgfSk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLmVycm9yTWVzc2FnZSB8fCByZXMubWVzc2FnZSB8fCAnRXJyb3InKSk7CiAgICB9CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZygnZXJyJyArIGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["D:/机将公司/机将后台端/background-management-system/src/utils/request.js"],"names":["axios","MessageBox","Message","store","getToken","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject","response","data","responseType","res","code","dispatch","then","location","reload","message","type","duration","errorMessage","Error"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADO;AAE5BC,EAAAA,OAAO,EAAE;AAFmB,CAAb,CAAhB;AAKAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACC,UAAAC,MAAM,EAAI;AACT,MAAIZ,KAAK,CAACa,OAAN,CAAcC,KAAlB,EAAyB;AACxBF,IAAAA,MAAM,CAACG,OAAP,CAAe,aAAf,IAAgCd,QAAQ,EAAxC;AACA;;AACD,SAAOW,MAAP;AACA,CANF,EAOC,UAAAI,KAAK,EAAI;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EADQ,CACY;;AACpB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACA,CAVF;AAaAd,OAAO,CAACO,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CACC,UAAAU,QAAQ,EAAI;AACXJ,EAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ,EAAeG,QAAQ,CAACC,IAAxB;;AACA,MAAID,QAAQ,CAACT,MAAT,CAAgBW,YAAhB,IAAgC,MAApC,EAA4C;AAC3C,WAAOF,QAAP;AACA,GAFD,MAEO;AACN,QAAMG,GAAG,GAAGH,QAAQ,CAACC,IAArB;;AACA,QAAIE,GAAG,CAACC,IAAJ,IAAY,KAAhB,EAAuB;AACtB,aAAOD,GAAP;AACA,KAFD,MAEO,IAAIA,GAAG,CAACC,IAAJ,IAAY,KAAZ,IAAqBD,GAAG,CAACC,IAAJ,IAAY,KAAjC,IAA0CD,GAAG,CAACC,IAAJ,IAAY,KAA1D,EAAiE;AACvEzB,MAAAA,KAAK,CAAC0B,QAAN,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,YAAM;AACxCC,QAAAA,QAAQ,CAACC,MAAT;AACA,OAFD;AAGA,KAJM,MAIA,IAAIL,GAAG,CAACC,IAAJ,IAAY,KAAhB,EAAuB;AAC7B1B,MAAAA,OAAO,CAAC;AACP+B,QAAAA,OAAO,EAAE,UADF;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,KANM,MAMA;AACNjC,MAAAA,OAAO,CAAC;AACP+B,QAAAA,OAAO,EAAEN,GAAG,CAACS,YAAJ,IAAoBT,GAAG,CAACM,OAAxB,IAAmC,OADrC;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,aAAOb,OAAO,CAACC,MAAR,CAAe,IAAIc,KAAJ,CAAUV,GAAG,CAACS,YAAJ,IAAoBT,GAAG,CAACM,OAAxB,IAAmC,OAA7C,CAAf,CAAP;AACA;AACD;AACD,CA5BF,EA6BC,UAAAd,KAAK,EAAI;AACRC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADQ,CACoB;;AAC5BjB,EAAAA,OAAO,CAAC;AACP+B,IAAAA,OAAO,EAAEd,KAAK,CAACc,OADR;AAEPC,IAAAA,IAAI,EAAE,OAFC;AAGPC,IAAAA,QAAQ,EAAE,IAAI;AAHP,GAAD,CAAP;AAKA,SAAOb,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACA,CArCF;AAwCA,eAAed,OAAf","sourcesContent":["import axios from 'axios';\nimport { MessageBox, Message } from 'element-ui';\nimport store from '@/store';\nimport { getToken } from '@/utils/auth';\n\nconst service = axios.create({\n\tbaseURL: process.env.VUE_APP_BASE_API,\n\ttimeout: 50000,\n});\n\nservice.interceptors.request.use(\n\tconfig => {\n\t\tif (store.getters.token) {\n\t\t\tconfig.headers['admin-token'] = getToken();\n\t\t}\n\t\treturn config;\n\t},\n\terror => {\n\t\tconsole.log(error); // for debug\n\t\treturn Promise.reject(error);\n\t}\n);\n\nservice.interceptors.response.use(\n\tresponse => {\n\t\tconsole.log(26,response.data);\n\t\tif (response.config.responseType == 'blob') {\n\t\t\treturn response;\n\t\t} else {\n\t\t\tconst res = response.data;\n\t\t\tif (res.code == '000') {\n\t\t\t\treturn res;\n\t\t\t} else if (res.code == '002' || res.code == '004' || res.code == '007') {\n\t\t\t\tstore.dispatch('user/logout').then(() => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t});\n\t\t\t} else if (res.code == '009') {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: '您暂无操作权限！',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: res.errorMessage || res.message || 'Error',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(new Error(res.errorMessage || res.message || 'Error'));\n\t\t\t}\n\t\t}\n\t},\n\terror => {\n\t\tconsole.log('err' + error); // for debug\n\t\tMessage({\n\t\t\tmessage: error.message,\n\t\t\ttype: 'error',\n\t\t\tduration: 5 * 1000,\n\t\t});\n\t\treturn Promise.reject(error);\n\t}\n);\n\nexport default service;\n"]}]}