{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\uploadImgs\\upload-imgs.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\uploadImgs\\upload-imgs.vue","mtime":1669258939258},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgVXBsb2FkSW1nIH0gZnJvbSAiQC9hcGkvc3lzdGVtLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBtYXg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA5CiAgICB9LAogICAgaW1nczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgd2lkdGg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiODBweCIKICAgIH0sCiAgICBoZWlnaHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiODBweCIKICAgIH0sCiAgICByYWRpdXM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaG9zZUxlbmd0aDogMCwKICAgICAgaW1nTGlzdDogW10KICAgIH07CiAgfSwKICAvLyBjb21wdXRlZDogewogIC8vICAgbWF4TGltaXQoKSB7CiAgLy8gICAgIHJldHVybiB0aGlzLm1heCAtIHRoaXMuaW1ncy5sZW5ndGg7CiAgLy8gICB9LAogIC8vIH0sCiAgd2F0Y2g6IHsKICAgIGltZ3M6IGZ1bmN0aW9uIGltZ3ModmFsKSB7CiAgICAgIHRoaXMuaW1nTGlzdCA9IHZhbC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgJ25hbWUnOiAnJywKICAgICAgICAgICd1cmwnOiBpdGVtCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBleGNlZWRGbjogZnVuY3Rpb24gZXhjZWVkRm4oKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAiXHU2NzAwXHU1OTFBXHU1M0VBXHU4MEZEXHU0RTBBXHU0RjIwIi5jb25jYXQodGhpcy5tYXgsICJcdTVGMjBcdTU2RkVcdTcyNDdcdTU0RTZcdUZGMDEiKSwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSk7CiAgICB9LAogICAgaHR0cFJlcXVlc3RGbjogZnVuY3Rpb24gaHR0cFJlcXVlc3RGbihkYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZyh0aGlzLmltZ3MpOwoKICAgICAgaWYgKHRoaXMuaW1ncy5sZW5ndGggKyAxID4gdGhpcy5tYXgpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICJcdTY3MDBcdTU5MUFcdTUzRUFcdTgwRkRcdTRFMEFcdTRGMjAiLmNvbmNhdCh0aGlzLm1heCwgIlx1NUYyMFx1NTZGRVx1NzI0N1x1NTRFNlx1RkYwMSIpLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbG9hZGluZyA9IHRoaXMuJGxvYWRpbmcoewogICAgICAgIHRleHQ6ICfkuIrkvKDkuK0uLicKICAgICAgfSk7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBkYXRhLmZpbGUpOwogICAgICBVcGxvYWRJbWcoZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLiRlbWl0KCJ1cGxvYWRTdWMiLCByZXMuZGF0YSk7CgogICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLlm77niYfkuIrkvKDmiJDlip/vvIEiLAogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgfSk7CgogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLmlofku7bkuIrkvKDlpLHotKXvvIEiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CgogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlSW1nOiBmdW5jdGlvbiBkZWxldGVJbWcoaW5kZXgpIHsKICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICB0aGlzLmNob3NlTGVuZ3RoIC09IDE7CiAgICAgIHRoaXMuJGVtaXQoImRlbGV0ZUltZyIsIGluZGV4KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["upload-imgs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAqBA,SAAA,SAAA,QAAA,iBAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,oBAAA;AACA,eAAA,EAAA;AACA;AAJA,KALA;AAWA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAXA;AAeA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAfA;AAmBA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAnBA,GADA;AAyBA,EAAA,IAzBA,kBAyBA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GA9BA;AA+BA;AACA;AACA;AACA;AACA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,IADA,gBACA,GADA,EACA;AACA,WAAA,OAAA,GAAA,GAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA;AAAA,kBAAA,EAAA;AAAA,iBAAA;AAAA,SAAA;AACA,OAFA,CAAA;AAGA;AALA,GApCA;AA2CA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,WAAA,QAAA,CAAA;AACA,QAAA,SAAA,EAAA,IADA;AAEA,QAAA,OAAA,gDAAA,KAAA,GAAA,mCAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA;AAKA,KAPA;AAQA,IAAA,aARA,yBAQA,IARA,EAQA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,GAAA,CAAA,GAAA,KAAA,GAAA,EAAA;AACA,aAAA,QAAA,CAAA;AACA,UAAA,SAAA,EAAA,IADA;AAEA,UAAA,OAAA,gDAAA,KAAA,GAAA,mCAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SAAA;AAKA;AACA;;AACA,UAAA,OAAA,GAAA,KAAA,QAAA,CAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA,CAAA;AAGA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA,CAAA,IAAA;AACA,MAAA,SAAA,CAAA,QAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA,EAAA,GAAA,CAAA,IAAA;;AACA,QAAA,KAAA,CAAA,QAAA,CAAA;AACA,UAAA,SAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA,SAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SAAA;;AAKA,QAAA,OAAA,CAAA,KAAA;AACA,OARA,EASA,KATA,CASA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA;AACA,UAAA,SAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA,SAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SAAA;;AAKA,QAAA,OAAA,CAAA,KAAA;AACA,OAhBA;AAiBA,KAxCA;AAyCA,IAAA,SAzCA,qBAyCA,KAzCA,EAyCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,WAAA,WAAA,IAAA,CAAA;AACA,WAAA,KAAA,CAAA,WAAA,EAAA,KAAA;AACA;AA7CA;AA3CA,CAAA","sourcesContent":["<template>\n\t<div class=\"prod_imgs\">\n\t\t<div v-for=\"(img, index) in imgs\" :key=\"index\" class=\"img\" :class=\"{ border_radius: radius }\"\n\t\t\t:style=\"{ width: width, height: height }\">\n\t\t\t<div class=\"delete\" @click=\"deleteImg(index)\">\n\t\t\t\t<i class=\"el-icon-delete\" />\n\t\t\t</div>\n\t\t\t<el-image v-if=\"img\" :style=\"{ width: '100%', height: '100%' }\" :src=\"img\" fit=\"cover\"\n\t\t\t\t:preview-src-list=\"imgs\" />\n\t\t</div>\n\t\t<el-upload style=\"float: left\" :class=\"{ border_radius: radius }\" :style=\"{ width: width, height: height }\"\n\t\t\tclass=\"img\" action=\"\" :show-file-list=\"false\" :http-request=\"httpRequestFn\" :limit=\"max\" :file-list=\"imgList\"\n\t\t\t:on-exceed=\"exceedFn\">\n\t\t\t<div slot=\"trigger\" :style=\"{ width: width, height: height }\" class=\"el_upload\">\n\t\t\t\t<i class=\"el-icon-plus\" />\n\t\t\t</div>\n\t\t</el-upload>\n\t</div>\n</template>\n\n<script>\n\timport {UploadImg} from \"@/api/system.js\";\n\texport default {\n\t\tprops: {\n\t\t\tmax: {\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 9,\n\t\t\t},\n\t\t\timgs: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: () => {\n\t\t\t\t\treturn [];\n\t\t\t\t},\n\t\t\t},\n\t\t\twidth: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"80px\",\n\t\t\t},\n\t\t\theight: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"80px\",\n\t\t\t},\n\t\t\tradius: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false,\n\t\t\t},\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tchoseLength: 0,\n\t\t\t\timgList: []\n\t\t\t};\n\t\t},\n\t\t// computed: {\n\t\t//   maxLimit() {\n\t\t//     return this.max - this.imgs.length;\n\t\t//   },\n\t\t// },\n\t\twatch:{\n\t\t\timgs(val){\n\t\t\t\tthis.imgList = val.map(item=>{\n\t\t\t\t\treturn {'name':'','url':item}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\texceedFn() {\n\t\t\t\tthis.$message({\n\t\t\t\t\tshowClose: true,\n\t\t\t\t\tmessage: `最多只能上传${this.max}张图片哦！`,\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t});\n\t\t\t},\n\t\t\thttpRequestFn(data) {\n\t\t\t\tconsole.log(this.imgs)\n\t\t\t\tif (this.imgs.length + 1 > this.max) {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\tmessage: `最多只能上传${this.max}张图片哦！`,\n\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst loading = this.$loading({\n\t\t\t\t\ttext: '上传中..'\n\t\t\t\t})\n\t\t\t\tconst formData = new FormData()\n\t\t\t\tformData.append('file', data.file)\n\t\t\t\tUploadImg(formData).then((res) => {\n\t\t\t\t\t\tthis.$emit(\"uploadSuc\", res.data);\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"图片上传成功！\",\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloading.close()\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\tshowClose: true,\n\t\t\t\t\t\t\tmessage: \"文件上传失败！\",\n\t\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tloading.close()\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tdeleteImg(index) {\n\t\t\t\tconsole.log(index);\n\t\t\t\tthis.choseLength -= 1;\n\t\t\t\tthis.$emit(\"deleteImg\", index);\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style lang=\"scss\">\n\t.prod_imgs {\n\t\toverflow: hidden;\n\n\t\t.img {\n\t\t\tmargin: 0 5px 5px 0;\n\t\t\tborder: 1px #ccc solid;\n\t\t\tfloat: left;\n\t\t\tposition: relative;\n\n\t\t\t.el_upload {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 30px;\n\t\t\t\tcolor: #ccc;\n\t\t\t}\n\n\t\t\t.delete {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tright: 0;\n\t\t\t\twidth: 30px;\n\t\t\t\theight: 30px;\n\t\t\t\tbackground: #000;\n\t\t\t\tdisplay: none;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tz-index: 99;\n\n\t\t\t\ti {\n\t\t\t\t\tfont-size: 18px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.el-icon-delete {\n\t\t\t\tcolor: #ffffff;\n\t\t\t\tfont-size: 24px;\n\t\t\t}\n\n\t\t\t&:hover {\n\t\t\t\t.delete {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.border_radius {\n\t\tborder-radius: 50%;\n\t}\n</style>\n</style>\n"],"sourceRoot":"src/components/uploadImgs"}]}