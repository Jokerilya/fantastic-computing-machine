{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request-axios.js","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request-axios.js","mtime":1715152406916},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOyAvLyBpbXBvcnQgbWQ1IGZyb20gJ21kNScKCmltcG9ydCB7IE1lc3NhZ2VCb3gsIE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOyAvLyBpbXBvcnQgeyBzZXRVc2VySW5mbywgZ2V0TWVudUlkLCBnZXRVc2VySW5mbyB9IGZyb20gJ0AvdXRpbHMvYXV0aCcKCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKCnJlcXVpcmUoImVzNi1wcm9taXNlIikucG9seWZpbGwoKTsKCmltcG9ydCBDcnlwdG9KUyBmcm9tICdjcnlwdG8tanMnOwp2YXIga2V5ID0gQ3J5cHRvSlMuZW5jLkhleC5wYXJzZSgiZDg2ZDdiYWIzZDZhYzAxYWQ5ZGM2YTg5NzY1MmYyZDIiKTsgLy8g5Yqg5a+GCgpmdW5jdGlvbiBFbmNyeXB0KHdvcmQpIHsKICB2YXIgc3JjcyA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHdvcmQpOwogIHZhciBlbmNyeXB0ZWQgPSBDcnlwdG9KUy5BRVMuZW5jcnlwdChzcmNzLCBrZXksIHsKICAgIG1vZGU6IENyeXB0b0pTLm1vZGUuRUNCLAogICAgcGFkZGluZzogQ3J5cHRvSlMucGFkLlBrY3M3CiAgfSk7CiAgcmV0dXJuIGVuY3J5cHRlZC50b1N0cmluZygpOwp9IC8vIOino+WvhgoKCmZ1bmN0aW9uIERlY3J5cHQod29yZCkgewogIHZhciBkZWNyeXB0ID0gQ3J5cHRvSlMuQUVTLmRlY3J5cHQod29yZCwga2V5LCB7CiAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwKICAgIHBhZGRpbmc6IENyeXB0b0pTLnBhZC5Qa2NzNwogIH0pOwogIHJldHVybiBDcnlwdG9KUy5lbmMuVXRmOC5zdHJpbmdpZnkoZGVjcnlwdCkudG9TdHJpbmcoKTsKfSAvLyBjcmVhdGUgYW4gYXhpb3MgaW5zdGFuY2UKLy8g5Yib5bu65LiA5LiqYXhpb3Por7fmsYLlrp7kvosKCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAvLyB1cmwgPSBiYXNlIHVybCArIHJlcXVlc3QgdXJsCiAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLCAvLyBzZW5kIGNvb2tpZXMgd2hlbiBjcm9zcy1kb21haW4gcmVxdWVzdHMKICB0aW1lb3V0OiAxMDAwMCAvLyByZXF1ZXN0IHRpbWVvdXQKCn0pOyAvLyDmnI3liqHor7fmsYLmi6bmiKoKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChyZXF1ZXN0KSB7CiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIHJlcXVlc3QuaGVhZGVyc1snYWRtaW4tdG9rZW4nXSA9IGdldFRva2VuKCk7CiAgfQoKICByZXR1cm4gcmVxdWVzdDsKfSk7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCi8vIOacjeWKoeWTjeW6lOaLpuaIqgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKAovKioKICog5aaC5p6c5oKo5oOz6I635b6XaHR0cOS/oeaBr++8jOWmguWktOS/oeaBr+aIlueKtuaAgeS/oeaBrwogKiDor7fov5Tlm57lk43lupQ9PuWTjeW6lAogKi8KCi8qKgogKiDpgJrov4foh6rlrprkuYnku6PnoIHnoa7lrpror7fmsYLnirbmgIEKICog6L+Z6YeM5Y+q5piv5LiA5Liq5L6L5a2QCiAqIOS9oOS5n+WPr+S7pemAmui/h0hUVFDnirbmgIHnoIHmnaXliKTmlq3nirbmgIEKICovCmZ1bmN0aW9uIChyZXNwb25zZSkgewogIGlmIChyZXNwb25zZS5jb25maWcucmVzcG9uc2VUeXBlID09ICdibG9iJykgewogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0gZWxzZSB7CiAgICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgICBpZiAocmVzLmNvZGUgPT0gJzAwMCcpIHsKICAgICAgcmV0dXJuIHJlczsKICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gJzAwMicgfHwgcmVzLmNvZGUgPT0gJzAwNCcgfHwgcmVzLmNvZGUgPT0gJzAwNycpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvbG9nb3V0JykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChyZXMuY29kZSA9PSAnMDA5JykgewogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAn5oKo5pqC5peg5pON5L2c5p2D6ZmQ77yBJywKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIE1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IHJlcy5lcnJvck1lc3NhZ2UgfHwgcmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJywKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMuZXJyb3JNZXNzYWdlIHx8IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicpKTsKICAgIH0KICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["D:/机将公司/机将后台端/background-management-system/src/utils/request-axios.js"],"names":["axios","MessageBox","Message","store","getToken","require","polyfill","CryptoJS","key","enc","Hex","parse","Encrypt","word","srcs","Utf8","encrypted","AES","encrypt","mode","ECB","padding","pad","Pkcs7","toString","Decrypt","decrypt","stringify","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","getters","token","headers","response","config","responseType","res","data","code","dispatch","then","location","reload","message","type","duration","errorMessage","Promise","reject","Error","error"],"mappings":"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","sourcesContent":["import axios from 'axios'\n// import md5 from 'md5'\nimport { MessageBox, Message } from 'element-ui'\nimport store from '@/store'\n// import { setUserInfo, getMenuId, getUserInfo } from '@/utils/auth'\nimport { getToken } from '@/utils/auth';\nrequire(\"es6-promise\").polyfill()\n\nimport CryptoJS from 'crypto-js'\n\nvar key = CryptoJS.enc.Hex.parse(\"d86d7bab3d6ac01ad9dc6a897652f2d2\");\n\n// 加密\nfunction Encrypt(word) {\n\tvar srcs = CryptoJS.enc.Utf8.parse(word);\n\tvar encrypted = CryptoJS.AES.encrypt(srcs, key, {\n\t\tmode: CryptoJS.mode.ECB,\n\t\tpadding: CryptoJS.pad.Pkcs7\n\t});\n\treturn encrypted.toString();\n}\n\n// 解密\nfunction Decrypt(word) {\n\tvar decrypt = CryptoJS.AES.decrypt(word, key, {\n\t\tmode: CryptoJS.mode.ECB,\n\t\tpadding: CryptoJS.pad.Pkcs7\n\t});\n\treturn CryptoJS.enc.Utf8.stringify(decrypt).toString();\n}\n\n// create an axios instance\n// 创建一个axios请求实例\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 10000 // request timeout\n})\n\n\n// 服务请求拦截\nservice.interceptors.request.use(\n  request => {\n\t\tif (store.getters.token) {\n\t\t\trequest.headers['admin-token'] = getToken();\n\t\t}\n    return request;\n  }\n)\n// response interceptor\n// 服务响应拦截\nservice.interceptors.response.use(\n  /**\n   * 如果您想获得http信息，如头信息或状态信息\n   * 请返回响应=>响应\n   */\n  /**\n   * 通过自定义代码确定请求状态\n   * 这里只是一个例子\n   * 你也可以通过HTTP状态码来判断状态\n   */\n  response => {\n    if (response.config.responseType == 'blob') {\n\t\t\treturn response;\n\t\t} else {\n\t\t\tconst res = response.data;\n\t\t\tif (res.code == '000') {\n\t\t\t\treturn res;\n\t\t\t} else if (res.code == '002' || res.code == '004' || res.code == '007') {\n\t\t\t\tstore.dispatch('user/logout').then(() => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t});\n\t\t\t} else if (res.code == '009') {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: '您暂无操作权限！',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: res.errorMessage || res.message || 'Error',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(new Error(res.errorMessage || res.message || 'Error'));\n\t\t\t}\n\t\t}\n  },\n  error => {\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\nexport default service"]}]}