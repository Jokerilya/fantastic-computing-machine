{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request-axios.js","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\utils\\request-axios.js","mtime":1669258939287},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7IC8vIGltcG9ydCBtZDUgZnJvbSAnbWQ1JwoKaW1wb3J0IHsgTWVzc2FnZUJveCwgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7IC8vIGltcG9ydCB7IHNldFVzZXJJbmZvLCBnZXRNZW51SWQsIGdldFVzZXJJbmZvIH0gZnJvbSAnQC91dGlscy9hdXRoJwoKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwoKcmVxdWlyZSgiZXM2LXByb21pc2UiKS5wb2x5ZmlsbCgpOyAvLyBjcmVhdGUgYW4gYXhpb3MgaW5zdGFuY2UKLy8g5Yib5bu65LiA5LiqYXhpb3Por7fmsYLlrp7kvosKCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAvLyB1cmwgPSBiYXNlIHVybCArIHJlcXVlc3QgdXJsCiAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLCAvLyBzZW5kIGNvb2tpZXMgd2hlbiBjcm9zcy1kb21haW4gcmVxdWVzdHMKICB0aW1lb3V0OiAxMDAwMCAvLyByZXF1ZXN0IHRpbWVvdXQKCn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAocmVxdWVzdCkgewogIGlmIChzdG9yZS5nZXR0ZXJzLnRva2VuKSB7CiAgICByZXF1ZXN0LmhlYWRlcnNbJ2FkbWluLXRva2VuJ10gPSBnZXRUb2tlbigpOwogIH0KCiAgcmV0dXJuIHJlcXVlc3Q7Cn0pOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgovLyDmnI3liqHlk43lupTmi6bmiKoKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgKLyoqCiAqIOWmguaenOaCqOaDs+iOt+W+l2h0dHDkv6Hmga/vvIzlpoLlpLTkv6Hmga/miJbnirbmgIHkv6Hmga8KICog6K+36L+U5Zue5ZON5bqUPT7lk43lupQKICovCgovKioKICog6YCa6L+H6Ieq5a6a5LmJ5Luj56CB56Gu5a6a6K+35rGC54q25oCBCiAqIOi/memHjOWPquaYr+S4gOS4quS+i+WtkAogKiDkvaDkuZ/lj6/ku6XpgJrov4dIVFRQ54q25oCB56CB5p2l5Yik5pat54q25oCBCiAqLwpmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBpZiAocmVzcG9uc2UuY29uZmlnLnJlc3BvbnNlVHlwZSA9PSAnYmxvYicpIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9IGVsc2UgewogICAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogICAgaWYgKHJlcy5jb2RlID09ICcwMDAnKSB7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKHJlcy5jb2RlID09ICcwMDInIHx8IHJlcy5jb2RlID09ICcwMDQnIHx8IHJlcy5jb2RlID09ICcwMDcnKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAocmVzLmNvZGUgPT0gJzAwOScpIHsKICAgICAgTWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+aCqOaaguaXoOaTjeS9nOadg+mZkO+8gScsCiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiByZXMuZXJyb3JNZXNzYWdlIHx8IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgICAgfSk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLmVycm9yTWVzc2FnZSB8fCByZXMubWVzc2FnZSB8fCAnRXJyb3InKSk7CiAgICB9CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBNZXNzYWdlKHsKICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDUgKiAxMDAwCiAgfSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["D:/机将公司/机将后台端/background-management-system/src/utils/request-axios.js"],"names":["axios","MessageBox","Message","store","getToken","require","polyfill","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","getters","token","headers","response","config","responseType","res","data","code","dispatch","then","location","reload","message","type","duration","errorMessage","Promise","reject","Error","error"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CACA;;AACA,SAASC,QAAT,QAAyB,cAAzB;;AACAC,OAAO,CAAC,aAAD,CAAP,CAAuBC,QAAvB,G,CAEA;AACA;;;AACA,IAAMC,OAAO,GAAGP,KAAK,CAACQ,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvC;AACAC,EAAAA,OAAO,EAAE,KAHkB,CAGZ;;AAHY,CAAb,CAAhB;AAQAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAD,OAAO,EAAI;AACX,MAAIZ,KAAK,CAACc,OAAN,CAAcC,KAAlB,EAAyB;AACxBH,IAAAA,OAAO,CAACI,OAAR,CAAgB,aAAhB,IAAiCf,QAAQ,EAAzC;AACA;;AACC,SAAOW,OAAP;AACD,CANH,E,CAQA;AACA;;AACAR,OAAO,CAACO,YAAR,CAAqBM,QAArB,CAA8BJ,GAA9B;AACE;AACF;AACA;AACA;;AACE;AACF;AACA;AACA;AACA;AACE,UAAAI,QAAQ,EAAI;AACV,MAAIA,QAAQ,CAACC,MAAT,CAAgBC,YAAhB,IAAgC,MAApC,EAA4C;AAC7C,WAAOF,QAAP;AACA,GAFC,MAEK;AACN,QAAMG,GAAG,GAAGH,QAAQ,CAACI,IAArB;;AACA,QAAID,GAAG,CAACE,IAAJ,IAAY,KAAhB,EAAuB;AACtB,aAAOF,GAAP;AACA,KAFD,MAEO,IAAIA,GAAG,CAACE,IAAJ,IAAY,KAAZ,IAAqBF,GAAG,CAACE,IAAJ,IAAY,KAAjC,IAA0CF,GAAG,CAACE,IAAJ,IAAY,KAA1D,EAAiE;AACvEtB,MAAAA,KAAK,CAACuB,QAAN,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,YAAM;AACxCC,QAAAA,QAAQ,CAACC,MAAT;AACA,OAFD;AAGA,KAJM,MAIA,IAAIN,GAAG,CAACE,IAAJ,IAAY,KAAhB,EAAuB;AAC7BvB,MAAAA,OAAO,CAAC;AACP4B,QAAAA,OAAO,EAAE,UADF;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,KANM,MAMA;AACN9B,MAAAA,OAAO,CAAC;AACP4B,QAAAA,OAAO,EAAEP,GAAG,CAACU,YAAJ,IAAoBV,GAAG,CAACO,OAAxB,IAAmC,OADrC;AAEPC,QAAAA,IAAI,EAAE,OAFC;AAGPC,QAAAA,QAAQ,EAAE,IAAI;AAHP,OAAD,CAAP;AAKA,aAAOE,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUb,GAAG,CAACU,YAAJ,IAAoBV,GAAG,CAACO,OAAxB,IAAmC,OAA7C,CAAf,CAAP;AACA;AACD;AACA,CApCH,EAqCE,UAAAO,KAAK,EAAI;AACPnC,EAAAA,OAAO,CAAC;AACN4B,IAAAA,OAAO,EAAEO,KAAK,CAACP,OADT;AAENC,IAAAA,IAAI,EAAE,OAFA;AAGNC,IAAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKA,SAAOE,OAAO,CAACC,MAAR,CAAeE,KAAf,CAAP;AACD,CA5CH;AA8CA,eAAe9B,OAAf","sourcesContent":["import axios from 'axios'\n// import md5 from 'md5'\nimport { MessageBox, Message } from 'element-ui'\nimport store from '@/store'\n// import { setUserInfo, getMenuId, getUserInfo } from '@/utils/auth'\nimport { getToken } from '@/utils/auth';\nrequire(\"es6-promise\").polyfill()\n\n// create an axios instance\n// 创建一个axios请求实例\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 10000 // request timeout\n})\n\n\n\nservice.interceptors.request.use(\n  request => {\n\t\tif (store.getters.token) {\n\t\t\trequest.headers['admin-token'] = getToken();\n\t\t}\n    return request;\n  }\n)\n// response interceptor\n// 服务响应拦截\nservice.interceptors.response.use(\n  /**\n   * 如果您想获得http信息，如头信息或状态信息\n   * 请返回响应=>响应\n   */\n  /**\n   * 通过自定义代码确定请求状态\n   * 这里只是一个例子\n   * 你也可以通过HTTP状态码来判断状态\n   */\n  response => {\n    if (response.config.responseType == 'blob') {\n\t\t\treturn response;\n\t\t} else {\n\t\t\tconst res = response.data;\n\t\t\tif (res.code == '000') {\n\t\t\t\treturn res;\n\t\t\t} else if (res.code == '002' || res.code == '004' || res.code == '007') {\n\t\t\t\tstore.dispatch('user/logout').then(() => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t});\n\t\t\t} else if (res.code == '009') {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: '您暂无操作权限！',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tMessage({\n\t\t\t\t\tmessage: res.errorMessage || res.message || 'Error',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tduration: 5 * 1000,\n\t\t\t\t});\n\t\t\t\treturn Promise.reject(new Error(res.errorMessage || res.message || 'Error'));\n\t\t\t}\n\t\t}\n  },\n  error => {\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\nexport default service"]}]}