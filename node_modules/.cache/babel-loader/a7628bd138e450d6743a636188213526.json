{"remainingRequest":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\loonUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\机将公司\\机将后台端\\background-management-system\\src\\components\\loonUpload.vue","mtime":1669707457667},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\机将公司\\机将后台端\\background-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1NjczQVx1NUMwNlx1NTE2Q1x1NTNGOC9cdTY3M0FcdTVDMDZcdTU0MEVcdTUzRjBcdTdBRUYvYmFja2dyb3VuZC1tYW5hZ2VtZW50LXN5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHV1aWQgfSBmcm9tICJ1dWlkdjQiOwppbXBvcnQgeyBVcGxvYWRJbWcgfSBmcm9tICJAL2FwaS9zeXN0ZW0uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImxvb24tdXBsb2FkIiwKICBwcm9wczogWyJ0eXBlIiwgImZvbGRlciIsICJsaW1pdCIsICJzaXplIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlkOiAiIiwKICAgICAgLy/mmoLlrZjpmJ/liJcKICAgICAgdXBsb2FkTGlzdDogW10sCiAgICAgIC8v5bey5a2Y6Zif5YiXCiAgICAgIHVwbG9hZGVkTGlzdDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZCgpIHsKICAgICAgdGhpcy4kcmVmc1t0aGlzLmlkXS5jbGljaygpOwogICAgfSwKICAgIGlzTnVsbDogZnVuY3Rpb24gaXNOdWxsKCkgewogICAgICByZXR1cm4gdGhpcy51cGxvYWRMaXN0Lmxlbmd0aCArIHRoaXMudXBsb2FkZWRMaXN0Lmxlbmd0aCA9PSAwOwogICAgfSwKICAgIHVwbG9hZEZpbGU6IGZ1bmN0aW9uIHVwbG9hZEZpbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBsb2FkaW5nLCByZXN1bHQsIF9sb29wLCBpOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBsb2FkaW5nCiAgICAgICAgICAgICAgICBsb2FkaW5nID0gX3RoaXMuJGxvYWRpbmcoewogICAgICAgICAgICAgICAgICB0ZXh0OiAi5LiK5Lyg5LitLi4iCiAgICAgICAgICAgICAgICB9KTsgLy/lt7LkuIrkvKDmlbDmja4KCiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTsKCiAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRlZExpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtLnVybCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfbG9vcCA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfbG9vcChpKSB7CiAgICAgICAgICAgICAgICAgIHZhciBmb3JtRGF0YTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZSIsIF90aGlzLnVwbG9hZExpc3RbaV0uZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVwbG9hZEltZyhmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJcdTdCMkMiLmNvbmNhdChpICsgMSwgIlx1NEVGRFx1NjU4N1x1NEVGNlx1NEUwQVx1NEYyMFx1NTkzMVx1OEQyNVx1RkYwMSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigi5LiK5Lyg5aSx6LSlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9sb29wKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghKGkgPCBfdGhpcy51cGxvYWRMaXN0Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5kZWxlZ2F0ZVlpZWxkKF9sb29wKGkpLCAidDAiLCA3KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB2YXIgdXJsQXJyYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICB0aGlzLnVwbG9hZExpc3QgPSBbXTsKICAgICAgdGhpcy51cGxvYWRlZExpc3QgPSB1cmxBcnJheTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICBmaWxlQ2hhbmdlOiBmdW5jdGlvbiBmaWxlQ2hhbmdlKCkgewogICAgICB2YXIgdXBsb2FkTGVuZ3RoID0gdGhpcy51cGxvYWRMaXN0Lmxlbmd0aDsKICAgICAgdmFyIHVwbG9hZGVkTGVuZ3RoID0gdGhpcy51cGxvYWRlZExpc3QubGVuZ3RoOwogICAgICB2YXIgY2FuVXBsb2FkQ291bnQgPSB0aGlzLmxpbWl0IC0gdXBsb2FkTGVuZ3RoIC0gdXBsb2FkZWRMZW5ndGg7CiAgICAgIHZhciBmaWxlcyA9IHRoaXMuJHJlZnNbdGhpcy5pZF0uZmlsZXM7CiAgICAgIHZhciBmaWxlTGVuZ3RoID0gdGhpcy4kcmVmc1t0aGlzLmlkXS5maWxlcy5sZW5ndGg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVMZW5ndGg7IGkrKykgewogICAgICAgIGlmIChpID4gY2FuVXBsb2FkQ291bnQgLSAxKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5zaXplID09IHVuZGVmaW5lZCB8fCBmaWxlc1tpXS5zaXplIDw9IHRoaXMuc2l6ZSkgewogICAgICAgICAgLy/nlJ/miJDpooTop4jlm77niYcKICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlc1tpXSk7CiAgICAgICAgICB0aGlzLnVwbG9hZExpc3QucHVzaCh7CiAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICBmaWxlOiBmaWxlc1tpXQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWh+S7tuWkp+Wwj+i2hei/hyIgKyB0aGlzLnNpemUgLyAxMDI0IC8gMTAyNCArICJNIik7CiAgICAgICAgfQogICAgICB9IC8vIOi/meihjOS7o+eggeW+iOaguOW/g++8jOayoeaciei/meihjOS8muWHuueOsOS4gOS4qmJ1Z++8jOaXoOazlemHjeWkjeS4iuS8oOWQjOS4gOW8oOWbvueJhwoKCiAgICAgIHRoaXMuJHJlZnNbdGhpcy5pZF0udmFsdWUgPSAiIjsKICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSh1cmwpIHsKICAgICAgdGhpcy51cGxvYWRMaXN0ID0gdGhpcy51cGxvYWRMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLnVybCAhPSB1cmwpIHsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMudXBsb2FkZWRMaXN0ID0gdGhpcy51cGxvYWRlZExpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0udXJsICE9IHVybCkgewogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfQogICAgICB9KTsgLy8g57uT5p2f5LqG5riF6Zmk5o6J5LiN5b+F6KaB55qE6LWE5rqQCgogICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaWQgPSB1dWlkKCk7CiAgfQp9Ow=="},{"version":3,"sources":["loonUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"content\">\n    <input\n      type=\"file\"\n      id=\"file\"\n      :ref=\"id\"\n      :accept=\"type\"\n      multiple=\"multiple\"\n      @change=\"fileChange\"\n    />\n\n    <div\n      id=\"add\"\n      v-show=\"uploadList.length + uploadedList.length < limit\"\n      @click=\"upload\"\n    >\n      <i class=\"el-icon-plus avatar-uploader-icon\"></i>\n    </div>\n    <div class=\"uploaded\" v-for=\"item in uploadedList\" :key=\"item.url\">\n      <!-- image/png,image/jpeg / image.*-->\n      <img\n        v-show=\"type.indexOf('image') > -1 && type.indexOf('text') == -1\"\n        :src=\"item.url\"\n      />\n      <div\n        v-show=\"type.indexOf('image') > -1 && type.indexOf('text') == -1\"\n        @click=\"remove(item.url)\"\n        class=\"delete_img\"\n      >\n        <i class=\"el-icon-delete\"></i>\n      </div>\n      <!-- audio/mpeg,audio/ogg,audio/wav -->\n      <audio\n        v-show=\"type.indexOf('audio') > -1\"\n        :src=\"item.url\"\n        controls\n      ></audio>\n      <div\n        v-show=\"type.indexOf('audio') > -1\"\n        @click=\"remove(item.url)\"\n        class=\"delete_aduio\"\n      >\n        <i class=\"el-icon-delete\"></i>\n      </div>\n      <!-- video/mp4,video/webm,video/ogg -->\n      <video\n        v-show=\"type.indexOf('video') > -1\"\n        :src=\"item.url\"\n        controls\n      ></video>\n      <i\n        class=\"el-icon-delete delete_video\"\n        v-show=\"type.indexOf('video') > -1\"\n        @click=\"remove(item.url)\"\n      ></i>\n      <!-- text/plain,text/html -->\n      <el-link\n        :href=\"item.url\"\n        v-show=\"type.indexOf('text') > -1\"\n        type=\"success\"\n        target=\"_Blank\"\n      >\n        {{ item.url.slice(item.url.lastIndexOf(\"/\") + 1) }}\n      </el-link>\n      <i\n        v-show=\"type.indexOf('text') > -1\"\n        @click=\"remove(item.url)\"\n        class=\"el-icon-delete\"\n      ></i>\n    </div>\n\n    <div class=\"upload\" v-for=\"item in uploadList\" :key=\"item.url\">\n      <!-- image/png,image/jpeg / image.*-->\n      <img\n        v-show=\"type.indexOf('image') > -1 && type.indexOf('text') == -1\"\n        :src=\"item.url\"\n      />\n      <div\n        v-show=\"type.indexOf('image') > -1 && type.indexOf('text') == -1\"\n        @click=\"remove(item.url)\"\n        class=\"delete_img\"\n      >\n        <i class=\"el-icon-delete\"></i>\n      </div>\n      <!-- audio/mpeg,audio/ogg,audio/wav -->\n      <audio\n        v-show=\"type.indexOf('audio') > -1\"\n        :src=\"item.url\"\n        controls\n      ></audio>\n      <div\n        v-show=\"type.indexOf('audio') > -1\"\n        @click=\"remove(item.url)\"\n        class=\"delete_aduio\"\n      >\n        <i class=\"el-icon-delete\"></i>\n      </div>\n      <!-- video/mp4,video/webm,video/ogg -->\n      <video\n        v-show=\"type.indexOf('video') > -1\"\n        :src=\"item.url\"\n        controls\n      ></video>\n      <i\n        class=\"el-icon-delete delete_video\"\n        v-show=\"type.indexOf('video') > -1\"\n        @click=\"remove(item.url)\"\n      ></i>\n      <!-- text/plain,text/html -->\n      <el-link\n        :href=\"item.url\"\n        v-show=\"type.indexOf('text') > -1\"\n        type=\"primary\"\n        target=\"_Blank\"\n      >\n        <!-- {{ item.url.slice(item.url.lastIndexOf('/')+1) }} -->\n        {{ item.file.name }}\n      </el-link>\n      <i\n        v-show=\"type.indexOf('text') > -1\"\n        @click=\"remove(item.url)\"\n        class=\"el-icon-delete\"\n      ></i>\n    </div>\n  </div>\n</template>\n<script>\nimport { uuid } from \"uuidv4\";\nimport { UploadImg } from \"@/api/system.js\";\nexport default {\n  name: \"loon-upload\",\n  props: [\"type\", \"folder\", \"limit\", \"size\"],\n  data() {\n    return {\n      id: \"\",\n      //暂存队列\n      uploadList: [],\n      //已存队列\n      uploadedList: [],\n    };\n  },\n  methods: {\n    upload() {\n      this.$refs[this.id].click();\n    },\n    isNull() {\n      return this.uploadList.length + this.uploadedList.length == 0;\n    },\n    async uploadFile() {\n      // loading\n      const loading = this.$loading({ text: \"上传中..\" });\n\n      //已上传数据\n      var result = [];\n      this.uploadedList.forEach((item) => {\n        result.push(item.url);\n      });\n      for (let i = 0; i < this.uploadList.length; i++) {\n        const formData = new FormData();\n\n        formData.append(\"file\", this.uploadList[i].file);\n        await UploadImg(formData)\n          .then((res) => {\n            result.push(res.data);\n          })\n          .catch(() => {\n            this.$message({\n              showClose: true,\n              message: `第${i + 1}份文件上传失败！`,\n              type: \"warning\",\n            });\n            loading.close();\n            throw new Error(\"上传失败\");\n          });\n      }\n      loading.close();\n      return result;\n    },\n    reset(urlArray = []) {\n      this.uploadList = [];\n      this.uploadedList = urlArray;\n      this.$forceUpdate();\n    },\n    fileChange() {\n      const uploadLength = this.uploadList.length;\n      const uploadedLength = this.uploadedList.length;\n      const canUploadCount = this.limit - uploadLength - uploadedLength;\n\n      const files = this.$refs[this.id].files;\n      const fileLength = this.$refs[this.id].files.length;\n      for (let i = 0; i < fileLength; i++) {\n        if (i > canUploadCount - 1) {\n          return;\n        }\n        if (this.size == undefined || files[i].size <= this.size) {\n          //生成预览图片\n          const url = window.URL.createObjectURL(files[i]);\n          this.uploadList.push({ url: url, file: files[i] });\n        } else {\n          this.$message.error(\"文件大小超过\" + this.size / 1024 / 1024 + \"M\");\n        }\n      }\n      // 这行代码很核心，没有这行会出现一个bug，无法重复上传同一张图片\n      this.$refs[this.id].value = \"\";\n    },\n    remove(url) {\n      this.uploadList = this.uploadList.filter((item) => {\n        if (item.url != url) {\n          return item;\n        }\n      });\n      this.uploadedList = this.uploadedList.filter((item) => {\n        if (item.url != url) {\n          return item;\n        }\n      });\n      // 结束了清除掉不必要的资源\n      window.URL.revokeObjectURL(url);\n    },\n  },\n  mounted() {\n    this.id = uuid();\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n#content {\n  width: max-content;\n  height: max-content;\n  #file {\n    display: none;\n  }\n  #add {\n    width: 100px;\n    height: 100px;\n    line-height: 100px;\n    border-radius: 10px;\n    text-align: center;\n    margin-left: 2px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    border: 1px dashed #c0ccda;\n    margin: 5px;\n  }\n  #add:hover {\n    color: #409eff;\n    border-color: #409eff;\n  }\n  img {\n    width: 100px;\n    height: 100px;\n    margin: 5px;\n    border-radius: 10px;\n  }\n  video {\n    min-width: 200px;\n    max-width: 200px;\n    height: 150px;\n    border: 1px solid;\n    border-radius: 8px;\n  }\n  .delete_img {\n    width: 100px;\n    height: 100px;\n    margin: 5px;\n    display: none;\n  }\n  .delete_aduio {\n    line-height: 54px;\n  }\n  .delete_video {\n    height: 20px;\n    position: relative;\n    right: 20px;\n    top: 4px;\n  }\n  .upload:hover > .delete_img {\n    display: block;\n    color: #fff;\n    width: 100px;\n    height: 100px;\n    text-align: center;\n    line-height: 100px;\n    position: absolute;\n    background: rgba(0, 0, 0, 0.5);\n  }\n  .uploaded:hover > .delete_img {\n    display: block;\n    color: #fff;\n    width: 100px;\n    height: 100px;\n    text-align: center;\n    line-height: 100px;\n    position: absolute;\n    background: rgba(0, 0, 0, 0.5);\n  }\n  .upload {\n    display: flex;\n    width: max-content;\n    height: max-content;\n  }\n  .uploaded {\n    display: flex;\n    width: max-content;\n    height: max-content;\n  }\n}\n</style>\n"],"sourceRoot":"src/components"}]}